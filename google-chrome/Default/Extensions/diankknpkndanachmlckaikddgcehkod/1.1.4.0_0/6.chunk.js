(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1e3:function(e,t,n){e.exports={selectorContainer:"selectorContainer_3OTXe",disabled:"disabled_JjUwI",selector:"selector_1-rhV",arrow:"arrow_2uIRH"}},1001:function(e,t){e.exports={column_spacing:"12px",column_width:"304px",column_task_spacing:"18px",task_title_margin_left:"24px",task_title_margin_right:"10px"}},1002:function(e,t,n){e.exports={wrapper:"wrapper_26CM-"}},1003:function(e,t,n){e.exports={container:"container_2leqy",skipActionBlock:"skipActionBlock_3IDin",icon:"icon_1ItZV",text:"text_rAykg"}},1004:function(e,t,n){e.exports={calendarArchiveMenuContainer:"calendarArchiveMenuContainer_85oyQ",calendarArchiveMenuItem:"calendarArchiveMenuItem_3ChJ7",icon:"icon_3qtqS",text:"text_3tb05"}},1005:function(e,t,n){e.exports={handleBar:"handleBar_2pOQ1",foldHandler:"foldHandler_1qXgQ"}},1006:function(e,t,n){e.exports={handleBar:"handleBar_2ZQ1h",foldHandler:"foldHandler_1NYK4",text:"text_1nfG0"}},1007:function(e,t,n){e.exports={divider:"divider_3k2Z_"}},1008:function(e,t,n){e.exports={container:"container_dGPv7",inputWrapper:"inputWrapper_lK1Zd",label:"label_2X9Kl",unit:"unit_1AQdj",input:"input_LmZB0",actionArea:"actionArea_2t2t5",cancel:"cancel_9HtQd",primary:"primary_2RpHt"}},1009:function(e,t,n){e.exports={container:"container_1elmA",date:"date_1Ov3y"}},1010:function(e,t,n){e.exports={tooltipEnter:"tooltipEnter_g9pUM",tooltipEnterActive:"tooltipEnterActive_1djbk",tooltipExit:"tooltipExit_1T662",tooltipExitActive:"tooltipExitActive_2YYtq"}},1011:function(e,t,n){e.exports={body:"body_3eILA",content:"content_33tzP",arrow:"arrow_3m8vY"}},1012:function(e,t,n){"use strict";(function(e){n(73),n(173),n(203),n(153),n(33),n(154),n(158),n(204);var r=n(13),a=n(326),i=n(660),o=n(1013),c=n(376),s=n(329),u=n(328),l=n(327);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function t(){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.todayReminders=[],this.lastGetTime=void 0,this.setTodayReminders(),a.a.subscribe((function(){n.setTodayReminders()})),e.notifications.onClosed.addListener((function(){})),e.notifications.onClicked.addListener(this.onNotificationClick),e.notifications.onButtonClicked.addListener(this.onNotificationBtnClick)}var n,f,p;return n=t,(f=[{key:"setTodayReminders",value:function(){this.todayReminders=Object(i.b)(a.a.getState())}},{key:"notifyOnTimeReminder",value:function(){var t=this,n=r.a.getState().settings;e.tabs.query({url:n.protocol+n.domain+"/"}).then((function(e){e&&e.length||Object(o.c)({todayReminders:t.todayReminders}).forEach((function(e){var n=e.task,r=e.item;return t.createWebNotification(n,r)}))}))}},{key:"createWebNotification",value:function(t,n){var r=e.i18n,a=Object(c.a)("fullDate");t.get("isAllDay")||(Object(l.b)("showMeridiem")?a+=" hh:mm A":a+=" HH:mm");var i=n?"tickCrx_".concat(t.get("projectId"),"_").concat(t.get("id"),"_").concat(n.get("id")):"tickCrx_".concat(t.get("projectId"),"_").concat(t.get("id")),o=u.a.prefMomentFromUtc(n?n.get("startDate"):t.get("startDate")).format(a),s=n?n.get("title"):t.get("title");e.notifications.create(i,{type:"basic",iconUrl:e.runtime.getURL("images/icon-128.png"),title:o,message:s,buttons:[{title:r.getMessage("markComplete")},{title:r.getMessage("snooze15minutes")}],requireInteraction:!0})}},{key:"onNotificationClick",value:function(t){var n=t.split("_"),a=r.a.getState().settings,i="".concat(a.protocol).concat(a.domain);e.notifications.clear(t),e.tabs.query({url:i+"/"}).then((function(t){var r=n[1];r.includes("inbox")&&(r="inbox");var a="".concat(i,"#p/").concat(r,"/tasks/").concat(n[2],"/").concat(n[3]||"");if(t&&t.length){var o=t.find((function(e){return e.active}))||t[0];e.tabs.update(o.id,{active:!0,url:a})}else window.open(a)}))}},{key:"onNotificationBtnClick",value:function(t,n){var r=t.split("_"),a=r[2],i=r[3];if(0==n){var c=Object(s.L)(a),l=Object(s.B)(i);(i?l:c)&&Object(o.a)(c,l)}else if(1==n){var d=Object(s.L)(a),f=Object(s.B)(i);(i?f:d)&&Object(o.b)(d,f,u.a.prefMoment().add("m",15))}e.notifications.clear(t)}}])&&d(n.prototype,f),p&&d(n,p),t}();t.a=new f}).call(this,n(29))},1013:function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return g}));n(173),n(203),n(204);var r=n(320),a=n(327),i=n(328),o=n(318),c=n(329),s=n(405),u=n(645),l=n(330),d=n(348),f=n(646),p=n(442),h=function(e){var t=e.todayReminders,n=void 0===t?Object(r.List)():t,o=e.todaySubscribeReminders,d=void 0===o?Object(r.List)():o,p=e.todayHabitReminders,h=void 0===p?Object(r.List)():p,m=Object(r.List)();if(!Object(a.b)("notificationEnabled"))return m;var g=i.a.prefMoment().format("HH:mm");return n.forEach((function(e){var t=e.remindTime,n=e.taskId,r=e.itemId;if(t===g){var a=Object(c.L)(n);if(!a)return;if(a.get("status")>0)return;m=r?m.push({task:a,item:a.get("items").find((function(e){return e.get("id")===r})),info:{id:n,type:"checklist",clock:t}}):m.push({task:a,info:{id:n,type:"task",clock:t}})}})),d.forEach((function(e){var t=e.remindTime,n=e.accountId,r=e.taskId;if(t===g){var a=n?Object(s.c)(r):Object(u.a)(r);if(!a)return;m=m.push({task:a,info:{id:r,type:"calendar",clock:t}})}})),h.forEach((function(e){if(e.remindTime===g){var t=Object(f.a)(e.habitTask);if(!t)return;if(Object(l.T)(t))return;m=m.push({task:t,info:{id:e.habitTask.id||t.get("id"),type:"habit",clock:e.remindTime}})}})),m},m=function(e,t){if(t)Object(l.ib)(e)&&Object(d.D)(e,t.get("id"));else{if(Object(l.ab)(e))return;0===e.get("status")&&Object(p.l)(e)}},g=function(e,t,n){var r=i.a.prefMoment(n).utc().format(o.m.atomTime);t?Object(d.E)(e.get("id"),[{id:t.get("id"),snoozeReminderTime:r}]):Object(d.B)(e,r)}},1014:function(e,t,n){"use strict";n.d(t,"a",(function(){return K}));n(73),n(205),n(203),n(366),n(153),n(119),n(61),n(152),n(209),n(155),n(346),n(210),n(356),n(472),n(50),n(33),n(207),n(154),n(111),n(112),n(204),n(110);var r=n(396),a=n(320),i=n(319),o=n.n(i),c=n(98),s=n.n(c),u=n(439),l=n(422),d=n(318),f=n(352),p=n(342),h=n(341),m=n(330),g=n(397),v=n(349),y=n(328),b=n(482),k=n(451),O=n(461),T=n(326),S=n(327),E=n(401),w=n(333),D=n(395),j=n(547);n(335);function _(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I=function(e){return e.tasks.taskList},M=function(e){return e.tags},A=function(e){return e.projects.projectList},x=function(e){return e.projects.projectInbox},R=function(e){return e.preference.get("showChecklist")?"show":"hide"},P=function(e){return new Set(e.filter((function(e){return!1===e.get("inAll")})).map((function(e){return e.get("id")})))},N=function(e){return new Set(e.filter((function(e){return v.h(e)})).map((function(e){return e.get("id")})))},L={overDueForRule:function(e){return e<y.a.daysFromMonthStart()},todayForRule:function(e){return e===y.a.daysFromMonthStart()},tomorrowForRule:function(e){return e===y.a.daysFromMonthStart()+1},thisweekForRule:function(e){var t=y.a.daysFromMonthStart(),n=S.s(),r=y.a.startOfDay().getDay(),a={0:0,1:1,6:-1}[n]-r;0===r&&1===n&&(a=-6);var i=t+a;return e<=i+6&&e>=i},nextweekForRule:function(e){var t=y.a.daysFromMonthStart(),n=S.s(),r=y.a.startOfDay().getDay(),a={0:0,1:1,6:-1}[n]-r;0===r&&1===n&&(a=-6);var i=t+(a+7);return e<=i+6&&e>=i},thismonthForRule:function(e){var t=new Date,n=t.getMonth()+1,r=t.getFullYear(),a=new Date(r,n,0).getDate();return e>=0&&e<=a-1},nextNdaysForRule:function(e,t){var n=y.a.daysFromMonthStart();return e<t+n&&e>=n},ndaysLaterForRule:function(e,t){return e>=t+y.a.daysFromMonthStart()},inAdvanceRule:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.isSubTask,a=null,i={listOrGroup:"list",dueDate:"date"},c=function(t,n){var a=n.logic||"and",c=n.condition,s=n.data,u="inAdvance"+c.slice(0,1).toUpperCase()+c.slice(1),l=e[i[c]||c],d=n.innerLogic,f=L[u].call(this,l,s,d);if(!t)return f;switch(a){case"and":return o.a.intersection(t,f);case"or":return r&&"dueDate"===c?f:o.a.union(t,f);case"not":return o.a.difference(t,f);default:return[]}},s=null,u=0;u<t.filterList.length;u++){var l=t.filterList[u-1],d=t.filterList[u];a=c(a,d),r&&(s&&(a=o.a.intersection(s,a)),(l&&"dueDate"===l.condition||d&&"dueDate"===d.condition)&&(s=_(a)))}return s?o.a.intersection(s,a).length:a?a.length:0},inAdvanceListOrGroup:function(e,t,n){if("or"!==n&&"not"!==n)return[];var r=Object.assign([],t.list)||[],a=t.group||[];a.length&&(a.forEach((function(e){var t,n=D.a(e);E.b(n)||(t=r).push.apply(t,_(w.r(e).map((function(e){return e.get("id")})).toJS()))})),r=o.a.flattenDeep(r));var i=new Set(r);return o.a.flattenDeep(Object.entries(e).filter((function(e){return"or"===n?i.has(e[0]):!i.has(e[0])})).map((function(e){return e[1]})))},inAdvanceTag:function(e,t,n){var r=Object(j.a)(T.a.getState()),a=t.reduce((function(e,t){return e.push.apply(e,[t].concat(_(r.get(t)||[]))),e}),[]);switch(n){case"or":var i=Object.entries(e).filter((function(e){return a.includes(e[0])})).map((function(e){return e[1]}));return Array.from(new Set(o.a.flattenDeep(i)));case"and":return a&&a.length?a.map((function(t){return e[t]||[]})).reduce((function(e,t){return e?e.filter((function(e){return new Set(t).has(e)})):t})):[];case"not":var c=Object.entries(e),s=Array.from(new Set(o.a.flattenDeep(c.map((function(e){return e[1]}))))),u=new Set(o.a.flattenDeep(c.filter((function(e){return a.includes(e[0])})).map((function(e){return e[1]}))));return s.filter((function(e){return!u.has(e)}));default:return[]}},inAdvanceDueDate:function(e,t,n){var r={overdue:"overDueForRule",today:"todayForRule",tomorrow:"tomorrowForRule",thisweek:"thisweekForRule",nextweek:"nextweekForRule",thismonth:"thismonthForRule"},a=o.a.filter(e,(function(e,a){var i=this,o=function(){for(var e=!1,n=0;n<t.length;n++){var o=t[n],c=L[r[o]],s=void 0;if("nodue"===a){if(e="nodue"===o)break}else if(c){if(L[r[o]].call(i,parseInt(a,10))){e=!0;break}}else if(o.match(/\d+days$/)){if(s=Number(o.match(/\d+/)[0]),L.nextNdaysForRule(parseInt(a,10),s)){e=!0;break}}else if(o.match(/\d+dayslater$/)&&(s=Number(o.match(/\d+/)[0]),L.ndaysLaterForRule(parseInt(a,10),s))){e=!0;break}}return e};switch(n){case"or":return o();case"not":return!o();default:return!1}}));return o.a.uniq(o.a.flattenDeep(a))},inAdvancePriority:function(e,t){var n=o.a.filter(e,(function(e,n){return~t.indexOf(Number(n))}));return o.a.flattenDeep(n)},inAdvanceAssignee:function(e,t){var n=o.a.filter(e,(function(e,n){return~t.indexOf(n)}));return o.a.flattenDeep(n)},inRule:function(e,t){var n=[];if(n.push(this.inList(e.list,t)),n.push(this.inTag(e.tag,t)),n.push(this.inDueDate(e.date,t)),n.push(this.inPriority(e.priority,t)),n.push(this.inAssignee(e.assignee,t)),!(n=o.a.filter(n,(function(e){return o.a.isArray(e)}))).length){var r=0;return o.a.map(e.list,(function(e){r+=e.length})),r}return o.a.intersection.apply(null,n).length},inList:function(e,t){return t.list?L.inAdvanceListOrGroup(e,t,"or"):null},inTag:function(e,t){return t.tag?L.inAdvanceTag(e,t.tag,"or"):null},inDueDate:function(e,t){if(!t.dueDate)return null;var n={overdue:"overDueForRule",today:"todayForRule",tomorrow:"tomorrowForRule",thisweek:"thisweekForRule",nextweek:"nextweekForRule",thismonth:"thismonthForRule"},r=o.a.filter(e,(function(e,r){for(var a=!1,i=0;i<t.dueDate.length;i++){var o,c=t.dueDate[i],s=L[n[c]];if("nodue"===r){if(a="nodue"===c)break}else if(s){if(L[n[c]].call(this,parseInt(r,10))){a=!0;break}}else if(c.match(/\d+days$/)){if(o=Number(c.match(/\d+/)[0]),L.nextNdaysForRule(parseInt(r,10),o)){a=!0;break}}else if(c.match(/\d+dayslater$/)&&(o=Number(c.match(/\d+/)[0]),L.ndaysLaterForRule(parseInt(r,10),o))){a=!0;break}}return a}));return o.a.uniq(o.a.flattenDeep(r))},inPriority:function(e,t){if(!t.priority)return null;var n=o.a.filter(e,(function(e,n){if(~t.priority.indexOf(n+""))return!0}));return o.a.flattenDeep(n)},inAssignee:function(e,t){if(!t.assignee)return null;var n=o.a.filter(e,(function(e,n){if(~t.assignee.indexOf(n))return!0}));return o.a.flattenDeep(n)}},U=function(e,t){return!!F(t)&&e.get("assignee")===h.a("userId")},F=function(e){return!!e&&e.get("userCount")>1},H=function(e){return e.get("deleted")>0},B=function(e){return!f.i(e)},Y=function(e){return 0===e.get("status")},W=function(e){return e.filter(Y)},K=Object(r.createSelector)([I,function(e){return e.subscribeCalendars.calendars},function(e){return e.subscribeAccounts.accounts},function(e){return e.subscribeAccounts.calendars},b.a,A,x,R,u.d,function(e){return e.globalState.get("today")}],(function(e,t,n,r,i,c,s,u,l){var v=W(e).concat(i),y=c.push(s).concat(n).concat(t),b=function(){var e=d.G;return[e.all,e.today,e.tomorrow,e.week,e.assignedme]}().concat(y.filter((function(e){return e.get("type")||"non-project"!==e.get("listType")})).map((function(e){return e.get("id")})).toArray()),k={};o.a.forEach(b,(function(e){k[e]=0}));var O,T,S,E=h.a("userId"),w=d.G,D=P(y),j=N(y),_=function(e){var t=e.filter((function(e){return"show"===e.get("show")})),n={},r=t.toList().map((function(e){return n[e.get("id")]=!0,e.get("id")})).toArray();return{map:n,array:r}}(t),C=(O=r,T={},S=[],n.forEach((function(e){var t=e.get("calendarIds")||a.List(),n=O.filter((function(e){return t.includes(e.get("id"))&&"show"===e.get("show")})).toList().map((function(e){return T[e.get("id")]=!0,e.get("id")})).toArray();S=S.concat(n)})),{map:T,array:S}),I=new Map(y.map((function(e){return[e.get("id"),e]})));return v.forEach((function(e){var t=m.ab(e),n=t?g.f(e)?e.get("accountId"):e.get("calendarId"):e.get("projectId"),r=I.get(n);if(!j.has(e.get("projectId"))&&(!function(e,t){var n=e.get("projectId");return t.has(n)}(e,D)||F(r)&&U(e,r))&&!H(e)&&!t||e.get("calendarId")&&C.map.hasOwnProperty(e.get("calendarId"))||_.map.hasOwnProperty(n)){if(F(r)&&e.get("assignee")===E&&k[w.assignedme]++,!function(e){return!f.i(e.get("startDate"))}(e)){var a=m.fb(e),i=p.i(e),o=p.k(e);i<=0&&(a&&i<0||k[w.today]++),(1===i||i<=0&&o>=1)&&k[w.tomorrow]++,i<7&&(a&&i<0||k[w.week]++)}"show"===u&&m.G(e)&&e.get("items").forEach((function(e){var t=e.get("startDate");if(!e.get("status")&&!B(t)){var n=p.j(t);n<=0&&k[w.today]++,1===n&&k[w.tomorrow]++,n<7&&k[w.week]++}})),k[w.all]++}k[n]++})),k[w.today]+=l,k[w.week]+=l,k})),G=Object(r.createSelector)([I,A,x],(function(e,t,n){var r=W(e),a=t.push(n),i={},o=P(a),c=N(a),s=new Map(a.map((function(e){return[e.get("id"),e]})));return r.forEach((function(e){var t=e.get("projectId");if(!o.has(t)&&!c.has(t)){var n=s.get(t);if(!F(n)||!U(e,n)){var r=e.get("startDate");if(f.i(r)){r=y.a.prefMoment(r);var a=m.q(e);i[r.format("YYYY-MM-DD")]=!0;for(var u=0;u<a;u++)i[r.add(1,"day").format("YYYY-MM-DD")]=!0;m.G(e)&&e.get("items").forEach((function(e){var t=e.get("startDate");!e.get("status")&&f.i(t)&&(t=y.a.prefMoment(t),i[t.format("YYYY-MM-DD")]=!0)}))}}}})),i}));Object(l.a)(G,(function(e){return e})),Object(r.createSelector)([I,M,A,x],(function(e,t,n,r){var a=W(e),i=n.push(r),o={},c=N(i),s=new Map;return t.forEach((function(e){var t=e.get("name");t&&(o[t]=0,s.set(t,e.get("parent")))})),a.forEach((function(e){var t=e.get("tags");if(!t||t.isEmpty())return!0;if(function(e){return e.get("status")>0}(e))return!0;if(function(e,t){if(H(e))return!0;var n=e.get("projectId");return n?t.has(n):!m.ab(e)}(e,c))return!0;var n=new Set;t.forEach((function(e){if(e){var t=e.toLowerCase(),r=s.get(t);n.add(t),r&&n.add(r)}})),_(n).forEach((function(e){o[e]=(o[e]||0)+1}))})),o})),Object(r.createSelector)([I,b.a,function(e){return e.customSmartProjects},A,x,R,M],(function(e,t,n,r,a,i,o){var c=W(e),u=r.push(a),l={},d={},f={},g={},v={},y={list:{},date:{},priority:{},tag:{},assignee:{}},b={},T=h.a("userId"),S=(new Date).setDate(1);if(n.size){var E=N(u),w=new Set(u.map((function(e){return e.get("id")})));c.forEach((function(e){var t,n=m.fb(e),r=e.get("id"),a=e.get("projectId"),o=e.get("priority"),c=e.get("tags")?e.get("tags").toArray():[],s=e.get("assignee");if(E.has(a)||!w.has(a))return!0;if(l[a]=l[a]||[],l[a].push(r),c.length){for(var u=0,h=c.length;u<h;u++){var b=c[u].toLowerCase();d[b]=d[b]||[],d[b].push(r)}d["*withtags"]=d["*withtags"]||[],d["*withtags"].push(r)}else d["!tag"]=d["!tag"]||[],d["!tag"].push(r);if(e.get("startDate")){t=p.i(e,S);var k,O=p.k(e,S),D=p.j(new Date,S);k=O<D?m.q(e):O-(t=Math.max(t,D));for(var j=0;j<=k;j++)f[t]=f[t]||[],(!n||t>=D)&&f[t].push(r),t++}else f[t="nodue"]=f[t]||[],f[t].push(r);g[o]=g[o]||[],!n&&g[o].push(r);var _="";v[_=s&&-1!==s?s===T?"me":"other":"noassignee"]=v[_]||[],v[_].push(r),"show"===i&&m.G(e)&&e.get("items").forEach((function(e){if(!e.get("status")&&!B(e.get("startDate"))){y.list[a]=y.list[a]||[],y.list[a].push(e.get("id"));var t=p.j(e.get("startDate"),S);y.date[t]=y.date[t]||[],y.date[t].push(e.get("id")),y.priority[o]=y.priority[o]||[],y.priority[o].push(e.get("id")),c.length?(c.forEach((function(t){var n=t.toLowerCase(),r=e.get("id");y.tag[n]=y.tag[n]||[],y.tag[n].push(r)})),y.tag["*withtags"]=y.tag["*withtags"]||[],y.tag["*withtags"].push(e.get("id"))):(y.tag["!tag"]=y.tag["!tag"]||[],y.tag["!tag"].push(e.get("id"))),_&&(y.assignee[_]=y.assignee[_]||[],y.assignee[_].push(e.get("id")))}}))}));var D,j={list:l,tag:d,date:f,priority:g,assignee:v};try{var _,C=null;return n.forEach((function(e){if(e){if(D=e,k.e(e)?(C=k.c(e),_=L.inRule(j,C)):(C=k.g(e),_=L.inAdvanceRule(j,C)),k.h(e)){var n=t.filter((function(t){return O.g(t,e)})).map((function(e){return e.get("id")})).toSet();_+=n.size}k.a(e)&&(k.e(e)?_+=L.inRule(y,C):_+=L.inAdvanceRule(y,C,{isSubTask:!0})),b[e.get("id")]=_}})),b}catch(e){s.a.error("rule",D.get("rule"),e)}}}))},1534:function(e,t,n){"use strict";n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return R}));n(61),n(50),n(121),n(111),n(110);var r=n(319),a=n.n(r),i=n(326),o=n(339),c=n(421),s=n(460),u=n(340),l=n(331),d=n(327),f=n(492),p=n(363),h=n(381),m=n(318),g=function(){return u.ab().then((function(e){var t;i.a.dispatch((t=e.data,{type:o.ec,data:t}))}))},v=n(328),y=n(439),b=n(660),k=n(397),O=(n(152),n(346),n(323)),T=function(){O.k&&Object(u.L)().then((function(e){var t=e.data;i.a.dispatch(function(e){return{type:o.zb,data:e}}(a.a.isArray(t)?t:[]))}))},S=n(341),E=n(379),w=function(e){return{type:o.tc,data:e}},D=(n(481),function(){return Object(u.O)().then((function(e){var t;i.a.dispatch((t=e.data,{type:o.Lb,data:t}))}))}),j=function(){return Object(u.F)().then((function(e){i.a.dispatch(w(e.data))}))},_=function(){return Object(u.D)().then((function(e){Object(p.c)(e.data),Object(h.h)()}))},C=function(){var e=Object(d.b)("id");i.a.dispatch(function(e){return{type:o.gd,userId:e}}(e)),Object(l.f)(m.K.userId,e)},I=function(){Object(u.Z)().then((function(e){var t;i.a.dispatch((t=e.data,{type:o.dc,data:t}))}))},M=function(){return g().then((function(){Object(h.h)(),Object(S.e)()&&Object(u.Y)()}))},A=function(){var e=v.a.prefMoment().format("YYYY-MM-DD");e!==Object(s.d)()&&(T(),Object(y.a)(),Object(b.a)(),Object(k.b)(),Object(E.b)(),i.a.dispatch(Object(c.f)(e)))},x=function(){return Promise.all([D(),j(),_(),Object(d.w)()]).then((function(e){return{preference:e[3]}}))},R=function(e){var t=e.isCustomUserRole,n=void 0!==t&&t,r=e.isCustomOnDayLeap,i=void 0!==r&&r;Object(f.c)(),C(),I(),T(),!n&&M(),!i&&function e(){A(),a.a.delay(e,1e4)}()}},1535:function(e,t,n){"use strict";n(73),n(61),n(552);var r,a=n(672),i=n.n(a);n(699),n(702),n(350),n(319),n(203),n(159),n(152),n(161),n(155),n(156),n(210),n(50),n(145),n(33),n(143),n(112),n(62),n(158),n(204);r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){e.exports={addDays:n(1),addHours:n(4),addISOYears:n(6),addMilliseconds:n(5),addMinutes:n(14),addMonths:n(15),addQuarters:n(17),addSeconds:n(18),addWeeks:n(19),addYears:n(20),areRangesOverlapping:n(21),closestIndexTo:n(22),closestTo:n(23),compareAsc:n(24),compareDesc:n(25),differenceInCalendarDays:n(12),differenceInCalendarISOWeeks:n(26),differenceInCalendarISOYears:n(27),differenceInCalendarMonths:n(28),differenceInCalendarQuarters:n(29),differenceInCalendarWeeks:n(31),differenceInCalendarYears:n(32),differenceInDays:n(33),differenceInHours:n(34),differenceInISOYears:n(36),differenceInMilliseconds:n(35),differenceInMinutes:n(38),differenceInMonths:n(39),differenceInQuarters:n(40),differenceInSeconds:n(41),differenceInWeeks:n(42),differenceInYears:n(43),distanceInWords:n(44),distanceInWordsStrict:n(49),distanceInWordsToNow:n(50),eachDay:n(51),endOfDay:n(52),endOfHour:n(53),endOfISOWeek:n(54),endOfISOYear:n(56),endOfMinute:n(57),endOfMonth:n(58),endOfQuarter:n(59),endOfSecond:n(60),endOfToday:n(61),endOfTomorrow:n(62),endOfWeek:n(55),endOfYear:n(63),endOfYesterday:n(64),format:n(65),getDate:n(70),getDay:n(71),getDayOfYear:n(66),getDaysInMonth:n(16),getDaysInYear:n(72),getHours:n(74),getISODay:n(75),getISOWeek:n(68),getISOWeeksInYear:n(76),getISOYear:n(7),getMilliseconds:n(77),getMinutes:n(78),getMonth:n(79),getOverlappingDaysInRanges:n(80),getQuarter:n(30),getSeconds:n(81),getTime:n(82),getYear:n(83),utcFormat:n(84),isAfter:n(85),isBefore:n(86),isDate:n(3),isEqual:n(87),isFirstDayOfMonth:n(88),isFriday:n(89),isFuture:n(90),isLastDayOfMonth:n(91),isLeapYear:n(73),isMonday:n(92),isPast:n(93),isSameDay:n(94),isSameHour:n(95),isSameISOWeek:n(97),isSameISOYear:n(99),isSameMinute:n(100),isSameMonth:n(102),isSameQuarter:n(103),isSameSecond:n(105),isSameWeek:n(98),isSameYear:n(107),isSaturday:n(108),isSunday:n(109),isThisHour:n(110),isThisISOWeek:n(111),isThisISOYear:n(112),isThisMinute:n(113),isThisMonth:n(114),isThisQuarter:n(115),isThisSecond:n(116),isThisWeek:n(117),isThisYear:n(118),isThursday:n(119),isToday:n(120),isTomorrow:n(121),isTuesday:n(122),isValid:n(69),isWednesday:n(123),isWeekend:n(124),isWithinRange:n(125),isYesterday:n(126),lastDayOfISOWeek:n(127),lastDayOfISOYear:n(129),lastDayOfMonth:n(130),lastDayOfQuarter:n(131),lastDayOfWeek:n(128),lastDayOfYear:n(132),max:n(133),min:n(134),parse:n(2),setDate:n(135),setDay:n(136),setDayOfYear:n(137),setHours:n(138),setISODay:n(139),setISOWeek:n(140),setISOYear:n(10),setMilliseconds:n(141),setMinutes:n(142),setMonth:n(143),setQuarter:n(144),setSeconds:n(145),setYear:n(146),startOfDay:n(13),startOfHour:n(96),startOfISOWeek:n(8),startOfISOYear:n(11),startOfMinute:n(101),startOfMonth:n(147),startOfQuarter:n(104),startOfSecond:n(106),startOfToday:n(148),startOfTomorrow:n(149),startOfWeek:n(9),startOfYear:n(67),startOfYesterday:n(150),subDays:n(151),subHours:n(152),subISOYears:n(37),subMilliseconds:n(153),subMinutes:n(154),subMonths:n(155),subQuarters:n(156),subSeconds:n(157),subWeeks:n(158),subYears:n(159)}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e),a=Number(t);return n.setDate(n.getDate()+a),n}},function(e,t,n){var r=n(3),a=/[T ]/,i=/:/,o=/^(\d{2})$/,c=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],s=/^(\d{4})/,u=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],l=/^-(\d{2})$/,d=/^-?(\d{3})$/,f=/^-?(\d{2})-?(\d{2})$/,p=/^-?W(\d{2})$/,h=/^-?W(\d{2})-?(\d{1})$/,m=/^(\d{2}([.,]\d*)?)$/,g=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,v=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,y=/([Z+-].*)$/,b=/^(Z)$/,k=/^([+-])(\d{2})$/,O=/^([+-])(\d{2}):?(\d{2})$/;function T(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var a=7*t+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+a),r}e.exports=function(e,t){if(void 0===e)return new Date;if(r(e))return new Date(e.getTime());if("string"!=typeof e)return new Date(e);var n=(t||{}).additionalDigits;n=null==n?2:Number(n);var S,E,w,D=function(e){var t,n={},r=e.split(a);if(i.test(r[0])?(n.date=null,t=r[0]):(n.date=r[0],t=r[1]),t){var o=y.exec(t);o?(n.time=t.replace(o[1],""),n.timezone=o[1]):n.time=t}return n}(e),j=function(e,t){var n,r=c[t],a=u[t];if(n=s.exec(e)||a.exec(e)){var i=n[1];return{year:parseInt(i,10),restDateString:e.slice(i.length)}}if(n=o.exec(e)||r.exec(e)){var l=n[1];return{year:100*parseInt(l,10),restDateString:e.slice(l.length)}}return{year:null}}(D.date,n),_=j.year,C=function(e,t){if(null===t)return null;var n,r,a,i;if(0===e.length)return(r=new Date(0)).setUTCFullYear(t),r;if(n=l.exec(e))return r=new Date(0),a=parseInt(n[1],10)-1,r.setUTCFullYear(t,a),r;if(n=d.exec(e)){r=new Date(0);var o=parseInt(n[1],10);return r.setUTCFullYear(t,0,o),r}if(n=f.exec(e)){r=new Date(0),a=parseInt(n[1],10)-1;var c=parseInt(n[2],10);return r.setUTCFullYear(t,a,c),r}if(n=p.exec(e))return i=parseInt(n[1],10)-1,T(t,i);if(n=h.exec(e)){i=parseInt(n[1],10)-1;var s=parseInt(n[2],10)-1;return T(t,i,s)}return null}(j.restDateString,_);if(C){var I,M=C.getTime(),A=0;return D.time&&(A=function(e){var t,n,r;if(t=m.exec(e))return(n=parseFloat(t[1].replace(",",".")))%24*36e5;if(t=g.exec(e))return n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")),n%24*36e5+6e4*r;if(t=v.exec(e)){n=parseInt(t[1],10),r=parseInt(t[2],10);var a=parseFloat(t[3].replace(",","."));return n%24*36e5+6e4*r+1e3*a}return null}(D.time)),D.timezone?(S=D.timezone,I=(E=b.exec(S))?0:(E=k.exec(S))?(w=60*parseInt(E[2],10),"+"===E[1]?-w:w):(E=O.exec(S))?(w=60*parseInt(E[2],10)+parseInt(E[3],10),"+"===E[1]?-w:w):0):(I=new Date(M+A).getTimezoneOffset(),I=new Date(M+A+6e4*I).getTimezoneOffset()),new Date(M+A+6e4*I)}return new Date(e)}},function(e,t){e.exports=function(e){return e instanceof Date}},function(e,t,n){var r=n(5);e.exports=function(e,t){var n=Number(t);return r(e,36e5*n)}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e).getTime(),a=Number(t);return new Date(n+a)}},function(e,t,n){var r=n(7),a=n(10);e.exports=function(e,t){var n=Number(t);return a(e,r(e)+n)}},function(e,t,n){var r=n(2),a=n(8);e.exports=function(e){var t=r(e),n=t.getFullYear(),i=new Date(0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);var o=a(i),c=new Date(0);c.setFullYear(n,0,4),c.setHours(0,0,0,0);var s=a(c);return t.getTime()>=o.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}},function(e,t,n){var r=n(9);e.exports=function(e){return r(e,{weekStartsOn:1})}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=t&&Number(t.weekStartsOn)||0,a=r(e),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}},function(e,t,n){var r=n(2),a=n(11),i=n(12);e.exports=function(e,t){var n=r(e),o=Number(t),c=i(n,a(n)),s=new Date(0);return s.setFullYear(o,0,4),s.setHours(0,0,0,0),(n=a(s)).setDate(n.getDate()+c),n}},function(e,t,n){var r=n(7),a=n(8);e.exports=function(e){var t=r(e),n=new Date(0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),a(n)}},function(e,t,n){var r=n(13);e.exports=function(e,t){var n=r(e),a=r(t),i=n.getTime()-6e4*n.getTimezoneOffset(),o=a.getTime()-6e4*a.getTimezoneOffset();return Math.round((i-o)/864e5)}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e);return t.setHours(0,0,0,0),t}},function(e,t,n){var r=n(5);e.exports=function(e,t){var n=Number(t);return r(e,6e4*n)}},function(e,t,n){var r=n(2),a=n(16);e.exports=function(e,t){var n=r(e),i=Number(t),o=n.getMonth()+i,c=new Date(0);c.setFullYear(n.getFullYear(),o,1),c.setHours(0,0,0,0);var s=a(c);return n.setMonth(o,Math.min(s,n.getDate())),n}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e),n=t.getFullYear(),a=t.getMonth(),i=new Date(0);return i.setFullYear(n,a+1,0),i.setHours(0,0,0,0),i.getDate()}},function(e,t,n){var r=n(15);e.exports=function(e,t){var n=Number(t);return r(e,3*n)}},function(e,t,n){var r=n(5);e.exports=function(e,t){var n=Number(t);return r(e,1e3*n)}},function(e,t,n){var r=n(1);e.exports=function(e,t){var n=Number(t);return r(e,7*n)}},function(e,t,n){var r=n(15);e.exports=function(e,t){var n=Number(t);return r(e,12*n)}},function(e,t,n){var r=n(2);e.exports=function(e,t,n,a){var i=r(e).getTime(),o=r(t).getTime(),c=r(n).getTime(),s=r(a).getTime();if(i>o||c>s)throw new Error("The start of the range cannot be after the end of the range");return i<s&&c<o}},function(e,t,n){var r=n(2);e.exports=function(e,t){if(!(t instanceof Array))throw new TypeError(toString.call(t)+" is not an instance of Array");var n,a,i=r(e).getTime();return t.forEach((function(e,t){var o=r(e),c=Math.abs(i-o.getTime());(void 0===n||c<a)&&(n=t,a=c)})),n}},function(e,t,n){var r=n(2);e.exports=function(e,t){if(!(t instanceof Array))throw new TypeError(toString.call(t)+" is not an instance of Array");var n,a,i=r(e).getTime();return t.forEach((function(e){var t=r(e),o=Math.abs(i-t.getTime());(void 0===n||o<a)&&(n=t,a=o)})),n}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e).getTime(),a=r(t).getTime();return n<a?-1:n>a?1:0}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e).getTime(),a=r(t).getTime();return n>a?-1:n<a?1:0}},function(e,t,n){var r=n(8);e.exports=function(e,t){var n=r(e),a=r(t),i=n.getTime()-6e4*n.getTimezoneOffset(),o=a.getTime()-6e4*a.getTimezoneOffset();return Math.round((i-o)/6048e5)}},function(e,t,n){var r=n(7);e.exports=function(e,t){return r(e)-r(t)}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e),a=r(t);return 12*(n.getFullYear()-a.getFullYear())+(n.getMonth()-a.getMonth())}},function(e,t,n){var r=n(30),a=n(2);e.exports=function(e,t){var n=a(e),i=a(t);return 4*(n.getFullYear()-i.getFullYear())+(r(n)-r(i))}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e);return Math.floor(t.getMonth()/3)+1}},function(e,t,n){var r=n(9);e.exports=function(e,t,n){var a=r(e,n),i=r(t,n),o=a.getTime()-6e4*a.getTimezoneOffset(),c=i.getTime()-6e4*i.getTimezoneOffset();return Math.round((o-c)/6048e5)}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e),a=r(t);return n.getFullYear()-a.getFullYear()}},function(e,t,n){var r=n(2),a=n(12),i=n(24);e.exports=function(e,t){var n=r(e),o=r(t),c=i(n,o),s=Math.abs(a(n,o));return n.setDate(n.getDate()-c*s),c*(s-(i(n,o)===-c))}},function(e,t,n){var r=n(35);e.exports=function(e,t){var n=r(e,t)/36e5;return n>0?Math.floor(n):Math.ceil(n)}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e),a=r(t);return n.getTime()-a.getTime()}},function(e,t,n){var r=n(2),a=n(27),i=n(24),o=n(37);e.exports=function(e,t){var n=r(e),c=r(t),s=i(n,c),u=Math.abs(a(n,c));return n=o(n,s*u),s*(u-(i(n,c)===-s))}},function(e,t,n){var r=n(6);e.exports=function(e,t){var n=Number(t);return r(e,-n)}},function(e,t,n){var r=n(35);e.exports=function(e,t){var n=r(e,t)/6e4;return n>0?Math.floor(n):Math.ceil(n)}},function(e,t,n){var r=n(2),a=n(28),i=n(24);e.exports=function(e,t){var n=r(e),o=r(t),c=i(n,o),s=Math.abs(a(n,o));return n.setMonth(n.getMonth()-c*s),c*(s-(i(n,o)===-c))}},function(e,t,n){var r=n(39);e.exports=function(e,t){var n=r(e,t)/3;return n>0?Math.floor(n):Math.ceil(n)}},function(e,t,n){var r=n(35);e.exports=function(e,t){var n=r(e,t)/1e3;return n>0?Math.floor(n):Math.ceil(n)}},function(e,t,n){var r=n(33);e.exports=function(e,t){var n=r(e,t)/7;return n>0?Math.floor(n):Math.ceil(n)}},function(e,t,n){var r=n(2),a=n(32),i=n(24);e.exports=function(e,t){var n=r(e),o=r(t),c=i(n,o),s=Math.abs(a(n,o));return n.setFullYear(n.getFullYear()-c*s),c*(s-(i(n,o)===-c))}},function(e,t,n){var r=n(25),a=n(2),i=n(41),o=n(39),c=n(45);e.exports=function(e,t,n){var s=n||{},u=r(e,t),l=s.locale,d=c.distanceInWords.localize;l&&l.distanceInWords&&l.distanceInWords.localize&&(d=l.distanceInWords.localize);var f,p,h={addSuffix:Boolean(s.addSuffix),comparison:u};u>0?(f=a(e),p=a(t)):(f=a(t),p=a(e));var m,g=i(p,f),v=p.getTimezoneOffset()-f.getTimezoneOffset(),y=Math.round(g/60)-v;if(y<2)return s.includeSeconds?g<5?d("lessThanXSeconds",5,h):g<10?d("lessThanXSeconds",10,h):g<20?d("lessThanXSeconds",20,h):g<40?d("halfAMinute",null,h):d(g<60?"lessThanXMinutes":"xMinutes",1,h):0===y?d("lessThanXMinutes",1,h):d("xMinutes",y,h);if(y<45)return d("xMinutes",y,h);if(y<90)return d("aboutXHours",1,h);if(y<1440)return d("aboutXHours",Math.round(y/60),h);if(y<2520)return d("xDays",1,h);if(y<43200)return d("xDays",Math.round(y/1440),h);if(y<86400)return d("aboutXMonths",m=Math.round(y/43200),h);if((m=o(p,f))<12)return d("xMonths",Math.round(y/43200),h);var b=m%12,k=Math.floor(m/12);return b<3?d("aboutXYears",k,h):b<9?d("overXYears",k,h):d("almostXYears",k+1,h)}},function(e,t,n){var r=n(46),a=n(47);e.exports={distanceInWords:r(),format:a()}},function(e,t){e.exports=function(){var e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};return{localize:function(t,n,r){var a;return r=r||{},a="string"==typeof e[t]?e[t]:1===n?e[t].one:e[t].other.replace("{{count}}",n),r.addSuffix?r.comparison>0?"in "+a:a+" ago":a}}}},function(e,t,n){var r=n(48);e.exports=function(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Su","Mo","Tu","We","Th","Fr","Sa"],a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=["AM","PM"],c=["am","pm"],s=["a.m.","p.m."],u={MMM:function(t){return e[t.getMonth()]},MMMM:function(e){return t[e.getMonth()]},dd:function(e){return n[e.getDay()]},ddd:function(e){return a[e.getDay()]},dddd:function(e){return i[e.getDay()]},A:function(e){return e.getHours()/12>=1?o[1]:o[0]},a:function(e){return e.getHours()/12>=1?c[1]:c[0]},aa:function(e){return e.getHours()/12>=1?s[1]:s[0]}};return["M","D","DDD","d","Q","W"].forEach((function(e){u[e+"o"]=function(t,n){return function(e){var t=e%100;if(t>20||t<10)switch(t%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"}(n[e](t))}})),{formatters:u,formattingTokensRegExp:r(u)}}},function(e,t){var n=["M","MM","Q","D","DD","DDD","DDDD","d","E","W","WW","YY","YYYY","GG","GGGG","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","Z","ZZ","X","x"];e.exports=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);var a=n.concat(t).sort().reverse();return new RegExp("(\\[[^\\[]*\\])|(\\\\)?("+a.join("|")+"|.)","g")}},function(e,t,n){var r=n(25),a=n(2),i=n(41),o=n(45);e.exports=function(e,t,n){var c=n||{},s=r(e,t),u=c.locale,l=o.distanceInWords.localize;u&&u.distanceInWords&&u.distanceInWords.localize&&(l=u.distanceInWords.localize);var d,f,p,h={addSuffix:Boolean(c.addSuffix),comparison:s};s>0?(d=a(e),f=a(t)):(d=a(t),f=a(e));var m=Math[c.partialMethod?String(c.partialMethod):"floor"],g=i(f,d),v=f.getTimezoneOffset()-d.getTimezoneOffset(),y=m(g/60)-v;if("s"===(p=c.unit?String(c.unit):y<1?"s":y<60?"m":y<1440?"h":y<43200?"d":y<525600?"M":"Y"))return l("xSeconds",g,h);if("m"===p)return l("xMinutes",y,h);if("h"===p)return l("xHours",m(y/60),h);if("d"===p)return l("xDays",m(y/1440),h);if("M"===p)return l("xMonths",m(y/43200),h);if("Y"===p)return l("xYears",m(y/525600),h);throw new Error("Unknown unit: "+p)}},function(e,t,n){var r=n(44);e.exports=function(e,t){return r(Date.now(),e,t)}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e),a=r(t).getTime();if(n.getTime()>a)throw new Error("The first date cannot be after the second date");var i=[],o=n;for(o.setHours(0,0,0,0);o.getTime()<=a;)i.push(r(o)),o.setDate(o.getDate()+1);return i}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e);return t.setHours(23,59,59,999),t}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e);return t.setMinutes(59,59,999),t}},function(e,t,n){var r=n(55);e.exports=function(e){return r(e,{weekStartsOn:1})}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=t&&Number(t.weekStartsOn)||0,a=r(e),i=a.getDay(),o=6+(i<n?-7:0)-(i-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}},function(e,t,n){var r=n(7),a=n(8);e.exports=function(e){var t=r(e),n=new Date(0);n.setFullYear(t+1,0,4),n.setHours(0,0,0,0);var i=a(n);return i.setMilliseconds(i.getMilliseconds()-1),i}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e);return t.setSeconds(59,999),t}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e),n=t.getMonth(),a=n-n%3+3;return t.setMonth(a,0),t.setHours(23,59,59,999),t}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e);return t.setMilliseconds(999),t}},function(e,t,n){var r=n(52);e.exports=function(){return r(new Date)}},function(e,t){e.exports=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),a=new Date(0);return a.setFullYear(t,n,r+1),a.setHours(23,59,59,999),a}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}},function(e,t){e.exports=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),a=new Date(0);return a.setFullYear(t,n,r-1),a.setHours(23,59,59,999),a}},function(e,t,n){var r=n(66),a=n(68),i=n(7),o=n(2),c=n(69),s=n(45),u={M:function(e){return e.getMonth()+1},MM:function(e){return d(e.getMonth()+1,2)},Q:function(e){return Math.ceil((e.getMonth()+1)/3)},D:function(e){return e.getDate()},DD:function(e){return d(e.getDate(),2)},DDD:function(e){return r(e)},DDDD:function(e){return d(r(e),3)},d:function(e){return e.getDay()},E:function(e){return e.getDay()||7},W:function(e){return a(e)},WW:function(e){return d(a(e),2)},YY:function(e){return d(e.getFullYear(),4).substr(2)},YYYY:function(e){return d(e.getFullYear(),4)},GG:function(e){return String(i(e)).substr(2)},GGGG:function(e){return i(e)},H:function(e){return e.getHours()},HH:function(e){return d(e.getHours(),2)},h:function(e){var t=e.getHours();return 0===t?12:t>12?t%12:t},hh:function(e){return d(u.h(e),2)},m:function(e){return e.getMinutes()},mm:function(e){return d(e.getMinutes(),2)},s:function(e){return e.getSeconds()},ss:function(e){return d(e.getSeconds(),2)},S:function(e){return Math.floor(e.getMilliseconds()/100)},SS:function(e){return d(Math.floor(e.getMilliseconds()/10),2)},SSS:function(e){return d(e.getMilliseconds(),3)},Z:function(e){return l(e.getTimezoneOffset(),":")},ZZ:function(e){return l(e.getTimezoneOffset())},X:function(e){return Math.floor(e.getTime()/1e3)},x:function(e){return e.getTime()}};function l(e,t){t=t||"";var n=e>0?"-":"+",r=Math.abs(e),a=r%60;return n+d(Math.floor(r/60),2)+t+d(a,2)}function d(e,t){for(var n=Math.abs(e).toString();n.length<t;)n="0"+n;return n}e.exports=function(e,t,n){var r=t?String(t):"YYYY-MM-DDTHH:mm:ss.SSSZ",a=(n||{}).locale,i=s.format.formatters,l=s.format.formattingTokensRegExp;a&&a.format&&a.format.formatters&&(i=a.format.formatters,a.format.formattingTokensRegExp&&(l=a.format.formattingTokensRegExp));var d=o(e);return c(d)?function(e,t,n){var r,a,i,o=e.match(n),c=o.length;for(r=0;r<c;r++)a=t[o[r]]||u[o[r]],o[r]=a||((i=o[r]).match(/\[[\s\S]/)?i.replace(/^\[|]$/g,""):i.replace(/\\/g,""));return function(e){for(var t="",n=0;n<c;n++)o[n]instanceof Function?t+=o[n](e,u):t+=o[n];return t}}(r,i,l)(d):"Invalid Date"}},function(e,t,n){var r=n(2),a=n(67),i=n(12);e.exports=function(e){var t=r(e);return i(t,a(t))+1}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}},function(e,t,n){var r=n(2),a=n(8),i=n(11);e.exports=function(e){var t=r(e),n=a(t).getTime()-i(t).getTime();return Math.round(n/6048e5)+1}},function(e,t,n){var r=n(3);e.exports=function(e){if(r(e))return!isNaN(e);throw new TypeError(toString.call(e)+" is not an instance of Date")}},function(e,t,n){var r=n(2);e.exports=function(e){return r(e).getDate()}},function(e,t,n){var r=n(2);e.exports=function(e){return r(e).getDay()}},function(e,t,n){var r=n(73);e.exports=function(e){return r(e)?366:365}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e).getFullYear();return t%400==0||t%4==0&&t%100!=0}},function(e,t,n){var r=n(2);e.exports=function(e){return r(e).getHours()}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e).getDay();return 0===t&&(t=7),t}},function(e,t,n){var r=n(11),a=n(19);e.exports=function(e){var t=r(e),n=r(a(t,60)).valueOf()-t.valueOf();return Math.round(n/6048e5)}},function(e,t,n){var r=n(2);e.exports=function(e){return r(e).getMilliseconds()}},function(e,t,n){var r=n(2);e.exports=function(e){return r(e).getMinutes()}},function(e,t,n){var r=n(2);e.exports=function(e){return r(e).getMonth()}},function(e,t,n){var r=n(2);e.exports=function(e,t,n,a){var i=r(e).getTime(),o=r(t).getTime(),c=r(n).getTime(),s=r(a).getTime();if(i>o||c>s)throw new Error("The start of the range cannot be after the end of the range");if(!(i<s&&c<o))return 0;var u=(s>o?o:s)-(c<i?i:c);return Math.ceil(u/864e5)}},function(e,t,n){var r=n(2);e.exports=function(e){return r(e).getSeconds()}},function(e,t,n){var r=n(2);e.exports=function(e){return r(e).getTime()}},function(e,t,n){var r=n(2);e.exports=function(e){return r(e).getFullYear()}},function(e,t,n){var r=n(66),a=n(68),i=n(7),o=n(2),c=n(69),s=n(45),u={M:function(e){return e.getUTCMonth()+1},MM:function(e){return d(e.getUTCMonth()+1,2)},Q:function(e){return Math.ceil((e.getUTCMonth()+1)/3)},D:function(e){return e.getUTCDate()},DD:function(e){return d(e.getUTCDate(),2)},DDD:function(e){return r(e)},DDDD:function(e){return d(r(e),3)},d:function(e){return e.getUTCDay()},E:function(e){return e.getUTCDay()||7},W:function(e){return a(e)},WW:function(e){return d(a(e),2)},YY:function(e){return d(e.getUTCFullYear(),4).substr(2)},YYYY:function(e){return d(e.getUTCFullYear(),4)},GG:function(e){return String(i(e)).substr(2)},GGGG:function(e){return i(e)},H:function(e){return e.getUTCHours()},HH:function(e){return d(e.getUTCHours(),2)},h:function(e){var t=e.getUTCHours();return 0===t?12:t>12?t%12:t},hh:function(e){return d(u.h(e),2)},m:function(e){return e.getUTCMinutes()},mm:function(e){return d(e.getUTCMinutes(),2)},s:function(e){return e.getUTCSeconds()},ss:function(e){return d(e.getUTCSeconds(),2)},S:function(e){return Math.floor(e.getUTCMilliseconds()/100)},SS:function(e){return d(Math.floor(e.getUTCMilliseconds()/10),2)},SSS:function(e){return d(e.getUTCMilliseconds(),3)},Z:function(e){return l(0,":")},ZZ:function(e){return l(0)},X:function(e){return Math.floor(e.getTime()/1e3)},x:function(e){return e.getTime()}};function l(e,t){t=t||"";var n=e>0?"-":"+",r=Math.abs(e),a=r%60;return n+d(Math.floor(r/60),2)+t+d(a,2)}function d(e,t){for(var n=Math.abs(e).toString();n.length<t;)n="0"+n;return n}e.exports=function(e,t,n){var r=t?String(t):"YYYY-MM-DDTHH:mm:ss.SSSZ",a=(n||{}).locale,i=s.format.formatters,l=s.format.formattingTokensRegExp;a&&a.format&&a.format.formatters&&(i=a.format.formatters,a.format.formattingTokensRegExp&&(l=a.format.formattingTokensRegExp));var d=o(e);return c(d)?function(e,t,n){var r,a,i,o=e.match(n),c=o.length;for(r=0;r<c;r++)a=t[o[r]]||u[o[r]],o[r]=a||((i=o[r]).match(/\[[\s\S]/)?i.replace(/^\[|]$/g,""):i.replace(/\\/g,""));return function(e){for(var t="",n=0;n<c;n++)o[n]instanceof Function?t+=o[n](e,u):t+=o[n];return t}}(r,i,l)(d):"Invalid Date"}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e),a=r(t);return n.getTime()>a.getTime()}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e),a=r(t);return n.getTime()<a.getTime()}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e),a=r(t);return n.getTime()===a.getTime()}},function(e,t,n){var r=n(2);e.exports=function(e){return 1===r(e).getDate()}},function(e,t,n){var r=n(2);e.exports=function(e){return 5===r(e).getDay()}},function(e,t,n){var r=n(2);e.exports=function(e){return r(e).getTime()>(new Date).getTime()}},function(e,t,n){var r=n(2),a=n(52),i=n(58);e.exports=function(e){var t=r(e);return a(t).getTime()===i(t).getTime()}},function(e,t,n){var r=n(2);e.exports=function(e){return 1===r(e).getDay()}},function(e,t,n){var r=n(2);e.exports=function(e){return r(e).getTime()<(new Date).getTime()}},function(e,t,n){var r=n(13);e.exports=function(e,t){var n=r(e),a=r(t);return n.getTime()===a.getTime()}},function(e,t,n){var r=n(96);e.exports=function(e,t){var n=r(e),a=r(t);return n.getTime()===a.getTime()}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e);return t.setMinutes(0,0,0),t}},function(e,t,n){var r=n(98);e.exports=function(e,t){return r(e,t,{weekStartsOn:1})}},function(e,t,n){var r=n(9);e.exports=function(e,t,n){var a=r(e,n),i=r(t,n);return a.getTime()===i.getTime()}},function(e,t,n){var r=n(11);e.exports=function(e,t){var n=r(e),a=r(t);return n.getTime()===a.getTime()}},function(e,t,n){var r=n(101);e.exports=function(e,t){var n=r(e),a=r(t);return n.getTime()===a.getTime()}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e);return t.setSeconds(0,0),t}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e),a=r(t);return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()}},function(e,t,n){var r=n(104);e.exports=function(e,t){var n=r(e),a=r(t);return n.getTime()===a.getTime()}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e),n=t.getMonth(),a=n-n%3;return t.setMonth(a,1),t.setHours(0,0,0,0),t}},function(e,t,n){var r=n(106);e.exports=function(e,t){var n=r(e),a=r(t);return n.getTime()===a.getTime()}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e);return t.setMilliseconds(0),t}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e),a=r(t);return n.getFullYear()===a.getFullYear()}},function(e,t,n){var r=n(2);e.exports=function(e){return 6===r(e).getDay()}},function(e,t,n){var r=n(2);e.exports=function(e){return 0===r(e).getDay()}},function(e,t,n){var r=n(95);e.exports=function(e){return r(new Date,e)}},function(e,t,n){var r=n(97);e.exports=function(e){return r(new Date,e)}},function(e,t,n){var r=n(99);e.exports=function(e){return r(new Date,e)}},function(e,t,n){var r=n(100);e.exports=function(e){return r(new Date,e)}},function(e,t,n){var r=n(102);e.exports=function(e){return r(new Date,e)}},function(e,t,n){var r=n(103);e.exports=function(e){return r(new Date,e)}},function(e,t,n){var r=n(105);e.exports=function(e){return r(new Date,e)}},function(e,t,n){var r=n(98);e.exports=function(e,t){return r(new Date,e,t)}},function(e,t,n){var r=n(107);e.exports=function(e){return r(new Date,e)}},function(e,t,n){var r=n(2);e.exports=function(e){return 4===r(e).getDay()}},function(e,t,n){var r=n(13);e.exports=function(e){return r(e).getTime()===r(new Date).getTime()}},function(e,t,n){var r=n(13);e.exports=function(e){var t=new Date;return t.setDate(t.getDate()+1),r(e).getTime()===r(t).getTime()}},function(e,t,n){var r=n(2);e.exports=function(e){return 2===r(e).getDay()}},function(e,t,n){var r=n(2);e.exports=function(e){return 3===r(e).getDay()}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e).getDay();return 0===t||6===t}},function(e,t,n){var r=n(2);e.exports=function(e,t,n){var a=r(e).getTime(),i=r(t).getTime(),o=r(n).getTime();if(i>o)throw new Error("The start of the range cannot be after the end of the range");return a>=i&&a<=o}},function(e,t,n){var r=n(13);e.exports=function(e){var t=new Date;return t.setDate(t.getDate()-1),r(e).getTime()===r(t).getTime()}},function(e,t,n){var r=n(128);e.exports=function(e){return r(e,{weekStartsOn:1})}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=t&&Number(t.weekStartsOn)||0,a=r(e),i=a.getDay(),o=6+(i<n?-7:0)-(i-n);return a.setHours(0,0,0,0),a.setDate(a.getDate()+o),a}},function(e,t,n){var r=n(7),a=n(8);e.exports=function(e){var t=r(e),n=new Date(0);n.setFullYear(t+1,0,4),n.setHours(0,0,0,0);var i=a(n);return i.setDate(i.getDate()-1),i}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e),n=t.getMonth(),a=n-n%3+3;return t.setMonth(a,0),t.setHours(0,0,0,0),t}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(0,0,0,0),t}},function(e,t,n){var r=n(2);e.exports=function(){var e=Array.prototype.slice.call(arguments),t=e.map((function(e){return r(e)})),n=Math.max.apply(null,t);return new Date(n)}},function(e,t,n){var r=n(2);e.exports=function(){var e=Array.prototype.slice.call(arguments),t=e.map((function(e){return r(e)})),n=Math.min.apply(null,t);return new Date(n)}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e),a=Number(t);return n.setDate(a),n}},function(e,t,n){var r=n(2),a=n(1);e.exports=function(e,t,n){var i=n&&Number(n.weekStartsOn)||0,o=r(e),c=Number(t),s=o.getDay();return a(o,((c%7+7)%7<i?7:0)+c-s)}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e),a=Number(t);return n.setMonth(0),n.setDate(a),n}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e),a=Number(t);return n.setHours(a),n}},function(e,t,n){var r=n(2),a=n(1),i=n(75);e.exports=function(e,t){var n=r(e),o=Number(t),c=i(n);return a(n,o-c)}},function(e,t,n){var r=n(2),a=n(68);e.exports=function(e,t){var n=r(e),i=Number(t),o=a(n)-i;return n.setDate(n.getDate()-7*o),n}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e),a=Number(t);return n.setMilliseconds(a),n}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e),a=Number(t);return n.setMinutes(a),n}},function(e,t,n){var r=n(2),a=n(16);e.exports=function(e,t){var n=r(e),i=Number(t),o=n.getFullYear(),c=n.getDate(),s=new Date(0);s.setFullYear(o,i,15),s.setHours(0,0,0,0);var u=a(s);return n.setMonth(i,Math.min(c,u)),n}},function(e,t,n){var r=n(2),a=n(143);e.exports=function(e,t){var n=r(e),i=Number(t)-(Math.floor(n.getMonth()/3)+1);return a(n,n.getMonth()+3*i)}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e),a=Number(t);return n.setSeconds(a),n}},function(e,t,n){var r=n(2);e.exports=function(e,t){var n=r(e),a=Number(t);return n.setFullYear(a),n}},function(e,t,n){var r=n(2);e.exports=function(e){var t=r(e);return t.setDate(1),t.setHours(0,0,0,0),t}},function(e,t,n){var r=n(13);e.exports=function(){return r(new Date)}},function(e,t){e.exports=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),a=new Date(0);return a.setFullYear(t,n,r+1),a.setHours(0,0,0,0),a}},function(e,t){e.exports=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth(),r=e.getDate(),a=new Date(0);return a.setFullYear(t,n,r-1),a.setHours(0,0,0,0),a}},function(e,t,n){var r=n(1);e.exports=function(e,t){var n=Number(t);return r(e,-n)}},function(e,t,n){var r=n(4);e.exports=function(e,t){var n=Number(t);return r(e,-n)}},function(e,t,n){var r=n(5);e.exports=function(e,t){var n=Number(t);return r(e,-n)}},function(e,t,n){var r=n(14);e.exports=function(e,t){var n=Number(t);return r(e,-n)}},function(e,t,n){var r=n(15);e.exports=function(e,t){var n=Number(t);return r(e,-n)}},function(e,t,n){var r=n(17);e.exports=function(e,t){var n=Number(t);return r(e,-n)}},function(e,t,n){var r=n(18);e.exports=function(e,t){var n=Number(t);return r(e,-n)}},function(e,t,n){var r=n(19);e.exports=function(e,t){var n=Number(t);return r(e,-n)}},function(e,t,n){var r=n(20);e.exports=function(e,t){var n=Number(t);return r(e,-n)}}])},window.dateFns=r();var o=n(338),c=n.n(o);!function(e){var t={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",M:"month",y:"year"},n=/Z|[\+\-]\d\d:?\d\d/gi,r=/([\+\-]|\d\d)/gi,a={format:{},formatUTC:{}};function i(e){if(e){var n=e.toLowerCase().replace(/(.)s$/,"$1");e=t[e]||n}return e}function o(e){this._d=null===e||""===e?dateFns.parse("Invalid date"):dateFns.parse(e)}o.prototype={isValid:function(){return dateFns.isValid(this._d)},toString:function(){return this._d.toString()},valueOf:function(){return this._d.valueOf()},toDate:function(){return this._d},utc:function(){return this.zone(0),this},unix:function(){return Math.floor(this._d.valueOf()/1e3)},clone:function(){return new o(this._d)},lang:function(e){return c()(this._d).locale(e)},add:function(e,t){if("string"==typeof e)var n=e,r=+t;else n=t,r=e;var a=i(n);return this._d="year"==a?dateFns.addYears(this._d,r):"month"==a?dateFns.addMonths(this._d,r):"day"==a?dateFns.addDays(this._d,r):"hour"==a?dateFns.addHours(this._d,r):"minute"==a?dateFns.addMinutes(this._d,r):"second"==a?dateFns.addSeconds(this._d,r):"week"==a?dateFns.addWeeks(this._d,r):dateFns.addMilliseconds(this._d,r),this},subtract:function(e,t){if("string"==typeof e)var n=e,r=+t;else n=t,r=e;var a=i(n);return this._d="year"==a?dateFns.subYears(this._d,r):"month"==a?dateFns.subMonths(this._d,r):"week"==a?dateFns.subWeeks(this._d,r):"day"==a?dateFns.subDays(this._d,r):"hour"==a?dateFns.subHours(this._d,r):"minute"==a?dateFns.subMinutes(this._d,r):"second"==a?dateFns.subSeconds(this._d,r):dateFns.subMilliseconds(this._d,r),this},set:function(e,t){if(!this.isValid())return this;if("string"==typeof e)var n=e,r=+t;else n=t,r=e;var a=i(n);return this._d="year"==a?dateFns.setYear(this._d,r):"month"==a?dateFns.setMonth(this._d,r):"date"==a?dateFns.setDate(this._d,r):"day"==a?dateFns.setDay(this._d,r):"minute"==a?dateFns.setMinutes(this._d,r):"second"==a?dateFns.setSeconds(this._d,r):dateFns.setMilliseconds(this._d,r),this},startOf:function(e){var t=i(e);return"year"==t?this._d=dateFns.startOfYear(this._d):"month"==t?this._d=dateFns.startOfMonth(this._d):"day"==t?this._d=dateFns.startOfDay(this._d):"minute"==t?this._d=dateFns.startOfMinute(this._d):"second"==t&&(this._d=dateFns.startOfSecond(this._d)),this},endOf:function(e){var t=i(e);return"year"==t?this._d=dateFns.endOfYear(this._d):"month"==t?this._d=dateFns.endOfMonth(this._d):"day"==t?this._d=dateFns.endOfDay(this._d):"minute"==t?this._d=dateFns.endOfMinute(this._d):"second"==t&&(this._d=dateFns.endOfSecond(this._d)),this},isSame:function(e,t){var n=i(t);return"year"==n?dateFns.isSameYear(this._d,e):"month"==n?dateFns.isSameMonth(this._d,e):"day"==n?dateFns.isSameDay(this._d,e):"minute"==n?dateFns.isSameMinute(this._d,e):"second"==n?dateFns.isSameSecond(this._d,e):this.valueOf()===dateFns.parse(e).getTime()},diff:function(e,t){var n=i(t);return"year"==n?dateFns.differenceInYears(this._d,e):"month"==n?dateFns.differenceInMonths(this._d,e):"day"==n?dateFns.differenceInDays(this._d,e):"minute"==n?dateFns.differenceInMinutes(this._d,e):"second"==n?dateFns.differenceInSeconds(this._d,e):dateFns.differenceInMilliseconds(this._d,e)},format:function(e){var t;if(this._isUTC){var n=this._d.toString()+"UTC"+e;return a.formatUTC[n]||(t=c()(this._d).utc().format(e),a.formatUTC[n]=t),a.formatUTC[n]}var r=this._d.toString()+e;return a.formatUTC[r]||(t=c()(this._d).format(e),a.formatUTC[r]=t),a.formatUTC[r]},second:function(e){return void 0===e?dateFns.getSeconds(this._d):(this.isValid()&&(this._d=dateFns.setSeconds(this._d,e)),this)},seconds:function(e){return this.second(e)},minute:function(e){return void 0===e?dateFns.getMinutes(this._d):(this.isValid()&&(this._d=dateFns.setMinutes(this._d,e)),this)},minutes:function(e){return this.minute(e)},hour:function(e){return void 0===e?dateFns.getHours(this._d):(this.isValid()&&(this._d=dateFns.setHours(this._d,e)),this)},hours:function(e){return this.hour(e)},day:function(e){return void 0===e?dateFns.getDay(this._d):(this.isValid()&&(this._d=dateFns.setDay(this._d,e)),this)},date:function(e){return void 0===e?dateFns.getDate(this._d):(this.isValid()&&(this._d=dateFns.setDate(this._d,e)),this)},month:function(e){return void 0===e?dateFns.getMonth(this._d):(this.isValid()&&(this._d=dateFns.setMonth(this._d,e)),this)},year:function(e){return void 0===e?dateFns.getYear(this._d):(this.isValid()&&(this._d=dateFns.setYear(this._d,e)),this)},isBefore:function(e){return dateFns.isBefore(this._d,e)},isAfter:function(e){return dateFns.isAfter(this._d,e)},dayOffset:function(e){return dateFns.differenceInCalendarDays(this._d,e)},zone:function(e){var t,a,i,o=this._offset||0;return null==e?this._isUTC?o:this._d.getTimezoneOffset():("string"==typeof e&&(t=(e||"").match(n)||[],a=((t[t.length-1]||[])+"").match(r)||["-",0,0],i=60*a[1]+toInt(a[2]),e="+"===a[0]?-i:i),Math.abs(e)<16&&(e*=60),this._offset=e,this._isUTC=!0,this)},getTime:function(){return this._d.getTime()},getDay:function(){return this.day()}},window.tickDate=function(e){return new o(e)}}();n(123),n(124),n(125),n(119),n(212),n(122),n(111),n(110);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){function t(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}t.prototype.diff_main=function(e,t,n,r){if(void 0===r&&(r=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout),null==e||null==t)throw Error("Null input. (diff_main)");if(e==t)return e?[[0,e]]:[];void 0===n&&(n=!0);var a=n,i=this.diff_commonPrefix(e,t);n=e.substring(0,i),e=e.substring(i),t=t.substring(i);i=this.diff_commonSuffix(e,t);var o=e.substring(e.length-i);return e=e.substring(0,e.length-i),t=t.substring(0,t.length-i),e=this.diff_compute_(e,t,a,r),n&&e.unshift([0,n]),o&&e.push([0,o]),this.diff_cleanupMerge(e),e},t.prototype.diff_compute_=function(e,t,n,r){if(!e)return[[1,t]];if(!t)return[[-1,e]];var a=e.length>t.length?e:t,i=e.length>t.length?t:e,o=a.indexOf(i);return-1!=o?(n=[[1,a.substring(0,o)],[0,i],[1,a.substring(o+i.length)]],e.length>t.length&&(n[0][0]=n[2][0]=-1),n):1==i.length?[[-1,e],[1,t]]:(a=this.diff_halfMatch_(e,t))?(i=a[0],e=a[1],o=a[2],t=a[3],a=a[4],i=this.diff_main(i,o,n,r),n=this.diff_main(e,t,n,r),i.concat([[0,a]],n)):n&&100<e.length&&100<t.length?this.diff_lineMode_(e,t,r):this.diff_bisect_(e,t,r)},t.prototype.diff_lineMode_=function(e,t,n){var r=this.diff_linesToChars_(e,t);e=r.chars1,t=r.chars2,r=r.lineArray,e=this.diff_main(e,t,!1,n),this.diff_charsToLines_(e,r),this.diff_cleanupSemantic(e),e.push([0,""]);for(var a=r=t=0,i="",o="";t<e.length;){switch(e[t][0]){case 1:a++,o+=e[t][1];break;case-1:r++,i+=e[t][1];break;case 0:if(1<=r&&1<=a){for(e.splice(t-r-a,r+a),t=t-r-a,a=(r=this.diff_main(i,o,!1,n)).length-1;0<=a;a--)e.splice(t,0,r[a]);t+=r.length}r=a=0,o=i=""}t++}return e.pop(),e},t.prototype.diff_bisect_=function(e,t,n){for(var r=e.length,a=t.length,i=Math.ceil((r+a)/2),o=i,c=2*i,s=Array(c),u=Array(c),l=0;l<c;l++)s[l]=-1,u[l]=-1;s[o+1]=0,u[o+1]=0;for(var d=0!=(l=r-a)%2,f=0,p=0,h=0,m=0,g=0;g<i&&!((new Date).getTime()>n);g++){for(var v=-g+f;v<=g-p;v+=2){for(var y,b=o+v,k=(y=v==-g||v!=g&&s[b-1]<s[b+1]?s[b+1]:s[b-1]+1)-v;y<r&&k<a&&e.charAt(y)==t.charAt(k);)y++,k++;if(s[b]=y,y>r)p+=2;else if(k>a)f+=2;else if(d&&(0<=(b=o+l-v)&&b<c&&-1!=u[b])){var O=r-u[b];if(y>=O)return this.diff_bisectSplit_(e,t,y,k,n)}}for(v=-g+h;v<=g-m;v+=2){for(b=o+v,y=(O=v==-g||v!=g&&u[b-1]<u[b+1]?u[b+1]:u[b-1]+1)-v;O<r&&y<a&&e.charAt(r-O-1)==t.charAt(a-y-1);)O++,y++;if(u[b]=O,O>r)m+=2;else if(y>a)h+=2;else if(!d&&(0<=(b=o+l-v)&&b<c&&-1!=s[b]&&(k=o+(y=s[b])-b,y>=(O=r-O))))return this.diff_bisectSplit_(e,t,y,k,n)}}return[[-1,e],[1,t]]},t.prototype.diff_bisectSplit_=function(e,t,n,r,a){var i=e.substring(0,n),o=t.substring(0,r);return e=e.substring(n),t=t.substring(r),i=this.diff_main(i,o,!1,a),a=this.diff_main(e,t,!1,a),i.concat(a)},t.prototype.diff_linesToChars_=function(e,t){function n(e){for(var t="",n=0,i=-1,o=r.length;i<e.length-1;){-1==(i=e.indexOf("\n",n))&&(i=e.length-1);var c=e.substring(n,i+1);n=i+1;(a.hasOwnProperty?a.hasOwnProperty(c):void 0!==a[c])?t+=String.fromCharCode(a[c]):(t+=String.fromCharCode(o),a[c]=o,r[o++]=c)}return t}var r=[],a={};return r[0]="",{chars1:n(e),chars2:n(t),lineArray:r}},t.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],a=[],i=0;i<r.length;i++)a[i]=t[r.charCodeAt(i)];e[n][1]=a.join("")}},t.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),a=r,i=0;n<a;)e.substring(i,a)==t.substring(i,a)?i=n=a:r=a,a=Math.floor((r-n)/2+n);return a},t.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),a=r,i=0;n<a;)e.substring(e.length-a,e.length-i)==t.substring(t.length-a,t.length-i)?i=n=a:r=a,a=Math.floor((r-n)/2+n);return a},t.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(0==n||0==r)return 0;if(n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n)),n=Math.min(n,r),e==t)return n;r=0;for(var a=1;;){var i=e.substring(n-a);if(-1==(i=t.indexOf(i)))return r;a+=i,0!=i&&e.substring(n-a)!=t.substring(0,a)||(r=a,a++)}},t.prototype.diff_halfMatch_=function(e,t){function n(e,t,n){for(var r,a,i,o,s=e.substring(n,n+Math.floor(e.length/4)),u=-1,l="";-1!=(u=t.indexOf(s,u+1));){var d=c.diff_commonPrefix(e.substring(n),t.substring(u)),f=c.diff_commonSuffix(e.substring(0,n),t.substring(0,u));l.length<f+d&&(l=t.substring(u-f,u)+t.substring(u,u+d),r=e.substring(0,n-f),a=e.substring(n+d),i=t.substring(0,u-f),o=t.substring(u+d))}return 2*l.length>=e.length?[r,a,i,o,l]:null}if(0>=this.Diff_Timeout)return null;var r=e.length>t.length?e:t,a=e.length>t.length?t:e;if(4>r.length||2*a.length<r.length)return null;var i,o,c=this,s=n(r,a,Math.ceil(r.length/4));r=n(r,a,Math.ceil(r.length/2));return s||r?(i=r?s&&s[4].length>r[4].length?s:r:s,e.length>t.length?(s=i[0],r=i[1],a=i[2],o=i[3]):(a=i[0],o=i[1],s=i[2],r=i[3]),[s,r,a,o,i=i[4]]):null},t.prototype.diff_cleanupSemantic=function(e){for(var t=!1,n=[],r=0,a=null,i=0,o=0,c=0,s=0,u=0;i<e.length;)0==e[i][0]?(n[r++]=i,o=s,c=u,u=s=0,a=e[i][1]):(1==e[i][0]?s+=e[i][1].length:u+=e[i][1].length,a&&a.length<=Math.max(o,c)&&a.length<=Math.max(s,u)&&(e.splice(n[r-1],0,[-1,a]),e[n[r-1]+1][0]=1,r--,i=0<--r?n[r-1]:-1,u=s=c=o=0,a=null,t=!0)),i++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),i=1;i<e.length;)-1==e[i-1][0]&&1==e[i][0]&&(t=e[i-1][1],n=e[i][1],(r=this.diff_commonOverlap_(t,n))>=(a=this.diff_commonOverlap_(n,t))?(r>=t.length/2||r>=n.length/2)&&(e.splice(i,0,[0,n.substring(0,r)]),e[i-1][1]=t.substring(0,t.length-r),e[i+1][1]=n.substring(r),i++):(a>=t.length/2||a>=n.length/2)&&(e.splice(i,0,[0,t.substring(0,a)]),e[i-1][0]=1,e[i-1][1]=n.substring(0,n.length-a),e[i+1][0]=-1,e[i+1][1]=t.substring(a),i++),i++),i++},t.prototype.diff_cleanupSemanticLossless=function(e){function n(e,n){if(!e||!n)return 6;var r=e.charAt(e.length-1),a=n.charAt(0),i=r.match(t.nonAlphaNumericRegex_),o=a.match(t.nonAlphaNumericRegex_),c=i&&r.match(t.whitespaceRegex_),s=o&&a.match(t.whitespaceRegex_),u=(r=c&&r.match(t.linebreakRegex_),a=s&&a.match(t.linebreakRegex_),r&&e.match(t.blanklineEndRegex_)),l=a&&n.match(t.blanklineStartRegex_);return u||l?5:r||a?4:i&&!c&&s?3:c||s?2:i||o?1:0}for(var r=1;r<e.length-1;){if(0==e[r-1][0]&&0==e[r+1][0]){var a=e[r-1][1],i=e[r][1],o=e[r+1][1];if(s=this.diff_commonSuffix(a,i)){var c=i.substring(i.length-s);a=a.substring(0,a.length-s),i=c+i.substring(0,i.length-s),o=c+o}for(var s=a,u=(c=i,o),l=n(a,i)+n(i,o);i.charAt(0)===o.charAt(0);){a=a+i.charAt(0),i=i.substring(1)+o.charAt(0),o=o.substring(1);var d=n(a,i)+n(i,o);d>=l&&(l=d,s=a,c=i,u=o)}e[r-1][1]!=s&&(s?e[r-1][1]=s:(e.splice(r-1,1),r--),e[r][1]=c,u?e[r+1][1]=u:(e.splice(r+1,1),r--))}r++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,n=[],r=0,a=null,i=0,o=!1,c=!1,s=!1,u=!1;i<e.length;)0==e[i][0]?(e[i][1].length<this.Diff_EditCost&&(s||u)?(n[r++]=i,o=s,c=u,a=e[i][1]):(r=0,a=null),s=u=!1):(-1==e[i][0]?u=!0:s=!0,a&&(o&&c&&s&&u||a.length<this.Diff_EditCost/2&&3==o+c+s+u)&&(e.splice(n[r-1],0,[-1,a]),e[n[r-1]+1][0]=1,r--,a=null,o&&c?(s=u=!0,r=0):(i=0<--r?n[r-1]:-1,s=u=!1),t=!0)),i++;t&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push([0,""]);for(var t,n=0,r=0,a=0,i="",o="";n<e.length;)switch(e[n][0]){case 1:a++,o+=e[n][1],n++;break;case-1:r++,i+=e[n][1],n++;break;case 0:1<r+a?(0!==r&&0!==a&&(0!==(t=this.diff_commonPrefix(o,i))&&(0<n-r-a&&0==e[n-r-a-1][0]?e[n-r-a-1][1]+=o.substring(0,t):(e.splice(0,0,[0,o.substring(0,t)]),n++),o=o.substring(t),i=i.substring(t)),0!==(t=this.diff_commonSuffix(o,i))&&(e[n][1]=o.substring(o.length-t)+e[n][1],o=o.substring(0,o.length-t),i=i.substring(0,i.length-t))),0===r?e.splice(n-a,r+a,[1,o]):0===a?e.splice(n-r,r+a,[-1,i]):e.splice(n-r-a,r+a,[-1,i],[1,o]),n=n-r-a+(r?1:0)+(a?1:0)+1):0!==n&&0==e[n-1][0]?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,r=a=0,o=i=""}for(""===e[e.length-1][1]&&e.pop(),r=!1,n=1;n<e.length-1;)0==e[n-1][0]&&0==e[n+1][0]&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),r=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),r=!0)),n++;r&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,t){var n,r=0,a=0,i=0,o=0;for(n=0;n<e.length&&(1!==e[n][0]&&(r+=e[n][1].length),-1!==e[n][0]&&(a+=e[n][1].length),!(r>t));n++)i=r,o=a;return e.length!=n&&-1===e[n][0]?o:o+(t-i)},t.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,r=/</g,a=/>/g,i=/\n/g,o=0;o<e.length;o++){var c=e[o][0],s=(s=e[o][1]).replace(n,"&amp;").replace(r,"&lt;").replace(a,"&gt;").replace(i,"&para;<br>");switch(c){case 1:t[o]='<ins style="background:#e6ffe6;">'+s+"</ins>";break;case-1:t[o]='<del style="background:#ffe6e6;">'+s+"</del>";break;case 0:t[o]="<span>"+s+"</span>"}}return t.join("")},t.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},t.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)-1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},t.prototype.diff_levenshtein=function(e){for(var t=0,n=0,r=0,a=0;a<e.length;a++){var i=e[a][0],o=e[a][1];switch(i){case 1:n+=o.length;break;case-1:r+=o.length;break;case 0:t+=Math.max(n,r),r=n=0}}return t+Math.max(n,r)},t.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case 1:t[n]="+"+encodeURI(e[n][1]);break;case-1:t[n]="-"+e[n][1].length;break;case 0:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,t){for(var n=[],r=0,a=0,i=t.split(/\t/g),o=0;o<i.length;o++){var c=i[o].substring(1);switch(i[o].charAt(0)){case"+":try{n[r++]=[1,decodeURI(c)]}catch(e){throw Error("Illegal escape in diff_fromDelta: "+c)}break;case"-":case"=":var s=parseInt(c,10);if(isNaN(s)||0>s)throw Error("Invalid number in diff_fromDelta: "+c);c=e.substring(a,a+=s),"="==i[o].charAt(0)?n[r++]=[0,c]:n[r++]=[-1,c];break;default:if(i[o])throw Error("Invalid diff operation in diff_fromDelta: "+i[o])}}if(a!=e.length)throw Error("Delta length ("+a+") does not equal source text length ("+e.length+").");return n},t.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},t.prototype.match_bitap_=function(e,t,n){function r(e,r){var a=e/t.length,o=Math.abs(n-r);return i.Match_Distance?a+o/i.Match_Distance:o?1:a}if(t.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var a=this.match_alphabet_(t),i=this,o=this.Match_Threshold;-1!=(d=e.indexOf(t,n))&&(o=Math.min(r(0,d),o),-1!=(d=e.lastIndexOf(t,n+t.length))&&(o=Math.min(r(0,d),o)));for(var c,s,u,l=1<<t.length-1,d=-1,f=t.length+e.length,p=0;p<t.length;p++){for(c=0,s=f;c<s;)r(p,n+s)<=o?c=s:f=s,s=Math.floor((f-c)/2+c);f=s,c=Math.max(1,n-s+1);var h=Math.min(n+s,e.length)+t.length;for((s=Array(h+2))[h+1]=(1<<p)-1;h>=c;h--){var m=a[e.charAt(h-1)];if(s[h]=0===p?(s[h+1]<<1|1)&m:(s[h+1]<<1|1)&m|(u[h+1]|u[h])<<1|1|u[h+1],s[h]&l&&(m=r(p,h-1))<=o){if(o=m,!((d=h-1)>n))break;c=Math.max(1,2*n-d)}}if(r(p+1,n)>o)break;u=s}return d},t.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},t.prototype.patch_addContext_=function(e,t){if(0!=t.length){for(var n=t.substring(e.start2,e.start2+e.length1),r=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=t.substring(e.start2-r,e.start2+e.length1+r);r+=this.Patch_Margin,(n=t.substring(e.start2-r,e.start2))&&e.diffs.unshift([0,n]),(r=t.substring(e.start2+e.length1,e.start2+e.length1+r))&&e.diffs.push([0,r]),e.start1-=n.length,e.start2-=n.length,e.length1+=n.length+r.length,e.length2+=n.length+r.length}},t.prototype.patch_make=function(e,n,r){var a;if("string"==typeof e&&"string"==typeof n&&void 0===r)a=e,2<(n=this.diff_main(a,n,!0)).length&&(this.diff_cleanupSemantic(n),this.diff_cleanupEfficiency(n));else if(e&&"object"==s(e)&&void 0===n&&void 0===r)n=e,a=this.diff_text1(n);else if("string"==typeof e&&n&&"object"==s(n)&&void 0===r)a=e;else{if("string"!=typeof e||"string"!=typeof n||!r||"object"!=s(r))throw Error("Unknown call format to patch_make.");a=e,n=r}if(0===n.length)return[];r=[],e=new t.patch_obj;for(var i=0,o=0,c=0,u=a,l=0;l<n.length;l++){var d=n[l][0],f=n[l][1];switch(!i&&0!==d&&(e.start1=o,e.start2=c),d){case 1:e.diffs[i++]=n[l],e.length2+=f.length,a=a.substring(0,c)+f+a.substring(c);break;case-1:e.length1+=f.length,e.diffs[i++]=n[l],a=a.substring(0,c)+a.substring(c+f.length);break;case 0:f.length<=2*this.Patch_Margin&&i&&n.length!=l+1?(e.diffs[i++]=n[l],e.length1+=f.length,e.length2+=f.length):f.length>=2*this.Patch_Margin&&i&&(this.patch_addContext_(e,u),r.push(e),e=new t.patch_obj,i=0,u=a,o=c)}1!==d&&(o+=f.length),-1!==d&&(c+=f.length)}return i&&(this.patch_addContext_(e,u),r.push(e)),r},t.prototype.patch_deepCopy=function(e){for(var n=[],r=0;r<e.length;r++){var a=e[r],i=new t.patch_obj;i.diffs=[];for(var o=0;o<a.diffs.length;o++)i.diffs[o]=a.diffs[o].slice();i.start1=a.start1,i.start2=a.start2,i.length1=a.length1,i.length2=a.length2,n[r]=i}return n},t.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var r=0,a=[],i=0;i<e.length;i++){var o,c=e[i].start2+r,s=-1;if((l=this.diff_text1(e[i].diffs)).length>this.Match_MaxBits?-1!=(o=this.match_main(t,l.substring(0,this.Match_MaxBits),c))&&(-1==(s=this.match_main(t,l.substring(l.length-this.Match_MaxBits),c+l.length-this.Match_MaxBits))||o>=s)&&(o=-1):o=this.match_main(t,l,c),-1==o)a[i]=!1,r-=e[i].length2-e[i].length1;else if(a[i]=!0,r=o-c,l==(c=-1==s?t.substring(o,o+l.length):t.substring(o,s+this.Match_MaxBits)))t=t.substring(0,o)+this.diff_text2(e[i].diffs)+t.substring(o+l.length);else if(c=this.diff_main(l,c,!1),l.length>this.Match_MaxBits&&this.diff_levenshtein(c)/l.length>this.Patch_DeleteThreshold)a[i]=!1;else{this.diff_cleanupSemanticLossless(c);var u,l=0;for(s=0;s<e[i].diffs.length;s++){var d=e[i].diffs[s];0!==d[0]&&(u=this.diff_xIndex(c,l)),1===d[0]?t=t.substring(0,o+u)+d[1]+t.substring(o+u):-1===d[0]&&(t=t.substring(0,o+u)+t.substring(o+this.diff_xIndex(c,l+d[1].length))),-1!==d[0]&&(l+=d[1].length)}}}return[t=t.substring(n.length,t.length-n.length),a]},t.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",r=1;r<=t;r++)n+=String.fromCharCode(r);for(r=0;r<e.length;r++)e[r].start1+=t,e[r].start2+=t;var a=(r=e[0]).diffs;if(0==a.length||0!=a[0][0])a.unshift([0,n]),r.start1-=t,r.start2-=t,r.length1+=t,r.length2+=t;else if(t>a[0][1].length){var i=t-a[0][1].length;a[0][1]=n.substring(a[0][1].length)+a[0][1],r.start1-=i,r.start2-=i,r.length1+=i,r.length2+=i}return 0==(a=(r=e[e.length-1]).diffs).length||0!=a[a.length-1][0]?(a.push([0,n]),r.length1+=t,r.length2+=t):t>a[a.length-1][1].length&&(i=t-a[a.length-1][1].length,a[a.length-1][1]+=n.substring(0,i),r.length1+=i,r.length2+=i),n},t.prototype.patch_splitMax=function(e){for(var n=this.Match_MaxBits,r=0;r<e.length;r++)if(!(e[r].length1<=n)){var a=e[r];e.splice(r--,1);for(var i=a.start1,o=a.start2,c="";0!==a.diffs.length;){var s=new t.patch_obj,u=!0;for(s.start1=i-c.length,s.start2=o-c.length,""!==c&&(s.length1=s.length2=c.length,s.diffs.push([0,c]));0!==a.diffs.length&&s.length1<n-this.Patch_Margin;){c=a.diffs[0][0];var l=a.diffs[0][1];1===c?(s.length2+=l.length,o+=l.length,s.diffs.push(a.diffs.shift()),u=!1):-1===c&&1==s.diffs.length&&0==s.diffs[0][0]&&l.length>2*n?(s.length1+=l.length,i+=l.length,u=!1,s.diffs.push([c,l]),a.diffs.shift()):(l=l.substring(0,n-s.length1-this.Patch_Margin),s.length1+=l.length,i+=l.length,0===c?(s.length2+=l.length,o+=l.length):u=!1,s.diffs.push([c,l]),l==a.diffs[0][1]?a.diffs.shift():a.diffs[0][1]=a.diffs[0][1].substring(l.length))}c=(c=this.diff_text2(s.diffs)).substring(c.length-this.Patch_Margin),""!==(l=this.diff_text1(a.diffs).substring(0,this.Patch_Margin))&&(s.length1+=l.length,s.length2+=l.length,0!==s.diffs.length&&0===s.diffs[s.diffs.length-1][0]?s.diffs[s.diffs.length-1][1]+=l:s.diffs.push([0,l])),u||e.splice(++r,0,s)}}},t.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},t.prototype.patch_fromText=function(e){var n=[];if(!e)return n;e=e.split("\n");for(var r=0,a=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<e.length;){var i=e[r].match(a);if(!i)throw Error("Invalid patch string: "+e[r]);var o=new t.patch_obj;for(n.push(o),o.start1=parseInt(i[1],10),""===i[2]?(o.start1--,o.length1=1):"0"==i[2]?o.length1=0:(o.start1--,o.length1=parseInt(i[2],10)),o.start2=parseInt(i[3],10),""===i[4]?(o.start2--,o.length2=1):"0"==i[4]?o.length2=0:(o.start2--,o.length2=parseInt(i[4],10)),r++;r<e.length;){i=e[r].charAt(0);try{var c=decodeURI(e[r].substring(1))}catch(e){throw Error("Illegal escape in patch_fromText: "+c)}if("-"==i)o.diffs.push([-1,c]);else if("+"==i)o.diffs.push([1,c]);else if(" "==i)o.diffs.push([0,c]);else{if("@"==i)break;if(""!==i)throw Error('Invalid patch mode "'+i+'" in: '+c)}r++}}return n},t.patch_obj=function(){this.diffs=[],this.start2=this.start1=null,this.length2=this.length1=0},t.patch_obj.prototype.toString=function(){var e,t,n;for(e=["@@ -"+(e=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(t=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],t=0;t<this.diffs.length;t++){switch(this.diffs[t][0]){case 1:n="+";break;case-1:n="-";break;case 0:n=" "}e[t+1]=n+encodeURI(this.diffs[t][1])+"\n"}return e.join("").replace(/%20/g," ")},e.diff_match_patch=t,e.DIFF_DELETE=-1,e.DIFF_INSERT=1,e.DIFF_EQUAL=0}(window);var u=n(344);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(Date.prototype,"ap",{get:function(){return new d(this)},enumerable:!0,configurable:!0});var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.date=void 0,this.date=t}var t,n,r;return t=e,(n=[{key:"isSame",value:function(e){return u.a.isSame(this.date,e)}},{key:"isSameOrAfter",value:function(e){return!!e&&this.date.getTime()>=e.getTime()}},{key:"isAfter",value:function(e){return!!e&&this.date.getTime()>e.getTime()}},{key:"isSameOrBefore",value:function(e){return!!e&&this.date.getTime()<=e.getTime()}},{key:"isBefore",value:function(e){return this.date.getTime()<e.getTime()}},{key:"startOfDay",get:function(){return c()(this.date).startOf("day").toDate()}},{key:"startOfWeek",get:function(){return u.a.getFirstDayInWeek(this.date)}},{key:"endOfWeek",get:function(){return u.a.getLastDayInWeek(this.date)}},{key:"startOfMonth",get:function(){return c()(this.date).startOf("month").toDate()}},{key:"endOfMonth",get:function(){return c()(this.date).endOf("month").toDate()}},{key:"weekYear",get:function(){return u.a.getWeekYear(this.date)}},{key:"year",get:function(){return this.date.getFullYear()}},{key:"month",get:function(){return c()(this.date).month()}},{key:"YYYYMMDD",get:function(){return c()(this.date).format("YYYYMMDD")}},{key:"isToday",get:function(){return c()(this.date).isSame(new Date,"day")}},{key:"isYesterday",get:function(){return c()(this.date).add(1,"day").isSame(new Date,"day")}},{key:"daysFromNow",get:function(){return c()(this.date).diff(new Date,"day")}}])&&l(t.prototype,n),r&&l(t,r),e}(),f=n(98),p=n.n(f),h=n(817),m=n.n(h);Object.fromEntries||i.a.shim(),m.a.reg(p.a),m.a.apply(p.a,{format:function(e,t,n){return"".concat(n," ").concat(e," ").concat(t,": ")}})},315:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"default",(function(){return O}));var r=n(24),a=n.n(r),i=(n(120),n(107),n(1535),n(389)),o=n(1549),c=n(13),s=n(109),u=n(327),l=n(361),d=n(1012),f=n(326),p=n(1014),h=n(157),m=n(1534),g=n(412),v=n(476);function y(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){y(i,r,a,o,c,"next",e)}function c(e){y(i,r,a,o,c,"throw",e)}o(void 0)}))}}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function t(){var n,r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.listenAlarm=function(e){var t=e.name;"poll-sync"===t?r.sync():"leap-one-day"===t?(Object(m.a)(),r.sync()):"poll-notification"===t&&d.a.notifyOnTimeReminder()},this.sync=function(){l.a.doSync().then((function(){var e=Object(p.a)(f.a.getState(),{includeSubscribeShownInCalendar:!0});c.a.dispatch(Object(s.e)({count:e.today}))}))},n=Object(i.d)(),window.intl=Object(o.a)({locale:"en",messages:{list_inbox:"inbox"}},n),Object(m.b)().then(b(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.initialize();case 2:return t.next=4,Object(v.b)();case 4:Object(m.c)({isCustomOnDayLeap:!0}),r.sync(),e.alarms.create("poll-sync",{when:(new Date).setSeconds(0,0)+6e5,periodInMinutes:10}),e.alarms.create("leap-one-day",{when:(new Date).setHours(0,0,0,0)+864e5,periodInMinutes:1440}),e.alarms.create("poll-notification",{when:(new Date).setSeconds(0,0),periodInMinutes:1}),r.listenId=Date.now(),e.alarms.onAlarm.addListener(r.listenAlarm),e.runtime.onMessage.addListener(r.listenPageMessage),h.a.subscribe(r.listenId,"sync",r.sync);case 13:case"end":return t.stop()}}),t)}))))}var n,r,y;return n=t,(r=[{key:"halt",value:function(){e.alarms.clearAll(),e.alarms.onAlarm.removeListener(this.listenAlarm),e.runtime.onMessage.removeListener(this.listenPageMessage),h.a.unSubscribe(this.listenId,"sync")}},{key:"listenPageMessage",value:function(e){var t={refreshPrefs:u.w};if(t[e.action])return t[e.action](),!0}}])&&k(n.prototype,r),y&&k(n,y),t}();O.listenId=void 0}.call(this,n(29))},318:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"z",(function(){return d})),n.d(t,"m",(function(){return f})),n.d(t,"o",(function(){return p})),n.d(t,"Q",(function(){return h})),n.d(t,"G",(function(){return m})),n.d(t,"J",(function(){return s})),n.d(t,"I",(function(){return u})),n.d(t,"t",(function(){return v})),n.d(t,"r",(function(){return g})),n.d(t,"p",(function(){return b})),n.d(t,"E",(function(){return k})),n.d(t,"x",(function(){return O})),n.d(t,"C",(function(){return T})),n.d(t,"e",(function(){return S})),n.d(t,"w",(function(){return w})),n.d(t,"K",(function(){return D})),n.d(t,"g",(function(){return j})),n.d(t,"k",(function(){return _})),n.d(t,"B",(function(){return C})),n.d(t,"l",(function(){return I})),n.d(t,"d",(function(){return M})),n.d(t,"H",(function(){return A})),n.d(t,"N",(function(){return x})),n.d(t,"j",(function(){return R})),n.d(t,"u",(function(){return E})),n.d(t,"q",(function(){return F})),n.d(t,"F",(function(){return H})),n.d(t,"s",(function(){return P})),n.d(t,"P",(function(){return N})),n.d(t,"O",(function(){return L})),n.d(t,"h",(function(){return U})),n.d(t,"c",(function(){return Y})),n.d(t,"n",(function(){return W})),n.d(t,"a",(function(){return K})),n.d(t,"i",(function(){return B})),n.d(t,"b",(function(){return Z})),n.d(t,"D",(function(){return G})),n.d(t,"y",(function(){return V})),n.d(t,"L",(function(){return z})),n.d(t,"v",(function(){return $})),n.d(t,"M",(function(){return X}));n(581);var r,a=n(393),i=n(474);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"A",(function(){return i.a}));var c,s,u,l="09:00",d="TRIGGER:",f={atomTime:"YYYY-MM-DDTHH:mm:ss.SSSZZ",dateTime:"YYYY-MM-DDT00:00:00.000ZZ",nlpTime:"YYYY-MM-DDTHH:mm:ss"},p={holidayTypeRestDay:0,holidayTypeWorkDay:1},h={2:"years",3:"months",4:"weeks",5:"days",7:"hours",8:"minutes"},m={all:"tasks",today:"today",tomorrow:"tomorrow",week:"week",tkcalendar:"calendar",assignedme:"assignedme",summary:"summary",habit:"habit",completed:"completed",trash:"trash",subscribe:"subscribe-calendar",subscribeAccount:"subscribe-account-calendar"};!function(e){e.auto="auto",e.show="show",e.hide="hide"}(c||(c={})),function(e){e.today="today",e.tomorrow="tomorrow",e.week="week",e.inbox="sortOrder",e.completed="completedTime",e.trash="trash",e.explore="dueDate",e.calendar="calendar",e.assignee="assignee",e.sortOrder="sortOrder",e.dueDate="dueDate",e.completedTime="completedTime",e.createdTime="createdTime",e.modifiedTime="modifiedTime",e.priority="priority",e.title="title",e.project="project",e.filterCompleted="filterCompleted",e.tag="tag"}(s||(s={})),function(e){e[e.task=1]="task",e[e.subtask=2]="subtask",e[e.subscribe=3]="subscribe",e[e.repeat=4]="repeat"}(u||(u={}));var g,v={smartProject:"non-project",group:"group",project:"project",tag:"tag",csl:"csl",miniDate:"miniDate"};!function(e){e.normal="normal",e.workflow="workflow"}(g||(g={}));var y,b={section:"task-drag-hovered",project:"project-drag-hovered",group:"group-drag-hovered",tag:"tag-drag-hovered",csl:"csl-drag-hovered",column:"column-drag-hovered",kalendaeDay:"kalendae-day-drag-hovered"},k={p:"project",q:"smart",s:"search",d:"calendar",tag:"tag"},O={high:5,medium:3,low:1,none:0},T={assigned:"assigned",today:"today",tomorrow:"tomorrow",date:"date",noDate:"noDate",overdue:"overdue",next7days:"next7days",next7Days:"next7days",later:"later",priority:"priority",completed:"completed",search:"search",order:"order",title:"title",trash:"trash",tag:"tag",noTag:"noTag",project:"project",chooseDate:"chooseDate",subscribe:"subscribe"},S={isNum:1,isAlpha:2,isLocale:3};!function(e){e[e.Week0=0]="Week0",e[e.Week1=1]="Week1",e[e.Week2=2]="Week2",e[e.Week3=3]="Week3",e[e.Week4=4]="Week4",e[e.Week5=5]="Week5",e[e.Week6=6]="Week6"}(y||(y={}));a.g,a.g,a.g,a.g,a.g,a.g;var E,w={duplicate:"plugin-duplicate",calendar:"plugin-calendar",pomo:"plugin-pomo",habit:"plugin-habit"},D={userId:"userId",tags:"tags",teams:"teams",projects:"projects",columns:"columns",sortTypeAll:"sorttypeoflistall",sortTypeInbox:"sorttypeoflistinbox",sortTypeList:"sorttypeoflist",sortTypeAssignedMe:"sorttype/assignedme",sortTypeToday:"sorttypeoftoday",sortTypeTomorrow:"sorttypeoftomorrow",sortTypeWeek:"sorttypeofweek",customSmartProjects:"customsmartprojects",tasks:"tasks",trash:"trash",original:"original",comment:"comment",commentDraft:"commentdraft",taskOrderByDate:"task_order_by_date",taskOrderByPriority:"task_order_by_priority",taskOrderByList:"task_order_by_list",shareUsers:"shareusers",filterCompleted:"filtercompleted",sortTypeTag:"sorttype/tag",preferences:"preferences",subscribeProjects:"subscribe/projects",subscribeAccounts:"subscribeAccount/accounts",subscribeAccountCalendars:"subscribeAccount/calendars",subscribeEvents:"subscribe/events",subscribeAccountEvents:"subscribeAccount/events",checkPoint:"checkpoint",featureTimeStamp:"featureTimeStamp",featurePrompt:"featurePrompt",pomodoro:"pomodoro",pomodoros:"pomodoros",pomoSettings:"pomoSettings",autoTagFirst:"autoTagFirst",calendarStatus:"calendar_status",userPublicProfile:"userPublicProfiles",projectGroup:"projectGroup",completedSectionStatus:"completed_section_status",showSubTaskStatus:"show_subtask_status",showCalendarRepeat:"calendar_repeat_status",projectGroupOpenStatus:"projectGroupOpenStatus",teamOpenStatus:"teamOpenStatus",allDayCollapse:"allDayCollapseStatus",sectionCollapse:"sectionCollapseStatus",taskCollapse:"taskCollapseStatus",scheduleSectionCollapse:"scheduleSectionCollapse",scheduleStatus:"schedule_view_status",scheduleViewType:"scheduleViewType",hasActiveSchedule:"has_active_schedule",registeredTime:"registeredTime",inboxColor:"inboxColor",recentDateReminderSet:"recentDateReminderSet",recentTimeReminderSet:"recentTimeReminderSet",taskTemplates:"taskTemplates",noteTemplates:"noteTemplates",webappVersion:"webappVersion",archivedEvents:"archivedEvents",allDayViewHeight:"allDayViewHeight",timelineHourHeight:"timelineHourHeight",skipHabits:"skipHabits",habitCheckIns:"habitCheckIns",habitRecords:"habitRecords",parentTagOpenStatus:"parentTagOpenStatus",statisticsConfig:"statisticsConfig",isNoteEnabled:"isNoteEnabled",stashWebAppPath:"stashWebAppPath",deviceId:"deviceId",projectCountdown:"projectCountdown"},j={image:/(image)$/i,pdf:/(pdf)$/i,ppt:/(ppt)$/i,xls:/(xls)$/i,doc:/(doc)$/i,text:/(text)$/i,video:/(video)$/i,audio:/(audio)$/i,voice:/(voice)$/i,csv:/(csv)$/i,package:/(package)$/i},_={IMAGE:["bmp","gif","jpg","jpeg","png","tiff"],AUDIO:["amr","mp3","3gp","3gpp","m4a"],VIDEO:["mp4","avi","mov"],PDF:["pdf"],DOC:["doc","docx","pages","odt"],TEXT:["txt","rtf"],XLS:["xls","xlsx","numbers","ods"],PPT:["ppt","pps","keynote","odp","pptx","ppsx"],CSV:["csv"],PACKAGE:["rar","zip"]},C={mobile:920,tablet:1020},I={summary:"summary_filter",schedule:"schedule_filter",scheduleTag:"schedule_tag_filter",calendar:"calendar_filter"},M={month:"m",week:"w",day:"d"},A=(o(r={},m.all,"all"),o(r,m.today,"today"),o(r,m.tomorrow,"tomorrow"),o(r,m.week,"n7ds"),o(r,m.tkcalendar,"calendar"),o(r,m.assignedme,"assignee"),o(r,m.summary,"summary"),o(r,m.completed,"completed"),o(r,m.trash,"trash"),r),x=(m.all,m.today,m.tomorrow,m.week,m.tkcalendar,m.assignedme,m.summary,m.habit,m.completed,m.trash,{grey:{id:"grey",name:"theme_classic",color:"#fafafa",className:"grey-theme",category:"pure"},dark:{id:"dark",name:"theme_dark",color:"#313643",className:"black-theme",category:"pure"},classic:{id:"classic",name:"theme_blue",color:"#7086DA",className:"blue-theme",category:"pure"},pink:{isHidden:!0,className:"pink-theme",category:"pure"},green:{isHidden:!0,className:"green-theme",category:"pure"},yellow:{isHidden:!0,className:"yellow-theme",category:"pure"},night:{id:"night",name:"theme_night",color:"#212121",className:"night-dark-theme",category:"pure"},HangZhou:{id:"HangZhou",name:"theme_hangzhou",color:"#26C6DA",className:"HangZhou-city-pro-theme",category:"city",needPro:!0,icon:"theme-hangzhou",isDida:!0},BeiJing:{id:"BeiJing",name:"theme_beijing",color:"#CF3241",className:"BeiJing-city-pro-theme",category:"city",needPro:!0,icon:"theme-beijing",isDida:!0},ShangHai:{id:"ShangHai",name:"theme_shanghai",color:"#3B49C0",className:"ShangHai-city-pro-theme",category:"city",needPro:!0,icon:"theme-shanghai"},London:{id:"London",name:"theme_london",color:"#8656B3",className:"London-city-pro-theme",category:"city",needPro:!0,icon:"theme-london"},Moscow:{id:"Moscow",name:"theme_moscow",color:"#007082",className:"Moscow-city-pro-theme",category:"city",needPro:!0,icon:"theme-moscow"},NewYork:{id:"NewYork",name:"theme_newyork",color:"#F58646",className:"NewYork-city-pro-theme",category:"city",needPro:!0,icon:"theme-newyork"},SanFrancisco:{id:"SanFrancisco",name:"theme_sanfrancisco",color:"#FF7F49",className:"SanFrancisco-city-pro-theme",category:"city",needPro:!0,icon:"theme-sanfrancisco"},Sydney:{id:"Sydney",name:"theme_sydney",color:"#42A5F5",className:"Sydney-city-pro-theme",category:"city",needPro:!0,icon:"theme-sydney"},Tokyo:{id:"Tokyo",name:"theme_tokyo",color:"#FF68A2",className:"Tokyo-city-pro-theme",category:"city",needPro:!0,icon:"theme-tokyo"},ShenZhen:{id:"ShenZhen",name:"theme_shenzhen",color:"#086662",className:"ShenZhen-city-pro-theme",category:"city",needPro:!0,icon:"theme-shenzhen",isDida:!0},GuangZhou:{id:"GuangZhou",name:"theme_guangzhou",color:"#0048A3",className:"GuangZhou-city-pro-theme",category:"city",needPro:!0,icon:"theme-guangzhou",isDida:!0},Cairo:{id:"Cairo",name:"theme_cairo",color:"#e78930",className:"Cairo-city-pro-theme",category:"city",needPro:!0,icon:"theme-cairo",isTick:!0},LosAngeles:{id:"LosAngeles",name:"theme_losangeles",color:"#95477e",className:"LosAngeles-city-pro-theme",category:"city",needPro:!0,icon:"theme-losangeles",isTick:!0},Seoul:{id:"Seoul",name:"theme_seoul",color:"#53BEB8",className:"Seoul-city-pro-theme",category:"city",needPro:!0,icon:"theme-seoul"},Spring:{id:"Spring",name:"theme_spring",color:"#4CA349",className:"Spring-season-pro-theme",category:"season",needPro:!0,icon:"theme-spring"},Summer:{id:"Summer",name:"theme_summer",color:"#00ACE7",className:"Summer-season-pro-theme",category:"season",needPro:!0,icon:"theme-summer"},Autumn:{id:"Autumn",name:"theme_autumn",color:"#F28749",className:"Autumn-season-pro-theme",category:"season",needPro:!0,icon:"theme-autumn"},Winter:{id:"Winter",name:"theme_winter",color:"#3B5998",className:"Winter-season-pro-theme",category:"season",needPro:!0,icon:"theme-winter"}}),R={"today-b1-1":"empty-today-b1-1","today-b2-1":"empty-today-b2-1","today-b3-1":"empty-today-b3-1","today-b4-1":"empty-today-b4-1","today-b5-1":"empty-today-b5-1","today-b6-1":"empty-today-b6-1","today-b1-2":"empty-today-b1-2","today-b2-2":"empty-today-b2-2","today-b3-2":"empty-today-b3-2","today-b4-2":"empty-today-b4-2","today-b5-2":"empty-today-b5-2","today-b6-2":"empty-today-b6-2","tomorrow-b1-1":"empty-tomorrow-b1-1","tomorrow-b1-2":"empty-tomorrow-b1-2","tomorrow-b2-1":"empty-tomorrow-b2-1","tomorrow-b2-2":"empty-tomorrow-b2-2",week1:"empty-n7-1",week2:"empty-n7-2",search1:"empty-search-1",search2:"empty-search-2",completed1:"empty-completed-1",completed2:"empty-completed-2",assign1:"empty-assign-1",assign2:"empty-assign-2",default1:"empty-default-1",default2:"empty-default-2",trash1:"empty-trash-1",trash2:"empty-trash-2",subscribe1:"empty-subscribe-1",subscribe2:"empty-subscribe-2",tag1:"empty-tag-1",tag2:"empty-tag-2",csl1:"empty-csl-1",csl2:"empty-csl-2",taskTemplate1:"empty-task-template-1",taskTemplate2:"empty-task-template-2",note1:"empty-note-1",note2:"empty-note-2",schedule1:"empty-schedule-1",schedule2:"empty-schedule-2"};!function(e){e.fold="plugin-calendar-fold",e.expand_date="plugin-calendar-expand-date",e.expand_month="plugin-calendar-expand-month"}(E||(E={}));var P,N,L,U,F={smartDateParsing:"intro_smartDateParsing",hideRangeInWKCalendar:"intro_hideRangeInWKCalendar",tryTaskTemplateShown:"intro_tryTaskTemplateShown"},H={taskItem:{height:40},sectionHeader:{height:36},sectionGap:0,loadMore:{height:44},customSectionInput:{height:56}};!function(e){e.Task="task",e.Checklist="checklist",e.Habit="habit",e.Event="event"}(P||(P={})),function(e){e[e.List=1]="List",e[e.KanbanRow2=2]="KanbanRow2",e[e.KanbanRow1=3]="KanbanRow1",e[e.KanbanRow3=4]="KanbanRow3",e[e.Detail=5]="Detail",e[e.ListDetailExtraRow1=6]="ListDetailExtraRow1"}(N||(N={})),function(e){e.Project="project",e.Attachment="attachment",e.Note="note",e.Location="location",e.Repeat="repeat",e.Reminder="reminder",e.Progress="progress",e.Date="date",e.Assignment="assignment",e.Tag="tag",e.SubtaskDate="subtaskDate",e.SubTask="subTask",e.DetailModeTag="detail-mode-tag",e.NoteDate="note-date",e.CreatedTime="created-time",e.ModifiedTime="modified-time"}(L||(L={})),function(e){e.TASK="task",e.DETAIL_CHECKLIST="detail-checklist",e.TAG="tag",e.PROJECT="project",e.GROUP="group",e.SMARTPROJECT="smart-project",e.CSL="custom-smart-list",e.HABIT="habit",e.LIST_CHECKLIST="list-checklist",e.CUSTOM_SECTION="custom_section",e.EVENT="event"}(U||(U={}));var B,Y={default:"default",list:"list",openList:"openList",task:"task",subtask:"subtask",share:"share",shareNotOwner:"share_not_owner",search:"search",attachment:"attachment",reminder:"reminder",subtaskReminder:"subtask_reminder",taskActivity:"task_activity",projectActivity:"project_activity",taskDesc:"task_desc",theme:"theme",timeDuration:"time_duration",duplicateProject:"duplicate_project",summary:"summary",miniCalendar:w.calendar,calendarView:m.tkcalendar,calSubscribe:"subscribe",calSubscribeAccountLimit:"subscribeAccount",customSmartList:"custom-smart-list",statistics:"statistics",habit:"habit",historical_statistics:"historical_statistics",windows:"windows"},W={habit_daily_check_in:{color:"#70C362"},habit_drink_water:{color:"#6FE9BD"},habit_eat_breakfast:{color:"#ED70A4"},habit_eat_fruits:{color:"#A1CE61"},habit_early_to_rise:{color:"#F8D550"},habit_early_to_bed:{color:"#7B42EB"},habit_learn_words:{color:"#6FE9BD"},habit_reading:{color:"#A1CE61"},habit_quit_snacks:{color:"#CF65F6"},habit_exercising:{color:"#4AA6EF"},habit_meditating:{color:"#CF65F6"},habit_keep_calm:{color:"#52B8D2"},habit_jogging:{color:"#F2B04C"},habit_stretch:{color:"#ED70A4"},habit_yoga:{color:"#CF65F6"},habit_push_ups:{color:"#6FE9BD"},habit_cycling:{color:"#A1CE61"},habit_swimming:{color:"#52B8D2"},habit_learn_language:{color:"#ED70A4"},habit_learn_instrument:{color:"#5992F8"},habit_do_homework:{color:"#E5DF2B"},habit_keep_diary:{color:"#EE8C6F"},habit_save_money:{color:"#F2B04C"},habit_self_reflection:{color:"#EE8C6F"},habit_eat_dinner:{color:"#4AA6EF"},habit_eat_veggies:{color:"#F8D550"},habit_quit_sugar:{color:"#52B8D2"},habit_deep_breath:{color:"#6FE9BD"},habit_stop_overthinking:{color:"#5992F8"},habit_listen_music:{color:"#F2B04C"},habit_watch_movie:{color:"#EE8C6F"},habit_no_video_games:{color:"#52B8D2"},habit_beat_phone_addiction:{color:"#7B42EB"},habit_contact:{color:"#A1CE61"},habit_praise_others:{color:"#ED70A4"},habit_help_others:{color:"#EE8C6F"},habit_introspect:{color:"#F8D550"},habit_plan:{color:"#52B8D2"},habit_stay_positive:{color:"#A1CE61"},habit_your_apprearance:{color:"#CF65F6"},habit_take_photos:{color:"#4AA6EF"},habit_eye_protection:{color:"#7B42EB"},habit_brush_teeth:{color:"#A1CE61"},habit_take_shower:{color:"#CF65F6"},habit_cleaning:{color:"#EC6A66"},habit_housework:{color:"#ED70A4"},habit_water_flowers:{color:"#4AA6EF"},habit_walk_the_dog:{color:"#7B42EB"},habit_cat_keeper:{color:"#EE8C6F"},habit_watch_documentary:{color:"#ED70A4"},habit_watch_news:{color:"#A1CE61"},habit_watch_TV_show:{color:"#5992F8"},habit_watch_soap_opera:{color:"#F8D550"},habit_not_swear:{color:"#5992F8"},habit_skincare:{color:"#CF65F6"},habit_take_walk:{color:"#A1CE61"},habit_keep_fit:{color:"#CF65F6"},habit_quit_smoking:{color:"#52B8D2"},habit_quit_drinking:{color:"#EC6A66"},habit_take_medicine:{color:"#F8D550"},habit_stand:{color:"#FFCE77"},habit_neck_exercises:{color:"#B0DE81"},habit_say_love_u:{color:"#FA9BB0"},habit_smile_to_yourself:{color:"#FF7877"}},K=4;!function(e){e.ListTask="listTask",e.Kanban="kanban",e.Section="section",e.ChecklistItem="checkListItem"}(B||(B={}));var G,V,z,Z=[void 0,null,""];!function(e){e[e.Main=0]="Main",e[e.Detail=1]="Detail"}(G||(G={})),function(e){e.Task="TASK",e.Note="NOTE"}(V||(V={})),function(e){e.Text="TEXT",e.Checklist="CHECKLIST",e.Note="NOTE"}(z||(z={}));var q,J,$=["createdTime","modifiedTime","title","tag","assignee"],X=["sortOrder","dueDate","title","tag","priority","assignee"];!function(e){e.dev="cli_9f950c76112e500b",e.prod="cli_9e7a6fcc05bdd00e"}(q||(q={})),function(e){e[e.SITE_GOOGLE=1]="SITE_GOOGLE",e[e.SITE_FACEBOOK=2]="SITE_FACEBOOK",e[e.SITE_WEIBO=3]="SITE_WEIBO",e[e.SITE_QQ=4]="SITE_QQ",e[e.SITE_WEIXIN=5]="SITE_WEIXIN",e[e.SITE_TWITTER=7]="SITE_TWITTER",e[e.SITE_APPLE=9]="SITE_APPLE",e[e.SITE_FEISHU=10]="SITE_FEISHU"}(J||(J={}))},323:function(e,t,n){"use strict";n.d(t,"j",(function(){return o})),n.d(t,"n",(function(){return c})),n.d(t,"m",(function(){return s})),n.d(t,"z",(function(){return l})),n.d(t,"l",(function(){return d})),n.d(t,"A",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"w",(function(){return h})),n.d(t,"i",(function(){return m})),n.d(t,"e",(function(){return g})),n.d(t,"p",(function(){return v})),n.d(t,"o",(function(){return y})),n.d(t,"k",(function(){return b})),n.d(t,"v",(function(){return k})),n.d(t,"c",(function(){return O})),n.d(t,"t",(function(){return T})),n.d(t,"r",(function(){return S})),n.d(t,"s",(function(){return E})),n.d(t,"x",(function(){return w})),n.d(t,"q",(function(){return D})),n.d(t,"h",(function(){return j})),n.d(t,"g",(function(){return _})),n.d(t,"u",(function(){return C})),n.d(t,"f",(function(){return I})),n.d(t,"a",(function(){return M})),n.d(t,"d",(function(){return A})),n.d(t,"y",(function(){return x}));n(33),n(112),n(62);var r=n(354),a=window.Appest.api_domain||window.location.host,i=window.Appest.ex_api_domain||"ex.".concat(window.location.host),o={API_HOST:"https://"+a+"/api/v2",API_HOST_V2:"https://"+a+"/api/v2",API_HOST_V2_PUB:"https://"+a+"/pub/api/v2",API_HOST_V1_PUB:"https://"+a+"/pub/api/v1",VERSION_API_HOST:"https://"+a+"/api/v2",API_HOST_V3:"https://"+a+"/api/v3",API_HOST_V1:"https://"+a+"/api/v1",MOCK_API_HOST_V2:"http://192.168.1.161:7300/mock/5d20565bc24b0a6ef1b48c2d/api/v2",EX_API_HOST:"https://".concat(i,"/")},c=window.Appest.is_product_mode,s=window.Appest.is_package_mode,u=!c&&!s,l=window.Appest.user,d=window.Appest.user.isGFS,f=(window.Appest.user.isTU,window.Appest.user.isDS,parseInt(window.Appest.user.inboxId.match(/\d+$/)[0],10));l.userId=f;var p=Object(r.a)(),h=window.Appest.protocol,m=window.Appest.domain,g=(u||"wss://ws.".concat(m,"/p"),u||"wss://wss.".concat(m,"/web"),window.Appest.end_date,"//"+window.Appest.cdn),v=window.Appest.language.replace("_","-").toLowerCase(),y=/zh\Scn/i.test(v),b=window.Appest.isCnSites,k=function(e,t){return t?e?"":"DIDA":"TickTick"}(y,b),O=window.Appest.productName,T=Math.pow(2,40),S=0x7ffffffffffffc00,E=-0x7ffffffffffffc00,w=100,D="zh-cn",j="".concat(g,"/static/img/avatar-new.png"),_="Calendar5959a2259161d16d23a4f272";var C={"#03A9F4":"#4AA6EF","#FFAC2A":"#F2B04B","#FE8567":"#F18181","#FFD422":"#FFD966","#BD988C":"#B79A8F","#FF67A6":"#ED70A5","#A1AFC9":"#A4AFC7","#DF5EFF":"#CF66F7","#A5C5C1":"#ABBDC4","#01BCD4":"#52B8D2","#94D050":"#A0BB31","#E5D29B":"#C0B89E","#4FC653":"#6CBE5E","#FF6060":"#EC6666","#85FFD9":"#6FE9BE","#EAFF52":"#DDE358","#436FFF":"#5992F8","#7A24FF":"#9842EB","#4BA6EF":"#4AA6EF","#53B8D2":"#52B8D2","#70C362":"#6CBE5E","#A1CE61":"#A0BB31","#F8D650":"#FFD966","#F3B04A":"#F2B04B","#EE8C6F":"#F18181","#ED71A5":"#ED70A5","#B6B4B7":"#ABA6B5","#ABC4C0":"#ABBDC4","#E2D3A1":"#C0B89E","#EEFE6F":"#DDE358","#702CF5":"#9842EB","#A3FCDC":"#6FE9BE","#4D6EF7":"#5992F8","#EC6B66":"#EC6666"},I=["transparent","#4AA6EF","#52B8D2","#6CBE5E","#A0BB31","#FFD966","#F2B04B","#F18181","#ED70A5","#CF66F7","#B79A8F","#A4AFC7","#ABA6B5","#ABBDC4","#C0B89E","#DDE358","#9842EB","#6FE9BE","#5992F8","#EC6666"],M=["#930000","#B45F06","#BF9002","#73761D","#38761D","#2A9364","#134F5C","#134397","#491C75","#731B63","#E13E39","#E69138","#F1C231","#A0BB31","#6CBE5E","#3BB780","#2AA6C1","#3876E4","#9842EB","#BE3B83","#EC6666","#F2B04B","#FFD966","#DDE358","#93C47D","#5DD1A8","#52B8D2","#5992F8","#9F4CEF","#D25294","#F18181","#F9CB9C","#FFE599","#D1D7A8","#B6D7A8","#6FE9BE","#7CEDEB","#4AA6EF","#CF66F7","#ED70A5","#B79A8F","#C9B49D","#C0B89E","#BDC2B0","#B6C5B0","#ABC4BC","#ABBDC4","#A4AFC7","#ABA6B5","#A9949E"],A=["#EEFE6F","#A3FCDC"],x={"#4BA6EF":"#62B0EF","#53B8D2":"#69BDD2","#70C362":"#80C375","#F8D650":"#F8DB68","#F3B04A":"#F3B961","#EE8C6F":"#EE9F88","#ED71A5":"#ED89B3","#CF66F7":"#D67EF7","#B79A8F":"#B7A7A1","#A4AFC7":"#B7BCC7","#B6B4B7":"#B7B7B7","#ABC4C0":"#ABC4C0","#EEFE6F":"#EEFE6F","#702CF5":"#915DF5","#A3FCDC":"#A3FCDC","#4D6EF7":"#6582F7","#A1CE61":"#A1CE61","#EC6B66":"#EC6B66","#E2D3A1":"#E2D3A1"}},324:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o}));var r=function(){return window.Appest&&window.Appest.language?window.Appest.language:window.intl&&window.intl.locale?window.intl.locale:window.navigator.language},a=function(e,t){return window.intl.formatMessage({id:e},t)},i=function(e){var t=e;t||(t=r());return/^(zh|ko|ja|tw)/i.test(t)},o=function(){return/^(zh)/i.test(r())}},326:function(e,t,n){"use strict";n.d(t,"a",(function(){return qn}));var r=n(550),a=n(101),i=n(659),o=(n(818),n(391)),c=(n(73),n(205),n(203),n(153),n(119),n(61),n(152),n(144),n(50),n(207),n(154),n(111),n(204),n(110),n(320)),s=n.n(c),u=n(339),l=n(330),d=n(318),f=n(412),p=n(331),h=n(374),m=n(365),g=n(605),v=n(344),y=n(329),b=n(442),k=n(377);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e){return Object(c.List)(e).toMap().mapEntries((function(e){var t=E(e,2),n=(t[0],t[1]);return[n.get("id"),n]}))}function j(e,t){var n=D(e),r=D(Object(c.fromJS)(t));return n.mergeDeep(r).toList()}function _(e,t){if(!t||!t.length)return e;var n=D(e),r=D(Object(c.fromJS)(t));return n.mergeWith((function(e,t){return e.merge(t)}),r).toList()}function C(e,t){if(!t||!t.length)return e;var n=D(e),r=D(Object(c.fromJS)(t));return n.mergeWith((function(e,t){return t||e}),r).toList()}var I=Object(c.List)((Object(p.c)(d.K.trash,"json")||[]).map((function(e){return Object(c.Map)(e)})));var M={status:!!Object(p.c)("isShowCountDown")&&"true"===Object(p.c)("isShowCountDown")};var A=Object(a.combineReducers)({taskList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.List)(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.X:var n=t.data.map((function(e){return l.O(Object(k.c)(e))}));return C(e,n);case u.k:var r=Object(c.fromJS)(t.data);return e.push(r);case u.M:var a=new Set(t.ids);return e.filter((function(e){return!a.has(e.get("id"))}));case u.Y:var i=t.data.map((function(e){return l.O(e)}));return C(e,i);case u.W:var o={};return e.forEach((function(e){o[e.get("id")]=e})),t.data.forEach((function(e){if(e.id){var t=o[e.id];t&&Object(h.m)(t),e.isDirty=!0}})),_(e,t.data);case u.a:return e.map((function(e){if(Object.prototype.hasOwnProperty.call(t.addChildIds,e.get("id"))){var n=t.addChildIds[e.get("id")],r=e.get("childIds")?Object(c.Set)(e.get("childIds")):Object(c.Set)();return e.set("childIds",Object(c.List)(r.merge(n))).set("isChildIdsDirty",!0).set("modifiedTime",v.a.formatToServerDate())}return e}));case u.db:return e.map((function(e){if(Object.prototype.hasOwnProperty.call(t.removeChildIds,e.get("id"))){var n=e.get("childIds");if(!n||0===n.size)return e;var r=new Set(t.removeChildIds[e.get("id")]),a=Object(c.List)(n.toArray().filter((function(e){return!r.has(e)})));return e.set("childIds",a).set("isChildIdsDirty",!0).set("modifiedTime",v.a.formatToServerDate())}return e}));case u.rb:return _(e,t.data);case u.C:return e.map((function(e){return e.get("id")===t.id?(Object(h.m)(e),e.merge(t.data).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}));case u.fd:return e.map((function(e){return e.get("id")===t.id?(Object(h.m)(e),e.set("title",t.title).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}));case u.Rc:return e.map((function(e){return e.get("id")===t.id?(Object(h.m)(e),e.set("content",t.content).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}));case u.Sc:return e.map((function(e){return e.get("id")===t.id?(Object(h.m)(e),e.set("desc",t.desc).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}));case u.Yc:return e.map((function(e){return e.get("id")===t.id?(Object(h.m)(e),e.set("sortOrder",t.order).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}));case u.cd:return e.map((function(e){return e.get("id")===t.id?(Object(h.m)(e),e.set("remindTime",t.remindTime).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}));case u.Qc:return e.map((function(e){return e.get("id")===t.id?(Object(h.m)(e),e.set("completedTime",t.completedTime).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}));case u.Pc:return e.map((function(e){return e.get("id")===t.id?e.set("commentCount",t.count).set("modifiedTime",v.a.formatToServerDate()):e}));case u.Mc:return e.map((function(e){return e.get("id")===t.id?(Object(h.m)(e),e.set("assignee",t.assignee).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}));case u.Vc:var s=t.exDate;return c.List.isList(t.exDate)||(s=Object(c.fromJS)(t.exDate)),e.map((function(e){return e.get("id")===t.id?(Object(h.m)(e),e.set("exDate",s).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}));case u.dd:return e.map((function(e){return e.get("id")===t.id?(Object(h.m)(e),e.set("tags",Object(c.List)(t.tags)).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}));case u.Nc:return e.map((function(e){return e.get("id")===t.id?(Object(h.m)(e),e.set("attachments",t.data).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}));case u.Oc:return e.map((function(e){return e.get("id")===t.id?(Object(h.m)(e),e.set("columnId",t.columnId).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}));case u.K:var d=t.ids;if(!d||!d.length)return e;var p=new Set(d);return e.filter((function(e){return!p.has(e.get("id"))}));case u.ab:return e.map((function(e){var n=e.get("id");return t.ids.includes(n)?e.update("projectId",(function(e){return t.pId})).set("modifiedTime",v.a.formatToServerDate()):e}));case u.j:return e.map((function(e){var n=e.get("id");if(t.ids.includes(n)){var r=e.get("tags")||Object(c.List)(),a=t.tagName.toLowerCase();return r.includes(a)?e:(Object(h.m)(e),e.set("tags",r.push(a)).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate()))}return e}));case u.kb:return e.map((function(e){var n=e.get("tags");if(n){var r=n.indexOf(t.tagName);return r>-1?(Object(h.m)(e),e.update("tags",(function(e){return e.delete(r)})).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}return e}));case u.Kc:return e.map((function(e){var n=e.get("tags");if(n){var r=n.indexOf(t.oldTagName);return r>-1?(Object(h.m)(e),e.setIn(["tags",r],t.newTagName).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}return e}));case u.Tc:return e.map((function(e){var n=e.get("id"),r=t.data[n];return r?(Object(h.m)(e),r.isDirty=!0,e.merge(r).set("modifiedTime",v.a.formatToServerDate())):e}));case u.bd:return e.map((function(e){return e.get("id")===t.id?(Object(h.m)(e),e.set("progress",t.progress).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}));case u.ad:return e.map((function(e){return e.get("id")===t.id?(Object(h.m)(e),e.set("priority",t.priority).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}));case u.Jc:return e.map((function(e){if(e.get("id")===t.id){var n=!1,r=e.update("items",(function(e){var r=e;return t.updated&&t.updated.length&&(t.updated.forEach((function(e){Object.prototype.hasOwnProperty.call(e,"status")&&(n=!0)})),r=j(e,t.updated)),t.deleted&&t.deleted.length&&(n=!0,r=r.filter((function(e){return!t.deleted.includes(e.get("id"))}))),r}));if(Object(h.m)(e),n){var a=e.get("progress"),i=e.get("status"),o=l.g(r);return o>=100&&!y.l(Object(c.List)([e])).toArray().filter((function(e){return e.get("id")!==t.id&&!l.T(e)})).length>0&&setTimeout((function(){Object(b.m)(Object(c.List)([r]),2)})),(a>=100||0!==i)&&o<100&&setTimeout((function(){Object(b.m)(Object(c.List)([r]),0)})),r.set("progress",o).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())}return r.set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())}return e}));case u.Xc:return e.map((function(e){return e.get("id")===t.id&&t.data?(Object(h.m)(e),e.merge(t.data).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}));case u.Uc:return e.map((function(e){return e.get("id")===t.id&&t.etag?e.set("etag",t.etag):e}));case u.Lc:return e.map((function(e){return e.get("id")===t.id&&t.timeZone?(Object(h.m)(e),e.set("timeZone",t.timeZone).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}));case u.nb:var m=t.oldTaskId,O=t.newTask;return e.map((function(e){return e.get("id")===m?(Object(h.f)(m),O):e}));case u.s:var T=t.id2etag,S=[];if(Object.keys(T).forEach((function(e){var t=T[e];S.push(t)})),S.length>0){var E={};e.forEach((function(e){E[e.get("id")]=e}));var w=[];return S.forEach((function(e){var t=e.id,n=E[t];if(delete e.parentId,null!=n)return n.get("isChildIdsDirty")?(delete e.childIds,e.isChildIdsDirty=!1,void w.push(e)):void w.push(e);w.push(e)})),_(e,w)}return e;case u.r:var D=t.id2etag,I=t.id2Original;return e.map((function(e){var t=e.get("id"),n=D[t],r=I[t];if(n){var a=!!r&&r.hashCode!==e.hashCode(),i=e.merge({etag:n,isNew:!1,isDirty:a,isCalendarNew:!1});return Object(g.a)(e.get("etag")),Object(h.f)(t),a&&Object(h.k)(r.taskData),f.a.setTask(i),i}return e}));case u.Zc:return e.map((function(e){return e.get("id")===t.id?(Object(h.m)(e),e.set("pomodoroSummaries",t.data).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}));case u.Wc:return e.map((function(e){return e.get("id")===t.id?(Object(h.m)(e),e.set("focusSummaries",t.data).set("isDirty",!0).set("modifiedTime",v.a.formatToServerDate())):e}));default:return e}},trashList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Z:var n=t.data.map((function(e){return l.O(e)}));return C(e,n);case u.S:return e.filter((function(e){return e.get("syncStatus")===m.g}));case u.eb:var r=new Set(t.ids||[]);return 0===r.size?e:e.filter((function(e){return!r.has(e.get("id"))}));case u.p:var a=new Set(t.ids);return e.map((function(e){return a.has(e.get("id"))?e.set("syncStatus",m.f):e}));case u.n:var i=new Set(t.ids);return e.map((function(e){return i.has(e.get("id"))?e.set("isAssignedNew",!1):e}));default:return e}},activeSelectedTaskIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.Map)({selected:[],active:""}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.z:return e.set("selected",[]);case u.tb:return e.set("active",t.taskId);case u.sb:return e.set("active",t.activeId||"").set("selected",t.selectedIds||[]);case u.hb:return e.update("selected",(function(e){return e.filter((function(e){return e!==t.taskId}))}));case u.ic:var n=t.taskId;return e.update("selected",(function(e){return e.includes(n)?e.filter((function(e){return e!==n})):e.concat([n])}));default:return e}},detailActiveSelectedTaskIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.Map)({selected:[],active:""}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.N:return e.set("selected",[]);case u.Q:return e.set("active",t.taskId);case u.P:return e.set("active",t.activeId||"").set("selected",t.selectedIds||[]);case u.O:return e.update("selected",(function(e){return e.filter((function(e){return e!==t.taskId}))}));case u.R:var n=t.taskId;return e.update("selected",(function(e){return e.includes(n)?e.filter((function(e){return e!==n})):e.concat([n])}));default:return e}},isShowCountDown:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Bb:return Object(p.f)("isShowCountDown",t.isShowCountDown),T({},e,{status:t.isShowCountDown});default:return e}}}),x=n(319),R=n.n(x),P=n(368),N=n(323),L=n(327),U=n(349);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e){return e.map((function(e){return Object(c.Map)(e)}))}var Y={id:d.G.all,name:"list_all",listType:d.t.smartProject,sortType:d.J.dueDate,taskType:"tasks",status:"show",order:0},W={id:d.G.today,name:"today",listType:d.t.smartProject,sortType:d.J.dueDate,taskType:"today",status:"show",order:1},K={id:d.G.tomorrow,name:"tomorrow",listType:d.t.smartProject,sortType:d.J.dueDate,taskType:"tomorrow",status:"hide",order:2},G={id:d.G.week,name:"list_week",listType:d.t.smartProject,sortType:d.J.dueDate,taskType:"week",status:"show",order:3},V={id:d.G.tkcalendar,name:"tk_calendar_project",listType:d.t.smartProject,sortType:d.J.dueDate,taskType:"calendar",status:"show",order:4},z={id:d.G.assignedme,name:"assigned_me",listType:d.t.smartProject,sortType:d.J.project,taskType:"assignedme",status:"auto",order:5},Z={id:N.z.inboxId,name:"list_inbox",listType:"project",sortType:d.J.inbox,taskType:"inbox",inAll:!0,order:6,color:Object(p.c)(d.K.inboxColor)||"transparent"},q={id:d.G.habit,name:"list_habit",listType:d.t.smartProject,taskType:"habit",status:"show"},J={id:d.G.summary,name:"list_summary",listType:d.t.smartProject,taskType:"summary",status:"show"},$=[Y,W,K,G,V,z,{id:d.G.completed,name:"list_completed",listType:d.t.smartProject,sortType:d.J.completedTime,taskType:"completed",status:"show"},{id:d.G.trash,name:"list_trash",listType:d.t.smartProject,sortType:d.J.trash,taskType:"trash",status:"show"},q,J];var X=Object(c.List)((Object(p.c)(d.K.projects,"json")||[]).map(U.e));var Q=Object(a.combineReducers)({smartProjectList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.List)(B($)),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.g.UPDATE_SMART_ORDERS:return e.map((function(e){var n=t.orders[e.get("id")];return void 0!==n?e.set("order",n):e}));case P.g.SET_SMART_SETTINGS:return e.map((function(e){var t=d.H[e.get("id")];if(t){var n=L.o(t),r=n.visibility,a=n.order,i=L.n(t),o={};return r&&(o.status=r),null!=a&&(o.order=a),i&&(o.sortType=i),e.merge(o)}return e}));case P.g.UPDATE_SMART_SORTTYPE:return e.map((function(e){return e.get("id")===t.id?e.update("sortType",(function(e){return t.sortType})):e}));case P.g.SET_SMART_PROJECT_COUNTS:return e.map((function(e){var n=e.get("id");return void 0!==t.data[n]?e.set("count",t.data[n]):e}));case P.g.UPDATE_SMART_STATUS:return e.map((function(e){return e.get("id")===t.id?e.update("status",(function(e){return t.status})):e}));default:return e}},projectList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.g.SET_LISTS:return R.a.isEmpty(t.data)?Object(c.List)():Object(c.List)((t.data||[]).map(U.e));case P.g.ADD_LIST:return e.push(U.e(t.data));case P.g.DELETE_LIST:return e.map((function(e){return e.get("id")===t.id?e.set("isDeleted",!0):e}));case P.g.REMOVE_LOCAL_LIST:return e.filter((function(e){return e.get("id")!==t.id}));case P.g.UPDATE_LIST:return e.map((function(e){if(e.get("id")===t.id&&t.data){Object(h.j)(e);var n=ee(e,t.data);return e.merge(n).set("isDirty",!0)}return e}));case P.g.UPDATE_LISTS:var n=t.ids;return e.map((function(e){if(n.includes(e.get("id"))&&t.data){t.data.isDirty=!0,Object(h.j)(e);var r=ee(e,t.data);return e.merge(r)}return e}));case P.g.UPDATE_LIST_SORTTYPE:return e.map((function(e){return e.get("id")===t.id?(Object(h.j)(e),e.set("sortType",t.sortType).set("isDirty",!0)):e}));case P.g.SET_LIST_ORDERS:var r={};return R.a.forEach(t.data,(function(e){r[e.id]=e.order})),e.map((function(e){var t=e.get("id"),n=r[t];return R.a.isNumber(n)?(Object(h.j)(e),e.set("sortOrder",n).set("isDirty",!0)):e}));case P.g.UPDATE_LIST_ORDER:return e.map((function(e){return e.get("id")===t.id?(Object(h.j)(e),e.set("sortOrder",t.order).set("isDirty",!0)):e}));case P.g.UPDATE_LIST_GROUPID:return e.map((function(e){return e.get("id")===t.id?(Object(h.j)(e),e.set("groupId",t.groupId).set("isDirty",!0)):e}));case P.g.UPDATE_LIST_USERCOUNT:return e.map((function(e){return e.get("id")===t.id?(Object(h.j)(e),e.update("userCount",(function(e){return t.userCount}))):e}));case P.g.UPDATE_LIST_MODE:return e.map((function(e){return e.get("id")===t.id?(Object(h.j)(e),e.set("viewMode",t.viewMode).set("isDirty",!0)):e}));case P.g.UPDATE_LIST_KANBAN_MODE:return e.map((function(e){return e.get("id")===t.id?(Object(h.j)(e),e.set("kanbanMode",t.kanbanMode).set("isDirty",!0)):e}));case P.g.UPDATE_LIST_NOTIFICATIONOPTIONS:return e.map((function(e){if(e.get("id")===t.id){var n=t.options;return Object(h.j)(e),e.set("notificationOptions",n).set("isDirty",!0)}return e}));case P.g.UPDATE_LIST_OWNER:return e.map((function(e){return e.get("id")===t.id?(Object(h.j)(e),e.set("isOwner",t.isOwner)):e}));case P.g.AFTER_COMMIT_PROJECTS:var a=t.id2etag,i=t.id2error,o=Object(c.List)();return e.forEach((function(e){var t=e.get("id");if(e.get("isDeleted")){i[t]&&(o=o.push(e))}else{var n=a[t];n?(o=o.push(e.set("etag",n).set("isNew",!1).set("isDirty",!1)),Object(h.d)(t)):o=o.push(e)}})),o;case P.g.AFTER_PULL_PROJECT_TASKS:return e.map((function(e){return e.get("id")===t.projectId?e.set("needPullTasks",!1):e}));default:return e}},projectInbox:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.Map)(Z),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.g.SET_INBOX:return e.merge(t.data);case P.g.UPDATE_SMART_ORDERS:var n=t.orders[e.get("id")];return void 0!==n?e.set("order",n):e;case P.g.UPDATE_INBOX_SORTTYPE:return e.update("sortType",(function(e){return t.sortType}));case P.g.UPDATE_INBOX_COLOR:return e.set("color",t.color);case P.g.UPDATE_INBOX_LISTMODE:return e.update("viewMode",(function(e){return t.viewMode}));default:return e}}});function ee(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t);if(n.kind){var r=new Set(d.v),a=new Set(d.M),i=e.get("sortType");switch(n.kind){case d.y.Note:null==i||r.has(i)||(n.sortType=r.values().next().value);break;case d.y.Task:default:null==i||a.has(i)||(n.sortType=a.values().next().value)}}return n}n(120);var te=n(457),ne=n(335);function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ie(e){ne.a.currentInitKanban.get("id")===e.get("projectId")&&ne.a.currentInitKanban.delete("id")}function oe(e){return e.map((function(e){return Object(c.Map)(e)}))}function ce(e){return Object(c.List)(e).toMap().mapEntries((function(e){var t=re(e,2),n=(t[0],t[1]);return[n.get("id"),n]}))}function se(e,t){var n=ce(e),r=ce(Object(c.fromJS)(t));return n.mergeWith((function(e,t){return e.merge(t)}),r).toList()}var ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.List)(oe(Object(p.c)(d.K.columns,"json")||[])),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.ub:var n=t.data.map((function(e){return te.a(e)}));return se(e,n);case u.b:var r=te.a(t.data).set("syncStatus",m.b);return ie(r),e.push(r);case u.D:return e.map((function(e){return e.get("id")===t.id?(ie(e),e.set("syncStatus",m.c)):e}));case u.mc:return e.map((function(e){if(e.get("id")===t.id){ie(e);var n=Object(te.b)(e)||Object(te.c)(e)?e.get("syncStatus"):m.a;return e.set("name",t.name).set("syncStatus",n)}return e}));case u.vb:var a=t.data;return e.map((function(e){var t=e.get("id");if(t in a){var n=Object(te.b)(e)||Object(te.c)(e)?e.get("syncStatus"):m.a;return ie(e),e.set("sortOrder",a[t]).set("syncStatus",n)}return e}));case u.lc:var i=t.deleted,o=t.updated;return se(e,o).filter((function(e){return!i.includes(e.get("id"))}));case u.oc:return e.map((function(e){return e.get("id")===t.id?e.set("status",t.status):e}));default:return e}},le=n(401);function de(e){return e.map((function(e){return le.a(e)}))}var fe=Object(c.List)(de(Object(p.c)(d.K.projectGroup,"json")||[]));var pe,he,me=Object(a.combineReducers)({groupList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.d.ADD_GROUP:var n=R.a.extend({open:!1,showAll:!0,isNew:!0},t.data);return e.push(le.a(n));case P.d.DELETE_GROUP:return e.map((function(e){return e.get("id")===t.id?e.set("isDeleted",!0):e}));case P.d.SET_GROUPS:return R.a.isEmpty(t.data)?Object(c.List)():Object(c.List)(de(t.data));case P.d.UPDATE_GROUP_SORTTYPE:return e.map((function(e){return e.get("id")===t.id?(Object(h.i)(e),e.set("sortType",t.sortType).set("isDirty",!0)):e}));case P.d.UPDATE_GROUP_NAME:return e.map((function(e){return e.get("id")===t.id?(Object(h.i)(e),e.set("name",t.name).set("isDirty",!0)):e}));case P.d.TOGGLE_GROUP_SHOWALL:return e.map((function(e){return e.get("id")===t.id?(Object(h.i)(e),e.update("showAll",(function(e){return!e})).set("isDirty",!0)):e}));case P.d.SET_GROUP_ORDERS:var r={};return R.a.forEach(t.data,(function(e){r[e.id]=e.order})),e.map((function(e){var t=e.get("id"),n=r[t];return R.a.isNumber(n)?(Object(h.i)(e),e.set("sortOrder",n).set("isDirty",!0)):e}));case P.d.AFTER_COMMIT_GROUPS:var a=t.id2etag,i=t.id2error,o=Object(c.List)();return e.forEach((function(e){var t=e.get("id");if(e.get("isDeleted")){i[t]&&(o=o.push(e))}else{var n=a[t];n?(o=o.push(e.set("etag",n).set("isNew",!1).set("isDirty",!1)),Object(h.c)(t)):o=o.push(e)}})),o;default:return e}}}),ge=(n(173),n(208),n(122),n(450)),ve=n(403),ye=n(354),be=n(494),ke=(pe=null,he=Object(c.List)(),function(e){return Object(c.is)(e,pe)?he:(pe=e,he=Object(be.c)(e))}),Oe=function(e,t,n){var r=e.countBy((function(e){return e.get("parent")||""}));return e.map((function(e){return e.get("name")===t?1===r.get(t)?(Object(be.e)(t,!1),e.get("sortType")===d.J.tag?(Object(h.l)(e),e.set("sortType",d.J.project).set("status",ge.d(e)?e.get("status"):ve.b.UPDATED)):e):e:e.get("name")===n?r.get(n)?e:(Object(be.e)(n,!0),Object(h.l)(e),e.set("sortType",d.J.tag).set("status",ge.d(e)?e.get("status"):ve.b.UPDATED)):e}))};function Te(e){return e||""}function Se(e){return ke(Object(c.List)(e.map(ge.c)))}var Ee=Se(Object(p.c)(d.K.tags,"json")||[]);var we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.h.SET_TAGS:var n;return n=R.a.isEmpty(t.data)?Object(c.List)():Se(t.data),e.hashCode()===n.hashCode()?e:n;case P.h.ADD_TAG:var r=t.data,a=ge.c(r),i=a.get("parent"),o=(i?Oe(e,null,i):e).push(a);return ke(o);case P.h.DELETE_TAG:var s=t.name,u=e.findIndex((function(e){return e.get("name")===s})),l=e.get(u);if(l){var d=l.get("parent");return(d?Oe(e,d):e).splice(u,1)}return e.splice(u,1);case P.h.UPDATE_TAG_NAME:var f=e.map((function(e){return e.get("name")===t.name?e.update("name",(function(e){return t.newName})):e}));return ke(f);case P.h.UPDATE_TAG_LABEL:var p=e.map((function(e){return e.get("name")===t.name?e.update("label",(function(e){return t.newLabel})):e}));return ke(p);case P.h.UPDATE_TAG_COLOR:return e.map((function(e){return e.get("name")===t.name?(Object(h.l)(e),e.get("status")===ve.b.NEW||e.get("status")===ve.b.INIT?e.set("color",t.color):e.set("color",t.color).set("status",ve.b.UPDATED)):e}));case P.h.UPDATE_TAG_PARENT:var m=e.find((function(e){return e.get("name")===t.name}));if(m){var g=m.get("parent"),v=Te(t.parent),y=Oe(e,g,v).map((function(e){return e.get("name")===t.name?e.set("parent",v).set("status",ge.d(e)?e.get("status"):ve.b.UPDATED):e}));return ke(y)}return e;case P.h.UPDATE_PARENT_OF_SUB_TAGS:var b=t.oldParent,k=t.newParent,O=Te(k),T=e.map((function(e){return e.get("parent")===b?e.get("status")===ve.b.NEW||e.get("status")===ve.b.INIT?e.set("parent",O):e.set("parent",O).set("status",ve.b.UPDATED):e}));return ke(T);case P.h.UPDATE_TAG_SORTORDER:var S=e.map((function(e){return e.get("name")===t.name?(Object(h.l)(e),e.get("status")===ve.b.NEW||e.get("status")===ve.b.INIT?e.set("sortOrder",t.sortOrder):e.set("sortOrder",t.sortOrder).set("status",ve.b.UPDATED)):e}));return ke(S);case P.h.UPDATE_TAG_SORTTYPE:return e.map((function(e){return e.get("name")===t.name?(Object(h.l)(e),e.get("status")===ve.b.NEW||e.get("status")===ve.b.INIT?e.set("sortType",t.sortType):e.set("sortType",t.sortType).set("status",ve.b.UPDATED)):e}));case P.h.SET_TAG_SORTORDERS:var E={};R.a.forEach(t.data,(function(e){E[e.name]=e.order}));var w=e.map((function(e){var t=e.get("name"),n=E[t];return R.a.isNumber(n)?(Object(h.l)(e),e.get("status")===ve.b.NEW||e.get("status")===ve.b.INIT?e.set("sortOrder",n):e.set("sortOrder",n).set("status",ve.b.UPDATED)):e}));return ke(w);case P.h.AFTER_COMMIT_TAGS:var D=t.id2etag;return e.map((function(e){var t=e.get("name");return D[t]?(Object(h.e)(t),e.set("status",ve.b.DONE)):e}));default:return e}};function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.h.SET_DRAFT_TAG:return ge.c({isDraft:!0,name:Object(ye.a)(),sortOrder:t.order,subTags:t.subTags});case P.h.CLEAR_DRAFT_TAG:return null;default:return e}}n(156);var je=n(359),_e=n(451);function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Me(e){return e.map(_e.d)}function Ae(e){return Object(c.List)(e).toMap().mapEntries((function(e){var t=Ce(e,2),n=(t[0],t[1]);return[n.get("id"),n]}))}function xe(e,t){var n=Ae(e),r=Ae(Me(t));return n.mergeDeep(r).toList()}var Re=Object(c.List)(Me(Object(p.c)(d.K.customSmartProjects,"json")||[])).sort(je.a.sortOrder);var Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.wb:return R.a.isEmpty(t.data)?Object(c.List)():Ae(Me(t.data)).toList().sort(je.a.sortOrder);case u.c:var n=R.a.extend({id:"",name:"",rule:"",sortOrder:"",createdTime:"",modifiedTime:"",sortType:"project",isNew:!0},t.data);return e.push(_e.d(n)).sort(je.a.sortOrder);case u.E:return e.map((function(e){return e.get("id")===t.id?e.set("isDeleted",!0):e}));case u.U:var r=t.data,a=new c.Set(r.map((function(e){return e.id})));return e.forEach((function(e){a.has(e.get("id"))&&Object(h.h)(e)})),Object(c.List)(xe(e,r));case u.qc:return e.map((function(e){return Object(h.h)(e),e.get("id")===t.id?e.update("rule",(function(e){return t.rule})):e}));case u.pc:return e.map((function(e){return Object(h.h)(e),e.get("id")===t.id&&t.data?(t.data.isDirty=!0,e.merge(t.data)):e}));case u.sc:return e.map((function(e){return Object(h.h)(e),e.get("id")===t.id?e.set("sortType",t.sortType).set("isDirty",!0):e}));case u.rc:var i={};return R.a.forEach(t.data,(function(e){i[e.id]=e.sortOrder})),e.map((function(e){var t=e.get("id"),n=i[t];return R.a.isNumber(n)?(Object(h.h)(e),e.set("sortOrder",n).set("isDirty",!0)):e})).sort(je.a.sortOrder);case u.o:var o=t.id2etag,s=t.id2error,l=Object(c.List)();return e.forEach((function(e){var t=e.get("id");if(e.get("isDeleted")){s[t]&&(l=l.push(e))}else{var n=o[t];n?(Object(h.b)(t),l=l.push(e.set("etag",n).set("isNew",!1).set("isDirty",!1))):l=l.push(e)}})),l;default:return e}},Ne=(n(356),function(e){return s.a.fromJS(Object.assign({id:"",name:"",url:"",type:d.G.subscribe,listType:"non-project",sortType:d.J.dueDate,taskType:"tasks",show:"show"},e))});function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fe=function(e){return Object(c.List)(e).map(Ne).toMap().mapEntries((function(e){var t=Le(e,2),n=(t[0],t[1]);return[n.get("id"),n]}))};var He=Object(a.combineReducers)({calendars:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.fromJS)(Object(p.c)(d.K.subscribeURLCalendars,"json")||{}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Vb:return Fe(t.calendars);case u.jb:return e.delete(t.id);case u.i:case u.Ic:return e.set(t.id,Ne(t.data));default:return e}},events:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.Map)(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Wb:return Object(c.Map)(t.data);case u.A:return Object(c.Map)();case u.Ub:return e.set(t.id,t.events);default:return e}}}),Be=n(518);function Ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return We(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ke=function(e){return e.map(Be.a)};function Ge(e){return Object(c.List)(e).toMap().mapEntries((function(e){var t=Ye(e,2),n=(t[0],t[1]);return[n.get("id"),n]}))}function Ve(e,t){if(!t||!t.length)return e;var n=Ge(e),r=Ge(Object(c.fromJS)(t));return n.mergeWith((function(e,t){return e.merge(t)}),r).toList()}var ze=function(e){return Object(c.fromJS)(e).toMap().mapEntries((function(e){var t=Ye(e,2),n=(t[0],t[1]);return[n.get("id"),n]}))};var Ze=Object(a.combineReducers)({accounts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.List)(Ke(Object(p.c)(d.K.subscribeAccounts,"json")||[])),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Rb:return R.a.isEmpty(t.data)?Object(c.List)():Object(c.List)(Ke(t.data));case u.ib:return e.filter((function(e){return e.get("id")!==t.id}));case u.Ec:return e.map((function(e){return e.get("id")===t.id?e.merge(t.data):e}));case u.u:var n=t.ids;return e.map((function(e){return n.includes(e.get("id"))?e.set("isValid",!1):e}));case u.g:var r=t.data;return e.push(Be.a(r));default:return e}},calendars:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.fromJS)(Object(p.c)(d.K.subscribeAccountCalendars,"json")||{}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Sb:return ze(t.calendars);case u.Fc:return e.merge(ze(t.calendars));case u.Gc:var n=t.id,r=t.visible;return e.update(n,(function(e){return e.set("show",r)}));default:return e}},events:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.fromJS)(Object(p.c)(d.K.subscribeAccountEvents,"json")||{}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Tb:return t.data;case u.h:var n=t.subscribeEvent;return e.update(n.get("accountId"),(function(e){return(e||Object(c.List)()).push(n)}));case u.Hc:var r=t.subscribeEvent,a=r.get("accountId"),i=r.get("id");return e.update(a,(function(e){return e.map((function(e){return e.get("id")===i?e.merge(r):e}))}));case u.w:var o=t.accountId,s=t.updateBeans;return e.update(o,(function(e){return Ve(e,s)}));case u.q:var l=t.localEventUpdateBeans;return e.map((function(e,t){var n=l[t];if(n){var r=n.update,a=n.delete,i=n.add||[];return Ve(e,r).filter((function(e){return!a.includes(e.get("id"))})).concat(i)}return e}));default:return e}}}),qe=n(341),Je=n(324);function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qe=function(e){return Object(c.fromJS)(R.a.uniqBy(e,(function(e){return e.userId})))};var et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.Map)(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Qb:var n=e,r=e.set(t.projectId,Qe(t.data).map((function(e){return e.set("isMyself",e.get("userId")===qe.a("userId")).set("displayName",e.get("deleted")?Je.a("account_not_exist"):e.get("displayName"))})));return Object(c.is)(n,r)?n:r;case u.v:return e.mergeWith((function(e,t){return t||e}),Object(c.List)(t.data).toMap().mapEntries((function(e){var t=$e(e,2),n=(t[0],t[1]);return[n.projectId,Qe(n.shareUsers).map((function(e){return e.set("isMyself",e.get("userId")===qe.a("userId")).set("displayName",e.get("deleted")?Je.a("account_not_exist"):e.get("displayName"))}))]})));case u.J:return e.update(t.projectId,(function(e){return e.filter((function(e){return e.get("recordId")!==t.recordId}))}));case u.Dc:return e.update(t.projectId,(function(e){return e.map((function(e){return e.get("recordId")===t.recordId?e.set("permission",t.permission):e}))}));case u.f:return e.update(t.projectId,(function(e){var n=e||Object(c.List)();0===n.size&&(n=n.push(Object(c.Map)({username:qe.a("username"),userCode:qe.a("userCode"),isOwner:!0,isAccept:!0,isMyself:!0,projectId:t.projectId,avatarUrl:qe.a("picture")})));var r=t.sharedUserModel;return n.push(r.set("displayName",r.get("deleted")?Je.a("account_not_exist"):r.get("displayName")))}));case u.jc:return e.update(t.projectId,(function(e){var n=t.userCode;return e.map((function(e){return e.get("isOwner")?e.set("isOwner",!1):e.get("userCode")===n?e.set("isOwner",!0):e}))}));default:return e}},tt={locale:"en",messages:{}};var nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.Map)(tt),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Ab:return Object(c.Map)({locale:t.locale,messages:t.messages});default:return e}};var rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.List)(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.zb:return Object(c.List)(t.data);default:return e}},at=n(372),it=n(345),ot=n(478),ct=n(393);function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dt={dailyReminders:[],enable:!1,holidayNotify:!1,notifyOptions:null,weekDays:null},ft=pt(Object(p.c)(d.K.preferences,"json")||{showMeridiem:!1,startDayOfWeek:"SUN",startWeekOfYear:"",theme:"grey",dateKeptInText:!0,nlpenabled:!0,removeTag:!0,weekNumbersEnabled:!1,holidayEnabled:!0,lunarEnabled:!1,collapsedTime:[7,21],showFutureTask:!1,showChecklist:!1,showCompleted:!0,notificationEnabled:!0,isTimeZoneOptionEnabled:!1,templateEnabled:!0,smartProjects:[{name:"inbox"},{name:"all"},{name:"today"},{name:"tomorrow"},{name:"n7ds"},{name:"calendar"},{name:"assignee"},{name:"completed"},{name:"trash"},{name:"stats"},{name:"summary"},{name:"tag"},{name:"filter"}],calendarViewConf:{cellColorType:"list",showChecklist:!1,showCompleted:!0,showDetail:!1,showFutureTask:!0},dailyRemindTimeConfig:{dailyReminders:[],enable:!1,holidayNotify:!1,notifyOptions:null,weekDays:null},showDetail:!1,isEmailEnabled:!1});function pt(e){if(e){if(delete e.dailyRemindTime,e.smartProjects&&e.smartProjects.length&&e.smartProjects.forEach((function(e){var t=e.visibility;t+""=="true"&&(e.visibility="show"),t+""=="false"&&(e.visibility="hide")})),e.defaultReminds&&e.defaultReminds.length&&(e.defaultReminds=at.g(e.defaultReminds,!0)),e.defaultADReminders&&e.defaultADReminders.length){var t=[];e.defaultADReminders.forEach((function(e){var n=at.b(e);t.indexOf(n)<0&&t.push(n)})),e.defaultADReminders=t}e.timeZone||(e.timeZone=Object(it.e)()),e.dailyRemindTimeConfig?null==e.dailyRemindTimeConfig.dailyReminders&&(e.dailyRemindTimeConfig.dailyReminders=[]):e.dailyRemindTimeConfig=dt,Object(ct.i)()||(e.theme="grey")}return e}var ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.Map)(ft),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.f.MERGE_PREFERENCE:return pt(t.data),Object(c.Map)(e.merge(t.data).toJS());case P.f.SET_SMART_PROJECTS:return e.set("smartProjects",t.data);case P.f.SET_DEFAULT_DUE_DATE:return e.set("defaultDueDate",t.data);case P.f.SET_DEFAULT_TO_ADD:return e.set("defaultToAdd",t.data);case P.f.SET_POSITION_OF_OVER_DUE:return e.set("posOfOverdue",t.data);case P.f.SET_LANGUAGE:return e.set("language",t.data);case P.f.SET_SHOW_MERIDIEM:return e.set("showMeridiem",t.data);case P.f.SET_START_DAY_OF_WEEK:return e.set("startDayOfWeek",t.data);case P.f.SET_START_WEEK_OF_YEAR:return e.set("startWeekOfYear",t.data);case P.f.SET_DAILY_REMIND_TIME:var n=e.get("dailyRemindTimeConfig");return e.set("dailyRemindTimeConfig",ut({},n,{dailyReminders:[t.data]}));case P.f.SET_DAILY_REMIND_ENABLE:var r=e.get("dailyRemindTimeConfig");return e.set("dailyRemindTimeConfig",ut({},r,{enable:t.data}));case P.f.SET_NOTIFICATION_ENABLE:return e.set("notificationEnabled",t.data);case P.f.SET_REMOVE_DATE:return e.set("removeDate",t.data);case P.f.SET_NLP_ENABLE:return e.set("nlpEnabled",t.data);case P.f.SET_TEMPLATE_ENABLE:return e.set("templateEnabled",t.data);case P.f.SET_KEEP_TAG_INTEXT:return e.set("removeTag",t.data);case P.f.SET_LUNAR_ENABLE:return e.set("lunarEnabled",t.data);case P.f.SET_WEEK_NUMBERS_ENABLE:return e.set("weekNumbersEnabled",t.data);case P.f.SET_TIMEZONE_OPTION_ENABLE:return e.set("isTimeZoneOptionEnabled",t.data);case P.f.SET_POMODORO_ENABLED:return e.set("pomodoroEnabled",t.data);case P.f.SET_HOLIDAY_ENABLE:return e.set("holidayEnabled",t.data);case P.f.SET_DEFAULT_PRIORITY:return e.set("defaultPriority",t.data);case P.f.SET_DEFAULT_REMINDS:return e.set("defaultReminds",t.data);case P.f.SET_DEFAULT_AD_REMINDERS:return e.set("defaultADReminders",t.data);case P.f.SET_THEME:return e.set("theme",t.data);case P.f.SET_INBOX_COLOR:return e.set("inboxColor",t.data);case P.f.TOGGLE_SHOWCOMPLETED:return e.update("showCompleted",(function(e){return!e}));case P.f.TOGGLE_SHOWCHECKLIST:return e.update("showChecklist",(function(e){return!e}));case P.f.TOGGLE_SHOWFUTURETASK:return e.update("showFutureTask",(function(e){return!e}));case P.f.UPDATE_COLLAPSEDTIME:return e.set("collapsedTime",t.data);case P.f.SET_WEBCALENDARVIEW_FILTER:return e.set("webCalendarViewFilter",t.data);case P.f.SET_WEBCALENDAR_VIEWTYPE:return e.set("webCalendarViewType",t.data);case P.f.SET_DEFAULT_TIME_MODE:return e.set("defaultTimeMode",t.data);case P.f.SET_DEFAULT_TIME_DURATION:return e.set("defaultTimeDuration",t.data);case P.f.SET_SHARED_PROJECT_NOTIFY_TOGGLE_ENABLE:var a=(e.get("notificationOptions")||[]).filter((function(e){return e!==ot.b.done&&e!==ot.b.undone}));return t.data?(a.push(ot.b.done,ot.b.undone),e.set("notificationOptions",a)):e.set("notificationOptions",a);case P.f.SET_SHARED_PROJECT_NOTIFY_ADD_ENABLE:var i=(e.get("notificationOptions")||[]).filter((function(e){return e!==ot.b.create}));return t.data?(i.push(ot.b.create),e.set("notificationOptions",i)):e.set("notificationOptions",i);case P.f.SET_SHARED_PROJECT_NOTIFY_DELETE_ENABLE:var o=(e.get("notificationOptions")||[]).filter((function(e){return e!==ot.b.delete&&e!==ot.b.moveOut}));return t.data?(o.push(ot.b.delete,ot.b.moveOut),e.set("notificationOptions",o)):e.set("notificationOptions",o);case P.f.TOGGLE_CAL_SHOW_CHECKLIST:return e.update("calendarViewConf",(function(e){return ut({},e,{showChecklist:!e.showChecklist})}));case P.f.TOGGLE_CAL_SHOW_COMPLETED:return e.update("calendarViewConf",(function(e){return ut({},e,{showCompleted:!e.showCompleted})}));case P.f.TOGGLE_CAL_SHOW_DETAIL:return e.update("calendarViewConf",(function(e){return ut({},e,{showDetail:!e.showDetail})}));case P.f.TOGGLE_CAL_SHOW_FUTURE_TASK:return e.update("calendarViewConf",(function(e){return ut({},e,{showFutureTask:!e.showFutureTask})}));case P.f.SET_CAL_CELL_COLOR:return e.update("calendarViewConf",(function(e){return ut({},e,{cellColorType:t.data})}));case P.f.TOGGLE_SHOW_DETAIL:return e.update("showDetail",(function(e){return!e}));case P.f.SET_EMAIL_ENABLE:return e.set("isEmailEnabled",t.data);case P.f.SET_DEFAULT_PROJECT_ID:return e.set("defaultProjectId",t.data);default:return e}};var mt,gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.Map)({userId:N.A,inboxId:N.z.inboxId,username:N.z.username,activeTeamUser:!1,teamUser:!1,pro:N.l}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.dc:return t.data.picture=t.data.picture||N.h,t.data.inboxId=e.get("inboxId")||N.z.inboxId,t.data.userId=e.get("userId")||N.A,t.data.teamUser=e.get("teamUser"),t.data.pro=e.get("pro"),t.data.activeTeamUser=e.get("activeTeamUser"),t.data.needSubscribe=e.get("needSubscribe"),t.data.subscribeType=e.get("subscribeType"),Object(c.Map)(t.data);case u.gd:return e.merge({userId:t.userId,inboxId:"inbox".concat(t.userId)});case u.cc:case u.x:case u.Jb:return e.merge(t.data);case u.yb:return e.set("filledPassword",t.data);case u.uc:return e.set("name",t.data);case u.Kb:return e.set("picture",t.data);case u.ec:return e.set("activeTeamUser",t.data.activeTeamUser).set("teamUser",t.data.teamUser).set("pro",t.data.pro).set("needSubscribe",t.data.needSubscribe).set("subscribeType",t.data.subscribeType);case u.hd:return e.set("needSubscribe",t.data);default:return e}},vt=(n(209),n(146),n(338)),yt=n.n(vt);function bt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ot={today:yt()().format("YYYY-MM-DD"),minute:yt()().format("YYYY-MM-DD-HH-mm"),hourHeight:parseFloat(p.c(d.K.timelineHourHeight))||52,fetching:!1,waiting:!1,miniKalendaeStatus:d.u.fold,searchKeyWords:sessionStorage.searchKeyWords||"",scheduleStatus:p.c(d.K.scheduleStatus)||"hide",allDayCollapse:"false"!==p.c(d.K.allDayCollapse),sectionCollapse:Object(c.Map)(p.c(d.K.sectionCollapse,"json")||{}),isTaskListEmpty:!0,taskCollapse:Object(c.Map)(p.c(d.K.taskCollapse,"json")||{}),isNoteEnabled:null!==(mt=p.b(d.K.isNoteEnabled))&&void 0!==mt&&mt};var Tt=[34,40,52,68,88,119];function St(e,t){var n=e.get("hourHeight");if(t){var r,a=bt(Tt);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i>n){n=i;break}}}catch(e){a.e(e)}finally{a.f()}}else for(var o=Tt.length-1;o>=0;o-=1)if(Tt[o]<n){n=Tt[o];break}return e.get("hourHeight")!==n?(p.f(d.K.timelineHourHeight,n),e.set("hourHeight",n)):e}var Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.Map)(Ot),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.c.SET_TODAY:return e.set("today",t.data);case P.c.SET_MINUTE:return e.set("minute",t.data);case P.c.SET_HOUR_HEIGHT:return p.f(d.K.timelineHourHeight,t.data),e.set("hourHeight",t.data);case P.c.SET_HOUR_HEIGHT_LEVEL_UP:return St(e,!0);case P.c.SET_HOUR_HEIGHT_LEVEL_DOWN:return St(e,!1);case P.c.SET_FETCHING_STATE:return e.set("fetching",t.data);case P.c.SET_WAITING_STATE:return e.set("waiting",t.data);case P.c.SET_SCHEDULE_STATUS:return p.f(d.K.scheduleStatus,t.data),e.set("scheduleStatus",t.data);case P.c.SET_MINIKALENDAE_STATUS:return e.set("miniKalendaeStatus",t.data);case P.c.TOGGLE_SECTION_COLLAPSE_STATUS:return e.update("sectionCollapse",(function(e){var n=t.path;return e.get(n)?e.delete(n):e.set(n,!0)}));case P.c.UPDATE_SEARCH_KEYWORDS:return e.set("searchKeyWords",t.data);case P.c.SET_IS_TASKLIST_EMPTY:return e.set("isTaskListEmpty",t.data);case P.c.TOGGLE_TASK_COLLAPSE_STATUS:return e.update("taskCollapse",(function(e){var n=t.path;return e.get(n)?e.delete(n):e.set(n,!0)}));case P.c.CLEAR_TASK_COLLAPSE_STATUS:return e.update("taskCollapse",(function(e){var n=t.envPath;return e.filter((function(e,t){return!t.startsWith(n)}))}));case P.c.SET_TASK_COLLAPSE_STATUS:return e.update("taskCollapse",(function(e){var n=t.envPath,r=t.ids.reduce((function(e,t){return e["".concat(n).concat(t)]=!0,e}),{});return e.merge(r)}));case P.c.SET_IS_NOTE_ENABLED:return e.set("isNoteEnabled",t.enabled);default:return e}};function wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jt(e){return Object(c.List)(e).toMap().mapEntries((function(e){var t=wt(e,2),n=(t[0],t[1]);return[n.get("id"),n]}))}function _t(e,t){var n=jt(e),r=jt(function(e){return e.map((function(e){return Object(c.Map)(e)}))}(t));return n.merge(r).toList()}function Ct(e,t){var n=e.get("order"),r=t.get("order");return n===r?0:n>r?1:-1}var It=Object(p.c)(d.K.taskOrderByDate,"json"),Mt=R.a.isArray(It)?It:[],At=Object(c.fromJS)(Mt);var xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Eb:var n=t.dates,r=e;return R.a.forEach(n,(function(t,n){R.a.forEach(t,(function(t,a){var i=e.find((function(e){return e.get("date")===n&&e.get("projectId")===a})),o=i&&i.get("orders")||Object(c.List)();o=t.changed.length?_t(o,t.changed).sort(Ct):Object(c.List)(),t.deleted.length&&t.deleted.forEach((function(e){var t=o.findIndex((function(t){return t.get("id")===e.id}));-1!==t&&(o=o.splice(t,1))})),r=i?r.map((function(e){return e.get("date")===n&&e.get("projectId")===a?e.set("orders",o):e})):r.push(Object(c.Map)({date:n,projectId:a,orders:o}))}))})),r;case u.ob:return e.filter((function(e){return e.get("projectId")!==t.projectId}));case u.wc:var a=t.date,i=t.projectId,o=t.addOrders,s=t.removedOrders;return e.map((function(e){return e.get("date")===a&&e.get("projectId")===i?e.update("orders",(function(e){if(s.length){var t=s.map((function(e){return e.id}));e=e.filter((function(e){return!~t.indexOf(e.get("id"))}))}return o.length&&(e=_t(e,o)),e.sort(Ct)})):e}));case u.Db:var l=t.date,d=t.projectId,f=t.orders,p=e.find((function(e){return e.get("date")===l&&e.get("projectId")===d}));return p?e.map((function(e){return e.get("date")===l&&e.get("projectId")===d?e.set("orders",Object(c.fromJS)(f).sort(Ct)):e})):e.push(Object(c.Map)({date:l,projectId:d,orders:Object(c.fromJS)(f).sort(Ct)})).sort(Ct);case u.xc:var h=t.oldProjectId,m=t.newProjectId;return e.update("projectId",(function(e){return e===h?m:e}));case u.G:var g=t.projectId;return e.filter((function(e){return e.get("projectId")!==g}));default:return e}};function Rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nt(e){return Object(c.List)(e).toMap().mapEntries((function(e){var t=Rt(e,2),n=(t[0],t[1]);return[n.get("id"),n]}))}function Lt(e,t){var n=Nt(e),r=Nt(function(e){return e.map((function(e){return Object(c.Map)(e)}))}(t));return n.merge(r).toList()}function Ut(e,t){var n=e.get("order"),r=t.get("order");return n===r?0:n>r?1:-1}var Ft=Object(p.c)(d.K.taskOrderByPriority,"json"),Ht=R.a.isArray(Ft)?Ft:[],Bt=Object(c.fromJS)(Ht);var Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Ib:var n=t.prioritys,r=e;return R.a.forEach(n,(function(t,n){R.a.forEach(t,(function(t,a){var i=e.find((function(e){return e.get("priority")===n&&e.get("projectId")===a})),o=i&&i.get("orders")||Object(c.List)();o=t.changed.length?Lt(o,t.changed).sort(Ut):Object(c.List)(),t.deleted.length&&t.deleted.forEach((function(e){var t=o.findIndex((function(t){return t.get("id")===e.id}));-1!==t&&(o=o.splice(t,1))})),r=i?r.map((function(e){return e.get("priority")===n&&e.get("projectId")===a?e.set("orders",o):e})):r.push(Object(c.Map)({priority:n,projectId:a,orders:o}))}))})),r;case u.qb:return e.filter((function(e){return e.get("projectId")!==t.projectId}));case u.Ac:var a=t.priority,i=t.projectId,o=t.addOrders,s=t.removedOrders;return e.map((function(e){return e.get("priority")===a&&e.get("projectId")===i?e.update("orders",(function(e){if(s.length){var t=s.map((function(e){return e.id}));e=e.filter((function(e){return!~t.indexOf(e.get("id"))}))}return o.length&&(e=Lt(e,o)),e.sort(Ut)})):e}));case u.Hb:var l=t.priority,d=t.projectId,f=t.orders,p=e.find((function(e){return e.get("priority")===l&&e.get("projectId")===d}));return p?e.map((function(e){return e.get("priority")===l&&e.get("projectId")===d?e.set("orders",Object(c.fromJS)(f).sort(Ut)):e})):e.push(Object(c.Map)({priority:l,projectId:d,orders:Object(c.fromJS)(f).sort(Ut)})).sort(Ut);case u.Bc:var h=t.oldProjectId,m=t.newProjectId;return e.update("projectId",(function(e){return e===h?m:e}));case u.I:var g=t.projectId;return e.filter((function(e){return e.get("projectId")!==g}));default:return e}};function Wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gt(e){return Object(c.List)(e).toMap().mapEntries((function(e){var t=Wt(e,2),n=(t[0],t[1]);return[n.get("id"),n]}))}function Vt(e,t){var n=Gt(e),r=Gt(function(e){return e.map((function(e){return Object(c.Map)(e)}))}(t));return n.merge(r).toList()}function zt(e,t){var n=e.get("order"),r=t.get("order");return n===r?0:n>r?1:-1}var Zt=Object(p.c)(d.K.taskOrderByList,"json"),qt=R.a.isArray(Zt)?Zt:[],Jt=Object(c.fromJS)(qt);var $t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Gb:var n=t.data,r=e;return Object.keys(n).forEach((function(t){var a=n[t].all,i=e.find((function(e){return e.get("listId")===t})),o=i?i.get("orders"):Object(c.List)();o=a&&a.changed&&a.changed.length?Vt(o,a.changed).sort(zt):Object(c.List)(),a&&a.deleted&&a.deleted.length&&a.deleted.forEach((function(e){var t=o.findIndex((function(t){return t.get("id")===e.id}));-1!==t&&(o=o.splice(t,1))})),r=i?r.map((function(e){return e.get("listId")===t?e.set("orders",o):e})):r.push(Object(c.Map)({listId:t,projectOrFolderID:"all",orders:o}))})),r;case u.Fb:var a=t.listId,i=t.orders,o=e.find((function(e){return e.get("listId")===a}));return o?e.map((function(e){return e.get("listId")===a?e.set("orders",Object(c.fromJS)(i).sort(zt)):e})):e.push(Object(c.Map)({listId:a,projectOrFolderID:"all",orders:Object(c.fromJS)(i).sort(zt)}));case u.pb:return Object(c.List)();case u.yc:var s=t.listId,l=t.addOrders,d=t.removedOrders;return e.map((function(e){return e.get("listId")===s?e.update("orders",(function(e){if(d.length){var t=d.map((function(e){return e.id}));e=e.filter((function(e){return-1===t.indexOf(e.get("id"))}))}return l.length&&(e=Vt(e,l)),e.sort(zt)})):e}));default:return e}};function Xt(e){return function(e){if(Array.isArray(e))return Qt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function en(e){return e.map((function(e){return c.Map(e)}))}var tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.List(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Lb:if(R.a.isEmpty(t.data))return c.List([c.Map({id:"plugin-duplicate",enabled:!0})]);var n=t.data.filter((function(e){return"plugin-duplicate"!==e.id}));return c.List(en([].concat(Xt(n),[{id:"plugin-duplicate",enabled:!0}])));case u.Cc:var r=!0,a=e.map((function(e){return e.get("id")===t.id?(r=!1,e.set("enabled",t.enabled)):e}));if(r){var i=c.Map({id:t.id,enabled:t.enabled});return a.push(i)}return a;default:return e}};function nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var an=function(e){return e&&("number"!=typeof e.pomoDuration||e.pomoDuration<5)&&(e.pomoDuration=5),e},on=Object(c.Map)(an(Object(p.c)(d.K.pomoSettings,"json"))||{id:N.A,shortBreakDuration:5,longBreakDuration:15,longBreakInterval:4,pomoGoal:4,autoPomo:!1,autoBreak:!1,lightsOn:!1,pomoDuration:25,soundsOn:!0}),cn=Object(p.c)(d.K.pomodoro,"json")||{},sn=cn.pomoTask?cn.pomoTask.id:"";function un(e){return Object(c.List)(e).toMap().mapEntries((function(e){var t=nn(e,2),n=(t[0],t[1]);return[n.get("id"),n]}))}function ln(e,t){var n=un(e),r=un(Object(c.fromJS)(t));return n.mergeDeep(r).toList()}var dn=Object(a.combineReducers)({pomoTaskId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Pb:return t.id;default:return e}},pomoStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pomo-ready",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Ob:return t.status;default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.Map)(on),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Nb:return e.merge(an(t.data));default:return e}},list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.List)(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Mb:return Object(c.fromJS)(t.data||[]);case u.V:var n=t.data;return ln(e,n);case u.e:return e.push(Object(c.Map)(t.data));case u.t:return e.map((function(e){return-1!==t.ids.indexOf(e.get("id"))?e.set("local",!1):e}));default:return e}}});n(155);var fn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{past:Object(c.List)(),present:{}},t=arguments.length>1?arguments[1]:void 0,n=e.past;switch(t.type){case u.kc:if(n.size){var r=n.last();return{past:n.pop(),present:r}}return e;case u.bb:return{past:n.push(t.data).slice(-10),present:{}};case u.gb:var a=n.findIndex((function(e){return e.key===t.key}));return-1!==a?{past:n.delete(a),present:{}}:{past:n,present:{}};case u.T:var i=t.index;return i<0||i>=n.size?e:{past:n.slice(0,i),present:n.get(i)};default:return e}};function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mn=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(n),!0).forEach((function(t){hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({webPomoTask:!1,sidebarGroup:!1},Object(p.c)(d.K.featurePrompt,"json")||{});var gn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.Map)(mn),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.xb:return Object(c.Map)(t.data);case u.tc:return e.merge(t.data);default:return e}};function vn(e){return e.map(c.Map)}var yn=Object(c.List)(vn(Object(p.c)(d.K.teams,"json")||[]));var bn=Object(a.combineReducers)({team:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.Map)(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Yb:return Object(c.Map)(t.data);case u.bc:return e.set("name",t.name);case u.B:return Object(c.Map)();default:return e}},teams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Zb:var n;return n=R.a.isEmpty(t.data)?Object(c.List)():Object(c.List)(vn(t.data)),e.hashCode()===n.hashCode()?e:n;default:return e}},members:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.List)(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.ac:return Object(c.fromJS)(t.data);case u.hc:return e.map((function(e){return e.get("userCode")===t.userCode?e.set("role",0):e.get("isMyself")?e.set("role",9):e}));case u.gc:return e.map((function(e){return e.get("userCode")===t.userCode?e.set("role",t.role):e}));case u.fc:return e.filter((function(e){return e.get("userCode")!==t.userCode}));case u.y:return Object(c.List)();default:return e}}}),kn=n(541);function On(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?On(Object(n),!0).forEach((function(t){Sn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):On(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function En(e){return e.map(kn.a)}var wn=Object(c.List)(En(Object(p.c)(d.K.taskTemplates,"json")||[]));var Dn=function(e,t,n){return e.map((function(e){return e.get("id")===t?e.merge(n):e}))},jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.id;switch(n){case u.Xb:var a;return a=R.a.isEmpty(t.data)?Object(c.List)():Object(c.List)(En(t.data)),e.hashCode()===a.hashCode()?e:a;case u.l:var i=t.data;return e.push(kn.a(i));case u.ed:return r?e.map((function(e){if(e.get("id")===r){var n=t.data;return e.get("status")===m.h.DONE&&(n=Tn({},n,{status:m.h.UPDATED})),e.merge(n)}return e})):e;case u.L:return r?Dn(e,r,{status:m.h.DELETED}):e;case u.lb:return r?e.filter((function(e){return e.get("id")!==r})):e;default:return e}};function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach((function(t){In(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function In(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mn(e){return e.map(kn.a)}var An=Object(c.List)(Mn(Object(p.c)(d.K.noteTemplates,"json")||[]));var xn=function(e,t,n){return e.map((function(e){return e.get("id")===t?e.merge(n):e}))},Rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.id;switch(n){case u.Cb:var a;return a=R.a.isEmpty(t.data)?Object(c.List)():Object(c.List)(Mn(t.data)),e.hashCode()===a.hashCode()?e:a;case u.d:var i=t.data;return e.push(kn.a(i));case u.vc:return r?e.map((function(e){if(e.get("id")===r){var n=t.data;return e.get("status")===m.h.DONE&&(n=Cn({},n,{status:m.h.UPDATED})),e.merge(n)}return e})):e;case u.F:return r?xn(e,r,{status:m.h.DELETED}):e;case u.fb:return r?e.filter((function(e){return e.get("id")!==r})):e;default:return e}},Pn=n(514),Nn=Object(Pn.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(p.c)(d.K.archivedEvents,"json")||[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.a:e.push(t.archivedEvent);break;case P.b:var n=e.findIndex((function(e){return e.key===t.archivedEvent.key}));e.splice(n,1)}return Object(p.f)(d.K.archivedEvents,JSON.stringify(e)),e})),Ln=(n(366),n(346),n(430)),Un=n(379);function Fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hn={preference:{enabled:!1,showInCalendar:!0,showInToday:!0},lastCheckinStamps:{},lastRecordStamps:{},habits:[],checkins:Object(Un.p)(),records:Object(Un.q)(),skipHabits:Object(Un.r)(),activeTabBar:"active"};function Bn(e,t,n){var r=e.checkins[t];if(r){var a=new Set(r.map((function(e){return e.id}))),i=r.reduce((function(e,t){return e.set(t.checkinStamp,t),e}),new Map);if(!a.has(n.id)){var o=i.get(n.checkinStamp);o?(n.id=o.id,o.updateWithHabitCheckin(n)):r.push(n)}}else e.checkins[t]=[n]}function Yn(e,t,n){var r=e.records[t];r?(new Set(r.map((function(e){return e.id}))).has(n.id)&&(n.id=Object(ye.a)()),r.push(n)):e.records[t]=[n]}function Wn(e,t,n){var r=n.id,a=e.checkins[t].find((function(e){return e.id===r}));a&&(a.updateWithHabitCheckin(n),a.fixCheckinTime(),a.polishValue(),a.fixStatus())}var Kn=Object(Pn.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.e.SET_LAST_CHECKIN_STAMP:var n=t.payload,r=n.habitId,a=n.lastCheckinStamp;e.lastCheckinStamps[r]=a;break;case P.e.SET_LAST_RECORD_STAMP:var i=t.payload,o=i.habitId,c=i.lastStamp;e.lastRecordStamps[o]=c;break;case P.e.SET_PREFERENCE:var s=t.payload.preference;e.preference=s;break;case P.e.SET_HABITS:e.habits=t.payload.habits;break;case P.e.ADD_HABIT:var u=t.payload.habit;e.habits.push(u);break;case P.e.ADD_HABITS:var l=t.payload.habits;l.forEach((function(t){e.habits.push(t)}));break;case P.e.UPDATE_HABIT_TOTAL_CHECKINS_AND_STREAKS:var d=t.payload,f=d.habitId,p=d.totalCheckins,h=d.maxStreak,m=d.currentStreak,g=e.habits.find((function(e){return e.id===f}));g&&(g.totalCheckIns!==p&&(g.totalCheckIns=p,g.syncStatus=ve.a.UPDATED),g.maxStreak!==h&&(g.maxStreak=h),g.currentStreak!==m&&(g.currentStreak=m));break;case P.e.UPDATE_HABIT:var v=t.payload,y=v.habitId,b=v.habit,k=e.habits.find((function(e){return e.id===y}));k&&k.updateWithHabit(b);break;case P.e.UPDATE_HABITS:var O=t.payload.habits,T=new Map(e.habits.map((function(e){return[e.id,e]})));O.forEach((function(e){var t=T.get(e.id);t&&t.updateWithHabit(e)}));break;case P.e.UPDATE_SYNC_HABITS:var S=t.payload.habits,E=new Map(e.habits.map((function(e){return[e.id,e]})));S.forEach((function(e){var t=E.get(e.id);if(t){var n=t.currentStreak,r=t.maxStreak;t.updateWithHabit(e),t.currentStreak=n,t.maxStreak=r}}));break;case P.e.UPDATE_HABIT_SYNC_STATUS:var w=t.payload,D=w.habitId,j=w.syncStatus,_=e.habits.find((function(e){return e.id===D}));_&&(_.syncStatus=j);break;case P.e.REMOVE_HABIT:var C=t.payload.habitId;e.habits=e.habits.filter((function(e){return C!==e.id}));break;case P.e.REMOVE_HABITS:var I=t.payload.habitIds,M=new Set(I);e.habits=e.habits.filter((function(e){return!M.has(e.id)}));break;case P.e.SET_SINGLE_HABIT_CHECKIN:var A=t.payload,x=A.habitId,R=A.checkinList;e.checkins[x]=R;break;case P.e.SET_HABIT_CHECKINS:var N=t.payload.checkins;Object.keys(N).forEach((function(t){var n,r=(null===(n=e.checkins[t])||void 0===n?void 0:n.filter((function(e){return e.syncStatus!==ve.a.DONE})))||[],a=(null==r?void 0:r.reduce((function(e,t){return e.set(t.id,t),e}),new Map))||new Map,i=N[t],o=new Set;N[t]=i.filter((function(e){return!o.has(e.id)&&(!a.has(e.id)&&(o.add(e.id),!0))})).concat(r)})),e.checkins=N;break;case P.e.ADD_HABIT_CHECKIN:var L=t.payload,U=L.habitId,F=L.checkin,H=F.mutableCopy();H.fixCheckinTime(),Bn(e,U,H);break;case P.e.ADD_SYNC_HABIT_CHECKIN:var B=t.payload.syncCheckins;B.forEach((function(t){var n=t.getData().mutableCopy();n.fixCheckinTime();var r=n.habitId;Bn(e,r,n)}));break;case P.e.UPDATE_HABIT_CHECKIN:var Y=t.payload,W=Y.habitId,K=Y.checkin;Wn(e,W,K);break;case P.e.UPDATE_SYNC_HABIT_CHECKIN:var G=t.payload.syncCheckins,V=Array.from(new Set(G.map((function(e){return e.getData().habitId})))),z=new Map(V.map((function(t){return[t,new Map(e.checkins[t].map((function(e){return[e.id,e]})))]})));G.forEach((function(e){var t,n,r=e.getData(),a=null!==(t=e.getOldId())&&void 0!==t?t:r.id,i=r.habitId,o=null===(n=z.get(i))||void 0===n?void 0:n.get(a);o&&(o.updateWithHabitCheckin(r),o.fixCheckinTime(),o.polishValue())}));break;case P.e.UPDATE_HABIT_CHECKIN_SYNC_STATUS:var Z=t.payload,q=Z.habitId,J=Z.checkinId,$=Z.syncStatus,X=e.checkins[q].find((function(e){return e.id===J}));X&&(X.syncStatus=$);break;case P.e.REMOVE_HABIT_CHECKIN:var Q=t.payload,ee=Q.habitId,te=Q.checkinId,ne=e.checkins[ee];e.checkins[ee]=ne.filter((function(e){return e.id!==te}));break;case P.e.REMOVE_SYNC_HABIT_CHECKIN:var re=t.payload.syncCheckins,ae=new Map;re.forEach((function(e){var t,n=e.getData();null==(null===(t=ae.get(n.habitId))||void 0===t?void 0:t.add(n.id))&&ae.set(n.habitId,(new Set).add(n.id))})),ae.forEach((function(t,n){e.checkins[n]=e.checkins[n].filter((function(e){return!t.has(e.id)}))}));break;case P.e.SET_HABIT_RECORDS:e.records=t.payload.records;break;case P.e.SET_SINGLE_HABIT_RECORDS:var ie,oe,ce,se=t.payload,ue=se.habitId,le=se.recordList,de=(null===(ie=e.records[ue])||void 0===ie?void 0:ie.filter((function(e){return e.syncStatus!==ve.a.DONE})))||[],fe=(null===(oe=e.records[ue])||void 0===oe||null===(ce=oe.filter((function(e){return e.syncStatus!==ve.a.DONE})))||void 0===ce?void 0:ce.reduce((function(e,t){return e.set(t.id,t),e}),new Map))||new Map;e.records[ue]=le.filter((function(e){return!fe.has(e.id)})).concat(de);break;case P.e.ADD_HABIT_RECORD:var pe=t.payload,he=pe.habitId,me=pe.record;Yn(e,he,me);break;case P.e.ADD_SYNC_HABIT_RECORD:var ge=t.payload.syncRecords;ge.forEach((function(t){var n=new Ln.e;n.updateWithHabitRecord(t.getData());var r=n.habitId;Yn(e,r,n)}));break;case P.e.UPDATE_HABIT_RECORD:var ye=t.payload,be=ye.habitId,ke=ye.payload,Oe=ke.content,Te=ke.emoji,Se=ke.id,Ee=e.records[be].find((function(e){return e.id===Se}));Ee&&(Ee.content=Oe,Ee.emoji=Te,Ee.syncStatus=ve.a.UPDATED);break;case P.e.UPDATE_SYNC_HABIT_RECORD:var we=t.payload.syncRecords,De=Array.from(new Set(we.map((function(e){return e.getData().habitId})))),je=new Map(De.map((function(t){return[t,new Map(e.records[t].map((function(e){return[e.id,e]})))]})));we.forEach((function(e){var t,n,r=e.getData(),a=r.habitId,i=null!==(t=e.getOldId())&&void 0!==t?t:r.id,o=null===(n=je.get(a))||void 0===n?void 0:n.get(i);o&&o.updateWithHabitRecord(r)}));break;case P.e.UPDATE_HABIT_RECORD_SYNC_STATUS:var _e=t.payload,Ce=_e.habitId,Ie=_e.recordId,Me=_e.syncStatus,Ae=e.records[Ce].find((function(e){return e.id===Ie}));Ae&&(Ae.syncStatus=Me);break;case P.e.DELETE_HABIT_RECORD:var xe=t.payload,Re=xe.habitId,Pe=xe.recordId,Ne=e.records[Re].find((function(e){return e.id===Pe}));Ne&&(Ne.syncStatus=ve.a.DELETED);break;case P.e.REMOVE_HABIT_RECORD:var Le=t.payload.record,Ue=Le.habitId,Fe=Le.id;e.records[Ue]=e.records[Ue].filter((function(e){return e.id!==Fe}));break;case P.e.REMOVE_SYNC_HABIT_RECORD:var He=t.payload.syncRecords,Be=new Map;He.forEach((function(e){var t,n=e.getData();null==(null===(t=Be.get(n.habitId))||void 0===t?void 0:t.add(n.id))&&Be.set(n.habitId,(new Set).add(n.id))})),Be.forEach((function(t,n){e.records[n]=e.records[n].filter((function(e){return!t.has(e.id)}))}));break;case P.e.RESET_SKIP_HABITS:e.skipHabits=Fn({},(new Date).ap.YYYYMMDD,[]);break;case P.e.ADD_SKIP_HABIT:var Ye=t.payload.habitId,We=(new Date).ap.YYYYMMDD,Ke=e.skipHabits[We];Ke?Ke.push(Ye):e.skipHabits[We]=[Ye];break;case P.e.SET_ACTIVE_TAB_BAR:var Ge=t.payload.key;e.activeTabBar=Ge;break;case P.e.REMOVE_HABIT_CHECKINS_AND_RECORDS:var Ve=t.payload.habitId;delete e.checkins[Ve],delete e.records[Ve]}return e})),Gn={isEdit:!1,prevSectionId:void 0,nextSectionId:void 0,projectId:void 0};var Vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.Map)(Gn),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.m:return Object(c.Map)({isEdit:!0,prevSectionId:t.prevSectionId,nextSectionId:t.nextSectionId,projectId:t.projectId});case u.mb:return Object(c.Map)({isEdit:!1,prevSectionId:void 0,nextSectionId:void 0,projectId:void 0});default:return e}},zn=function(e){return Object(a.combineReducers)({tags:we,draftTag:De,tasks:A,projects:Q,columns:ue,groups:me,customSmartProjects:Pe,locales:nt,holidayData:rt,preference:ht,plugins:tn,userProfile:gt,globalState:Et,subscribeCalendars:He,subscribeAccounts:Ze,sharedUsers:et,orderByDate:xt,orderByPriority:Yt,orderByList:$t,pomodoro:dn,history:fn,featurePrompt:gn,teams:bn,taskTemplates:jn,noteTemplates:Rn,archivedEvents:Nn,habit:Kn,tempSection:Vn,router:Object(o.a)(e)})},Zn=Object(r.b)({hashType:"noslash"}),qn=Object(a.createStore)(zn(Zn),Object(a.applyMiddleware)(Object(i.a)(Zn)));window.userTimeZone=qn.getState().preference.get("timeZone")},327:function(e,t,n){"use strict";n.d(t,"w",(function(){return M})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return R})),n.d(t,"i",(function(){return P})),n.d(t,"t",(function(){return N})),n.d(t,"p",(function(){return L})),n.d(t,"v",(function(){return U})),n.d(t,"n",(function(){return F})),n.d(t,"o",(function(){return H})),n.d(t,"g",(function(){return B})),n.d(t,"a",(function(){return Y})),n.d(t,"d",(function(){return W})),n.d(t,"e",(function(){return K})),n.d(t,"s",(function(){return G})),n.d(t,"m",(function(){return V})),n.d(t,"h",(function(){return z})),n.d(t,"u",(function(){return Z})),n.d(t,"j",(function(){return q})),n.d(t,"k",(function(){return J})),n.d(t,"l",(function(){return $})),n.d(t,"r",(function(){return X})),n.d(t,"q",(function(){return Q})),n.d(t,"f",(function(){return ee}));n(205),n(203),n(61),n(152),n(155),n(120),n(210),n(416),n(50),n(121),n(111),n(204),n(110),n(350);var r=n(319),a=n.n(r),i=n(320),o=n(338),c=n.n(o),s=n(326),u=n(318),l=n(328),d=n(354),f=n(324),p=n(335),h=n(334),m=n(340),g=n(376),v=n(345),y=n(643),b=n(344),k=n(481),O=(n(464),n(341)),T=(n(492),n(393),n(333));function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){_(i,r,a,o,c,"next",e)}function c(e){_(i,r,a,o,c,"throw",e)}o(void 0)}))}}var I=function(){return s.a.getState().preference},M=function(){var e=C(regeneratorRuntime.mark((function e(){var t,n,r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Object(m.N)(),Object(m.E)()]);case 2:return t=e.sent,n=D(t,2),r=n[0],a=n[1],i=E({},r.data,{dailyRemindTimeConfig:a.data,templateEnabled:!0}),s.a.dispatch(Object(y.a)(i)),b.a.tryToUpdateMomentConfig(G()),Object(k.e)(),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(e,t,n){var r,a=I(),i="",o=l.a.prefMomentFromUtc(e,u.m.atomTime),c=l.a.getDueDateLocalZoneDate(e).diff(l.a.startOfDay(),"days");return 0===c?t?i+=f.a("today"):(r=f.c()?"A hh:mm":"hh:mm A",i+=" "+(a.get("showMeridiem")?o.format(r):o.format("HH:mm"))):1===c?t||p.a.currentSortType.get("sortType")!==u.J.dueDate||n?i+=f.a("tomorrow"):(r=f.c()?"A hh:mm":"hh:mm A",i+=" "+(a.get("showMeridiem")?o.format(r):o.format("HH:mm"))):-1===c?i+=f.a("yesterday"):c>0&&c<=6?i+=o.format("ddd"):l.a.getDueDateLocalZoneDate(e).year()===l.a.prefMoment().year()?i+=" "+o.format(Object(g.a)("MMMD")):i+=" "+o.format(Object(g.a)("ll")),i},x=function(e){return I().get(e)},R=function(){var e=I();e.has("dailyRemindTimeConfig")||e.set("dailyRemindTimeConfig",{dailyReminders:[],enable:!1,holidayNotify:!1,notifyOptions:null,weekDays:null});var t,n,r,a,i=e.get("dailyRemindTimeConfig");return!1===i.enable?u.f:(t=i.dailyReminders,r=null,a=/[0-9]{2}:[0-9]{2}/,null==t||t.forEach((function(e){var t=e;a.test(t)||3!==t.length||(t="0"+t),(null==r||e<r)&&(r=e)})),null!==(n=r)&&void 0!==n?n:u.f)},P=function(e,t){t=t||"HH:mm";var n=I();return Object(v.i)("1984-04-12",e,n.get("showMeridiem")).locale("en").format(t)},N=function(){var e=I();return e.get("sortTypeOfInbox")?e.get("sortTypeOfInbox"):u.J.dueDate},L=function(e){return e||(e=I().get("theme")),u.N[e]&&u.N[e].className||u.N.classic.className},U=function(e){return e||(e=I().get("theme")),e===u.N.night.id},F=function(e){var t=I();switch(e){case"all":return t.get("sortTypeOfAllProject")===u.J.assignee?u.J.dueDate:t.get("sortTypeOfAllProject")||u.J.dueDate;case"today":return t.get("sortTypeOfToday")||u.J.dueDate;case"tomorrow":return t.get("sortTypeOfTomorrow")||u.J.dueDate;case"n7ds":return t.get("sortTypeOfWeek")||u.J.dueDate;case"assignee":return t.get("sortTypeOfAssignMe")||u.J.project;default:return null}},H=function(e){return(I().get("smartProjects")||[]).filter((function(t){return t.name===e}))[0]||{}},B=function(e){var t=I(),n=e?t.get("defaultADReminders"):t.get("defaultReminds");return e||n?n:["TRIGGER:PT0S"]},Y=function(e){var t=B(e);return t?Object(i.fromJS)(a.a.map(t,(function(e){return{id:Object(d.a)(),trigger:e}}))):Object(i.List)()},W=function(){var e=null;switch(I().get("defaultDueDate")){case 1:e=l.a.getStartOfToday();break;case 2:e=l.a.getStartOfTomorrow();break;case 3:e=l.a.getStartOfNdayslater(2);break;case 7:e=l.a.getNextWeekStartOfDay()}return e},K=function(){return I().get("defaultPriority")||0},G=function(){switch(I().get("startDayOfWeek")){case"SUN":return 0;case"MON":return 1;case"SAT":return 6;default:return 0}},V=function(e,t,n,r){return e?function(e,t,n,r){if(t&&e!==t&&l.a.prefMoment(e).format("YYYY-MM-DD")!==l.a.prefMoment(t).format("YYYY-MM-DD")){var a=I(),i="",o=l.a.prefMomentFromUtc(e,u.m.atomTime);t=l.a.getRealDueDate(t,n).utc().format(u.m.atomTime);var c,s=l.a.prefMomentFromUtc(t,u.m.atomTime),d=l.a.prefMoment().startOf("day").diff(l.a.getDueDateLocalZoneDate(e),"days"),m=l.a.prefMoment().startOf("day").diff(l.a.getDueDateLocalZoneDate(t),"days");return h.F()?(-1===m?n||null===n?i=f.a("tomorrow"):(c=f.c()?"A hh:mm":"hh:mm A",i=a.get("showMeridiem")?s.format(c):s.format("HH:mm")):m<-1&&(i=f.a("tomorrow")),i):0===d?(n||null===n?i=f.a("today"):(c=f.c()?"A hh:mm":"hh:mm A",i=" "+(a.get("showMeridiem")?o.format(c):o.format("HH:mm"))),i):-1===d?(n||p.a.currentSortType.get("sortType")!==u.J.dueDate||r?i+=f.a("tomorrow"):(c=f.c()?"A hh:mm":"hh:mm A",i+=" "+(a.get("showMeridiem")?o.format(c):o.format("HH:mm"))),i):0===m?(n||null===n?i=f.a("today"):(c=f.c()?"A hh:mm":"hh:mm A",i=" "+(a.get("showMeridiem")?s.format(c):s.format("HH:mm"))),i):d>0&&m<0?i=f.a("today"):d<0?(l.a.getDueDateLocalZoneDate(e).year()==l.a.prefMoment().year()?i+=" "+o.format(Object(g.a)("MMMD")):i+=" "+o.format(Object(g.a)("ll")),i):m>0?(l.a.getDueDateLocalZoneDate(t).year()===l.a.prefMoment().year()?i+=" "+s.format(Object(g.a)("MMMD")):i+=" "+s.format(Object(g.a)("ll")),i):i}return A(e,n,r)}(e,t,n,r):""},z=function(){var e=I().get("lunarEnabled");return void 0===e||e},Z=function(){return(I().get("defaultTimeDuration")||0)%1440==0},q=function(e){if(!e||"-1"===e)return null;var t=I(),n=c()(e,"HH:mm").locale("en"),r=t.get("showMeridiem")?"hh:mm A":"HH:mm";return n.format(r)},J=function(e,t){if(t=t||"HH:mm",e&&"-1"!==e){var n=I(),r=l.a.dateFormatToMoment(e,t),a=n.get("showMeridiem")?f.c()?"A hh:mm":"hh:mm A":"HH:mm";return r.format(a)}},$=function(){var e=I(),t=e.get("id"),n={},r=H("inbox").order;return null!=r&&(n.order=r),n.id="inbox".concat(t),n.color=e.get("inboxColor"),n.sortType=N(),n.name=f.a("list_inbox"),n},X=function(e){var t=s.a.getState().preference.get("startWeekOfYear");Number.isNaN(+t)&&(t=""),t||(t="0101");var n=e.getFullYear(),r=+t.slice(0,2),a=+t.slice(2),i=new Date(n,r-1,a),o=c()(i).startOf("week"),u=o.year()-n!=0,l=c()(e),d=u?c()(i).add(1,"year").week():c()(i).week();return l.week()===d?1:(l.isAfter(o)||(o=c()(i).subtract(1,"years").startOf("weeks")),l.diff(o,"weeks")+1)},Q=function(e){var t=parseInt("".concat(e),10);return Number(t)?t>365&&(t=365):t=1,t},ee=function(){var e=I().get("defaultProjectId")||O.a("inboxId");return T.n(e)?e:O.a("inboxId")}},328:function(e,t,n){"use strict";n(33),n(158);var r=n(338),a=n.n(r),i=n(324),o=n(318),c=n(327),s=n(475),u=n(376),l="YYYY-MM-DDTHH:mm:00.000ZZ",d={},f={prefMoment:function(e){var t;if(e){if(e.isTimeZoneParsed)return e;if(d[e])return d[e].clone();t=/^\d{4}-\d{2}-\d{2}$/.test(e)?window.tickDate(e).add(1,"hour").startOf("day"):window.tickDate(e),d[e]=t.clone()}else t=window.tickDate(e);return t},toMoment:function(e){return a()(e)},prefMomentFromUtc:function(e,t){return window.tickDate(a.a.utc(e,t).local()._d)},prefMomentUtc:function(e){return a.a.utc(e)},formatUtcToDateString:function(e){return f.prefMomentFromUtc(e,l).format("YYYY-MM-DD")},startOfDay:function(e){return window.tickDate(e).startOf("day")},getOffsetOfDay:function(e,t){return f.startOfDay(e).diff(f.startOfDay(t),"day")},getOffsetOfToday:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"day";return f.startOfDay(e).diff(f.startOfDay(),t)},getRealDueDate:function(e,t,n){var r=f.prefMoment(e||void 0);return n?r:t&&r.isSame(r.clone().startOf("day"))?r.subtract(1,"d"):r},buildRealDueDate:function(e,t){var n=f.prefMoment(e||void 0);return t&&n.isSame(n.clone().startOf("day"))?n.add(1,"d"):n},buildRealEventDueDate:function(e,t,n){var r=f.prefMoment(e||void 0),a=f.prefMoment(t||void 0);return n&&r.isSame(a.clone().startOf("day"))?a.add(1,"d"):a},formatToUtc:function(e){if(e)return window.tickDate(e).utc().format(l)},formatToDateString:function(e){return window.tickDate(e).format("YYYY-MM-DD")},formatToDate:function(e){if(!e)return"";var t="",n=i.c(),r=f.getDueDateLocalZoneDate(e).year()!==f.prefMoment().year();return t=n?r?"YYYYMMMDo":"MMMDo":r?Object(u.a)("MMMMD")+", YYYY":Object(u.a)("MMMMD"),a()(e).format(t)},getLater:function(e,t,n){return f.formatToDateString(tickDate(e).add(t,n))},getOneDayLater:function(e){return f.getLater(e,1,"days")},getWeekLater:function(e){return f.getLater(e,7,"days")},getMonthLater:function(e){return f.getLater(e,1,"months")},getYearLater:function(e){return f.getLater(e,1,"years")},get5YearLater:function(e){return f.getLater(e,5,"years")},getStartOfDay:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,r=f.prefMoment().startOf("day");return r.add(e,t).format(n)},getStartOfToday:function(){return f.prefMoment().startOf("day").format(l)},getStartOfTomorrow:function(){return f.prefMoment().add(1,"day").startOf("day").format(l)},getStartOfNextWeek:function(){var e=f.getInWhichDayOfWeek();return f.prefMoment().add(7-e,"day").startOf("day").format(l)},getNextWeekStartOfDay:function(e,t){return f.prefMoment(e).add(7,"days").startOf("day").format(l)},getStartOfNdayslater:function(e){return f.prefMoment().add(e,"day").startOf("day").format(l)},getStartOfNextMonthDate:function(e){return f.prefMoment(e).add(1,"month").startOf("month")},getStartOfPrevMonthDate:function(e){return f.prefMoment(e).subtract(1,"month").startOf("month")},getCurrentInWhichDayOfWeek:function(e){var t=tickDate().day(),n=void 0===e?c.s():e,r=(0===t?7:t)-1;return 0===n?(r+1)%7:6===n?(r+2)%7:r},getToday:function(){var e=tickDate();return f.getDateRange(e,e)},getYesterday:function(){var e=tickDate().subtract(1,"days");return f.getDateRange(e,e)},getThisWeek:function(e){var t=f.getCurrentInWhichDayOfWeek(e),n=tickDate().subtract(t,"day"),r=tickDate().add(6-t,"day");return f.getDateRange(n,r)},getLastWeek:function(e){var t=f.getCurrentInWhichDayOfWeek(e),n=tickDate().subtract(t+7,"day"),r=tickDate().add(-1-t,"day");return f.getDateRange(n,r)},getThisMonth:function(){var e=tickDate().date(1),t=tickDate().endOf("month");return f.getDateRange(e,t)},getLastMonth:function(){var e=tickDate().month()-1,t=tickDate().month(e).startOf("month"),n=tickDate().month(e).endOf("month");return f.getDateRange(t,n)},getDateRange:function(e,t){return{startDay:f.formatToUtc(e.format("YYYY-MM-DD")),endDay:f.formatToUtc(tickDate(t.format("YYYY-MM-DD")).endOf("day"))}},getUnix:function(e){return f.prefMoment(e).unix()},getUnixInMinute:function(e){return f.prefMoment(e).startOf("minute").unix()},getDueDateClass:function(e,t,n){var r="real-color-theme";if(!e)return r;t&&!n&&(e=f.formatToUtc(f.getRealDueDate(e,!0)));var a=f.prefMoment().startOf("day"),i=f.getDueDateLocalZoneDate(e).diff(a,"days");return 0!==i||!t&&!n&&f.prefMoment(e).isSame(a)?i<=0&&(r="duedate-overdue"):r="duedate-today real-color-theme",r},getDueDateLocalZoneDate:function(e){if(e)return f.prefMomentFromUtc(e).startOf("day")},formatActivityTime:function(e){return Object(s.b)(e,c.b("showMeridiemr"),i.c(),i.a("just_now"))},dateFormatToMoment:function(e,t){return a()(e,t)},formatToUtcString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.m.atomTime;return f.prefMoment(e).utc().format(t)},getDiffEnd:function(e,t,n,r){if(r=r||"minutes",null==t)return null;var a=f.prefMoment(t).diff(e,r);return n?f.prefMoment(n).add(a,r):a},getInWhichDayOfWeek:function(e,t){var n=f.prefMoment(e).day(),r=void 0===t?c.s():t,a=(0===n?7:n)-1;return 0===r?(a+1)%7:6===r?(a+2)%7:a},getStartOfMonth:function(e){return f.prefMoment(e||void 0).startOf("month")},getEndOfMonth:function(){return f.prefMoment().endOf("month")},getStartOfWeek:function(e){var t=f.getInWhichDayOfWeek(e);return f.prefMoment(e).subtract(t,"day").startOf("day")},getEndOfWeek:function(e){var t=f.getInWhichDayOfWeek(e);return f.prefMoment(e).add(6-t,"day").endOf("day")},getWeekByDate:function(e,t){void 0===t&&(t=c.s());var n=f.prefMoment(e).day(),r=(0===n?7:n)-1,a=0===t?(r+1)%7:6===t?(r+2)%7:r,i=f.prefMoment(e).subtract(a,"day"),o=f.prefMoment(e).add(6-a,"day");return f.getDateRange(i,o)},isDateBetweenRange:function(e,t,n){var r=f.prefMoment(e),a=f.prefMoment(t).startOf("day"),i=f.prefMoment(n).endOf("day");return r-a>=0&&r-i<=0},getDueDateText:function(e){var t=f.getDueDateLocalZone(e);return t?t.format("YYYY-MM-DD"):""},getDueDateLocalZone:function(e){if(null!=e&&""!=e)return f.prefMomentFromUtc(e)},formatRecentlyDueDateTip:function(e){var t="",n=f.getDueDateLocalZoneDate(e).diff(f.prefMoment().startOf("day"),"days");if(0===n)t+=i.a("today");else if(1===n)t+=i.a("tomorrow");else if(-1===n)t+=i.a("yesterday");else if(n>0&&n<=6)t+=a()(e).format("ddd");else{var r=a()().utc().startOf("day");if(n>0){var o=a()().utc().startOf("day").add(1,"months");f.getDueDateLocalZoneDate(e).diff(o,"days")<0?t+=i.a("days_later",{s1:n}):(t+=r.from(e,!0),t=i.a("later",{s:t}))}else t+=r.from(e,!0),t=i.a("ago",{s:t})}return t},formatRecentlyPreviewDueDateTip:function(e){var t="",n=f.getDueDateLocalZoneDate(e).diff(f.prefMoment().startOf("day"),"days");return 0===n?t+=i.a("today"):1===n?t+=i.a("tomorrow"):-1===n?t+=i.a("yesterday"):n>0&&n<=6&&(t+=a()(e).format("ddd")),t},daysFromMonthStart:function(){return(new Date).getDate()-1},formatDateForFilter:function(e){return tickDate(e).utc().format("YYYY-MM-DD HH:mm:ss")},formatDateForCompleted:function(e){return tickDate(e).utc().format("YYYY-MM-DD HH:mm:ss")},getUtcTodayStart:function(){return tickDate().startOf("day").utc().format("YYYY-MM-DD HH:mm:ss")},getRangeDates:function(e,t){var n=[],r=f.prefMoment(e),a=f.prefMoment(t);if(r.isAfter(a))return[];n.push(r.format("YYYY-MM-DD"));for(var i=a.diff(r,"day"),o=0;o<i;o++)n.push(r.add(1,"day").format("YYYY-MM-DD"));return n},formatWithDate:function(e,t){var n=p(e);return f.dateFormatToMoment(t,"YYYYMMDD").format("YYYY-MM-DDT"+n+".000ZZ")},formatToLocalStart:function(e){try{var t=e.split("T")[0];return tickDate(t+"T00:00:00").format(l)}catch(t){return e}},isAllDayDuration:function(e,t){if(t&&e!==t){var n=tickDate(e),r=tickDate(t),a=n.getTime(),i=r.getTime()-a;return i>864e5||864e5===i&&n-n.clone().startOf("day")==0}return!1},formatToDateSlim:function(e){var t="",n=i.c(),r=f.getDueDateLocalZoneDate(e).year()!==f.prefMoment().year();return t=n?r?"YYYYMMMDo":"MMMDo":r?Object(u.a)("MMMD")+", YYYY":Object(u.a)("MMMD"),f.prefMoment(e).format(t)},formatTeamRenewReminderData:function(e){var t="";return t=0!==f.getDueDateLocalZoneDate(e).diff(f.prefMoment().startOf("year"),"years")?Object(u.a)("ll"):Object(u.a)("MMMD"),f.prefMoment(e).format(t)},formatRenewReminderDate:function(e){var t="",n=f.getDueDateLocalZoneDate(e).diff(f.prefMoment().startOf("day"),"days"),r=f.getDueDateLocalZoneDate(e).diff(f.prefMoment().startOf("day"),"years");if(0===n)t=i.a("today");else{var a=Object(u.a)("MMMD");r<0&&(a+=", YYYY"),t=f.prefMoment(e).format(a)}return t},getStartOfYeasterday:function(){return tickDate().add(-1,"day").startOf("day").format(l)},isSame:function(e,t){return tickDate(e).isSame(tickDate(t))},formatSubscribeDueDate:function(e,t,n,r){var i=f.getDueDateLocalZoneDate(n),o=f.getDueDateLocalZoneDate(r);if(!i||!o)return"";var c=f.prefMoment().startOf("day"),s="";return s=c.year()===i.year()&&c.year()===o.year()?Object(u.a)("MMMD"):Object(u.a)("ll"),(tickDate(r)-tickDate(n))%864e5==0||e||(s+=" HH:mm"),tickDate(r)-tickDate(n)==0||e&&!t?a()(n).format(s):e&&t?a()(n).format(s)+" - "+a()(r).add(-1,"day").format(s):a()(n).format(s)+" - "+a()(r).format(s)}};t.a=f;var p=function(e){return null!=e?f.prefMoment(e).format("HH:mm:ss"):"00:00:00"}},329:function(e,t,n){"use strict";n.d(t,"G",(function(){return de})),n.d(t,"p",(function(){return fe})),n.d(t,"r",(function(){return pe})),n.d(t,"j",(function(){return he})),n.d(t,"fb",(function(){return ge})),n.d(t,"A",(function(){return ve})),n.d(t,"E",(function(){return ye})),n.d(t,"K",(function(){return ke})),n.d(t,"L",(function(){return Oe})),n.d(t,"B",(function(){return Te})),n.d(t,"n",(function(){return Se})),n.d(t,"o",(function(){return Ee})),n.d(t,"u",(function(){return we})),n.d(t,"q",(function(){return De})),n.d(t,"F",(function(){return je})),n.d(t,"I",(function(){return Ie})),n.d(t,"J",(function(){return Me})),n.d(t,"H",(function(){return Ae})),n.d(t,"Z",(function(){return xe})),n.d(t,"cb",(function(){return Re})),n.d(t,"bb",(function(){return Pe})),n.d(t,"g",(function(){return Ue})),n.d(t,"C",(function(){return We})),n.d(t,"w",(function(){return Ke})),n.d(t,"Y",(function(){return Ge})),n.d(t,"ab",(function(){return Ve})),n.d(t,"i",(function(){return ze})),n.d(t,"a",(function(){return $e})),n.d(t,"O",(function(){return Xe})),n.d(t,"v",(function(){return Qe})),n.d(t,"s",(function(){return tt})),n.d(t,"m",(function(){return nt})),n.d(t,"l",(function(){return rt})),n.d(t,"k",(function(){return at})),n.d(t,"U",(function(){return ot})),n.d(t,"S",(function(){return ct})),n.d(t,"e",(function(){return ut})),n.d(t,"f",(function(){return lt})),n.d(t,"P",(function(){return dt})),n.d(t,"R",(function(){return ft})),n.d(t,"Q",(function(){return pt})),n.d(t,"eb",(function(){return ht})),n.d(t,"N",(function(){return mt})),n.d(t,"M",(function(){return gt})),n.d(t,"h",(function(){return vt})),n.d(t,"T",(function(){return yt})),n.d(t,"t",(function(){return bt})),n.d(t,"y",(function(){return kt})),n.d(t,"D",(function(){return Ot})),n.d(t,"x",(function(){return Tt})),n.d(t,"W",(function(){return St})),n.d(t,"X",(function(){return Et})),n.d(t,"V",(function(){return wt})),n.d(t,"c",(function(){return jt})),n.d(t,"b",(function(){return _t})),n.d(t,"z",(function(){return Ct})),n.d(t,"d",(function(){return Mt})),n.d(t,"db",(function(){return At})),n.d(t,"gb",(function(){return xt})),n.d(t,"hb",(function(){return Rt}));n(73),n(205),n(173),n(208),n(203),n(366),n(153),n(61),n(159),n(152),n(209),n(155),n(156),n(120),n(346),n(210),n(144),n(50),n(121),n(33),n(207),n(154),n(111),n(112),n(580),n(158),n(174),n(204),n(110),n(350);var r=n(320),a=n(319),i=n.n(a),o=n(375),c=n(98),s=n.n(c),u=(n(447),n(326)),l=n(323),d=n(327),f=n(333),p=n(349),h=n(330),m=n(452),g=n(374),v=n(359),y=n(348),b=n(334),k=n(340),O=n(361),T=n(355),S=n(324),E=n(377),w=n(341),D=n(345),j=n(513),_=n(354),C=n(328),I=n(381),M=n(443),A=n(444),x=n(426),R=n(387),P=n(364),N=n(382),L=n(429),U=n(397),F=n(461),H=n(318),B=n(353),Y=n(335),W=n(336),K=n(455),G=n(483),V=n(607),z=n(453),Z=n(383),q=n(357),J=n(442),$=n(362),X=n(363),Q=n(344),ee=n(157),te=n(499),ne=n(352);function re(e){return function(e){if(Array.isArray(e))return le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ue(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function se(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){ce(i,r,a,o,c,"next",e)}function c(e){ce(i,r,a,o,c,"throw",e)}o(void 0)}))}}function ue(e,t){if(e){if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var de=function(){return u.a.getState().tasks.taskList},fe=function(){return de().filter((function(e){return null!=e&&(!!e.get("isNew")&&null!=e.get("repeatTaskId")&&e.get("repeatTaskId")!==e.get("id"))}))},pe=function(){return u.a.getState().tasks.trashList},he=function(){return u.a.getState().tasks.activeSelectedTaskIds},me=function(){return u.a.getState().tasks.detailActiveSelectedTaskIds},ge=function(e,t){u.a.dispatch(q.w(e,t))},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H.D.Main;switch(e){case H.D.Detail:return me().get("selected");case H.D.Main:default:return he().get("selected")}},ye=function(e){var t=Se(e);if(!t)return null;var n=be(e);if(n){var r=t.get("title");return"https://".concat(l.i,"/webapp/").concat(n," ").concat(r)}return null},be=function(e){if(!e)return null;var t=Se(e);if(!t)return null;var n=t.get("projectId");return n.includes("inbox")&&(n="inbox"),"#p/".concat(n,"/tasks/").concat(e)},ke=function(e){return de().filter((function(t){return!!t&&(0===t.get("status")&&t.get("projectId")===e)})).size},Oe=function(e){return de().find((function(t){return(null==t?void 0:t.get("id"))===e}))},Te=function(e,t){var n=Se(e);return n?n.get("items").find((function(e){return(null==e?void 0:e.get("id"))===t})):null},Se=function(e){return de().find((function(t){return(null==t?void 0:t.get("id"))===e}))||pe().find((function(t){return(null==t?void 0:t.get("id"))===e}))},Ee=function(e){var t=de(),n=r.Set(e);return t.filter((function(e){return n.has(e.get("id"))}))},we=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=Me(e);if(t)switch(t){case"top":return _e(a)-l.t*(r-1);case"bottom":return Ce(a)+l.t*(r-1);default:s.a.warn("[task service] no position case match in newSortOrder!")}return d.b("defaultToAdd")?0===(n=Ce(a)+l.t*(r-1))&&(n+=l.t):n=_e(a)-l.t*(r-1),n},De=function(e){var t=Me(e);return _e(t)},je=function e(t,n){var r=Me(t),a=(r=r.sort(v.a.order)).findIndex((function(e){return(null==e?void 0:e.get("id"))===n}));if(0===a)return _e(r);var i=r.get(a).get("sortOrder"),o=r.get(a-1).get("sortOrder");return i-o<2?(Object(y.r)(t),e(t,n)):Math.floor((i+o)/2)},_e=function(e){var t=0,n=e.toArray();if(n.length>0){var r=i.a.minBy(n,(function(e){return e.get("sortOrder")}));t="number"==typeof r?0:Number((null==r?void 0:r.get("sortOrder"))||0)}return t-l.t},Ce=function(e){var t=0,n=e.toArray();if(n.length>0){var r=i.a.maxBy(n,(function(e){return e.get("sortOrder")}));t=Number((null==r?void 0:r.get("sortOrder"))||0)+l.t}return t},Ie=function(e,t){return de().filter((function(n){return(null==n?void 0:n.get("assignee"))===e&&n.get("projectId")===t}))},Me=function(e){return de().filter((function(t){return(null==t?void 0:t.get("projectId"))===e}))},Ae=function(e){return de().filter((function(t){return!(!h.C(t)||(null==t?void 0:t.get("projectId"))!==e)}))},xe=function(e,t,n){return!!h.C(e)&&(!Object(f.B)(n)||e.get("assignee")!==w.a("userId"))},Re=function(e){var t=new Map,n=[];e.forEach((function(e){if(r.Map.isMap(e)){var a=e.get("id");a&&e.has("parentId")&&(t.set(a,e.get("parentId")),n.push(a))}else e.id&&Object.prototype.hasOwnProperty.call(e,"parentId")&&(n.push(e.id),t.set(e.id,e.parentId))}));var a=new Map(Ee(n).toArray().map((function(e){return[e.get("id"),e.get("parentId")]})));n.forEach((function(e){var n=t.get(e),r=a.get(e);(H.b.includes(n)&&H.b.includes(r)||n===r)&&a.delete(e)})),u.a.dispatch(q.l(e));var i={};t.forEach((function(e,t){var n;e&&(null==(null===(n=i[e])||void 0===n?void 0:n.push(t))&&(i[e]=[t]))})),u.a.dispatch(q.a(i));var o={};a.forEach((function(e,t){var n;e&&(null==(null===(n=o[e])||void 0===n?void 0:n.push(t))&&(o[e]=[t]))})),u.a.dispatch(q.p(o))},Pe=function(e,t,n){var r=t.id,a=h.P(t);if(g.x(r)&&i.a.isObject(e)){var o=g.r(r),c=Object(E.b)(e).toJS(),s=m.a(o,a,c,n);return g.k(a),s}return Object(E.c)(a)};function Ne(e,t,n){return Le.apply(this,arguments)}function Le(){return(Le=se(regeneratorRuntime.mark((function e(t,n,r){var a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return k.V(e,n,r)})));case 2:a=e.sent,i=[],a.forEach((function(e){var t=e.data;t&&(t.children&&(t.children.forEach((function(e){i.push(e)})),delete t.children),i.push(t))})),Object(y.n)(i,!0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e){return Fe.apply(this,arguments)}function Fe(){return(Fe=se(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Set(pe().toArray().map((function(e){return e.get("id")}))),e.abrupt("return",He(t,n));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e){return Be.apply(this,arguments)}function Be(){return(Be=se(regeneratorRuntime.mark((function e(t){var n,r,a,i,o,c,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:new Set,r=s.length>2&&void 0!==s[2]?s[2]:0,a=t.get("projectId"),i=Xe(t,!0),o=G.a(i),c=new Set,G.f(o,(function(e){var t,r,a=new Set((null!==(t=null===(r=e.task.get("childIds"))||void 0===r?void 0:r.toArray())&&void 0!==t?t:[]).filter((function(e){return!n.has(e)}))),i=new Set(e.children.map((function(e){return e.task.get("id")})));0!==V.a(a,i).size&&c.add(e.task.get("id"))})),!(c.size>0&&r<5)){e.next=11;break}return e.next=10,Ne(Array.from(c),a,!0);case 10:He(t,n,r+=1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ye=function(){var e=se(regeneratorRuntime.mark((function e(t,n){var r,a,i,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Se(t))||!a.get("isNew")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,k.V(t,n);case 5:i=e.sent,Object(y.n)([i.data]),a=Se(t),c=(null!==(r=a.get("deleted"))&&void 0!==r?r:0)>0,s=a.get("projectId")!==n,b.k()===t&&(c||s)&&(T.b({text:S.a("toast_text_task_deleted")}),u.a.dispatch(Object(o.e)("/".concat(b.l()))));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),We=function(e,t){b.G()||Ye(e,t).catch((function(t){"task_not_found"===Object(j.g)(t).errorCode&&(b.k()===e&&(T.b({text:S.a("toast_text_task_deleted")}),u.a.dispatch(Object(o.e)("/".concat(b.l())))),O.a.doSync())}))},Ke=function(){return[{complete:S.a("high_priority")+" ",match:S.a("high_priority"),key:5},{complete:S.a("medium_priority")+" ",match:S.a("medium_priority"),key:3},{complete:S.a("low_priority")+" ",match:S.a("low_priority"),key:1},{complete:S.a("none_priority")+" ",match:S.a("none_priority"),key:0}]},Ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.withPermission;return!h.bb(e)&&(!!(b.G()||Number(null==e?void 0:e.get("deleted"))>0)||p.g(Object(f.n)(e.get("projectId")),n))},Ve=function(e){return!!e&&p.q(Object(f.n)(e.get("projectId")))},ze=function(e){return qe(e),Ze(e),Je(e),e},Ze=function(e){var t=e.items;if(t&&t.length>1){var n=i.a.uniqBy(t,(function(e){return e.id}));t.length!==n.length&&(e.items=n,e.progress=Object(h.g)(r.fromJS(e)),e.isDirty=!0)}},qe=function(e){var t=e.startDate,n=e.dueDate;t&&n&&t!==n&&Object(D.k)(n).local().isBefore(t)&&(e.dueDate=t,e.isDirty=!0)},Je=function(e){var t,n=e.tags,r=[],a=!1;n&&n.length>0&&(n.forEach((function(e){e?(t=e.toLowerCase(),e!==t&&(a=!0),r.includes(t)||r.push(t)):a=!0})),a&&(e.tags=r,e.isDirty=!0))},$e=function(e){var t=e.projectId,n=e.parentId,r=e.position,a=e.status,i=e.columnId,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=lt({projectId:t,sortOrder:we(t,r),parentId:n,status:a,columnId:i,completedTime:h.U(a)?Q.a.formatToServerDate():void 0},o);return I.d({projectId:c.get("projectId")})?(R.a({type:"task"}),null):(y.b(c),M.d(c),A.d(c),x.d(c),O.a.doSync(),c)};function Xe(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=et(e);return rt(r.List([n]),t,e.get("projectId"))}function Qe(e){var t=new Map(de().toArray().map((function(e){return["".concat(e.get("projectId"),"/").concat(e.get("id")),e]}))),n=e.toArray().map((function(e){var n;return null!==(n=t.get("".concat(e.get("projectId"),"/").concat(e.get("parentId"))))&&void 0!==n?n:e}));return r.List(n)}function et(e){if(null==e.get("parentId"))return e;for(var t=e.get("projectId"),n=new Map(de().toArray().filter((function(e){return e.get("projectId")===t})).map((function(e){return[e.get("id"),e]}))),r=e.get("id"),a=new Set([r]);null!=n.get(r);){var i=n.get(r),o=i.get("parentId");if(null==o||null==n.get(o))return i;if(a.has(o))return e;a.add(r),r=o}return e}function tt(e){var t=0;if(null==e.get("parentId"))return t;for(var n=e.get("projectId"),r=new Map(de().toArray().filter((function(e){return e.get("projectId")===n})).map((function(e){return[e.get("id"),e]}))),a=e.get("id"),i=new Set([a]);null!=r.get(a);){var o=r.get(a).get("parentId");if(null==o||null==r.get(o))return t;if(i.has(o))return t;i.add(a),t+=1,a=o}return t}function nt(e){for(var t=new Map(de().toArray().map((function(e){return["".concat(e.get("projectId"),"/").concat(e.get("id")),e]}))),n=e.toArray(),a=new Set(n.map((function(e){return e.get("id")}))),i=re(n),o=re(n);o.length>0;){var c=o.pop(),s=c.get("parentId");if(s){var u=t.get("".concat(c.get("projectId"),"/").concat(s));u&&u.get("projectId")===c.get("projectId")&&(a.has(u.get("id"))||(o.push(u),a.add(u.get("id")),i.push(u)))}}return r.List(i)}function rt(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0;t=a?e.toArray().filter((function(e){return e.get("projectId")===a})):e.toArray();var i=new Map;de().toArray().forEach((function(e){var t;if(n||!(e.get("status")>0)){var r=e.get("parentId");if(r&&(!a||e.get("projectId")===a)){var o="".concat(e.get("projectId"),"/").concat(r);null==(null===(t=i.get(o))||void 0===t?void 0:t.push(e))&&i.set(o,[e])}}}));for(var o=new Set(t.map((function(e){return e.get("id")}))),c=re(t),s=re(t);c.length>0;){var u=c.pop(),l="".concat(u.get("projectId"),"/").concat(u.get("id")),d=i.get(l);d&&(i.delete(l),d.forEach((function(e){o.has(e.get("id"))||(o.add(e.get("id")),s.push(e)),c.push(e)})))}return r.List(s)}function at(e){return 0===e.length?r.List():rt(Ee(e))}var it=function(e,t,n,r){var a,i,o=Object(z.f)(n,t,r),c=Object(z.e)(n,t,r),s=null==o||null===(a=o.model)||void 0===a?void 0:a.sortOrder,u=null==c||null===(i=c.model)||void 0===i?void 0:i.sortOrder,d=[],f=Object(z.b)(s,u,e.length),p=f.needPush,h=f.needReset,m=f.orders;m&&e.forEach((function(e,t){d.push({sortOrder:m[t],id:e.id})}));var g=n.filter((function(e){return null!=e.model&&(!(!H.b.includes(null==o?void 0:o.parentId)||!H.b.includes(e.parentId))||(null==o?void 0:o.parentId)===e.parentId)})).reduce((function(e,t){var n=t.model;return e.push({id:n.id,sortOrder:n.sortOrder}),e}),[]);if(h)d=g.reduce((function(t,n,r){return n.id===(null==o?void 0:o.id)?e.forEach((function(e){t.push({id:e.id,sortOrder:t.length*l.t})})):t.push({id:n.id,sortOrder:t.length*l.t}),t}),[]);else if(p){var v;(v=d).push.apply(v,re(Object(z.i)(c.id,g.map((function(e){return{id:e.id,order:e.sortOrder}})),e.length).map((function(e){return ie({},e,{sortOrder:e.order})}))))}return d},ot=function(){var e=se(regeneratorRuntime.mark((function e(t,n,r,a,i,o,c,s){var u,l,d,f,p,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=mt(t),l=u.list,d=u.map,f=gt(l,d),p=!!o,e.t0=p&&r[n]&&o,!e.t0){e.next=7;break}return e.next=7,At(f,o,b.h()+r[n].section.id);case 7:if(yt(l,d,n,r,a,i,c,s),e.t1=!p&&r[n],!e.t1){e.next=12;break}return e.next=12,xt(f,b.h()+r[n].section.id);case 12:h=it(f,n,r,a),N.p(h);case 14:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i,o,c,s){return e.apply(this,arguments)}}(),ct=function(e,t,n,r,a){var i=mt(e),o=i.list,c=i.map,s=gt(o,c);yt(o,c,t,n,r,!0,a);var u=it(s,t,n,r);N.p(u)},st=function(){var e=null;return b.q()?e=C.a.prefMoment(b.J().name).startOf("day").utc().format(H.m.atomTime):b.E()||b.H()?e=C.a.getStartOfToday():b.F()?e=C.a.getStartOfTomorrow():b.p()&&(e=F.d()),e||(e=d.d()),-1===e&&(e=null),e},ut=function(e,t,n){var r=Object(_.a)();return i.a.isUndefined(n.startDate)&&(n.startDate=st()),n.startDate&&(n.reminders=d.a(!0)),n.isAllDay=!0,n.dueStart=C.a.formatToUtcString(n.startDate),n.dueEnd=C.a.formatToUtcString(C.a.buildRealDueDate(n.dueStart,n.isAllDay)),U.e(ie({eventId:r,calendarId:t,accountId:e},n))},lt=function(e,t){var n;return i.a.isUndefined(t.startDate)&&(t.startDate=e.kind===H.L.Note?null:st()),i.a.isUndefined(t.priority)&&(t.priority=e.kind===H.L.Note?0:(n=null,b.p()&&(n=F.b()),null===n&&(n=d.e()),n)),i.a.isUndefined(t.tags)&&(t.tags=function(){var e=[];if(b.p()){var t=F.e();t&&(e=t)}else b.C()&&e.push(B.g());return e}()),t.startDate&&(t.reminders=d.a(!0).toJS()),h.O(ie({id:Object(_.a)(),isAllDay:!0,isNew:!0},e,{},t))},dt=function(e,t){if(!h.fb(e)){var n=ve();if(n.length>1){var r=Ee(n);N.o(r,t,{})}else y.z(e,t)}},ft=function(e){var t=ve(),n={isFloating:!1,timeZone:D.h};if(t.length>1){var r=Ee(t),a=N.j(r,n);M.e(a)}else y.w(e,n);Y.a.stopTabUp=!0},pt=function(e,t){var n=C.a.getStartOfDay(t,"days","YYYY-MM-DD"),r=ve();if(r.length>1){var a=Ee(r);N.a(a,{startDate:n})}else{if(h.ub(e)&&b.B()&&!h.V(e)){var i=C.a.getDueDateText(e.get("startDate"));n!==i&&ee.a.dispatch(te.a,{onConfirm:function(t){var r=t.repeatChangeKey;y.e(e,n,{repeatChangeKey:r,isRepeatSelf:!0})},type:"edit",isRepeatSelf:!0})}else y.f(e,n)}Y.a.stopTabUp=!0},ht=function(e){ve().length>1||(W.w(S.a("saving"),1e3),e instanceof P.c?U.h(e.event)&&K.a.doSync():e instanceof P.a?y.u(e.taskId):y.u(e.id))},mt=function(e){var t={};return G.f(e,(function(e){t[e.id]=e})),{list:Object.keys(t).map((function(e){return t[e]})),map:t}},gt=function(e,t){return e.reduce((function(e,n){var r=n.parentId;return null!=r&&null!=t[r]||e.push(n),e}),[])},vt=function(e,t,n){if(n>0)return e[t];for(var r,a=null===(r=e[t])||void 0===r?void 0:r.parent,i=0;i<Math.abs(n);i++){var o;a=null===(o=a)||void 0===o?void 0:o.parent}return a},yt=function(e,t,n,a,i,o,c,s){var u,l=a[n],d=e,f=t,p=vt(a,n,i),m=l?l.level+i:0,g={},v=[],y=s?Se(s):void 0,b=ie({},f);p&&(b[p.id]=p);var k,O=gt(d,f),T=o?0:void 0;O.forEach((function(e){var t,n,r;if(p){var a=p.model.originModel;T=h.T(a)?a.get("status"):T,k=h.T(a)?a.get("status"):k}else s&&(T=h.T(y)?null==y?void 0:y.get("status"):T,k=h.T(y)?null==y?void 0:y.get("status"):k);v.push({id:e.id,parentId:m===e.level&&0===e.level?null!==(t=null===(n=e.model)||void 0===n?void 0:n.parentId)&&void 0!==t?t:s:null!==(r=null==p?void 0:p.id)&&void 0!==r?r:s,model:e.model.originModel,status:T});var i=e.level;m>=H.a?G.e(e).forEach((function(t){var n;v.push({id:t.id,parentId:null!==(n=null==p?void 0:p.id)&&void 0!==n?n:s,model:e.model.originModel,status:T})})):(e.level-i+m===H.a-1&&G.e(e).forEach((function(t){g[t.id]=e.id})),G.f([e],(function(t){if(null!=t.model&&(t.level-i+m===H.a-1&&G.e(t).forEach((function(e){g[e.id]=t.id})),e.id!==t.id)){var n=k;if(y&&(n=h.T(y)?null==y?void 0:y.get("status"):k),t.level-i+m>H.a){var r=g[t.id];if(r){var a,o=null===(a=b[r].model)||void 0===a?void 0:a.originModel;n=h.T(o)?o.get("status"):k}v.push({id:t.id,parentId:null!=r?r:s,model:t.model.originModel,status:n})}else k&&k>0&&v.push({id:t.id,parentId:t.model.originModel.get("parentId"),model:t.model.originModel,status:n})}})))})),N.n(v),Re(v.map((function(e){return{id:e.id,status:e.status,completedTime:e.status===L.a.Uncompleted?null:Q.a.formatToServerDate(),isDirty:!0}})).filter((function(e){return null!=e.status})));var S=rt(r.List(v.map((function(e){return e.model})))),E=c||(p?null===(u=p.model)||void 0===u?void 0:u.columnId:null==y?void 0:y.get("columnId"));E&&N.l(S,E)},bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"list",t="detail"===e;return t?u.a.getState().tasks.detailActiveSelectedTaskIds.get("selected").length||1:u.a.getState().tasks.activeSelectedTaskIds.get("selected").length||1},kt=function(e,t){var n=0,r=0;return e.forEach((function(e,a){e.section.id!==t||e.isSection||n++,e.section.id===t&&e.isSection&&(r=a)})),{sectionTaskCount:n,sectionIndex:r}},Ot=function(e){var t=Xe(e,!0),n=G.a(t),r=0;return G.f(n,(function(t){var n=0;t.parent&&(n=t.parent.level+1),t.level=n,t.id===e.get("id")&&(r=n)})),r},Tt=function(e){var t,n,a=e.get("projectId"),i=Object(f.n)(e.get("projectId"))||r.Map(),o=null!==(t=i.get("color"))&&void 0!==t?t:"transparent",c=null!==(n=i.get("listType")===H.t.smartProject?S.a(i.get("name")):i.get("name"))&&void 0!==n?n:"";if(null!=a)return{id:a,color:o,name:c}},St=function(){return b.y()||b.C()||b.p()||b.q()},Et=function(){return!1},wt=function(e){return e instanceof Z.c||e instanceof Z.k||e instanceof Z.m||e instanceof Z.a},Dt=function(e){switch(e){case H.L.Note:break;case H.L.Text:$.s("toggle_to_text");break;case H.L.Checklist:$.s("toggle_to_list")}},jt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";switch(e.get("kind")){case H.L.Checklist:var a,i=null!==(a=e.get("desc"))&&void 0!==a?a:"",o=e.get("items"),c=e.get("modifiedTime"),s=e.get("id");switch(n){case"clearEmpty":if(Y.a.taskModeChangeStash&&Y.a.taskModeChangeStash.modifiedTime===c){var u=Y.a.taskModeChangeStash.content;y.C(e,ie({content:u,desc:"",items:r.List(),kind:H.L.Text},t))}else{var l=o.sort(v.a.subtask).toArray().map((function(e){return e.get("title")}));i&&l.unshift(i+"\n  "),y.C(e,ie({content:l.join("\n"),desc:"",items:r.List(),kind:H.L.Text},t))}var d=Se(s);Y.a.taskModeChangeStash={id:s,modifiedTime:d.get("modifiedTime"),content:"",items:r.fromJS(o)};break;case"default":default:var f=o.sort(v.a.subtask).toArray().map((function(e){return e.get("title")}));i&&f.unshift(i+"\n  "),y.C(e,ie({content:f.join("\n"),desc:"",items:r.List(),kind:H.L.Text},t))}break;default:y.C(e,ie({content:e.get("content"),desc:"",items:r.List(),kind:H.L.Text},t))}Dt(H.L.Text)},_t=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",i=null!==(t=e.get("content"))&&void 0!==t?t:"",o=e.get("modifiedTime"),c=e.get("id"),s="",u=[],d=/\n[ ]{2}/g,f=[],p=0;switch(w.d()&&d.test(i)?(p=d.lastIndex,s=i.substring(0,p-3),u=f=i.substring(p).split("\n"),u=f.length>1&&0===f[0].trim().length?f.slice(1):f):(s="",u=i.split("\n")),a){case"clearEmpty":Y.a.taskModeChangeStash&&Y.a.taskModeChangeStash.modifiedTime===o?n=Y.a.taskModeChangeStash.items:(0===(u=u.filter((function(e){return e.length>0}))).length&&(u=[""]),n=u.map((function(e,t){return{id:Object(_.a)(),status:0,title:e,sortOrder:t*l.t}})));break;case"default":default:n=u.map((function(e,t){return{id:Object(_.a)(),status:0,title:e,sortOrder:t*l.t}}))}if(n.length>X.a.subtaskNumber)R.a({type:H.c.subtask});else{if(y.C(e,{content:"",desc:s,items:r.fromJS(n),kind:H.L.Checklist}),"clearEmpty"===a){var h=Se(c);Y.a.taskModeChangeStash={id:c,modifiedTime:h.get("modifiedTime"),content:i,items:[]}}Dt(H.L.Checklist)}},Ct=function(e){var t=Ee(e);return It(t)},It=function(e){var t=new Set(e.toArray().map((function(e){return e.get("id")}))),n=rt(e).toArray().filter((function(e){return!t.has(e.get("id"))})).length>0,r=e.toArray().reduce((function(e,t){return h.fb(t)?e.hasNote=!0:(h.T(t)&&(e.hasCompleted=!0),h.jb(t)&&(e.hasSchedule=!0),e.hasTask=!0),e.hasLevelTask||t.get("parentId")&&(e.hasLevelTask=!0),e}),{hasTask:!1,hasNote:!1,hasLevelTask:!1,hasCompleted:!1,hasSchedule:!1}),a=r.hasLevelTask;return{hasNote:r.hasNote,hasTask:r.hasTask,hasNestedTask:n||a,hasCompleted:r.hasCompleted,hasSchedule:r.hasSchedule}},Mt=function(e,t,n){var a=Ee(e).toArray(),i=new Set([]),o=function(e,t){switch(t){case"list":$.k(e===H.L.Note?"edit_note":"edit_task");break;case"detail":$.k(e===H.L.Note?"detail_note":"detail_task")}};a.forEach((function(e){var a=Y.a.stashConvertData[e.get("id")];if(a&&e.get("modifiedTime")===a.modifiedTime)return s.a.info("convert to stash origin task:",a.model),delete Y.a.stashConvertData[e.get("id")],i.add(e.get("id")),null==a.model.kind&&(a.model.items&&0!==a.model.items.length?a.model.kind=H.L.Checklist:a.model.kind=H.L.Text),o(a.model.kind,n),void function(e,t){Dt(t.kind),y.C(e,t)}(e,a.model);switch(o(t,n),t){case H.L.Note:!function(e){var t,n=e.get("dueDate"),a={kind:H.L.Note,repeatFlag:null,repeatFrom:null,progress:0,priority:0};(n&&(a.dueDate=null),e.get("kind")===H.L.Checklist)?jt(e,a):y.C(e,ie({content:null!==(t=e.get("content"))&&void 0!==t?t:"",desc:"",items:r.List()},a));Dt(H.L.Note)}(e);break;case H.L.Checklist:_t(e);break;case H.L.Text:jt(e)}}));var c=new Map(Ee(e).toArray().map((function(e){return[e.get("id"),e]})));Y.a.stashConvertData=ie({},Y.a.stashConvertData,{},a.reduce((function(e,t){var r=t.get("id");if(i.has(r))return delete e[r],e;var a=c.get(t.get("id")),o=function(e){var t=e.toJS();return delete t.etag,delete t.creator,delete t.isDirty,t}(t);return a&&(e[r]={effectiveArea:n,model:o,modifiedTime:a.get("modifiedTime")}),e}),{}))},At=function(){var e=se(regeneratorRuntime.mark((function e(t,n,a){var i,o,c,s,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.List(t.map((function(e){var t;return null===(t=e.model)||void 0===t?void 0:t.originModel})).filter(Boolean)),o=t.reduce((function(e,t){return t.model&&(e[t.id]=t.level),e}),{}),e.next=4,Object(J.a)(i,n,void 0,!1);case 4:c=e.sent,(s=new Set(c.toArray().map((function(e){return e.get("id")})))).size>0&&(u=(new Date).getTime(),l=i.toArray().filter((function(e){return s.has(e.get("id"))})).reduce((function(e,t){return e[t.get("id")]={stamp:u,projectId:t.get("projectId"),parentId:0===o[t.get("id")]?t.get("parentId"):"noNeedResetParentId",pathName:a},e}),{}),1===i.size&&s.has(i.get(0).get("id"))?W.w(S.a("this_task_move_to_project",{s1:ne.d(i.get(0).get("title")),s2:Object(f.n)(n).get("name")}),3e3,(function(){b.I(n)})):i.size>1&&W.w(S.a("task_move_to_project",{s:Object(f.n)(n).get("name")}),3e3,(function(){b.I(n)})),Y.a.stashTempMovedTasks=ie({},l));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),xt=function(){var e=se(regeneratorRuntime.mark((function e(t,n){var a,i,o,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.List(t.map((function(e){var t;return null===(t=e.model)||void 0===t?void 0:t.originModel})).filter(Boolean)),i=new Map(a.toArray().map((function(e){return[e.get("id"),e]}))),o=(new Date).getTime(),c={},s=[],i.forEach((function(e,t){var r,a=Y.a.stashTempMovedTasks[t];a&&(delete Y.a.stashTempMovedTasks[t],o-a.stamp<3e3&&a.pathName===n&&(null==(null===(r=c[a.projectId])||void 0===r?void 0:r.push(t))&&(c[a.projectId]=[t]),"noNeedResetParentId"!==a.parentId&&s.push({id:t,parentId:a.parentId})))})),e.next=8,Promise.all(Object.keys(c).map((function(e){var t=c[e],n=r.List(t.map((function(e){return i.get(e)})).filter(Boolean));return n.size<=1?W.w(S.a("this_task_move_to_project",{s1:ne.d(n.get(0).get("title")),s2:Object(f.n)(e).get("name")}),3e3,(function(){b.I(e)})):W.w(S.a("task_move_to_project",{s:Object(f.n)(e).get("name")}),3e3,(function(){b.I(e)})),Object(J.a)(n,e,void 0,!1)})));case 8:N.n(s);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Rt=function(e,t){var n=t.estimatedPomo,a=t.estimatedDuration,i=e.get("focusSummaries")||r.List();i=h.x(e)?i.map((function(e){return e.get("userId")===w.a("userId")?e.set("estimatedPomo",n).set("estimatedDuration",a):e})):i.push(r.Map({estimatedDuration:a,estimatedPomo:n,userId:w.a("userId"),pomoCount:0,pomoDuration:0,stopwatchDuration:0})),u.a.dispatch(q.M(e.get("id"),i)),O.a.doSync()}},330:function(e,t,n){"use strict";n.d(t,"P",(function(){return Q})),n.d(t,"O",(function(){return ee})),n.d(t,"qb",(function(){return re})),n.d(t,"sb",(function(){return ae})),n.d(t,"rb",(function(){return ie})),n.d(t,"F",(function(){return oe})),n.d(t,"R",(function(){return se})),n.d(t,"E",(function(){return ue})),n.d(t,"G",(function(){return le})),n.d(t,"U",(function(){return de})),n.d(t,"T",(function(){return fe})),n.d(t,"y",(function(){return pe})),n.d(t,"H",(function(){return he})),n.d(t,"I",(function(){return me})),n.d(t,"C",(function(){return ge})),n.d(t,"K",(function(){return ve})),n.d(t,"N",(function(){return ye})),n.d(t,"tb",(function(){return be})),n.d(t,"ub",(function(){return ke})),n.d(t,"V",(function(){return Oe})),n.d(t,"J",(function(){return Te})),n.d(t,"Z",(function(){return Se})),n.d(t,"n",(function(){return we})),n.d(t,"z",(function(){return je})),n.d(t,"o",(function(){return _e})),n.d(t,"m",(function(){return Ce})),n.d(t,"W",(function(){return Ie})),n.d(t,"X",(function(){return Me})),n.d(t,"u",(function(){return Ae})),n.d(t,"p",(function(){return xe})),n.d(t,"l",(function(){return Pe})),n.d(t,"Y",(function(){return Ne})),n.d(t,"e",(function(){return Le})),n.d(t,"A",(function(){return Ue})),n.d(t,"t",(function(){return Fe})),n.d(t,"jb",(function(){return He})),n.d(t,"ib",(function(){return Be})),n.d(t,"hb",(function(){return Ye})),n.d(t,"gb",(function(){return We})),n.d(t,"q",(function(){return Ge})),n.d(t,"g",(function(){return Ve})),n.d(t,"ab",(function(){return ze})),n.d(t,"bb",(function(){return Ze})),n.d(t,"kb",(function(){return qe})),n.d(t,"i",(function(){return $e})),n.d(t,"j",(function(){return Xe})),n.d(t,"h",(function(){return Qe})),n.d(t,"ob",(function(){return et})),n.d(t,"nb",(function(){return tt})),n.d(t,"r",(function(){return nt})),n.d(t,"v",(function(){return rt})),n.d(t,"k",(function(){return at})),n.d(t,"L",(function(){return it})),n.d(t,"lb",(function(){return ot})),n.d(t,"Q",(function(){return ct})),n.d(t,"cb",(function(){return st})),n.d(t,"w",(function(){return ut})),n.d(t,"B",(function(){return dt})),n.d(t,"b",(function(){return pt})),n.d(t,"a",(function(){return ht})),n.d(t,"c",(function(){return mt})),n.d(t,"d",(function(){return gt})),n.d(t,"eb",(function(){return bt})),n.d(t,"f",(function(){return kt})),n.d(t,"pb",(function(){return Ot})),n.d(t,"D",(function(){return Tt})),n.d(t,"M",(function(){return St})),n.d(t,"s",(function(){return Et})),n.d(t,"fb",(function(){return Dt})),n.d(t,"S",(function(){return jt})),n.d(t,"db",(function(){return _t})),n.d(t,"x",(function(){return Ct})),n.d(t,"mb",(function(){return It}));n(123),n(124),n(125),n(73),n(205),n(173),n(208),n(203),n(119),n(61),n(152),n(156),n(122),n(210),n(356),n(50),n(33),n(143),n(111),n(112),n(62),n(158),n(204),n(110),n(160);var r=n(320),a=n(319),i=n.n(a),o=n(373),c=n(378),s=n(338),u=n.n(s),l=n(98),d=n.n(l),f=n(429),p=n(385),h=n(402),m=n(349),g=n(328),v=n(372),y=n(327),b=n(341),k=n(359),O=n(318),T=n(377),S=n(354),E=n(323),w=n(365);n(120),n(206),n(325);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){var t="function"==typeof Map?new Map:void 0;return(I=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return M(e,arguments,R(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),x(r,e)})(e)}function M(e,t,n){return(M=A()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&x(a,n.prototype),a}).apply(null,arguments)}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(a,e);var t,n,r=(t=a,n=A(),function(){var e,r=R(t);if(n){var a=R(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return _(this,e)});function a(){var e;j(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),Error.captureStackTrace&&Error.captureStackTrace(C(e),a),e.name="SentryError",e}return a}(I(Error)),N=n(342),L=(n(420),n(463),n(345)),U=n(549),F=n(344),H=n(386),B=n(431),Y=n(658),W=n(425),K=n(374),G=n(329),V=n(333);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $={hasReminder:{}},X=function(e,t,n){$[e][t]=n},Q=function(e){return i.a.extend({title:"",content:"",sortOrder:0,priority:0,projectId:b.a("inboxId"),serverStartDate:null,serverDueDate:null,startDate:null,dueDate:null,isFloating:!1,timeZone:L.h,status:0,items:[],assignee:null,deleted:0,progress:0,tags:[],exDate:[],childIds:[]},e)},ee=function(e){var t=Q(e);return te(t),ne(t),Object(r.fromJS)(t)},te=function(e){var t=e.repeatFlag,n=e.repeatFrom;if(t&&t.match(/TK_SKIP=HOLIDAY/)?t=n===O.A.defaultVal?t.replace(/TK_SKIP=HOLIDAY/,"TT_SKIP=HOLIDAY,WEEKEND"):t.replace(/TK_SKIP/,"TT_SKIP"):t&&t.match(/TK_SKIP=/)&&(t=t.replace(/TK_SKIP=/,"")),t&&t.match(/;$/)&&(t=t.replace(/;$/,"")),t&&t.match(/TK_COMPLETEDCOUNT/)&&(t=Object(H.i)("TK_COMPLETEDCOUNT",t)),t&&t.match(/WEEKEND/)){var r=new B.a(t).rruleOptions.byweekday;if(r)-1===r.findIndex((function(e){return e!==c.b.SA&&e!==c.b.SU}))&&(d.a.error("repeatFlag",t),t=null)}e.repeatFlag=t},ne=function(e){var t=e.isAllDay,n=e.reminders||[];n.toJS&&(n=n.toJS());var a=[];if(t){var i=[];n.forEach((function(e){var t=r.List.isList(e.trigger)?e.trigger.toJS():e.trigger;null!==(t=v.b(t))&&i.indexOf(t)<0&&(e.trigger=t,i.push(t),null==a||a.push(e))}))}else v.g(n).forEach((function(e){var t=r.List.isList(e.trigger)?e.trigger.toJS():e.trigger,n=v.c(t);n&&(e.trigger=n,null==a||a.push(e))}));e.reminders=a},re=function(e){var t=e;if(le(t)){var n,r=null===(n=t)||void 0===n?void 0:n.get("items").map((function(e){return Object(N.e)(e).delete("timeZone")}));t=t.set("items",r)}t=T.b(t);var a=Object(N.e)(t).toJSON();return delete a.isDirty,delete a.isNew,delete a.syncStatus,delete a.serverStartDate,delete a.serverDueDate,delete a.deleted,delete a.childIds,a},ae=function(e){return{taskId:e.get("id"),projectId:e.get("projectId")}},ie=function(e){var t,n,r=e.get("id"),a=K.s(r);return st(e)?(t=e.get("parentId"),n=void 0):(t=null==a?void 0:a.parentId,n=e.get("parentId")),t===n||null==t&&null==n?(K.g(r),null):{taskId:r,projectId:e.get("projectId"),parentId:n,oldParentId:t}},oe=function(e){var t=F.a.parseUTCString(e.get("startDate")),n=F.a.parseUTCString(e.get("dueDate"));return!(!t||!n)&&n.getTime()>t.getTime()},ce=function(e){var t=e.get("attachments");return se(t)},se=function(e){return!!e&&(e.isEmpty?!e.isEmpty():!i.a.isEmpty(e))},ue=function(e){var t=e.get("content");return!le(e)&&!i.a.isEmpty(t)},le=function(e){var t;try{return(t=e.get("items"))&&!t.isEmpty()}catch(e){var n=J(t),r=new P("items type is ".concat(n,", ").concat(e.message));Object(o.a)(r)}return!1},de=function(e){return e>0},fe=function(e){return!!e&&(Object(h.h)(e)?Object(h.g)(e):!Dt(e)&&de(e.get("status")))},pe=function(e){return le(e)?e.get("items").sort(k.a.subtask):null},he=function(e){return!!e.get("location")},me=function(e){return!!e.get("progress")},ge=function(e){return!!e&&(null!=e.get("assignee")&&-1!==parseInt(String(e.get("assignee")||-1),10))},ve=function(e){var t=e.get("tags");return t&&t.size},ye=function(e,t){var n=e.get("tags");return!!n&&-1!==n.findIndex((function(e){return!!e&&e.toLowerCase()===t}))},be=function(e){var t=e.get("repeatFlag");if(i.a.isEmpty(t))return!1;var n=new Y.a(e);return Object(H.h)(n)},ke=function(e){var t=e.get("repeatFlag");if(i.a.isEmpty(t)||e.get("status")===f.a.Completed)return!1;var n=new Y.a(e);return Object(H.h)(n)},Oe=function(e){return e.get("repeatFrom")===O.A.completedTime},Te=function(e){var t=e.hashCode(),n=function(e,t){return $[e][t]}("hasReminder",t);if(void 0!==n)return n;var r,a=e.get("reminders"),i=e.get("startDate"),o=e.get("status"),c=e.get("items");if(o)return X("hasReminder",t,!1),!1;if(c&&c.size)for(var s=0,u=c.size;s<u;s++){var l=c.get(s);if((r=l.get("snoozeReminderTime")||l.get("startDate"))&&0===l.get("status")){if(l.get("isAllDay")&&!l.get("snoozeReminderTime")){var d=y.c(),f=g.a.prefMoment(r).format("YYYY-MM-DDT")+d;r=g.a.prefMoment(f)}var p=v.i(r,"TRIGGER:PT0S");if(g.a.prefMoment(p).diff(g.a.prefMoment().startOf("minute"),"minutes")>0)return X("hasReminder",t,!0),!0}}if(!i||Se(e))return X("hasReminder",t,!1),!1;if(Re(e))return X("hasReminder",t,!0),!0;if(!Se(e)&&i){r=Pe(e);for(var h=0;h<a.size;h++){var m=null==a?void 0:a.get(h),b=v.i(r,m.get("trigger"));if(g.a.prefMoment(b).diff(g.a.prefMoment().startOf("minute"),"minutes")>0)return X("hasReminder",t,!0),!0}return X("hasReminder",t,!1),!1}return X("hasReminder",t,!1),!1},Se=function(e){var t=e.get("reminders");return!t||(t.isEmpty?t.isEmpty():i.a.isEmpty(t))},Ee=function(e){return F.a.parseUTCString(e.get("startDate"))},we=function(e){if(oe(e)){var t=F.a.parseUTCString(e.get("startDate")),n=F.a.parseUTCString(e.get("dueDate"));return n&&t&&n.getTime()>t.getTime()?n:null}return null},De=function(e){return F.a.parseUTCString(e.get("completedTime"))},je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=Ee(e);if(n)return F.a.getOffsetDays(n,t)},_e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=we(e);if(n)return n=u()(n).subtract(1,"milliseconds").toDate(),F.a.getOffsetDays(n,t)},Ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=De(e);return n?F.a.getOffsetDays(n,t):0},Ie=function(e,t){var n=je(e,t);if(0===n)return!0;var r=_e(e,t);return null!=r&&null!=n&&(n<0&&r>=0)},Me=function(e,t,n){var r=Ee(e);if(Dt(e)&&We(e))return!1;if(!r)return!1;if(u()(r).isAfter(n))return!1;var a=we(e);return a&&u()(a).isAfter(t)||u()(r).isSameOrAfter(t)},Ae=function(e){return oe(e)?g.a.formatToUtc(g.a.getRealDueDate(e.get("dueDate"),e.get("isAllDay"))):e.get("startDate")},xe=function(e){if(e.get("dueDate")&&!g.a.prefMoment(e.get("dueDate")).isSame(e.get("startDate"))){var t=g.a.getRealDueDate(e.get("dueDate"),e.get("isAllDay"));return!e.get("isAllDay")&&t.isSame(t.clone().startOf("day"))&&t.subtract(1,"second"),g.a.formatToUtc(t)}return e.get("startDate")},Re=function(e){var t=e.get("reminders"),n=e.get("startDate"),r=e.get("remindTime"),a=e.get("status");if(!n||Se(e))return!1;if(a)return!1;if(!r)return!1;var i=g.a.getUnix(r);if(i>g.a.getUnix()){if(i>g.a.getUnix(n)){for(var o=0;o<t.size;o++){var c=t.get(o),s=v.i(n,c.get("trigger"));if(g.a.getUnixInMinute(s)===g.a.getUnixInMinute(r))return!1}return!0}return!0}return!1},Pe=function(e){var t=e.get("startDate"),n=e.get("isAllDay");return Object(U.a)(t,n)},Ne=function(e){var t=e.get("startDate");if(!t)return!1;var n=we(e);return!!n&&u()(n).format("YYYYMMDD")!==u()(F.a.parseUTCString(t)||new Date).format("YYYYMMDD")},Le=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=we(e);if(r){var a=g.a.getDiffEnd(e.get("startDate"),t,r);return a?n?a:g.a.formatToUtcString(a):g.a.formatToUtc(t)}return g.a.formatToUtc(t)},Ue=function(e){return fe(e)&&!Dt(e)?"checked":e.get("startDate")&&e.get("attendId")?"schedule":jt(e)?"subtask":ze(e)?"subcalendar":qe(e)?"real-subtask":""},Fe=function(e){switch(e.get("priority")){case O.x.low:return"priority-low";case O.x.medium:return"priority-medium";case O.x.high:return"priority-high";default:return""}},He=function(e){return!(!e.get("startDate")||!e.get("attendId"))},Be=function(e){var t,n;return!!e&&(e.get("isSubTaskModel")?(t=e.get("taskId"),n=e.get("taskAttendId")):(t=e.get("id"),n=e.get("attendId")),!n||n===t)},Ye=function(e){var t,n;return!!e&&(e.get("isSubTaskModel")?(t=e.get("taskId"),n=e.get("taskAttendId")):(t=e.get("id"),n=e.get("attendId")),!!n&&n!==t)},We=function(e){return Ke(e)<0},Ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=g.a.prefMoment(Ae(e));return!e.get("isAllDay")&&e.get("dueDate")&&e.get("dueDate")!==e.get("startDate")&&(n=new Date(n.getTime()-1e3)),n=g.a.startOfDay(n),t=t?g.a.prefMoment(t):new Date,t=g.a.startOfDay(t),Math.floor((n-t)/864e5)},Ge=function(e){if(e.get("dueDate")){var t=e.get("startDate"),n=e.get("dueDate");if(t===n)return 0;n=xe(e);var r=g.a.prefMoment(t);return g.a.prefMoment(n).startOf("day").diff(r.startOf("day"),"days")}return 0},Ve=function(e){var t=e.get("items"),n=t.filter((function(e){return 0===(null==e?void 0:e.get("status"))}));return Math.round((t.size-n.size)/t.size*100)},ze=function(e){return!(!e||!e.get("isSubscribeTask"))},Ze=function(e){return Object(h.h)(e)},qe=function(e){return!!Je(e)},Je=function(e){return!(!e||!e.get("isSubTaskModel"))},$e=function(e,t){return ft(Object(r.fromJS)(t||e.get("reminders")))},Xe=function(e,t,n){var r=e.set("id",Object(S.a)()).delete("etag").delete("attendId").delete("completedTime").delete("commentCount");return n&&n(r),"object"===J(t)&&(r=r.merge(t)),r=r.set("attachments",ft(r.get("attachments"))).set("reminders",ft(r.get("reminders"))).set("items",ft(r.get("items")))},Qe=function(e,t){var n={repeatFlag:null,status:2,completedTime:F.a.formatToServerDate(),repeatTaskId:e.get("id"),childIds:[]};if(t&&t.isCompleteAllUndoPeriod){var r=t.startDate,a=t.dueDate;Object.assign(n,{startDate:r,dueDate:a})}return Xe(e,n)},et=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.get("items")||[];if(t){var r=wt(e);return n.map((function(t){var n;if(t=null===(n=t)||void 0===n?void 0:n.set("status",0),Object(p.h)(t)&&r){t.snoozeReminderTime=null,t.completedTime=null;var a=g.a.prefMoment(r).diff(e.get("startDate"),"days");t=t.merge({snoozeReminderTime:null,completedTime:null,startDate:g.a.formatToUtc(g.a.prefMoment(t.get("startDate")).add(a,"days"))})}return t}))}return n.map((function(e){return e=e.set("status",0)}))},tt=function(e,t){return(e.get("items")||[]).map((function(n){var r;if(n=null===(r=n)||void 0===r?void 0:r.set("status",0),Object(p.h)(n)&&t){n.snoozeReminderTime=null,n.completedTime=null;var a=g.a.prefMoment(t).diff(e.get("startDate"),"days");n=n.merge({snoozeReminderTime:null,completedTime:null,startDate:g.a.formatToUtc(g.a.prefMoment(n.get("startDate")).add(a,"days"))})}return n}))},nt=function(e){var t=wt(e);if(null==t)return null;var n="";if(e.get("repeatFrom")===O.A.completedTime){var r=F.a.parseUTCString(e.get("startDate"))||new Date,a=u()(r),i=u()(t);i.hours(a.hours()),i.minutes(a.minutes()),i.seconds(a.seconds()),n=F.a.formatToServerDate(i)}else n=F.a.formatToServerDate(t);var o=Le(e,n);return n&&o?{startDate:n,dueDate:o}:null},rt=function(e){return(e.get("focusSummaries")||Object(r.List)()).map((function(e){var t=e;return t.merge({estimatedDuration:t.get("estimatedDuration"),estimatedPomo:t.get("estimatedPomo"),pomoCount:0,pomoDuration:0,stopwatchDuration:0})}))},at=function(e){if(e.get("isMulti")){var t=Object(V.g)();if(t&&Object(m.n)(t)){var n=G.z(G.A(O.D.Main)).hasNote;return Z({},yt(e),{isNote:n,isDisableRepeat:n})}return e.get("kind")===O.L.Note?Z({},yt(e),{isNote:!0,isDisableRepeat:!0}):yt(e)}return vt(e)},it=function(e){return e.get("content")||e.get("desc")||le(e)},ot=function(e){return!qe(e)&&!ze(e)&&!Ze(e)},ct=function(e){return!e.get("startDate")||e.get("isAllDay")},st=function(e){return e.get("syncStatus")===w.g},ut=function(e){var t=e.get("repeatFlag");return Object(H.d)(t)},lt=function(e){var t=new Y.a(e),n=t.exDates,r=t.startDate,a=Object(H.a)(u.a.utc(r)),i=0,o=nt(e);return n.forEach((function(e){var t=parseInt(e,10);t>a&&o&&o.startDate&&t<=Object(H.a)(u.a.utc(o.startDate))&&i++})),i},dt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.get("repeatFlag")||"",r=new B.a(n);if(r.forgettingCurveRule){if(null!=r.forgettingCurveRule.count&&(r.forgettingCurveRule.count=Math.max(r.forgettingCurveRule.count-t,1)),null!=r.forgettingCurveRule.cycle){var a=lt(e);r.forgettingCurveRule.cycle+=t+a}}else r.rruleOptions.count>0&&(r.rruleOptions.count=Math.max(r.rruleOptions.count-t,1));return r.toString()},ft=function(e){return(e||Object(r.List)()).map((function(e){return e.set("id",Object(S.a)())}))},pt=function(e,t){var n=g.a.formatWithDate(e.get("startDate"),g.a.toMoment(t.toDate()));return g.a.formatToUtcString(n)},ht=function(e){return null==e.get("isAllDay")||!e.get("startDate")||e.get("isAllDay")},mt=function(e,t){return!e.get("isSubTask")&&e.get("startDate")||!Se(e)?e.get("reminders"):y.a(t)},gt=function(e,t){if(e.get("isSubTask")){var n=e.get("repeatFlag"),r=n&&n.match(/UNTIL=\d+T?\d+Z?/);if(r)if(g.a.prefMoment(r[0].split("=")[1]).isBefore(g.a.prefMoment(t)))return{repeatFlag:null,repeatFrom:null};return{repeatFlag:e.get("repeatFlag"),repeatFrom:e.get("repeatFrom")}}return null},vt=function(e){var t={meridiem:y.b("showMeridiem"),weekStart:y.s(),format:O.m.atomTime,startDate:e.get("startDate")||null,dueDate:we(e)||null,reminders:e.get("reminders"),isAllDay:e.get("isAllDay"),isFloating:e.get("isFloating"),timeZone:e.get("timeZone"),exDate:e.get("exDate"),repeatFrom:e.get("repeatFrom"),isScheduleTask:He(e),isSubscribeTask:ze(e),isWebExtensionTask:e.get("isWebExtensionTask"),id:e.get("id"),projectId:e.get("projectId"),isNote:Dt(e),isDisableRepeat:Dt(e)},n=e.get("repeatFlag");return t.repeatFlag=n||null,t},yt=function(e){var t={meridiem:y.b("showMeridiem"),weekStart:y.s(),format:O.m.atomTime},n=e.get("startDate"),r=e.get("commonDate"),a=e.get("dueDate"),o=e.get("startTime"),c=e.get("repeatFlag"),s=e.get("reminders"),u=e.get("isAllDay"),l=e.get("repeatFrom"),d=e.get("isFloating"),f=e.get("timeZone");if(s&&(s=s.toJS()),null===r&&(u=!0,s=[]),([a,o,c,l,s].indexOf(!1)>-1||"false"===u)&&(t.isBatchMoreEdit=!0),!1!==r&&!1!==o||(a=null),o&&!1!==a?r?n=g.a.prefMoment(r).format("YYYY-MM-DDT"+o+".000ZZ"):(n=null,t.startTime=o):r?(n=g.a.formatToUtc(r),u=!0):n=null,"false"===u&&(u=!0),!1===o)s=null;else if(null===s)s=null;else if(!1===s){s=[];var p=y.g(u);p&&(s=i.a.map(p,(function(e){return{id:Object(S.a)(),trigger:e}})))}return t.startDate=n,t.dueDate=a,t.repeatFrom=l||null,t.repeatFlag=c||null,t.reminders=JSON.parse(JSON.stringify(s||[])),t.isAllDay=u,t.isFloating=d,t.timeZone=f,t.isMultiSelect=!0,t.isNote=Dt(e),u&&t.reminders.map((function(e){return e.trigger=v.b(e.trigger,"09:00"),e})),t},bt=function(e){return e.get("status")&&!e.get("startDate")&&e.get("completedTime")},kt=function(e,t,n){var a=e.get("items").sort(k.a.order),i=t?a.findIndex((function(e){return(null==e?void 0:e.get("id"))===t})):null,o=a.get(i),c=a.get(null===i?0:i+1),s={},u=!1;if(o&&c)Number(c.get("sortOrder"))-Number(o.get("sortOrder"))<=1?u=!0:s[n]=Math.floor((Number(o.get("sortOrder"))+Number(c.get("sortOrder")))/2);else if(c&&!o){var l=Number(c.get("sortOrder"))-E.t;l<E.s?u=!0:s[n]=l}else{var d=Number(o.get("sortOrder"))+E.t;d>E.r?u=!0:s[n]=d}if(u){var f=a.findIndex((function(e){return(null==e?void 0:e.get("id"))===n})),p=-1!==f?a.get(f):Object(r.Map)({id:n});a.splice(i,0,p).forEach((function(e,t){s[e.get("id")]=t*E.t}))}return s},Ot=function(e){return!(e.get("content")||e.get("desc")||le(e)||ce(e)||e.get("commentCount"))},Tt=function(e){var t=e.get("childIds");return!!t&&t.size>0},St=function(e){return ce(e)||ue(e)||he(e)||be(e)||Te(e)||me(e)&&!fe(e)||function(e){return!!e.get("startDate")}(e)&&!(We(e)&&Dt(e))},Et=function(e,t){var n,a=e.get("isAllDay");if(e.get("repeatFrom")===O.A.completedTime)return[];var o=W.b.occurrenceDatesOfRecurrentObjectFromDate(u()().startOf("days").toDate(),new Y.a(e),t),c=r.List.isList(e.get("reminders"))?null===(n=e.get("reminders"))||void 0===n?void 0:n.toJS():e.get("reminders"),s=[],l=g.a.prefMoment(),d=g.a.startOfDay().clone().add(1,"d");return o.forEach((function(e){if(!i.a.isEmpty(c)){var t=Object(U.a)(e,a);c.forEach((function(e){var n=v.i(t,e.trigger);if(n){var r=g.a.prefMoment(n);r>l&&r<d&&s.push(r.format("HH:mm"))}}))}})),s},wt=function(e){var t=new Y.a(e);return t.completedTime||t.repeatFrom!==O.A.completedTime||(t.completedTime=F.a.parseUTCString(F.a.formatToServerDate())||void 0),W.b.occurrenceDateOfRecurrentObject(t)},Dt=function(e){return!!e&&e.get("kind")===O.L.Note},jt=function(e){return e.get("kind")!==O.L.Note&&le(e)},_t=function(e){return function(e){return!(e.get("status")>0&&e.get("repeatTaskId")&&e.get("repeatTaskId")!==e.get("id"))}(G.n(e))},Ct=function(e){var t=e.get("focusSummaries");return null==t?void 0:t.find((function(e){return e.get("userId")===b.a("userId")}))},It=function(e){var t=G.n(e),n=t.get("title"),r=t.get("startDate"),a=t.get("commentCount"),o=t.get("content"),c=!le(t)&&i.a.isEmpty(o);return""!==n||!c||null!=r&&""!==r||null!=a&&0!==a}},331:function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return h}));n(203),n(50),n(121),n(204);var r=n(500),a=n(323),i=n(511),o=n(318),c=Object(r.a)(),s=function(e,t){if(!c)try{localStorage.setItem(a.z.username+"/"+e,t)}catch(e){throw Object(i.captureException)(e),e}},u=function(e,t){if(c)return null;try{return"json"===t?JSON.parse(localStorage.getItem(a.z.username+"/"+e)):localStorage.getItem(a.z.username+"/"+e)}catch(e){Object(i.captureException)(e)}return null},l=function(e,t){if(!c)try{localStorage.setItem(e,t)}catch(e){throw Object(i.captureException)(e),e}},d=function(e,t){if(c)return null;try{return"json"===t?JSON.parse(localStorage.getItem(e)):localStorage.getItem(e)}catch(e){Object(i.captureException)(e)}return null},f=function(e){c||localStorage.removeItem(a.z.username+"/"+e)},p=[{key:o.K.isNoteEnabled,value:void 0},{key:o.K.deviceId,value:void 0},{key:o.q.hideRangeInWKCalendar,value:void 0}],h=function(){if(!c)return new Promise((function(e){try{p.forEach((function(e,t){var n=e.key;p[t].value=d(n)})),localStorage.clear(),p.forEach((function(e){var t=e.key,n=e.value;l(t,n)})),e()}catch(r){Object(i.captureException)(r);for(var t=0,n=localStorage.length;t<n;t++)localStorage.removeItem(localStorage.key(t));e()}}))}},332:function(e,t,n){"use strict";n(211),n(203),n(61),n(120),n(50),n(204),n(110);var r,a=n(0),i=n.n(a),o=n(321),c=n.n(o);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(r=n(828)).keys().forEach(r),t.a=function(e){var t=e.style,n=e.fill,r=e.marginTop,a=e.name,o=e.className,s=void 0===o?"":o,l=e.opacity,d=e.onClick,f=void 0===d?function(){}:d,p=t||{fill:n||"",marginTop:r||""};return i.a.createElement("svg",{onClick:function(e){f(e)},className:c()("icon-".concat(a),s),style:u({},p,{opacity:function(){if(l)return"".concat(l/100);return}()})},i.a.createElement("use",{xlinkHref:"#".concat(a)}))}},333:function(e,t,n){"use strict";n.d(t,"q",(function(){return y})),n.d(t,"t",(function(){return b})),n.d(t,"j",(function(){return k})),n.d(t,"s",(function(){return O})),n.d(t,"y",(function(){return T})),n.d(t,"a",(function(){return S})),n.d(t,"x",(function(){return E})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return D})),n.d(t,"d",(function(){return C})),n.d(t,"r",(function(){return I})),n.d(t,"w",(function(){return M})),n.d(t,"u",(function(){return A})),n.d(t,"n",(function(){return x})),n.d(t,"i",(function(){return R})),n.d(t,"v",(function(){return P})),n.d(t,"m",(function(){return N})),n.d(t,"p",(function(){return L})),n.d(t,"B",(function(){return U})),n.d(t,"A",(function(){return F})),n.d(t,"k",(function(){return H})),n.d(t,"g",(function(){return B})),n.d(t,"e",(function(){return Y})),n.d(t,"f",(function(){return W})),n.d(t,"o",(function(){return K})),n.d(t,"z",(function(){return G})),n.d(t,"l",(function(){return V})),n.d(t,"h",(function(){return z}));n(73),n(205),n(173),n(208),n(203),n(153),n(61),n(152),n(156),n(50),n(33),n(207),n(154),n(111),n(112),n(158),n(204),n(110);var r=n(320),a=n(326),i=n(334),o=n(341),c=n(349),s=n(318),u=n(323),l=n(359),d=n(456),f=n(353),p=n(396),h=n(327),m=n(395),g=n(461);var v=function(e){return"view"===e?c.h:"edit"===e?c.g:function(){return!1}},y=function(){return a.a.getState().projects.projectList},b=function(){var e=a.a.getState().projects,t=e.projectList,n=e.projectInbox;return t.push(n)},k=function(){return a.a.getState().projects.projectInbox},O=function(){return y().size},T=function(){return w({withInbox:!1}).size},S=function(e){var t=e.projects,n=e.available,r=void 0===n?"view":n;return t.filter((function(e){return!!c.i(e)||!v(r)(e)}))},E=function(){return y().filter((function(e){return!!e.get("teamId")}))},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sort:!1,withInbox:!0,available:"view"},t=null==e.withInbox||e.withInbox,n=t?b():y();return _(n,e)},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{sort:!1,available:"view"};return _(j(e),t).toArray()},j=function(e){var t=[],n=new Set(e),i=a.a.getState().projects,c=i.projectList,s=i.projectInbox;return(n.has(o.a("inboxId"))||n.has("inbox"))&&t.push(s),c.toArray().forEach((function(e){n.has(e.get("id"))&&t.push(e)})),Object(r.List)(t)},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{sort:!1,available:"view"},n=null!=t.sort&&t.sort,r=null==t.available?"view":t.available,a=e.filter((function(e){return!v(r)(e)}));return n&&(a=a.sort(l.a.projectOrder)),a},C=function(e){var t=e.teamId,n=e.available,r=void 0===n?"view":n;return function(e){var t=y();return e?t.filter((function(t){return t.get("teamId")===e})):t.filter((function(e){return!e.get("teamId")}))}(t).filter((function(e){return!v(r)(e)}))},I=function(e){return y().filter((function(t){return!c.f(t)&&t.get("groupId")===e}))},M=function(e){var t=I(e);return t.sort((function(e,t){return e.get("sortOrder")-t.get("sortOrder")}))},A=function(){return y().filter((function(e){return!c.h(e)&&!!c.p(e)}))},x=function(e){return b().find((function(t){return t.get("id")===e}))},R=function(e){return S({projects:M(e),available:"edit"}).get(0)},P=function(e){return a.a.getState().projects.smartProjectList.find((function(t){return t.get("id")===e}))},N=function(e){var t=d.a(e).get("projectId");return x(t)},L=function(e,t){var n=x(e);return n?n.get("name"):e&&e.includes("inbox")||t&&t.includes("inbox")?k().get("name"):t||""},U=function(e){var t=x(e);return!!t&&parseInt("".concat(t.get("userCount")),10)>1},F=function(e){var t=x(e);return!!t&&c.j(t)},H=function(e){var t=C({teamId:e}).minBy((function(e){return e.get("sortOrder")}));return t&&t.get("sortOrder")!==1/0?t.get("sortOrder"):0},B=function(){var e=i.h();if(e){"inbox"===e&&(e+=u.A);var t,n=x(e);return n||(t=decodeURIComponent(e),n=b().find((function(e){return e.get("name")===t}))),n||(n=P("tasks")),n}},Y=function(){var e=B();if(e){var t=e.get("id");return"tasks"===t&&(t=i.h()),t}},W=function(){var e,t=B();return t?("tasks"===(e=t.get("id"))&&(i.p()?e=i.h():(e=i.i(),e=(t=P(e))?s.H[t.get("id")]:i.h())),e):null},K=function(){return i.v()&&(i.D()||i.t())?B():x(h.f())},G=function(){return y().find((function(e){return!!e.get("needPullTasks")}))},V=function(){return y().filter((function(e){return!!e.get("needPullTasks")})).map((function(e){return e.get("id")})).toArray()},z=function(){if(i.C())return Object(f.g)();var e=i.h();return e?"all"===e?i.d().split("/")[2]:"inbox"===e?e+=u.A:e:void 0};Object(p.createSelector)([function(e){var t=e.preference.get("webCalendarViewFilter");return t?JSON.parse(t):null},function(e){var t=e.preference.get("defaultProjectId")||o.a("inboxId");return x(t)?t:o.a("inboxId")},function(e){var t=e.projects,n=t.projectList,r=t.projectInbox;return n.push(r)},function(e){return e.customSmartProjects},function(e){return e.groups.groupList},function(e){return e.tags}],(function(e,t,n,r,a,i){if(e){var s=e.project,u=e.tag;if("all"===s||"assignedMe"===s)return t;var d=s.csl,f=s.list,p=s.group,h=(f||[]).filter((function(e){var t=x(e);return!!t&&!c.g(t)})),v=h;if(p&&p.length>0){var y=n.groupBy((function(e){return e.get("groupId")||null})),b={},k={};if(p.forEach((function(e){var t=y.get(e);if(t){var n=t.sort(l.a.order).toArray().filter((function(e){return!c.g(e)})),r=n.map((function(e){return e.get("id")}));b[e]=r,k[e]=n.filter((function(e){return!c.p(e)})).map((function(e){return e.get("id")})),v=v.concat(r||[])}})),v.length>0){if(v.includes(t))return t;var O=h.filter((function(e){var t=x(e);return!!t&&!c.p(t)})).map((function(e){return x(e)})),T=p.filter((function(e){return k[e]&&k[e].length>0})).map((function(e){return Object(m.a)(e)||null})).filter(Boolean),S=O.concat(T).sort(l.a.order).map((function(e){return e?e.get("id"):null})).filter(Boolean);if(S.length>0){var E=S[0];return b[E]&&b[E].length>0?b[E][0]:E}return o.a("inboxId")}return t}if(d){var w=g.a(d);return w?w.get("id"):t}return u&&u.length>0&&0===v.length?t:v.length>0?v.includes(t)?t:v.filter((function(e){var t=x(e);return!!t&&!c.p(t)}))[0]||t:t}return t}))},334:function(e,t,n){"use strict";n.d(t,"d",(function(){return h})),n.d(t,"A",(function(){return g})),n.d(t,"z",(function(){return v})),n.d(t,"s",(function(){return y})),n.d(t,"y",(function(){return b})),n.d(t,"v",(function(){return k})),n.d(t,"C",(function(){return O})),n.d(t,"w",(function(){return T})),n.d(t,"x",(function(){return S})),n.d(t,"E",(function(){return E})),n.d(t,"F",(function(){return w})),n.d(t,"H",(function(){return D})),n.d(t,"p",(function(){return j})),n.d(t,"G",(function(){return _})),n.d(t,"m",(function(){return C})),n.d(t,"o",(function(){return I})),n.d(t,"q",(function(){return M})),n.d(t,"r",(function(){return A})),n.d(t,"B",(function(){return x})),n.d(t,"u",(function(){return R})),n.d(t,"e",(function(){return P})),n.d(t,"c",(function(){return N})),n.d(t,"K",(function(){return L})),n.d(t,"J",(function(){return F})),n.d(t,"D",(function(){return H})),n.d(t,"t",(function(){return B})),n.d(t,"h",(function(){return Y})),n.d(t,"g",(function(){return W})),n.d(t,"f",(function(){return K})),n.d(t,"l",(function(){return G})),n.d(t,"k",(function(){return V})),n.d(t,"j",(function(){return z})),n.d(t,"i",(function(){return Z})),n.d(t,"n",(function(){return q})),n.d(t,"a",(function(){return J})),n.d(t,"b",(function(){return $})),n.d(t,"I",(function(){return X}));n(73),n(414),n(205),n(203),n(153),n(159),n(155),n(33),n(154),n(112),n(158),n(204);var r=n(335),a=n(318),i=n(395),o=n(333),c=n(327),s=n(412),u=n(157),l=n(349),d=n(401),f=n(326),p=n(375),h=function(e){var t=(e||window.location.href).match(/#(.[^?#]*)/);return t?t[1]:""},m=function(){var e=window.location.href.match(/\?(.*)$/),t={};e&&e[1]&&e[1].split("&").forEach((function(e){var n=e.split("=");2===n.length&&(t[n[0]]=n[1])}));return t},g=function(){var e=h().split("/");return e[2]===a.G.subscribe||e[2]===a.G.subscribeAccount},v=function(){return h().split("/")[2]===a.G.subscribeAccount},y=function(){return"inbox"===h().split("/")[1]},b=function(){return"q"===h().split("/")[0]},k=function(){return"p"===h().split("/")[0]},O=function(){return"t"===h().split("/")[0]},T=function(){return"s"===h().split("/")[0]},S=function(){return"settings"===h().split("/")[0]},E=function(){return"today"===h().split("/")[2]},w=function(){return"tomorrow"===h().split("/")[2]},D=function(){return"week"===h().split("/")[2]},j=function(){return"f"===h().split("/")[0]},_=function(){return"trash"===h().split("/")[2]},C=function(){return"assignedme"===h().split("/")[2]},I=function(){return"completed"===h().split("/")[2]},M=function(){return"d"===h().split("/")[0]},A=function(){var e=h().split("/");if("p"===e[0]){var t=e[1],n=o.n(t);return!!n&&l.g(n)}if("g"===e[0]){var r=e[1],a=i.a(r);return!!a&&(!!d.b(a)||o.r(r).every((function(e){return l.g(e)})))}return!1},x=function(){return h().split("/")[2]===a.G.tkcalendar},R=function(){return"g"===h().split("/")[0]},P=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?"kanban":"tasks";return"/p/inbox/".concat(t)},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.includes("inbox"))return P(t);var n=t?"kanban":"tasks";return"/p/".concat(e,"/").concat(n)},L=function(){u.a.dispatch("postMessageToSW",{action:"signout",toUrl:"/signon"}),U("/signon")},U=function(e){r.a.willSignout=!0,s.a.clear().then((function(){window.location.href=e}))},F=function(){var e=h().split("/");return{category:a.E[e[0]],name:e[1],type:e[2],taskid:e[3]}},H=function(){var e=h().split("/");return"tasks"===e[2]||"inbox"===e[1]},B=function(){return"kanban"===h().split("/")[2]},Y=function(){return h().split("/")[1]},W=function(){return O()?null:h().split("/")[1]},K=function(){return h().split("/")[1]},G=function(){var e=h().split("/");return e.length>3&&(e=e.slice(0,3)),"s"===e[0]&&(e=e.slice(0,2)),e.join("/")},V=function(){var e=h().split("/");return e.length>3?e.pop():null},z=function(){return h().split("/")[1]},Z=function(){return h().split("/")[2]},q=function(){return(e=m()).env&&e.env.match(/mac/)||function(){var e=m();return e.env&&e.env.match(/windows/)}();var e},J=function(){var e="classic",t=m(),n=t.theme?t.theme:"";return n&&(e=c.p(n)),e},$=function(){return h().split("/")[1]},X=function(e){f.a.dispatch(Object(p.d)(N(e,o.A(e))))}},335:function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));n(61),n(346),n(50),n(207),n(111),n(110);var r=n(331),a=n(318),i={showDetailModal:!1,keepFullScreen:!1,completed_section_status:"show",dropFolder:!1,dropOnMiniCalendar:!1,projectGroupOpenStatus:Object(r.c)(a.K.projectGroupOpenStatus,"json")||{},teamOpenStatus:Object(r.c)(a.K.teamOpenStatus,"json")||{},parentTagOpenStatus:Object(r.c)(a.K.parentTagOpenStatus,"json")||{},hasMoreTasksPopover:!1,mouseDownInCalendar:!1,newRangeDefaultInCalendar:null,newRangeStartInCalendar:null,newRangeEndInCalendar:null,hideRangeStatus:!0,hideRange:{},tempTaskCreatedByDragInWkCol:{},featureTimeStamp:Object(r.c)(a.K.featureTimeStamp,"json"),keydownTab:!1,stopTabUp:!1,newAddedTaskId:"",disabledSmartParseText:[],canUploadAttachment:!0,openNotification:!1,toBeDeletedTaskIds:new Set,hasTaskContextMenu:!1,hasOutDetail:!1,hasManageTags:!1,hasArchiveMenu:!1,dropOtherColumn:!1,fetchCompleted:{},dragStepMinute:15,currentSortType:new Map([["id",void 0],["sortType",void 0]]),currentInitKanban:new Map,currentColumnTaskMenu:"",currentSectionListInProject:[],recentDateReminderSet:Object(r.c)(a.K.recentDateReminderSet,"json")||[],recentTimeReminderSet:Object(r.c)(a.K.recentTimeReminderSet,"json")||[],dragHoverTarget:"",isModifierKeyPressDragging:!1,haveCreatedTask:!1,columnOutSingleEscObj:null,lastTaskItemBackspaceTime:null,lastChecklistItemBackspaceTime:null,tempToggleCollapseTaskIds:[],tempToggleCollapseSectionIds:[],taskListScrollToId:null,stashConvertData:{},stashTempMovedTasks:{},forceUpdatedDetailMode:!1,earliestLocalTaskCompletionDate:null,earliestCalendarEventsFetchDate:null,isInvalidResizeInKanban:!1,dragRepeatTask:null,judgeMoveStop:{lastTime:Date.now(),lastY:99999,lastResult:!1,lastX:0},multiSelectOriginView:"",autoSaveEnabled:!0,highlightKeyWordsRegExp:null,taskModeChangeStash:null,defaultSelectEstimationType:"estimated_pomo"};t.a=i;var o=null;function c(){i.keepFullScreen=!0,o&&clearTimeout(o),o=setTimeout((function(){i.keepFullScreen=!1}),1e3)}},336:function(e,t,n){"use strict";n.d(t,"w",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"o",(function(){return p})),n.d(t,"p",(function(){return h})),n.d(t,"u",(function(){return m})),n.d(t,"k",(function(){return g})),n.d(t,"i",(function(){return v})),n.d(t,"t",(function(){return y})),n.d(t,"j",(function(){return k})),n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return T})),n.d(t,"v",(function(){return E})),n.d(t,"l",(function(){return w})),n.d(t,"q",(function(){return D})),n.d(t,"r",(function(){return j})),n.d(t,"m",(function(){return _})),n.d(t,"n",(function(){return C})),n.d(t,"s",(function(){return I})),n.d(t,"h",(function(){return M})),n.d(t,"x",(function(){return A})),n.d(t,"d",(function(){return x})),n.d(t,"f",(function(){return N})),n.d(t,"g",(function(){return L})),n.d(t,"e",(function(){return U}));n(173),n(119),n(159),n(155),n(50),n(33),n(143),n(158),n(597);var r=n(98),a=n.n(r),i=(n(99),n(321),n(319),n(362)),o=n(318),c=(n(323),n(355)),s=n(393),u=(n(402),function(e,t,n){c.b({text:e,delayTime:t,onClickAction:n})}),l=function(e){d(e),f(e)},d=function(e){var t=document.querySelector(".ui-sortable-placeholder:not(.hide)");t&&t!==e&&t.classList.add("hide")},f=function(e){var t=document.querySelector('[class*="-drag-hovered"]');if(t&&t!==e)for(var n in o.p)t.classList.remove(o.p[n])},p=function(e,t,n){try{e.focus()}catch(e){i.i("placeCaretAt_error"),a.a.error(e)}if(void 0!==document.body.createTextRange){var r=document.body.createTextRange();r.moveToElementText(e),r.moveStart("character",t),r.collapse(!0),r.select()}else if(void 0!==window.getSelection&&void 0!==document.createRange){var o=document.createRange();e.childNodes[0]&&o.selectNodeContents(e.childNodes[0]),e.childNodes[0]&&o.endOffset>=t&&o.setStart(e.childNodes[0],t),o.collapse(!0);var c=window.getSelection();c.removeAllRanges(),c.addRange(o)}},h=function(e,t){if(!t)try{e.focus()}catch(e){a.a.error(e)}if(void 0!==window.getSelection&&void 0!==document.createRange){var n=document.createRange();n.selectNodeContents(e),n.collapse(!1);var r=window.getSelection();r.removeAllRanges(),r.addRange(n)}else if(void 0!==document.body.createTextRange){var i=document.body.createTextRange();i.moveToElementText(e),i.collapse(!1),i.select()}},m=function(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}},g=function(e){var t,n=0,r=e.ownerDocument||e.document,a=r.defaultView||r.parentWindow;if(void 0!==a.getSelection){if((t=a.getSelection()).rangeCount>0){var i=a.getSelection().getRangeAt(0),o=i.cloneRange();o.selectNodeContents(e),o.setEnd(i.endContainer,i.endOffset),n=o.toString().length}}else if((t=r.selection)&&"Control"!=t.type){var c=t.createRange(),s=r.body.createTextRange();s.moveToElementText(e),s.setEndPoint("EndToEnd",c),n=s.text.length}return n},v=function(e){var t,n,r=0;if(window.getSelection)(t=window.getSelection()).rangeCount&&((n=t.getRangeAt(0)).commonAncestorContainer.parentNode!=e&&n.commonAncestorContainer!=e||(r=n.endOffset));else if(document.selection&&document.selection.createRange&&(n=document.selection.createRange()).parentElement()==e){var a=document.createElement("span");e.insertBefore(a,e.firstChild);var i=n.duplicate();i.moveToElementText(a),i.setEndPoint("EndToEnd",n),r=i.text.length}return r},y=function(e,t){for(var n=window.getSelection(),r=n.getRangeAt(0),a=e.childNodes,i=e,o=0,c=a.length;o<c;o++){var s=a[o].textContent.length;if(!(t>s)){i=a[o];break}t-=s}i=3===i.nodeType?i:i.childNodes[0],b(i,t,r),r.collapse(!0),n.removeAllRanges(),n.addRange(r)},b=function e(t,n,r){if(!(n<0))try{r.setStart(t,n)}catch(a){e(t,--n,r)}},k=function(){var e,t=S().getRangeAt(0).cloneRange();if(s.h){var n=t.getClientRects();e=n[n.length-1]}else e=t.getBoundingClientRect();return e||{bottom:0}},O=function(){for(var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body",a=$(r),i=a.find("#td-container").children(),o=a.find("#td-editor"),c=a.find("#taskcontent"),s=a.find("#detail-tag-view"),u=a.find("#descendant-task-view"),l=null!==(e=a.find("#content-view").height())&&void 0!==e?e:0,d=null!==(t=a.find("#td-caption").outerHeight())&&void 0!==t?t:0,f=0,p=1;p<i.length;p++){var h;f+=null!==(h=i.eq(p).outerHeight())&&void 0!==h?h:0}var m=l-d-f,g=null!==(n=s.height())&&void 0!==n?n:0;g?o.removeClass("no-tag"):o.addClass("no-tag");var v=g||u.length>0,y=0===c.length;if(y){var b=m<0?"auto":m;o.css("min-height",b)}else if(v){var k=m<0?"auto":m;o.css("min-height",k),c.css("min-height","auto")}else{var O,T,S=(null!==(O=c.outerHeight())&&void 0!==O?O:0)-(null!==(T=c.height())&&void 0!==T?T:0),E=m-S,w=E<0?"auto":E;o.css("min-height","auto"),c.css("min-height",w)}},T=function(e,t){var n=window.innerHeight,r=e.outerHeight(),a=e.position().top,i=e.offset().top;t&&(n=t.offset().top+t.outerHeight());var o=n-i-r;o<0&&e.css("top",o+a)},S=function(){var e;return window.getSelection?e=window.getSelection():document.selection&&(e=document.selection.createRange()),e},E=function(){window.innerWidth<=o.B.mobile&&$("body").addClass("detail-show")};var w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.ticktickAntiscroll(t)},D=function(e){e.data().antiscroll.rebuild()},j=function(e){e.data("antiscroll")&&e.data("antiscroll").destroy()},_=function(e){var t=e.doc.getCursor();return!!e.hasFocus()&&0===t.line},C=function(e){var t=e.doc.getSelection(),n=e.doc.getCursor(),r=e.doc.lastLine();return!t&&(n.line===r&&n.ch===e.doc.getLine(r).length)},I=function(e){var t,n;window.getSelection&&document.createRange?((n=document.createRange()).selectNodeContents(e),(t=window.getSelection()).removeAllRanges(),t.addRange(n)):document.body.createTextRange&&((n=document.body.createTextRange()).moveToElementText(e),n.select())},M=function(e){var t=0,n=e.ownerDocument||e.document,r=n.defaultView||n.parentWindow,a=S();if(s.d||s.b){var i=s.a();if(!(void 0===a||a.toString().length||i&&i<9)){var o=document.createRange();return o.setStart(e,0),a.anchorNode&&o.setEnd(a.anchorNode,a.anchorOffset),o.toString().length}}if(void 0!==r.getSelection){if((a=r.getSelection()).rangeCount>0){var c=r.getSelection().getRangeAt(0),u=c.startContainer,l=[];if(!e.contains(u))return 0;R(e,u,l),l.push(u.textContent.slice(0,c.endOffset)),t=l.join("").length}}else if((a=n.selection)&&"Control"!=a.type){var d=a.createRange(),f=n.body.createTextRange();f.moveToElementText(e),f.setEndPoint("EndToEnd",d),t=f.text.length}return t},A=function(e,t){var n,r,a,i=t.tagName||"div",o=t.className||"",c=t.buildNode,s=t.startIndex||0,u=t.endIndex||0,l=t.element,d=t.selectNodeFirst;if(window.getSelection?(n=window.getSelection()).rangeCount&&(r=n.getRangeAt(0)):document.selection&&document.selection.createRange&&(r=document.selection.createRange()),r){d&&r.selectNodeContents(l);var f=r.startContainer,p=r.startContainer,h=r.endContainer;if(f.parentNode&&o&&f.parentNode.className.split(/\s/).indexOf(o)>-1)return void(f.textContent!==e&&(f.textContent=e));var m=r.startOffset-s;return r.setStart(p,s),r.setEnd(h,u),r.deleteContents(),c?a=c(e,r,m,n):((a=document.createElement(i)).className=o,a.innerText=e,r.insertNode(a),r.setStart(a.childNodes[0],m),r.collapse(!0),n.removeAllRanges(),n.addRange(r)),a}},x=function(e){var t,n;if(window.getSelection?(t=window.getSelection()).rangeCount&&(n=t.getRangeAt(0)):document.selection&&document.selection.createRange&&(n=document.selection.createRange()),n){try{n.setStart(n.startContainer,n.startOffset-(1+e)),n.setEnd(n.endContainer,n.endOffset)}catch(e){a.a.error(e)}n.deleteContents()}},R=function e(t,n,r){var a=!0;if(t!==n){if(t.childNodes.length){if(!(a=e(t.childNodes[0],n,r)))return}else r.push(t.textContent);if(!t.nextSibling||(P(t.nextSibling)&&r.push("\n"),a=e(t.nextSibling,n,r)))return a}},P=function e(t){return t&&1===t.nodeType&&"p"===t.nodeName.toLowerCase()&&!e(t.parentNode)},N=function(e){var t=e.previousSibling,n=0;return t?n=t.textContent.length:(t=e.parentNode,n=0),{node:t,offset:n}},L=function(e){var t,n,r=e.node,a=e.offset;window.getSelection?(t=window.getSelection()).rangeCount&&(n=t.getRangeAt(0)):document.selection&&document.selection.createRange&&(n=document.selection.createRange()),n.setStart(r,a),n.collapse(!0),t.removeAllRanges(),t.addRange(n)},U=function(e){var t,n;return e.prevAll("li").length?t=e.prevAll("li").first():e.parents("section").prevAll("section.opened").each((function(){$(this).find("li").length&&(t=$(this).find("li").last())})),e.nextAll("li").length?n=e.nextAll("li").first():e.parents("section").nextAll("section").each((function(){$(this).find("li").length&&(n=$(this).find("li").first())})),{previous:t,next:n}}},339:function(e,t,n){"use strict";n.d(t,"Ab",(function(){return r})),n.d(t,"k",(function(){return a})),n.d(t,"M",(function(){return i})),n.d(t,"Y",(function(){return o})),n.d(t,"X",(function(){return c})),n.d(t,"W",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"db",(function(){return l})),n.d(t,"rb",(function(){return d})),n.d(t,"C",(function(){return f})),n.d(t,"fd",(function(){return p})),n.d(t,"Rc",(function(){return h})),n.d(t,"Sc",(function(){return m})),n.d(t,"Yc",(function(){return g})),n.d(t,"cd",(function(){return v})),n.d(t,"Pc",(function(){return y})),n.d(t,"Tc",(function(){return b})),n.d(t,"ab",(function(){return k})),n.d(t,"bd",(function(){return O})),n.d(t,"Vc",(function(){return T})),n.d(t,"ad",(function(){return S})),n.d(t,"Mc",(function(){return E})),n.d(t,"Oc",(function(){return w})),n.d(t,"dd",(function(){return D})),n.d(t,"Nc",(function(){return j})),n.d(t,"Xc",(function(){return _})),n.d(t,"Uc",(function(){return C})),n.d(t,"Lc",(function(){return I})),n.d(t,"Bb",(function(){return M})),n.d(t,"Jc",(function(){return A})),n.d(t,"K",(function(){return x})),n.d(t,"j",(function(){return R})),n.d(t,"kb",(function(){return P})),n.d(t,"Kc",(function(){return N})),n.d(t,"r",(function(){return L})),n.d(t,"s",(function(){return U})),n.d(t,"nb",(function(){return F})),n.d(t,"p",(function(){return H})),n.d(t,"n",(function(){return B})),n.d(t,"Zc",(function(){return Y})),n.d(t,"Wc",(function(){return W})),n.d(t,"z",(function(){return K})),n.d(t,"tb",(function(){return G})),n.d(t,"sb",(function(){return V})),n.d(t,"hb",(function(){return z})),n.d(t,"ic",(function(){return Z})),n.d(t,"N",(function(){return q})),n.d(t,"Q",(function(){return J})),n.d(t,"P",(function(){return $})),n.d(t,"O",(function(){return X})),n.d(t,"R",(function(){return Q})),n.d(t,"Pb",(function(){return ee})),n.d(t,"Ob",(function(){return te})),n.d(t,"Nb",(function(){return ne})),n.d(t,"Mb",(function(){return re})),n.d(t,"V",(function(){return ae})),n.d(t,"e",(function(){return ie})),n.d(t,"t",(function(){return oe})),n.d(t,"Z",(function(){return ce})),n.d(t,"S",(function(){return se})),n.d(t,"eb",(function(){return ue})),n.d(t,"Lb",(function(){return le})),n.d(t,"Cc",(function(){return de})),n.d(t,"dc",(function(){return fe})),n.d(t,"gd",(function(){return pe})),n.d(t,"cc",(function(){return he})),n.d(t,"Jb",(function(){return me})),n.d(t,"x",(function(){return ge})),n.d(t,"yb",(function(){return ve})),n.d(t,"uc",(function(){return ye})),n.d(t,"Kb",(function(){return be})),n.d(t,"wb",(function(){return ke})),n.d(t,"c",(function(){return Oe})),n.d(t,"E",(function(){return Te})),n.d(t,"qc",(function(){return Se})),n.d(t,"rc",(function(){return Ee})),n.d(t,"sc",(function(){return we})),n.d(t,"pc",(function(){return De})),n.d(t,"U",(function(){return je})),n.d(t,"o",(function(){return _e})),n.d(t,"Vb",(function(){return Ce})),n.d(t,"jb",(function(){return Ie})),n.d(t,"i",(function(){return Me})),n.d(t,"Ic",(function(){return Ae})),n.d(t,"A",(function(){return xe})),n.d(t,"Wb",(function(){return Re})),n.d(t,"Ub",(function(){return Pe})),n.d(t,"g",(function(){return Ne})),n.d(t,"Rb",(function(){return Le})),n.d(t,"ib",(function(){return Ue})),n.d(t,"Ec",(function(){return Fe})),n.d(t,"u",(function(){return He})),n.d(t,"Tb",(function(){return Be})),n.d(t,"h",(function(){return Ye})),n.d(t,"Hc",(function(){return We})),n.d(t,"q",(function(){return Ke})),n.d(t,"w",(function(){return Ge})),n.d(t,"Sb",(function(){return Ve})),n.d(t,"Fc",(function(){return ze})),n.d(t,"Gc",(function(){return Ze})),n.d(t,"Qb",(function(){return qe})),n.d(t,"v",(function(){return Je})),n.d(t,"Dc",(function(){return $e})),n.d(t,"J",(function(){return Xe})),n.d(t,"f",(function(){return Qe})),n.d(t,"jc",(function(){return et})),n.d(t,"Eb",(function(){return tt})),n.d(t,"Db",(function(){return nt})),n.d(t,"ob",(function(){return rt})),n.d(t,"wc",(function(){return at})),n.d(t,"xc",(function(){return it})),n.d(t,"G",(function(){return ot})),n.d(t,"Ib",(function(){return ct})),n.d(t,"Hb",(function(){return st})),n.d(t,"qb",(function(){return ut})),n.d(t,"Ac",(function(){return lt})),n.d(t,"Bc",(function(){return dt})),n.d(t,"I",(function(){return ft})),n.d(t,"Gb",(function(){return pt})),n.d(t,"Fb",(function(){return ht})),n.d(t,"pb",(function(){return mt})),n.d(t,"yc",(function(){return gt})),n.d(t,"zc",(function(){return vt})),n.d(t,"H",(function(){return yt})),n.d(t,"zb",(function(){return bt})),n.d(t,"kc",(function(){return kt})),n.d(t,"cb",(function(){return Ot})),n.d(t,"bb",(function(){return Tt})),n.d(t,"gb",(function(){return St})),n.d(t,"T",(function(){return Et})),n.d(t,"xb",(function(){return wt})),n.d(t,"tc",(function(){return Dt})),n.d(t,"b",(function(){return jt})),n.d(t,"D",(function(){return _t})),n.d(t,"mc",(function(){return Ct})),n.d(t,"nc",(function(){return It})),n.d(t,"ub",(function(){return Mt})),n.d(t,"vb",(function(){return At})),n.d(t,"lc",(function(){return xt})),n.d(t,"oc",(function(){return Rt})),n.d(t,"Zb",(function(){return Pt})),n.d(t,"Yb",(function(){return Nt})),n.d(t,"B",(function(){return Lt})),n.d(t,"bc",(function(){return Ut})),n.d(t,"ac",(function(){return Ft})),n.d(t,"hc",(function(){return Ht})),n.d(t,"gc",(function(){return Bt})),n.d(t,"fc",(function(){return Yt})),n.d(t,"y",(function(){return Wt})),n.d(t,"ec",(function(){return Kt})),n.d(t,"hd",(function(){return Gt})),n.d(t,"Xb",(function(){return Vt})),n.d(t,"l",(function(){return zt})),n.d(t,"ed",(function(){return Zt})),n.d(t,"L",(function(){return qt})),n.d(t,"lb",(function(){return Jt})),n.d(t,"Cb",(function(){return $t})),n.d(t,"d",(function(){return Xt})),n.d(t,"vc",(function(){return Qt})),n.d(t,"F",(function(){return en})),n.d(t,"fb",(function(){return tn})),n.d(t,"Qc",(function(){return nn})),n.d(t,"m",(function(){return rn})),n.d(t,"mb",(function(){return an}));var r="SET_INTL_LOCALE",a="ADD_TASK",i="DESTROY_TASKS",o="MERGE_TASKS_FROM_SERVER",c="MERGE_TASKS_FROM_LOCAL",s="MERGE_TASKS",u="ADD_CHILD_IDS",l="REMOVE_CHILD_IDS",d="RESTORE_TASKS",f="COMPLETE_TASK",p="UPDATE_TASK_TITLE",h="UPDATE_TASK_CONTENT",m="UPDATE_TASK_DESC",g="UPDATE_TASK_ORDER",v="UPDATE_TASK_REMINDTIME",y="UPDATE_TASK_COMMENT_COUNT",b="UPDATE_TASK_DUEDATE",k="MOVE_PROJECT",O="UPDATE_TASK_PROGRESS",T="UPDATE_TASK_EXDATE",S="UPDATE_TASK_PRIORITY",E="UPDATE_TASK_ASSIGNEE",w="UPDATE_TASK_COLUMNID",D="UPDATE_TASK_TAGS",j="UPDATE_TASK_ATTACHMENT",_="UPDATE_TASK_MODE",C="UPDATE_TASK_ETAG",I="UPDATE_TAKS_TIMEZONE",M="SET_IS_SHOW_COUNT_DOWN",A="UPDATE_SUBTASKS",x="DELETE_TASKS",R="ADD_TAG_TO_TASKS",P="REMOVE_TAG_FROM_TASKS",N="UPDATE_TAG_OF_TASKS",L="AFTER_COMMIT_TASKS",U="AFTER_COMMIT_TASK_PARENTS",F="REPLACE_TASK",H="AFTER_COMMIT_DELETE_TASKS",B="AFTER_COMMIT_ASSIGN_TASKS",Y="UPDATE_TASK_POMOSUMMARY",W="UPDATE_TASK_FOCUS_SUMMARIES",K="CLEAR_SELECTED_TASKIDS",G="SET_ACTIVE_TASKID",V="SET_ACTIVE_SELECTED_TASKIDS",z="REMOVE_SELECTED_TASKID",Z="TOGGLE_SELECTED_TASKID",q="DETAIL_CLEAR_SELECTED_TASKIDS",J="DETAIL_SET_ACTIVE_TASKID",$="DETAIL_SET_ACTIVE_SELECTED_TASKIDS",X="DETAIL_REMOVE_SELECTED_TASKID",Q="DETAIL_TOGGLE_SELECTED_TASKID",ee="SET_POMO_TASKID",te="SET_POMO_STATUS",ne="SET_POMO_SETTINGS",re="SET_POMO_LIST",ae="MERGE_POMO",ie="ADD_POMO",oe="AFTER_SYNC_POMO",ce="MERGE_TRASH_TASKS",se="EMPTY_TRASH_TASKS",ue="REMOVE_FROM_TRASH",le="SET_PLUGINS",de="UPDATE_PLUGINS_STATUS",fe="SET_USERPROFILE",pe="UPDATE_USERID",he="SET_USERNAME",me="SET_PHONE",ge="CHANGE_USERNAME",ve="SET_FILLED_PASSWORD",ye="UPDATE_NAME",be="SET_PICTURE",ke="SET_CSLS",Oe="ADD_CSL",Te="DELETE_CSL",Se="UPDATE_CSL_RULE",Ee="UPDATE_CSL_SORTORDERS",we="UPDATE_CSL_SORTTYPE",De="UPDATE_CSL",je="MERGE_CSLS",_e="AFTER_COMMIT_CSLS",Ce="SET_SUBSCRIBE_URL_CALENDARS",Ie="REMOVE_SUBSCRIBE_URL_CALENDAR",Me="ADD_SUBSCRIBE_URL_CALENDAR",Ae="UPDATE_SUBSCRIBE_URL_CALENDAR",xe="CLEAR_SUBSCRIBE_URL_EVENTS",Re="SET_SUBSCRIBE_URL_EVENTS",Pe="SET_SUBSCRIBE_EVENTS_BY_CALENDARID",Ne="ADD_SUBSCRIBE_ACCOUNT",Le="SET_SUBSCRIBE_ACCOUNTS",Ue="REMOVE_SUBSCRIBE_ACCOUNT",Fe="UPDATE_SUBSCRIBE_ACCOUNT",He="BATCH_INVALID_SUBSCRIBE_ACCOUNTS",Be="SET_SUBSCRIBE_ACCOUNT_EVENTS",Ye="ADD_SUBSCRIBE_ACCOUNT_EVENT",We="UPDATE_SUBSCRIBE_ACCOUNT_EVENT",Ke="AFTER_COMMIT_SUBSCRIBE_ACCOUNT_EVENTS",Ge="BATCH_UPDATE_SUBSCRIBE_ACCOUNT_EVENTS",Ve="SET_SUBSCRIBE_ACCOUNT_CALENDARS",ze="UPDATE_SUBSCRIBE_ACCOUNT_CALENDARS",Ze="UPDATE_SUBSCRIBE_ACCOUNT_CALENDAR_VISIBLE",qe="SET_PROJECT_SHARED_USERS",Je="BATCH_SET_PROJECT_SHARED_USERS",$e="UPDATE_PROJECT_SHARED_USER_PERMISSION",Xe="DELETE_PROJECT_SHARED_USER",Qe="ADD_PROJECT_SHARED_USER",et="TRANSFER_SHARED_PROJECT",tt="SET_ORDER_BY_DATES",nt="SET_ORDER_BY_DATE",rt="RESET_TO_DEFAULT_DATE_ORDER",at="UPDATE_ORDER_BY_DATE",it="UPDATE_ORDER_BY_DATE_PROJECTID",ot="DELETE_ORDER_BY_DATE_PROJECTID",ct="SET_ORDER_BY_PRIORITYS",st="SET_ORDER_BY_PRIORITY",ut="RESET_TO_DEFAULT_PRIORITY_ORDER",lt="UPDATE_ORDER_BY_PRIORITY",dt="UPDATE_ORDER_BY_PRIORITY_PROJECTID",ft="DELETE_ORDER_BY_PRIORITY_PROJECTID",pt="SET_ORDER_BY_LISTS",ht="SET_ORDER_BY_LIST",mt="RESET_TO_DEFAULT_LIST_ORDER",gt="UPDATE_ORDER_BY_LIST",vt="UPDATE_ORDER_BY_LIST_PROJECTID",yt="DELETE_ORDER_BY_LIST_PROJECTID",bt="SET_HOLIDAY",kt="UNDO",Ot="REDO",Tt="RECORD",St="REMOVE_RECORD",Et="JUMP_TO_PAST",wt="SET_FEATURE_PROMPT",Dt="UPDATE_FEATURE_PROMPT",jt="ADD_COLUMN",_t="DELETE_COLUMN",Ct="UPDATE_COLUMN_NAME",It="UPDATE_COLUMN_ORDER",Mt="SET_COLUMNS",At="SET_COLUMN_ORDERS",xt="UPDATE_COLUMNS",Rt="UPDATE_COLUMN_STATUS",Pt="SET_TEAMS",Nt="SET_TEAM",Lt="CLEAR_TEAM",Ut="SET_TEAM_NAME",Ft="SET_TEAM_MEMBERS",Ht="TEAM_TRANSFER_SUPER_ADMIN",Bt="TEAM_SET_MEMBER_ROLE",Yt="TEAM_REMOVE_MEMBER",Wt="CLEAR_MEMBERS",Kt="SET_USER_STATUS",Gt="UPDATE_USER_STATUS",Vt="SET_TASK_TEMPLATES",zt="ADD_TASK_TEMPLATES",Zt="UPDATE_TASK_TEMPLATE",qt="DELETE_TASK_TEMPLATE",Jt="REMOVE_TASK_TEMPLATE",$t="SET_NOTE_TEMPLATES",Xt="ADD_NOTE_TEMPLATES",Qt="UPDATE_NOTE_TEMPLATE",en="DELETE_NOTE_TEMPLATE",tn="REMOVE_NOTE_TEMPLATE",nn="UPDATE_COMPLETED_TIME",rn="ADD_TEMP_SECTION",an="REMOVE_TEMP_SECTION"},340:function(e,t,n){"use strict";n.d(t,"L",(function(){return l})),n.d(t,"ab",(function(){return f})),n.d(t,"N",(function(){return h})),n.d(t,"nb",(function(){return g})),n.d(t,"E",(function(){return y})),n.d(t,"lb",(function(){return k})),n.d(t,"o",(function(){return T})),n.d(t,"I",(function(){return E})),n.d(t,"mb",(function(){return D})),n.d(t,"Z",(function(){return _})),n.d(t,"O",(function(){return I})),n.d(t,"F",(function(){return A})),n.d(t,"pb",(function(){return R})),n.d(t,"z",(function(){return N})),n.d(t,"A",(function(){return U})),n.d(t,"i",(function(){return H})),n.d(t,"c",(function(){return Y})),n.d(t,"k",(function(){return K})),n.d(t,"j",(function(){return V})),n.d(t,"e",(function(){return Z})),n.d(t,"h",(function(){return J})),n.d(t,"f",(function(){return X})),n.d(t,"g",(function(){return ee})),n.d(t,"d",(function(){return ne})),n.d(t,"P",(function(){return ae})),n.d(t,"R",(function(){return oe})),n.d(t,"a",(function(){return se})),n.d(t,"Q",(function(){return le})),n.d(t,"S",(function(){return fe})),n.d(t,"X",(function(){return he})),n.d(t,"T",(function(){return ge})),n.d(t,"v",(function(){return ye})),n.d(t,"q",(function(){return ke})),n.d(t,"n",(function(){return Te})),n.d(t,"w",(function(){return Ee})),n.d(t,"b",(function(){return De})),n.d(t,"U",(function(){return _e})),n.d(t,"C",(function(){return Ie})),n.d(t,"cb",(function(){return Ae})),n.d(t,"r",(function(){return Re})),n.d(t,"gb",(function(){return Ne})),n.d(t,"ib",(function(){return Ue})),n.d(t,"hb",(function(){return He})),n.d(t,"t",(function(){return Ye})),n.d(t,"bb",(function(){return Ke})),n.d(t,"jb",(function(){return Ve})),n.d(t,"B",(function(){return Ze})),n.d(t,"rb",(function(){return Je})),n.d(t,"u",(function(){return $e})),n.d(t,"kb",(function(){return Qe})),n.d(t,"y",(function(){return tt})),n.d(t,"p",(function(){return rt})),n.d(t,"W",(function(){return it})),n.d(t,"V",(function(){return ct})),n.d(t,"D",(function(){return ut})),n.d(t,"s",(function(){return dt})),n.d(t,"ob",(function(){return pt})),n.d(t,"Y",(function(){return mt})),n.d(t,"m",(function(){return vt})),n.d(t,"x",(function(){return bt})),n.d(t,"l",(function(){return Ot})),n.d(t,"K",(function(){return St})),n.d(t,"fb",(function(){return wt})),n.d(t,"H",(function(){return jt})),n.d(t,"db",(function(){return Ct})),n.d(t,"J",(function(){return Mt})),n.d(t,"eb",(function(){return xt})),n.d(t,"M",(function(){return Pt})),n.d(t,"qb",(function(){return Lt})),n.d(t,"G",(function(){return Ft}));var r=n(394),a=n.n(r),i=(n(73),n(159),n(120),n(50),n(121),n(350),n(98)),o=n.n(i),c=n(513);function s(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){s(i,r,a,o,c,"next",e)}function c(e){s(i,r,a,o,c,"throw",e)}o(void 0)}))}}function l(){return d.apply(this,arguments)}function d(){return(d=u(a.a.mark((function e(){var t,n,r=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"cn",n="/calendar/holiday/"+t+"/recent",e.next=4,c.b.get(n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return p.apply(this,arguments)}function p(){return(p=u(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/user/status");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return m.apply(this,arguments)}function m(){return(m=u(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/user/preferences/settings?includeWeb=true");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return v.apply(this,arguments)}function v(){return(v=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.put("/user/preferences/settings?includeWeb=true",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return b.apply(this,arguments)}function b(){return(b=u(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/user/preferences/dailyReminder");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return O.apply(this,arguments)}function O(){return(O=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.put("/user/preferences/dailyReminder",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return S.apply(this,arguments)}function S(){return(S=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/task/closeRemind",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return w.apply(this,arguments)}function w(){return(w=u(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("user/preferences/habit?platform=web");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return j.apply(this,arguments)}function j(){return(j=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.put("user/preferences/habit?platform=web",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return C.apply(this,arguments)}function C(){return(C=u(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/user/profile");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return M.apply(this,arguments)}function M(){return(M=u(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/user/preferences/pluginSettings");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return x.apply(this,arguments)}function x(){return(x=u(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/user/preferences/featurePrompt");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return P.apply(this,arguments)}function P(){return(P=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/user/preferences/featurePrompt",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return L.apply(this,arguments)}function L(){return(L=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/column?from="+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return F.apply(this,arguments)}function F(){return(F=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/batch/check/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return B.apply(this,arguments)}function B(){return(B=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/batch/taskOrder",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return W.apply(this,arguments)}function W(){return(W=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/batch/task",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e){return G.apply(this,arguments)}function G(){return(G=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/batch/taskProject",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return z.apply(this,arguments)}function z(){return(z=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.c.post("/batch/taskParent",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return q.apply(this,arguments)}function q(){return(q=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/batch/filter",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return $.apply(this,arguments)}function $(){return($=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/batch/tag",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return Q.apply(this,arguments)}function Q(){return(Q=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/batch/projectGroup",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/batch/project",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){return re.apply(this,arguments)}function re(){return(re=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/column",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return ie.apply(this,arguments)}function ie(){return(ie=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/project/"+t+"/shares");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e){return ce.apply(this,arguments)}function ce(){return(ce=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.d.post("/userPublicProfiles",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e){return ue.apply(this,arguments)}function ue(){return(ue=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/task/assign",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(){return de.apply(this,arguments)}function de(){return(de=u(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/projects");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(){return pe.apply(this,arguments)}function pe(){return(pe=u(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/share/shareContacts");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){return me.apply(this,arguments)}function me(){return(me=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/team/"+t+"/share/shareContacts");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(){return ve.apply(this,arguments)}function ve(){return(ve=u(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/project/share/recentProjectUsers");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(){return be.apply(this,arguments)}function be(){return(be=u(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/calendar/bind/accounts");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.delete("/calendar/bind/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e,t,n){return Se.apply(this,arguments)}function Se(){return(Se=u(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.put("/calendar/"+t+"/"+n+"/show?visibility="+r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(){return we.apply(this,arguments)}function we(){return(we=u(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/calendar/bind/events/all");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e){return je.apply(this,arguments)}function je(){return(je=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/calendar/bind/events/batch",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(e,t){return Ce.apply(this,arguments)}function Ce(){return(Ce=u(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/project/"+t+"/task/"+n+"/activity");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t){return Me.apply(this,arguments)}function Me(){return(Me=u(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/project/"+n+"/task/"+t+"/comments");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e,t,n){return xe.apply(this,arguments)}function xe(){return(xe=u(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/project/"+n+"/task/"+t+"/comment",r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e,t,n){return Pe.apply(this,arguments)}function Pe(){return(Pe=u(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.delete("/project/"+n+"/task/"+t+"/comment/"+r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(e,t,n){return Le.apply(this,arguments)}function Le(){return(Le=u(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/task/order-by-date/"+t+"?projectId="+encodeURIComponent(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e,t,n){return Fe.apply(this,arguments)}function Fe(){return(Fe=u(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/task/order-by-priority/"+t+"?projectId="+encodeURIComponent(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e,t){return Be.apply(this,arguments)}function Be(){return(Be=u(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/task/order-by-project/"+encodeURIComponent(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e){return We.apply(this,arguments)}function We(){return(We=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.delete("/tag?name="+encodeURIComponent(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.put("/tag/merge",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){return ze.apply(this,arguments)}function ze(){return(ze=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.put("/tag/rename",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e,t){return qe.apply(this,arguments)}function qe(){return(qe=u(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/calendar/bind?code="+t+"&state="+n+"&redirectUrl="+window.location.hostname+"&channel=web");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(e,t,n,r){var a=new FormData;a.append("file",e,e.name);var i=new XMLHttpRequest;i.open("POST",t),i.withCredentials=!0,i.send(a),i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){var e=null;try{e=JSON.parse(i.responseText)}catch(t){o.a.error("uploadFile",e)}n&&n(e)}else r&&r()}}function $e(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.delete("/task?deleteforever=true",{data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e){return et.apply(this,arguments)}function et(){return(et=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/trash/restore",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(){return nt.apply(this,arguments)}function nt(){return(nt=u(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/attachment/isUnderQuota");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e){return at.apply(this,arguments)}function at(){return(at=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.delete("/attachment/"+t,{data:null});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(e){return ot.apply(this,arguments)}function ot(){return(ot=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/project/"+t+"/tasks");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(e,t){return st.apply(this,arguments)}function st(){return(st=u(a.a.mark((function e(t,n){var r,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]&&i[2],e.next=3,c.c.get("/task/".concat(t,"?projectId=").concat(n).concat(r?"&withChildren=true":""));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(){return lt.apply(this,arguments)}function lt(){return(lt=u(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/configs/limits");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(e,t){return ft.apply(this,arguments)}function ft(){return(ft=u(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.delete("/task-attend/"+t+"/delete/"+n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pt(e,t){return ht.apply(this,arguments)}function ht(){return(ht=u(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.delete("/task-attend/"+t+"/attend/"+n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(){return gt.apply(this,arguments)}function gt(){return(gt=u(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/teams");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vt(e){return yt.apply(this,arguments)}function yt(){return(yt=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/templates/task",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(){return kt.apply(this,arguments)}function kt(){return(kt=u(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/templates");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ot(e){return Tt.apply(this,arguments)}function Tt(){return(Tt=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/templates/note",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function St(){return Et.apply(this,arguments)}function Et(){return(Et=u(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.get("/habits");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wt(e){return Dt.apply(this,arguments)}function Dt(){return(Dt=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/habits/batch",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(e,t){return _t.apply(this,arguments)}function _t(){return(_t=u(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,c.c.get("/habitCheckins?".concat(t,"&afterStamp=").concat(n));case 3:return e.abrupt("return",e.sent);case 6:return e.next=8,c.c.get("/habitCheckins?".concat(t));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ct(e){return It.apply(this,arguments)}function It(){return(It=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.post("/habitCheckins/batch",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mt(e,t){return At.apply(this,arguments)}function At(){return(At=u(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}return e.next=3,c.c.get("/habitRecords?".concat(t,"&afterStamp=").concat(n));case 3:return e.abrupt("return",e.sent);case 4:return e.next=6,c.c.get("/habitRecords?".concat(t));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(e){return Rt.apply(this,arguments)}function Rt(){return(Rt=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.c.post("/habitRecords",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pt(e){return Nt.apply(this,arguments)}function Nt(){return(Nt=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.f.get("/pageTitle?url=".concat(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lt(e){return Ut.apply(this,arguments)}function Ut(){return(Ut=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.e.get("/calendar/bind?state=".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ft(e){return Ht.apply(this,arguments)}function Ht(){return(Ht=u(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.e.get("/calendar/bind/events/all?state=".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},341:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return d}));var r=n(326),a=n(352),i=function(e){return e.get("verifiedEmail")?e.get("username"):e.get("phone")?Object(a.g)(e.get("phone")):Object(a.h)(e.get("username"))?"":e.get("username")},o=function(){return r.a.getState().userProfile},c=function(e){return o().get(e)},s=function(){return!!c("pro")},u=function(){return!!c("teamUser")},l=function(){return!!c("activeTeamUser")},d=function(){return(e=o()).get("displayName")?e.get("displayName"):e.get("name")?e.get("name"):i(e);var e}},342:function(e,t,n){"use strict";n.d(t,"i",(function(){return w})),n.d(t,"j",(function(){return D})),n.d(t,"k",(function(){return j})),n.d(t,"f",(function(){return I})),n.d(t,"l",(function(){return M})),n.d(t,"g",(function(){return A})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return R})),n.d(t,"o",(function(){return P})),n.d(t,"n",(function(){return N})),n.d(t,"h",(function(){return L})),n.d(t,"m",(function(){return U})),n.d(t,"a",(function(){return F})),n.d(t,"e",(function(){return H})),n.d(t,"d",(function(){return B}));n(123),n(124),n(125),n(73),n(211),n(153),n(119),n(61),n(159),n(152),n(155),n(50),n(145),n(33),n(143),n(154),n(111),n(112),n(62),n(158),n(110),n(142);var r=n(319),a=n.n(r),i=n(98),o=n.n(i),c=n(328),s=(n(334),n(596),n(330)),u=n(323),l=(n(333),n(318)),d=n(345),f=n(476),p=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udeeb\udeec\udef4-\udefc\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78\udd7a-\uddb4\uddb7\uddba\uddbc-\uddcb\uddd0\uddde-\uddff\ude70-\ude74\ude78-\ude7a\ude80-\ude86\ude90-\udea8\udeb0-\udeb6\udec0-\udec2\uded0-\uded6]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,h=n(344),m=n(331),g=n(354),v=(n(335),n(393));function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b="name",k="version",O=function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},T={rgx:function(e,t){for(var n,r,a,i,o,c,s=0;s<t.length&&!o;){var u=t[s],l=t[s+1];for(n=r=0;n<u.length&&!o;)if(o=u[n++].exec(e))for(a=0;a<l.length;a++)c=o[++r],"object"===y(i=l[a])&&i.length>0?2==i.length?"function"==y(i[1])?this[i[0]]=i[1].call(this,c):this[i[0]]=i[1]:3==i.length?"function"!==y(i[1])||i[1].exec&&i[1].test?this[i[0]]=c?c.replace(i[1],i[2]):void 0:this[i[0]]=c?i[1].call(this,c,i[2]):void 0:4==i.length&&(this[i[0]]=c?i[3].call(this,c.replace(i[1],i[2])):void 0):this[i]=c||void 0;s+=2}},str:function(e,t){for(var n in t)if("object"===y(t[n])&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(O(t[n][r],e))return"?"===n?void 0:n}else if(O(t[n],e))return"?"===n?void 0:n;return e}},S={os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},E={os:[[/microsoft\s(windows)\s(vista|xp)/i],[b,k],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[b,[k,T.str,S.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[b,"Windows"],[k,T.str,S.os.windows.version]],[/\((bb)(10);/i],[[b,"BlackBerry"],k],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[b,k],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[b,"Symbian"],k],[/\((series40);/i],[b],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[b,"Firefox OS"],k],[/crkey\/([\d\.]+)/i],[k,[b,"Chromecast"]],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[b,k],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[b,"Chromium OS"],k],[/(sunos)\s?([\w\.\d]*)/i],[[b,"Solaris"],k],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[b,k],[/(haiku)\s(\w+)/i],[b,k],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[k,/_/g,"."],[b,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[b,"macOS"],[k,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[b,k]]};var w=function(e,t){return D(e.get("startDate"),t)},D=function(e,t){return c.a.getOffsetOfDay(e,t)},j=function(e,t){var n=c.a.prefMoment(Object(s.u)(e));return!e.get("isAllDay")&&e.get("dueDate")&&e.get("dueDate")!==e.get("startDate")&&(n=new Date(n.valueOf()-1e3)),n=c.a.startOfDay(n),t=t?c.a.prefMoment(t):new Date,t=c.a.startOfDay(t),Math.floor((n-t)/864e5)},_=function(){var e=m.b(l.K.deviceId);if(e)return e;var t=Object(g.a)();return m.e(l.K.deviceId,t),t},C=function(){try{var e=window.navigator.userAgent,t=E,n={name:void 0,version:void 0};return T.rgx.call(n,e,t.os),n.name&&n.version?"".concat(n.name," ").concat(n.version):n.name?n.name:"Unknown"}catch(e){return console.log(e),"Unknown"}}(),I=function(){var e="Other",t="0";try{var n=window.navigator.userAgent.toLocaleLowerCase();null!==n.match(/msie/)||null!==n.match(/trident/)?(e="IE",t=null!==n.match(/msie ([\d.]+)/)?n.match(/msie ([\d.]+)/)[1]:n.match(/rv:([\d.]+)/)[1]):n.match(/edge\/([\d\.]+)/)?(e="Edge",t=n.match(/edge\/([\d\.]+)/)[1]):null!==n.match(/metasr/)?(e="Sougou",t=n.match(/metasr[/\s]([\d.]+)/)[1]):null!==n.match(/qqbrowser/)?(e="QQ",t=n.match(/qqbrowser\/([\d.]+)/)[1]):null!==n.match(/ubrowser/)?(e="UC",t=n.match(/ubrowser\/([\d.]+)/)[1]):null!==n.match(/opr/)?(e="Opera",t=n.match(/opr\/([\d.]+)/)[1]):null!==n.match(/firefox/)?(e="Firefox",t=n.match(/firefox\/([\d.]+)/)[1]):null!==n.match(/chrome/)?(e="Chrome",t=n.match(/chrome\/([\d.]+)/)[1]):null!==n.match(/safari/)&&(e="Safari",t=n.match(/safari\/([\d.]+)/)[1])}catch(e){o.a.error(e)}return o.a.debug("getDeviceInfo",u.b),JSON.stringify({platform:"web",os:C,device:"".concat(e," ").concat(t),name:"",version:Object(f.a)(),id:_(),channel:Object(v.f)()?"feishu_app":"website",campaign:"",websocket:u.b})},M=function(e){return new RegExp("^(".concat(p.source,")")).test(e)},A=function(e){var t=e.match(p);return t&&t.length?{emoji:t[0],title:e.replace(t[0],"")}:{emoji:"",title:e}},x=function(e){return JSON.parse(JSON.stringify(e))},R=function(e,t){return e=e.replace("#",""),"rgba("+parseInt(e.substring(0,2),16)+","+parseInt(e.substring(2,4),16)+","+parseInt(e.substring(4,6),16)+","+t/100+")"},P=function(e){var t,n,r=e.length;for(t=0;t<r/2;t++){n=r-1-t;var a=e[t];e[t]=e[n],e[n]=a}return e},N=function e(t){return t.match(/^[\n\r]/)?e(t.slice(1)):t.match(/[\n\r]$/)?e(t.slice(0,-1)):t},L=function(e){var t="upgrade-img",n=window.devicePixelRatio>1;return u.o||(t="tick-"+t),n&&(t=t.concat("@2")),t="/static/img/"+t.concat("/",e,".png?v="+c.a.prefMoment().format("YYYYMMDD")),(u.n||u.m)&&(t="//"+u.e+t),t},U=function(e){var t=x(e);if(t.dueStart)if(t.isAllDay){var n=h.a.parseUTCString(t.dueStart);t.dueStart=h.a.formatToServerDate(Object(d.a)(n,void 0,"UTC",!1))}else t.dueStart=c.a.formatToUtcString(t.dueStart,"YYYY-MM-DDTHH:mm:00ZZ");if(t.dueEnd)if(t.isAllDay){var r=h.a.parseUTCString(t.dueEnd);t.dueEnd=h.a.formatToServerDate(Object(d.a)(r,void 0,"UTC",!1))}else t.dueEnd=c.a.formatToUtcString(t.dueEnd,"YYYY-MM-DDTHH:mm:00ZZ");return t},F=function(e,t){var n,r,i=a.a.isNaN(e),o=a.a.isNaN(t);return i&&!o?r=(n=t-u.t)<u.s:o&&!i?r=(n=e+u.t)>u.r:o||i?r=!0:(n=Math.floor((e+t)/2),r=t-e<=1),{needReset:r,newSortOrder:n}},H=function(e){var t=u.r,n=u.s,r=e;return e.get("sortOrder")>t?r=e.set("sortOrder",t):e.get("sortOrder")<n&&(r=e.set("sortOrder",n)),r},B=function(e){var t=u.r,n=u.s;return e>t?t:e<n?n:e}},344:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(73),n(50),n(33),n(143),n(62);var r=n(338),a=n.n(r);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"parseUTCString",value:function(e){if(!e)return null;var t=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}).*([+-])(\d{2})(\d{2})$/.exec(e);if(t){var n=parseInt(t[1],10),r=parseInt(t[2],10)-1,a=parseInt(t[3],10),i=parseInt(t[4],10),o=parseInt(t[5],10),c=parseInt(t[6],10),s=t[7],u=60*parseInt(t[8],10)+parseInt(t[9],10),l="+"===s?-u:u;return new Date(Date.UTC(n,r,a,i,o,c)+6e4*l)}return null}},{key:"parseTimeStamp",value:function(e){var t=Math.floor(e/1e4),n=Math.floor((e-1e4*t)/100),r=Math.floor(e-1e4*t-100*n);return new Date(t,n-1,r)}},{key:"formatToServerDate",value:function(e){return a()(e||new Date).utc().millisecond(0).format("YYYY-MM-DDTHH:mm:ss.SSSZZ")}},{key:"convertUtcDate2Date",value:function(e,t){var n=null!=t?t:a.a.tz.guess(),r=a.a.utc(e),i=r.year(),o=r.month(),c=r.date(),s=r.hour(),u=r.minute(),l=r.second();return a.a.tz([i,o,c,s,u,l],n).toDate()}},{key:"isSame",value:function(e,t){return e===t||null!=e&&e.getTime()===t.getTime()}},{key:"isSameDay",value:function(e,t){return a()(e).isSame(t,"day")}},{key:"isSameWeek",value:function(e,t){return a()(e).isSame(t,"week")}},{key:"getFirstDayInWeek",value:function(e){return a()(e).startOf("week").toDate()}},{key:"getLastDayInWeek",value:function(e){return a()(e).endOf("week").toDate()}},{key:"getWeekYear",value:function(e){return a()(e).week()}},{key:"getDelimiterStamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=/(\d{4})(\d{2})(\d{2})/;return("string"==typeof e?e:e.toString()).replace(n,"$1".concat(t,"$2").concat(t,"$3"))}},{key:"parseMoment",value:function(e,t,n){return n?"string"==typeof e&&t?a.a.tz(e,t,n):a.a.tz(e,n):"string"==typeof e?a()(e,t):a()(e)}},{key:"dayOfDawn",value:function(e){return a()(e).hour(0).minute(0).second(0).millisecond(0).toDate()}},{key:"getOffsetDays",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=a()(t).startOf("day");return a()(e).startOf("day").diff(n,"day")}},{key:"tryToUpdateMomentConfig",value:function(e){var t=e;if(t!==a.a.localeData().firstDayOfWeek()){var n=7+t-1;a.a.updateLocale(a.a.locale(),{week:{dow:t,doy:n}})}}}],(n=null)&&i(t.prototype,n),r&&i(t,r),e}()},345:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"h",(function(){return o})),n.d(t,"j",(function(){return c})),n.d(t,"k",(function(){return s})),n.d(t,"i",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return m}));n(73),n(205),n(33),n(62);var r=n(338),a=n.n(r);(new Date).getTimezoneOffset();window.moment=a.a;var i=function(){return a.a.tz.guess()},o=i(),c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=n?a.a.tz(e,n,t||o):a.a.tz(e,t||o);return r.isTimeZoneParsed=!0,r},s=function(e){var t=a.a.utc(e);return t.isTimeZoneParsed=!0,t},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o,i=e?"".concat(e," ").concat(t):t,c=n?"hh:mm A":"HH:mm",s=e?"YYYY-MM-DD ".concat(c):c;return a.a.tz(i,s,"en",r).locale(a.a.locale())},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a()();return e.utc().format("YYYY-MM-DDTHH:mm:ss.SSSZZ")},d=function(e,t){return e.format(t)},f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,r=c(e||void 0,n);return t&&r.isSame(r.clone().startOf("day"))?l(r.subtract(1,"d")):l(r)},p=function(){return a.a.tz.names().filter((function(e){return/^[^/]+\/[^/]+$/.test(e)&&!/^Etc\/(?!GMT)/i.test(e)&&"Etc/GMT0"!==e}))},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.removeContinent,r=void 0!==n&&n,i=t.shortenOffset,o=a.a.tz(e).format("ZZ");o=i?o.replace(/(\d{2})00$/,(function(e,t){var n=parseInt(t,10);return n+""===t?t:n})):o.replace(/(\d{2})(\d{2})$/,(function(e,t,n){return t+":"+n}));var c=e.replace(/^Etc\/GMT/gi,"UTC").replace(/_/g," ");return r&&(c=c.replace(/[^/]+\/(.*)/,"$1")),c+", GMT"+o},m=function(e,t,n,r){var i=a.a.tz(e,t||o);return r?a.a.tz([i.year(),i.month(),i.date(),i.hour(),i.minute()],n||o).toDate():a.a.tz([i.year(),i.month(),i.date()],n||o).toDate()}},348:function(e,t,n){"use strict";n.d(t,"b",(function(){return ae})),n.d(t,"f",(function(){return oe})),n.d(t,"e",(function(){return ce})),n.d(t,"A",(function(){return se})),n.d(t,"l",(function(){return ke})),n.d(t,"v",(function(){return Oe})),n.d(t,"q",(function(){return Te})),n.d(t,"w",(function(){return Se})),n.d(t,"x",(function(){return Ee})),n.d(t,"n",(function(){return we})),n.d(t,"B",(function(){return De})),n.d(t,"C",(function(){return je})),n.d(t,"z",(function(){return _e})),n.d(t,"s",(function(){return Ce})),n.d(t,"t",(function(){return Ie})),n.d(t,"y",(function(){return Me})),n.d(t,"m",(function(){return Ae})),n.d(t,"a",(function(){return xe})),n.d(t,"u",(function(){return Re})),n.d(t,"D",(function(){return Pe})),n.d(t,"E",(function(){return Ne})),n.d(t,"k",(function(){return Le})),n.d(t,"o",(function(){return Fe})),n.d(t,"h",(function(){return Ye})),n.d(t,"r",(function(){return Ge})),n.d(t,"F",(function(){return Ve})),n.d(t,"j",(function(){return ze})),n.d(t,"c",(function(){return Ze})),n.d(t,"d",(function(){return qe})),n.d(t,"i",(function(){return Xe})),n.d(t,"p",(function(){return Qe})),n.d(t,"g",(function(){return et})),n.d(t,"G",(function(){return tt}));n(73),n(205),n(203),n(119),n(61),n(159),n(152),n(161),n(156),n(346),n(210),n(356),n(144),n(50),n(121),n(143),n(207),n(111),n(174),n(204),n(110),n(160),n(350);var r=n(375),a=n(320),i=n(319),o=n.n(i),c=n(98),s=n.n(c),u=n(338),l=n.n(u),d=n(326),f=n(329),p=n(420),h=n(377),m=n(334),g=n(516),v=n(327),y=n(330),b=n(357),k=n(374),O=n(328),T=n(352),S=n(318),E=n(324),w=n(331),D=n(412),j=n(340),_=n(361),C=n(157),I=n(323),M=n(335),A=n(365),x=n(480),R=n(333),P=n(354),N=n(336),L=n(345),U=n(605),F=n(429),H=n(344),B=n(421),Y=n(362),W=n(517),K=(n(432),n(355)),G=n(551),V=n(431),z=n(540),Z=n(483),q=n(386),J=n(425),$=n(658),X=n(499);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function re(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){ne(i,r,a,o,c,"next",e)}function c(e){ne(i,r,a,o,c,"throw",e)}o(void 0)}))}}var ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{sync:!0},n=e.merge(Object(a.fromJS)({isNew:!0,createdTime:H.a.formatToServerDate(),modifiedTime:H.a.formatToServerDate()}));d.a.dispatch(b.c(n));var r=n.get("parentId");if(null!=r){var i={};i[r]=[n.get("id")],d.a.dispatch(b.a(i))}D.a.setTask(n),Object(z.b)(e.get("id"),e.get("title")),t.sync&&_.a.doSync()},ie=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=null;if(y.ab(e))return r;var a=e.get("startDate"),i=O.a.getDueDateText(a);if(T.i(t)&&(!n||i!==t)){var o=t,c=!0;a&&!1===e.get("isAllDay")&&(o+=" "+O.a.prefMoment(e.get("startDate")).format("HH:mm"),c=!1);var s=O.a.formatToUtcString(o),u=y.e(e,s),l=e.get("reminders"),d=e.get("reminder");!a&&y.Z(e)&&(l=v.a(c),d=null),r={isAllDay:c,startDate:s,repeatFlag:Object(p.c)(s,e.get("repeatFlag"),e.get("repeatFrom")),dueDate:u,reminders:l,reminder:d,remindTime:null,repeatFirstDate:s}}return r},oe=function(e,t){var n=ie(e,t);if(n){var r=e.get("id");d.a.dispatch(b.L(te({},r,n)));var a=f.n(r);return D.a.setTask(a),_.a.doSync(),a}return e},ce=function(e,t,n){var r=ie(e,t,!1),a={isFloating:e.get("isFloating"),timezone:e.get("timeZone")};return r?Oe(e,ee({},r,{},n,{},a)):e},se=function(e){if(y.tb(e)){var t=e.get("id"),n=ee({id:t,status:0,items:y.ob(e),completedTime:void 0,repeatFlag:y.B(e),progress:0,isDirty:!0,remindTime:null},y.r(e));d.a.dispatch(b.l([n]));var r=f.n(t);D.a.setTask(r),_.a.doSync();var a=y.w(r);return a>0&&N.w(E.a("toast_task_repeat_count_remain",{d:a}),1e3),r}return e},ue=function(e,t,n){e.forEach((function(e){var r=e.task,a={id:r.get("id"),status:0,items:y.nb(r,t),completedTime:void 0,focusSummaries:y.v(r),progress:0,isDirty:!0};n.push(a),e.children.forEach((function(e){le(e,n)}))}))},le=function e(t,n){var r=t.task,a={id:r.get("id"),isDirty:!0,status:F.a.Uncompleted,items:y.ob(r,!1),focusSummaries:y.v(r),progress:0};n.push(a),t.children.forEach((function(t){e(t,n)}))},de=function(e,t){if(e.get("isNew"))return e.merge(t);var n=e.get("id");d.a.dispatch(b.L(te({},n,t)));var r=f.n(n);return D.a.setTask(r),_.a.doSync(),r},fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=f.l(Object(a.List)([e])),o=Object(Z.a)(i),c=[];"single"===n&&t.isRepeatSelf&&ue(o,r.startDate,c),o.forEach((function(e){var r=e.task,a=pe(r,t,n);c.push(a),e.children.forEach((function(e){he(e,c,t.isRepeatSelf,a.get("id"))}))})),f.cb(c);var s=c.map((function(e){return e.id||e.get("id")})),u=f.o(s);u.forEach((function(e){D.a.setTask(e)})),s.length>0&&setTimeout((function(){m.t()?C.a.dispatch("focusToTaskItem.kanban.".concat(s[0])):C.a.dispatch("focusToTaskItem.list.".concat(s[0]))})),_.a.doSync()},pe=function(e,t,n){var r;if(t.startDate)if("single"===n){var a=O.a.prefMoment(t.startDate),i=null;t.isAllDay&&(a=a.startOf("day")),t.dueDate&&(i=O.a.prefMoment(t.dueDate).utc().format(S.m.atomTime));var o=a.utc().format(S.m.atomTime);r=y.j(e,{isNew:!0,isDirty:!1,startDate:o,dueDate:i,repeatFirstDate:null,repeatFlag:null,repeatFrom:null,reminders:t.reminders,remindTime:null,reminder:null,isAllDay:t.isAllDay,exDate:[],isFloating:t.isFloating,timeZone:t.timeZone,sortOrder:f.q(e.get("projectId")),focusSummaries:y.v(e),status:0,items:t.isRepeatSelf?e.get("items"):y.nb(e,o),progress:t.isRepeatSelf?e.get("progress"):0,completedTime:void 0,repeatTaskId:e.get("id"),childIds:[]})}else{var c=O.a.prefMoment(t.startDate);t.repeatFrom=e.get("repeatFrom");var s=null;t.isAllDay&&(c=c.startOf("day")),t.dueDate&&(s=O.a.prefMoment(t.dueDate).utc().format(S.m.atomTime));var u,l=c.utc().format(S.m.atomTime);u=t.repeatFlag?Object(p.c)(t.startDate,t.repeatFlag,t.repeatFrom):e.get("repeatFlag"),r=y.j(e,{isNew:!0,isDirty:!1,startDate:l,dueDate:s,repeatFirstDate:l,repeatFlag:u,reminders:t.reminders,remindTime:null,reminder:null,isAllDay:t.isAllDay,exDate:[],isFloating:t.isFloating,timeZone:t.timeZone,repeatFrom:t.repeatFrom,sortOrder:f.q(e.get("projectId")),focusSummaries:y.v(e),status:0,items:y.nb(e,l),progress:0,completedTime:void 0,repeatTaskId:e.get("id"),childIds:[]})}else r=y.j(e,{isNew:!0,isDirty:!1,remindTime:null,startDate:null,repeatFlag:null,dueDate:null,reminders:null,reminder:null,isAllDay:null,exDate:[],isFloating:!1,timeZone:L.h,sortOrder:f.q(e.get("projectId")),focusSummaries:y.v(e),status:0,items:y.ob(e,!1),completedTime:void 0,repeatTaskId:e.get("id"),childIds:[]});return r},he=function e(t,n,r,a){var i=t.task,o=y.j(i,{status:r?i.get("status"):F.a.Uncompleted,parentId:a,title:i.get("title"),sortOrder:f.F(i.get("projectId"),i.get("id")),items:r?i.get("items"):y.ob(i,!1),focusSummaries:y.v(i),progress:r?i.get("progress"):0,childIds:[],isNew:!0});return n.push(o),t.children.forEach((function(t){e(t,n,r,o.get("id"))})),o},me=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.exDate=t.exDate||[];var n=e.get("repeatFlag"),r={},i=new V.a(n);if(i.forgettingCurveRule?(null!=i.forgettingCurveRule.count&&(i.forgettingCurveRule.count=Math.max(i.forgettingCurveRule.count-1,1)),t.isRepeatSelf&&null!=i.forgettingCurveRule.cycle&&(i.forgettingCurveRule.cycle+=1)):i.rruleOptions.count>0&&(i.rruleOptions.count=Math.max(i.rruleOptions.count-1,1)),r.repeatFlag=i.toString(),t.isRepeatSelf){var o=y.r(e);if(o){var c=o.startDate,s=o.dueDate;r.startDate=c,r.dueDate=s}}else{var u,l=e.get("exDate");if(u=l?a.List.isList(l)?l.toJS():l:[],r.exDate=t.exDate.concat(u),t.taskStartDate){var d,f=O.a.prefMoment(t.taskStartDate).format("YYYYMMDD");null===(d=r.exDate)||void 0===d||d.push(f)}}return fe(e,t,"single",r),de(e,r)},ge=function(e,t){var n=new $.a(e),r=e.get("startDate"),a=J.b.betweenDatesOfRecurrentObject(n,l()(r).startOf("days").subtract(1,"seconds").toDate(),l()(t).startOf("days").subtract(1,"seconds").toDate()),i=H.a.parseUTCString(e.get("startDate")),o=[];return a.forEach((function(e){i&&e.getTime()!==i.getTime()&&o.push(e)})),o.unshift(i),o},ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.get("repeatFrom");if(t.repeatFrom=t.repeatFrom||n,t.isRepeatSelf)return Se(e,t);var r,a=e.get("repeatFlag"),i={},o=new V.a(a),c=0;t.taskStartDate&&(r=l()(H.a.parseUTCString(t.taskStartDate)).startOf("day").toDate(),c=ge(e,t.taskStartDate).length),o.forgettingCurveRule&&r?(o.forgettingCurveRule.count=null,o.forgettingCurveRule.until=Object(q.a)(l.a.utc(r))):o.rruleOptions&&(o.rruleOptions.count=null,o.rruleOptions.until=r),i.repeatFlag=o.toString();var s=new V.a(t.repeatFlag);return s.forgettingCurveRule?(null!=s.forgettingCurveRule.count&&(s.forgettingCurveRule.count=Math.max(s.forgettingCurveRule.count-c,1)),null!=s.forgettingCurveRule.cycle&&(s.forgettingCurveRule.cycle+=c)):s.rruleOptions.count>0&&(s.rruleOptions.count=Math.max(s.rruleOptions.count-c,1)),t.repeatFlag=s.toString(),fe(e,t,"follow"),de(e,i)},ye=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.get("repeatFrom");if(t.repeatFrom=t.repeatFrom||n,t.isRepeatSelf)return Se(e,t);t.exDate=t.exDate||[];var r=e.get("reminders"),i=e.get("repeatFlag"),c=e.get("startDate"),s=y.n(e),u=e.get("exDate"),l=e.get("isAllDay");if(l===t.isAllDay&&o.a.isEqual(t.reminders,r)&&u&&o.a.isEqual(t.exDate,u)&&Number(t.repeatFrom)===Number(n)&&t.repeatFlag===i&&O.a.getUnix(t.startDate)===O.a.getUnix(c)&&O.a.getUnix(t.dueDate)===O.a.getUnix(s))return null;var d={};if(t.startDate&&t.taskStartDate){var f=O.a.prefMoment(t.startDate),h=O.a.prefMoment(t.taskStartDate),m=null,g=null,v=null;if(t.isAllDay&&(f=f.startOf("day")),m=h.diff(f,"second"),f=O.a.prefMoment(e.get("startDate")).subtract(m,"second"),t.dueDate){g=O.a.prefMoment(t.dueDate);var b=e.get("dueDate")||e.get("startDate"),k=O.a.prefMoment(t.taskDueDate||t.taskStartDate);v=k.diff(g,"second"),g=(g=O.a.prefMoment(b).subtract(v,"second")).utc().format(S.m.atomTime)}var T=f.utc().format(S.m.atomTime);d={startDate:T,dueDate:g,repeatFirstDate:T,reminders:t.reminders,remindTime:null,reminder:null,isAllDay:t.isAllDay,exDate:t.exDate,isFloating:t.isFloating,timeZone:t.timeZone}}else d={remindTime:null,startDate:null,dueDate:null,reminders:null,reminder:null,isAllDay:null,exDate:[],isFloating:!1,timeZone:L.h};return t.repeatFlag?d.repeatFlag=Object(p.c)(d.startDate,t.repeatFlag,t.repeatFrom):d.repeatFlag=null,d.repeatFrom=t.repeatFrom,d.reminders=Object(a.fromJS)(d.reminders),de(e,d)},be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!(O.a.getUnix(t.startDate)===O.a.getUnix(e.get("startDate"))&&(t.dueDate===y.n(e)||O.a.getUnix(t.dueDate)===O.a.getUnix(y.n(e)))&&t.isAllDay===e.get("isAllDay")&&t.isFloating===e.get("isFloating")&&t.timeZone===e.get("timeZone"))},ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.repeatFlag){if(t.repeatFlag!==e.get("repeatFlag")||t.repeatFrom!==e.get("repeatFrom"))return"follow";var n,r=be(e,t);return r?"require":o.a.isEqual(t.reminders,null===(n=e.get("reminders"))||void 0===n?void 0:n.toJS())?void 0:"all"}return"all"},Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.repeatChangeKey){case"single":return me(e,t);case"follow":return ve(e,t);case"all":return ye(e,t);default:return Se(e,t)}},Te=function(e,t,n){if(y.ub(e)&&m.B()&&!y.V(e)){var r=ie(e,t);if(r){var a=r.isAllDay,i=r.startDate,o=r.dueDate;C.a.dispatch("updateFakeTask",{fakeTask:Xe(i,o,a,e)}),C.a.dispatch(X.a,{onConfirm:function(t){var r=t.repeatChangeKey;ce(e,i,{repeatChangeKey:r,isRepeatSelf:!0}),C.a.dispatch("updateFakeTask",{fakeTask:null}),n&&n()},onCancel:function(){C.a.dispatch("updateFakeTask",{fakeTask:null}),n&&n()},type:"edit",isRepeatSelf:!0})}else n&&n()}else oe(e,t),n&&n()},Se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.exDate=t.exDate||[];var n=e.get("reminders"),r=e.get("repeatFrom"),i=e.get("repeatFlag"),c=e.get("startDate"),s=y.n(e),u=e.get("exDate"),l=e.get("isAllDay");if(l===t.isAllDay&&o.a.isEqual(t.reminders,n)&&u&&o.a.isEqual(t.exDate,u)&&Number(t.repeatFrom)===Number(r)&&t.repeatFlag===i&&O.a.getUnix(t.startDate)===O.a.getUnix(c)&&O.a.getUnix(t.dueDate)===O.a.getUnix(s))return null;var h={};if(t.startDate){var m=O.a.prefMoment(t.startDate),g=null;t.isAllDay&&(m=m.startOf("day")),t.dueDate&&(g=O.a.prefMoment(t.dueDate).utc().format(S.m.atomTime));var v=m.utc().format(S.m.atomTime);h={startDate:v,dueDate:g,repeatFirstDate:v,reminders:t.reminders,remindTime:null,reminder:null,isAllDay:t.isAllDay,exDate:t.exDate,isFloating:t.isFloating,timeZone:t.timeZone}}else h={remindTime:null,startDate:null,dueDate:null,reminders:null,reminder:null,isAllDay:null,exDate:[],isFloating:!1,timeZone:L.h};if(t.repeatFlag?h.repeatFlag=Object(p.c)(h.startDate,t.repeatFlag,t.repeatFrom):h.repeatFlag=null,h.repeatFrom=t.repeatFrom,h.reminders=Object(a.fromJS)(h.reminders),e.get("isNew"))return e.merge(h);var k=e.get("id");d.a.dispatch(b.L(te({},k,h)));var T=f.n(k);return D.a.setTask(T),_.a.doSync(),T},Ee=function(e,t){if(f.n(e).get("timeZone")!==t){d.a.dispatch(b.T(e,t));var n=f.n(e);D.a.setTask(n),_.a.doSync()}},we=function(){var e=re(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],e.abrupt("return",Fe({serverData:{update:t},forceMerge:n}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(e,t){var n=e.get("id");d.a.dispatch(b.R(n,t));var r=f.n(n);D.a.setTask(r),_.a.doSync()},je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.get("id");d.a.dispatch(b.N(n,t));var r=f.n(n);D.a.setTask(r),_.a.doSync()},_e=function(e,t){var n=e.get("priority"),r=e.get("id");if(t!==n){d.a.dispatch(b.P(r,t));var a=f.n(r);return D.a.setTask(a),_.a.doSync(),a}return e},Ce=function(e){var t=e.get("id"),n={deleted:0,syncStatus:A.f},r=e.merge(n).toJS();d.a.dispatch(b.v([r])),d.a.dispatch(b.r([t]));var a=f.n(t);D.a.setTask(a)},Ie=function(e,t){t=t||e.get("projectId"),j.kb([{fromProjectId:e.get("projectId"),taskId:e.get("id"),toProjectId:t}]).then((function(n){var r=n.data.id2etag;Object.keys(r).forEach((function(n){var a={parentId:null,deleted:0,projectId:t,etag:r[n]},i=e.merge(a).toJS();d.a.dispatch(b.v([i])),d.a.dispatch(b.r([n]));var o=f.n(n);D.a.setTask(o)}))}))},Me=function(e,t){var n=[{projectId:e.get("projectId"),taskId:e.get("id"),assignee:t}];j.a(n).then((function(n){var r=n.data;if(o.a.isEmpty(r.id2error)){var a=e.get("id");d.a.dispatch(b.E(a,t));var i=f.n(a);D.a.setTask(i)}else s.a.log(r.id2error)}))},Ae=function(e,t){d.a.dispatch(b.S(e.get("id"),t.selected));var n=f.n(e.get("id"));D.a.setTask(n),_.a.doSync()},xe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{sync:!0},r=y.kb(e)?e.get("taskId"):e.get("id");d.a.dispatch(b.b([r],t));var a=f.n(r);return D.a.setTask(a),n.sync&&a.get("isDirty")&&_.a.doSync(),a},Re=function(e){var t=f.n(e);t&&t.get("isDirty")&&(D.a.setTask(t),_.a.doSync())},Pe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(y.ib(e)){var r=[];e.update("items",(function(e){return e.map((function(e){if(e.get("id")===t){if(0===e.get("status")){var n={id:e.get("id"),status:1,completedTime:O.a.prefMoment().utc().format(S.m.atomTime)};return r.push(n),e.merge(n)}var a={id:e.get("id"),status:0,completedTime:null};return r.push(a),e.merge(a)}return e}))})),d.a.dispatch(b.C(e.get("id"),r));var a=f.n(e.get("id"));if(D.a.setTask(a),n){var i=G.d({type:"completeCheckItem",data:{taskId:e.get("id"),subtaskId:t}}),o=E.a("this_task_completed",{s:T.d(e.get("title"))+" "});K.b({text:o,key:i,closable:!1,actionText:E.a("undo"),actionType:"undo",onAction:function(){G.c(i,"completeCheckItem")},onRemove:function(){G.e(i),_.a.doSync()}})}else _.a.doSync()}},Ne=function(e,t,n){d.a.dispatch(b.C(e,t,n));var r=f.n(e);D.a.setTask(r),_.a.doSync()},Le=function(){D.a.isAsyncStore()||D.a.setTask(),Ue()},Ue=function(){var e=d.a.getState().tasks.trashList.filter((function(e){return!!e&&y.cb(e)})).map((function(e){return e?h.b(e):null}));Object(w.f)(S.K.trash,JSON.stringify(e.toJSON()))},Fe=function(){var e=re(regeneratorRuntime.mark((function e(t){var n,r,a,i,o,c,s,u,l,p,m,v,k,O,T,S,E,w,j,_,C,I,M;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.serverData,r=void 0===n?{}:n,a=t.isFullBatch,i=void 0!==a&&a,o=t.projectIdFetchFrom,c=t.forceMerge,s=void 0!==c&&c,u=r.update||[],l=r.deletedInTrash||[],p=r.deletedForever||[],m=[],v=[],k=[],O=[],T=[],S=d.a.getState(),i&&(E=new Set(u.map((function(e){return e.id}))),S.tasks.taskList.forEach((function(e){if(e){var t=e.get("id");E.has(t)||e.get("status")||e.get("isDirty")||e.get("isNew")||T.push(t)}})),d.a.dispatch(b.k(T))),o&&(w=u.map((function(e){return e.id})),f.J(o).forEach((function(e){if(e){var t=e.get("id");-1!==w.indexOf(t)||(null==e?void 0:e.get("isNew"))||T.push(t)}})),d.a.dispatch(b.k(T))),new Map(f.p().map((function(e){return[null==e?void 0:e.get("repeatTaskId"),e]}))),j=new Map(S.tasks.taskList.concat(S.tasks.trashList).map((function(e){return[null==e?void 0:e.get("id"),e]}))),_=Object(R.t)(),C=new Set(_.filter((function(e){return!(null==e?void 0:e.get("isDeleted"))})).map((function(e){return null==e?void 0:e.get("id")}))),u.forEach((function(e){if(C.has(e.projectId)){var t=j.get(e.id);if(t){if(s||t.get("etag")!==e.etag&&!Object(U.b)(e.etag))if(y.cb(t)){var n=f.bb(t,e,s);n.syncStatus=t.get("syncStatus"),n.deleted=t.get("deleted"),f.i(n),g.d(n),v.push(n)}else{var r=f.bb(t,e,s);f.i(r),g.d(r),m.push(r),O.push(r.id)}}else h.c(e),f.i(e),g.d(e),m.push(e)}})),l.forEach((function(e){var t=j.get(e.taskId);t&&(v.push(t.remove("attendId").set("deleted",1).set("assignee",-1).set("modifiedTime",e.modifiedTime).set("projectId",e.projectId).toJS()),k.push(e.taskId))})),I=new Map(S.tasks.taskList.map((function(e){return[null==e?void 0:e.get("id"),e]}))),M=new Map(S.tasks.trashList.map((function(e){return[null==e?void 0:e.get("id"),e]}))),p.forEach((function(e){var t=I.get(e.taskId),n=M.get(e.taskId);t?k.push(t.get("id")):n&&O.push(n.get("id"))})),d.a.dispatch(b.n(m)),d.a.dispatch(b.o(v)),d.a.dispatch(b.j(k)),d.a.dispatch(b.r(O)),e.next=27,Promise.all(m.map((function(e){var t=f.n(e.id);return t?D.a.setTask(t):null})).filter(Boolean));case 27:return e.next=29,Promise.all(k.map((function(e){return D.a.deleteTask(e)})));case 29:return e.next=31,Promise.all(T.map((function(e){return D.a.deleteTask(e)})));case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),He=function(e){var t=f.n(e),n=y.j(t,{isNew:!0,isDirty:!1});n=n.update("focusSummaries",(function(){return y.v(n)})),d.a.dispatch(b.u(e,n)),D.a.deleteTask(e),D.a.setTask(n)},Be=function(e){d.a.dispatch(b.l([{id:e,isDirty:!1,isNew:!1}])),k.f(e);var t=f.n(e);D.a.setTask(t)},Ye=function(){var e=re(regeneratorRuntime.mark((function e(){var t,n,r,a,i,c,u,l,p,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],n=[],r=[],a={},i=[],f.G().toArray().forEach((function(e){if(e.get("isNew")){var r=y.qb(e);t.push(r),a[e.get("id")]={hashCode:e.hashCode(),taskData:r};var o=y.rb(e);o&&i.push(o)}else if(e.get("isDirty")){var c=y.qb(e);n.push(c),a[e.get("id")]={hashCode:e.hashCode(),taskData:c};var s=y.rb(e);s&&i.push(s)}})),f.r().toArray().forEach((function(e){if(y.cb(e)&&!M.a.toBeDeletedTaskIds.has(e.get("id"))){r.push(y.sb(e));var t=y.rb(e);t&&i.push(t)}})),!(t.length||n.length||r.length)){e.next=15;break}return e.next=10,j.c({add:t,update:n,delete:r});case 10:c=e.sent,u=c.data,o.a.isEmpty(u.id2error)||Object.keys(u.id2error).forEach((function(e){var t=u.id2error[e];t===x.a.EXISTED?Be(e):t===x.a.DELETED||t===x.a.NOT_EXISTED?He(e):s.a.log("$handleErrorResult : unexpected # Error: ",t," # id: ",e)})),o.a.isEmpty(u.id2etag)||(d.a.dispatch(b.e(u.id2etag,a)),l=d.a.getState().tasks.activeSelectedTaskIds.get("active"),Object.prototype.hasOwnProperty.call(u.id2etag,l)&&C.a.dispatch("refreshAttachmentImage")),r.length&&(p=u.id2error,h=[],r.forEach((function(e){var t=e.taskId;p[t]||h.push(t)})),h.length&&d.a.dispatch(b.g(h)));case 15:return e.next=17,Promise.all([Ke(),We(i)]);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),We=function(){var e=re(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,j.j(t);case 4:n=e.sent,r=n.data,o.a.isEmpty(r.id2error)||Object.keys(r.id2error).forEach((function(e){k.g(e)})),o.a.isEmpty(r.id2etag)||d.a.dispatch(b.f(r.id2etag));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=re(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.G().concat(f.r()).toArray().filter((function(e){return e.get("isAssignedNew")&&!e.get("isNew")})),!(n=t.map((function(e){return{projectId:e.get("projectId"),taskId:e.get("id"),assignee:e.get("assignee")}}))).length){e.next=10;break}return e.next=5,j.a(n);case 5:r=e.sent,a=r.data,i=a.id2etag,(o=Object.keys(i)).length&&d.a.dispatch(b.d(o));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ge=function(e){var t=f.J(e),n=I.t,r=[];t.sort((function(e,t){var n=e.get("sortOrder"),r=t.get("sortOrder");return n>r?1:n<r?-1:0})).forEach((function(e,t){e&&r.push({id:e.get("id"),sortOrder:t*n,isDirty:!0})})),d.a.dispatch(b.l(r)),_.a.doSync()},Ve=function(e,t){d.a.dispatch(b.I(e,H.a.formatToServerDate(t))),_.a.doSync()},ze=function(e){d.a.dispatch(b.L(te({},e,{reminders:null,isAllDay:null,status:0,startDate:null,dueDate:null,repeatFlag:null,repeatFrom:null,exDate:[],isDirty:!0,isFloating:!1,timeZone:L.h})));var t=f.n(e);return D.a.setTask(t),_.a.doSync(),t},Ze=function(e){var t=Je(e,S.L.Note);return ae(t,{sync:!1}),t},qe=function(e){if(e.children){var t=Object(W.c)([e],Je);return!!v.b("defaultToAdd")&&t.reverse(),t.forEach((function(e,n){ae(e.set("sortOrder",f.u(e.get("projectId"),void 0,t.length-n)),{sync:!1})})),t[0]}var n=Je(e);return ae(n,{sync:!1}),n},Je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.L.Text,n=e.title,r=e.tags,a=e.projectId,i=$e(e,t),o=t===S.L.Note,c=ee({id:Object(P.a)(),isNew:!0,title:n,tags:r||[],createdTime:O.a.formatToUtcString(),modifiedTime:O.a.formatToUtcString()},i);if(a&&(c=Object.assign(c,{projectId:a})),!c.projectId){var s=Object(R.j)();c.projectId=s.get("id")}var u=c.projectId,l=f.u(u);c.sortOrder=l,c.tags.length>0&&g.c(c.tags);var d=y.O(c);if(!e.isRoot)return d;var p=v.d();if(null!=p&&!o){d=d.merge({startDate:p,isAllDay:!0});var h="1"!==v.b("defaultTimeMode")||v.u(),m=v.a(h);d=d.merge({reminders:m,isAllDay:h})}var b=v.e();return null==b||o||(d=d.set("priority",parseInt(String(b),10))),d},$e=function(e,t){var n,r=e.content,i=e.items,o=e.desc;if(Object(Y.n)(t===S.L.Note?"use_note_template":"use_task_template"),i&&(i.length>0||i.size>0)){var c=i.map((function(e,t){return Object(a.fromJS)({id:Object(P.a)(),title:e,sortOrder:I.t*t,status:0})}));n=t===S.L.Note?{kind:S.L.Note,desc:o||"",content:c.map((function(e){return e.title})).join("\n")}:{kind:S.L.Checklist,desc:o||"",items:c}}else n=t?{content:r||"",kind:t}:{content:r||""};return n},Xe=function(e,t,n,r){return y.O({id:Object(P.a)(),title:r.get("title"),content:r.get("content"),isAllDay:n,startDate:e,dueDate:t,isRepeatBody:r.get("isRepeatBody")})},Qe=function(e){d.a.dispatch(Object(r.d)("/".concat(m.l(),"/").concat(e))),d.a.dispatch(b.w(e,[e]))},et=function(e){d.a.dispatch(Object(B.a)(h.e(e,"")))},tt=function(e,t){d.a.dispatch(b.U(e,t))}},349:function(e,t,n){"use strict";n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"p",(function(){return h})),n.d(t,"q",(function(){return v})),n.d(t,"f",(function(){return y})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return k})),n.d(t,"o",(function(){return O})),n.d(t,"i",(function(){return T})),n.d(t,"b",(function(){return S})),n.d(t,"r",(function(){return E})),n.d(t,"a",(function(){return w})),n.d(t,"j",(function(){return D})),n.d(t,"k",(function(){return j})),n.d(t,"m",(function(){return _})),n.d(t,"l",(function(){return I})),n.d(t,"n",(function(){return M}));n(153),n(154),n(160);var r=n(320),a=n(319),i=n.n(a),o=n(478),c=n(318),s=n(395),u=n(449),l=(n(327),n(323),n(341),n(342)),d=function(e){return Object(r.Map)(i.a.extend({id:"",name:"",listType:c.t.project,sortType:"",taskType:"",teamId:null,permission:null},e))},f=function(e){var t=e.get("groupId");if(t&&"NONE"!==t){var n=Object(s.a)(t);if(!n)return!1;var r=n.get("teamId"),a=e.get("teamId");return!r&&!a||r===a}return!1},p=function(e){if(e){var t=e.get("teamId"),n=Object(u.c)();return t&&n.includes(t)}return!1},h=function(e){return!!(e&&e.get("userCount")>1)},m=function(e){return!(!e||e.get("permission")!==o.c.read)},g=function(e){return!(!e||e.get("permission")!==o.c.comment)},v=function(e){return!(!e||!m(e)&&!g(e))},y=function(e){return e.get("closed")},b=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e){var n=e.get("teamId");return!!(y(e)||Object(u.d)(n)||C(e)||t&&v(e))}return!0},k=function(e){if(e){var t=e.get("teamId");return!!(y(e)||Object(u.d)(t)||C(e))}return!0},O=function(e){var t=e.get("userCount"),n=e.get("isOwner");return t>1&&!n},T=function(e){return"inbox"===e.get("taskType")},S=function(e){var t=e.get("listType"),n=M(e);return"group"===t?"folder":e.get("userCount")>1?"share-".concat(n?"note-":"","list"):"inbox"===e.get("taskType")?"inbox-list":"".concat(n?"note":"normal","-list")},E=function(e){var t=Object(l.e)(e).toJSON();return delete t.isNew,delete t.isDirty,delete t.isDeleted,delete t.listType,delete t.taskType,delete t.needPullTasks,delete t.isDuplicated,t},w=function(e){return e?function(e){return!(!e||e.get("permission")&&e.get("permission")!==o.c.write)}(e)?o.c.write:g(e)?o.c.comment:m(e)?o.c.read:o.c.write:o.c.read},D=function(e){return e.get("viewMode")===o.a.kanban&&!M(e)},j=function(e){return!0===e.get("isNew")},_=function(e){return!0===e.get("isDirty")},C=function(e){return!0===e.get("isDeleted")},I=function(e){return!e.get("isNew")&&!e.get("isDirty")&&!e.get("isDeleted")},M=function(e){return e.get("kind")===c.y.Note}},352:function(e,t,n){"use strict";n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return b}));n(159),n(152),n(155),n(50),n(145),n(33),n(143),n(112),n(62),n(158);var r=n(319),a=n.n(r),i=n(328),o=n(344),c=n(318),s=(n(400),n(323)),u=function(e){return e?e.replace(/(^86)|(^\+86)|([ ]+)/g,"").replace(/^([\d]{3})[\d]{4}([\d]{4})$/,"$1****$2"):""};function l(e){if(!e)return!0;var t="@user.".concat(s.i,"$");return null!=e.match(new RegExp(t))}var d=function(e){if(a.a.isEmpty(e))return!1;if(null!=o.a.parseUTCString(e))return!0;var t=i.a.prefMoment(e);return!!t&&t.isValid()},f=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return/[&<>"'`]/.test(e)?e.replace(/[&<>"'`]/g,(function(e){return t[e]||"&amp;"})):e},p=function(e){return/^[0-9]$/.test(e)?c.e.isNum:/^[a-zA-Z]$/.test(e)?c.e.isAlpha:c.e.isLocale},h=function(e){var t="";return e.length>20?(t=e.substr(0,20),t+="..."):t=e,t},m=function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")},g=function(e){return e.replace(/[\n\r\s]/g," ")},v=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})))},y=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{return t?v(String(e)).replace(/[+\/]/g,(function(e){return"+"===e?"-":"_"})).replace(/=/g,""):v(String(e))}catch(t){return e}},b=function(e){try{return function(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}(String(e).replace(/[-_]/g,(function(e){return"-"===e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))}catch(t){return e}}},353:function(e,t,n){"use strict";n.d(t,"h",(function(){return v})),n.d(t,"e",(function(){return y})),n.d(t,"i",(function(){return b})),n.d(t,"f",(function(){return O})),n.d(t,"b",(function(){return T})),n.d(t,"c",(function(){return S})),n.d(t,"g",(function(){return E})),n.d(t,"d",(function(){return C})),n.d(t,"k",(function(){return I})),n.d(t,"a",(function(){return M})),n.d(t,"j",(function(){return A}));n(73),n(205),n(173),n(208),n(203),n(366),n(153),n(119),n(61),n(152),n(155),n(156),n(122),n(120),n(50),n(121),n(33),n(207),n(154),n(111),n(112),n(174),n(204),n(110);var r=n(319),a=n.n(r),i=n(326),o=n(400),c=n(323),s=n(324),u=n(336),l=n(334),d=n(342),f=n(404),p=(n(357),n(450),n(465),n(443),n(444),n(426),n(340),n(352)),h=n(403),m=n(361);n(494);var g=function(){return i.a.getState().tags},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return e.map((function(e){return e.get("name")})).toArray()},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return e.map((function(e){return e.get("label")||e.get("name")})).toArray()},b=function(e){return g().filter((function(t){return e.includes(t.get("name"))}))},k=function(e){return g().find((function(t){return t.get("name")===e}))},O=function(e){return g().find((function(t){return t.get("label")===e||t.get("name")===e}))},T=function(e){var t=O(e);return t?t.get("label")||t.get("name"):e},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();return e.map((function(e){return e.get("label")||e.get("name")})).toArray()},E=function(){var e=l.j();return Object(p.a)(e)},w=function(){var e=g().first();return e?e.get("sortOrder"):0},D=function(){var e=[];g().forEach((function(t,n){e.push({name:t.get("name"),order:n*c.t})})),i.a.dispatch(Object(f.f)(e))},j=function e(t){var n=g(),r=n.findIndex((function(e){return e.get("name")===t}));if(r<0)return null;var a=n.get(r),i=n.get(r+1),o=parseInt(a?a.get("sortOrder"):null,10),c=parseInt(i?i.get("sortOrder"):null,10),s=Object(d.a)(o,c);return s.needReset?(D(),e(t)):s.newSortOrder},_=function(e,t){var n,r=null;return t?r=null===e?function e(t){var n=g(),r=n.findLastIndex((function(e){return e.get("name")===t||e.get("parent")===t})),a=n.get(r),i=n.get(r+1),o=parseInt(a?a.get("sortOrder"):null,10),c=parseInt(i?i.get("sortOrder"):null,10),s=Object(d.a)(o,c);return s.needReset?(D(),e(t)):s.newSortOrder}(t):j(e):e?r=j(e):((n=w()-c.t)<c.s&&(D(),n=w()-c.t),r=n),r},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=["!all","*withtags","!tag"],n=new Set(a.a.intersection(e,t));return g().forEach((function(t){(e.includes(t.get("name"))||e.includes(t.get("parent")))&&n.add(t.get("name"))})),Array.from(n)},I=function(){return{source:y(),limit:8,holder:/[\\\/\*\"\'\:\?\<\>\|#||\s]/i,symbol:["","#"],showCreate:!0,enableMixCase:!1,unableNotChanged:!0,menu:'<ul class="typeahead dropdown-menu TickTick-typeahead tag-typeahead"></ul>',matcher:function(e){return e.toLowerCase().indexOf(this.Tick.matchStr.toLowerCase())>-1},highlighter:function(e){return e.create?e.text:e},createTip:function(e){return s.a("create_tag",{s:e})},sorter:function(e){var t=this.Tick.matchStr,n=y();return e.sort((function(e,r){var a=n.indexOf(e),i=n.indexOf(r);return t===e?-1:t===r||a>i?1:-1}))},addEvent:function(){this.$menu.on("mousedown",$.proxy((function(e){if(e.stopPropagation(),this.mousedover)return e.preventDefault(),this.select(),!1}),this)).on("mouseup",$.proxy((function(e){e.stopPropagation(),e.preventDefault()}),this)),$("body").on("click.tag.typeahead",$.proxy((function(e){$(e.target).closest(".tag-item").length||this.hide()}),this))},detachEvent:function(){$("body").off("click.tag.typeahead")},click:function(e){e.stopPropagation(),e.preventDefault()},onKeyup:function(e){this.Tick.shiftIsDown&&51===e.keyCode&&(this.Tick.symbolStart=!0)},onKeydown:function(e){51===e.keyCode&&(this.Tick.shiftIsDown=e.shiftKey)},selectContent:function(){var e=this.$element.find(".tag-item").get(0);e?u.s(e):u.s(this.$element[0])}}},M=function(e){var t,n,r=e.label,a=e.name,i=e.color,s=void 0===i?(t=c.a,n=t.length-1,t[Math.floor(Math.random()*(n-0+1))+0]):i,u=e.order,l=e.parent,d=void 0===l?null:l,f=e.isLocal,p=void 0!==f&&f;return!a||o.a.tagNameFilter.test(a)?null:{label:r,name:a,sortOrder:null!=u?u:_(d),status:p?h.b.INIT:h.b.NEW,color:s,parent:d}},A=function(e){var t=M(e);return t?(i.a.dispatch(Object(f.a)(t)),m.a.doSync(),k(e.name)):null}},354:function(e,t,n){"use strict";n(123),n(124),n(125),n(61),n(155),n(210),n(50),n(143),n(111),n(110);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=function(){var e=Math.floor(16777215*Math.random()),t=Math.floor(32767*Math.random()),n=Math.floor(16777216*Math.random());if("undefined"!=typeof localStorage){var i=parseInt(localStorage.mongoMachineId);i>=0&&i<=16777215&&(n=Math.floor(localStorage.mongoMachineId)),localStorage.mongoMachineId=n}return function(){if(!(this instanceof a))return new a(arguments[0],arguments[1],arguments[2],arguments[3]).toString();"object"==r(arguments[0])?(this.timestamp=arguments[0].timestamp,this.machine=arguments[0].machine,this.pid=arguments[0].pid,this.increment=arguments[0].increment):"string"==typeof arguments[0]&&24==arguments[0].length?(this.timestamp=Number("0x"+arguments[0].substr(0,8)),this.machine=Number("0x"+arguments[0].substr(8,6)),this.pid=Number("0x"+arguments[0].substr(14,4)),this.increment=Number("0x"+arguments[0].substr(18,6))):4==arguments.length&&null!=arguments[0]?(this.timestamp=arguments[0],this.machine=arguments[1],this.pid=arguments[2],this.increment=arguments[3]):(this.timestamp=Math.floor((new Date).valueOf()/1e3),this.machine=n,this.pid=t,this.increment=e++,e>16777215&&(e=0))}}();a.prototype.getDate=function(){return new Date(1e3*this.timestamp)},a.prototype.toArray=function(){var e,t=this.toString(),n=[];for(e=0;e<12;e++)n[e]=parseInt(t.slice(2*e,2*e+2),16);return n},a.prototype.toString=function(){var e=this.timestamp.toString(16),t=this.machine.toString(16),n=this.pid.toString(16),r=this.increment.toString(16);return"00000000".substr(0,8-e.length)+e+"000000".substr(0,6-t.length)+t+"0000".substr(0,4-n.length)+n+"000000".substr(0,6-r.length)+r},t.a=a},355:function(e,t,n){"use strict";n.d(t,"b",(function(){return D})),n.d(t,"a",(function(){return j}));n(73),n(205),n(203),n(153),n(152),n(206),n(325),n(154),n(204);var r=n(0),a=n.n(r),i=(n(99),n(320)),o=n(319),c=n.n(o),s=(n(356),n(50),n(33),n(143),n(62),n(598)),u=n(332),l=n(321),d=n.n(l);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var p=function(e){var t=e.text,n=e.dataAttrs,i=void 0===n?[]:n,o=e.delayTime,c=void 0===o?3e3:o,l=e.closable,p=void 0!==l&&l,h=e.actionText,m=e.isClose,g=void 0!==m&&m,v=e.actionType,y=e.canClick,b=e.onClose,k=e.onAction,O=e.onRemove,T=e.onClickAction,S=Object(r.useRef)(null),E=Object(r.useRef)(null),w=Object(r.useRef)(null),D=Object(r.useRef)((new Date).getTime()),j=Object(r.useRef)(c),_=Object(s.a)(g),C=Object(r.useCallback)((function(){w.current&&(clearTimeout(w.current),w.current=null)}),[]),I=Object(r.useCallback)((function(){E.current||(E.current=setTimeout((function(){C(),O()}),200))}),[C,O]),M=Object(r.useCallback)((function(e){D.current=(new Date).getTime(),w.current=setTimeout((function(){S.current&&$(S.current).addClass("before-animation"),I()}),e)}),[I]);Object(r.useEffect)((function(){return setTimeout((function(){S.current&&$(S.current).removeClass("before-animation")})),M(c),function(){C()}}),[c,M,C]),Object(r.useEffect)((function(){g&&_!==g&&(S.current&&$(S.current).addClass("fast-close-animation"),I())}),[I,g,_]);var A;return a.a.createElement("div",f({ref:S,className:d()("pop-tip tip-transition clearfix before-animation",y?"dropdown-toggle":""),onClick:function(){T&&T()},onMouseEnter:function(){y&&(j.current=(new Date).getTime()-D.current,C())},onMouseLeave:function(){y&&(setTimeout((function(){S.current&&$(S.current).removeClass("before-animation")})),M(j.current))}},(A=[],i.forEach((function(e,t){A.push("data-{key}={val}".replace("{key}",t.toString()).replace("{val}",i[t]))})),A)),p&&a.a.createElement("a",{className:"close line-right",onClick:function(){C(),setTimeout((function(){b&&b()}),200)}},a.a.createElement(u.a,{name:"close"})),h&&a.a.createElement("a",{className:"action line-right",onClick:function(){k&&k()}},"undo"===v?a.a.createElement(u.a,{name:"undo",className:"i-s-18"}):h),y?a.a.createElement("div",{className:"canClick"},a.a.createElement("span",{className:"text line-left"},t),a.a.createElement(u.a,{name:"chevron-right",className:"i-s-18"})):a.a.createElement("span",{className:"text line-left"},t))};function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var a=E(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=null,D=(a.a.Component,function(e){w&&w.add(e)}),j=function(e){w&&w.remove(e)}},357:function(e,t,n){"use strict";n.d(t,"m",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"k",(function(){return o})),n.d(t,"n",(function(){return c})),n.d(t,"l",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"p",(function(){return l})),n.d(t,"v",(function(){return d})),n.d(t,"U",(function(){return f})),n.d(t,"J",(function(){return p})),n.d(t,"K",(function(){return h})),n.d(t,"O",(function(){return m})),n.d(t,"R",(function(){return g})),n.d(t,"I",(function(){return v})),n.d(t,"H",(function(){return y})),n.d(t,"j",(function(){return b})),n.d(t,"b",(function(){return k})),n.d(t,"S",(function(){return O})),n.d(t,"t",(function(){return T})),n.d(t,"D",(function(){return S})),n.d(t,"F",(function(){return E})),n.d(t,"L",(function(){return w})),n.d(t,"Q",(function(){return D})),n.d(t,"P",(function(){return j})),n.d(t,"E",(function(){return _})),n.d(t,"G",(function(){return C})),n.d(t,"i",(function(){return I})),n.d(t,"x",(function(){return M})),n.d(t,"w",(function(){return A})),n.d(t,"s",(function(){return x})),n.d(t,"B",(function(){return R})),n.d(t,"h",(function(){return P})),n.d(t,"z",(function(){return N})),n.d(t,"y",(function(){return L})),n.d(t,"q",(function(){return U})),n.d(t,"A",(function(){return F})),n.d(t,"N",(function(){return H})),n.d(t,"C",(function(){return B})),n.d(t,"o",(function(){return Y})),n.d(t,"r",(function(){return W})),n.d(t,"u",(function(){return K})),n.d(t,"e",(function(){return G})),n.d(t,"f",(function(){return V})),n.d(t,"g",(function(){return z})),n.d(t,"d",(function(){return Z})),n.d(t,"M",(function(){return q})),n.d(t,"T",(function(){return J}));var r=n(339),a=function(e){return{type:r.X,data:e}},i=function(e){return{type:r.k,data:e}},o=function(e){return{type:r.M,ids:e}},c=function(e){return{type:r.Y,data:e}},s=function(e){return{type:r.W,data:e}},u=function(e){return{type:r.a,addChildIds:e}},l=function(e){return{type:r.db,removeChildIds:e}},d=function(e){return{type:r.rb,data:e}},f=function(e,t){return{type:r.fd,id:e,title:t}},p=function(e,t){return{type:r.Rc,id:e,content:t}},h=function(e,t){return{type:r.Sc,id:e,desc:t}},m=function(e,t){return{type:r.Yc,id:e,order:t}},g=function(e,t){return{type:r.cd,id:e,remindTime:t}},v=function(e,t){return{type:r.Qc,id:e,completedTime:t}},y=function(e,t){return{type:r.Pc,id:e,count:t}},b=function(e){return{type:r.K,ids:e}},k=function(e,t){return{type:r.j,ids:e,tagName:t}},O=function(e,t){return{type:r.dd,id:e,tags:t}},T=function(e){return{type:r.kb,tagName:e}},S=function(e,t){return{type:r.Kc,oldTagName:e,newTagName:t}},E=function(e,t){return{type:r.Nc,id:e,data:t}},w=function(e){return{type:r.Tc,data:e}},D=function(e,t){return{type:r.bd,id:e,progress:t}},j=function(e,t){return{type:r.ad,id:e,priority:t}},_=function(e,t){return{type:r.Mc,id:e,assignee:t}},C=function(e,t){return{type:r.Oc,id:e,columnId:t}},I=function(){return{type:r.z}},M=function(e){return{type:r.tb,taskId:e}},A=function(e,t){return{type:r.sb,activeId:e,selectedIds:t}},x=function(e){return{type:r.hb,taskId:e}},R=function(e){return{type:r.ic,taskId:e}},P=function(){return{type:r.N}},N=function(e){return{type:r.Q,taskId:e}},L=function(e,t){return{type:r.P,activeId:e,selectedIds:t}},U=function(e){return{type:r.O,taskId:e}},F=function(e){return{type:r.R,taskId:e}},H=function(e,t){return{type:r.Xc,id:e,data:t}},B=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{type:r.Jc,id:e,updated:t,deleted:n,options:a}},Y=function(e){return{type:r.Z,data:e}},W=function(e){return{type:r.eb,ids:e}},K=function(e,t){return{type:r.nb,oldTaskId:e,newTask:t}},G=function(e,t){return{type:r.r,id2etag:e,id2Original:t}},V=function(e){return{type:r.s,id2etag:e}},z=function(e){return{type:r.p,ids:e}},Z=function(e){return{type:r.n,ids:e}},q=function(e,t){return{type:r.Wc,id:e,data:t}},J=function(e,t){return{type:r.Lc,id:e,timeZone:t}}},359:function(e,t,n){"use strict";n(174);var r=n(320),a=n(338),i=n.n(a),o=n(329),c=n(328),s=n(352),u=n(323),l=n(318),d=n(330),f=n(341),p=n(333),h=n(349),m=n(395),g=n(449),v=n(385),y=n(353),b=n(344),k=n(519),O=n(402),T={},S={};function E(e,t,n){T[e]=T[e]||{};var r=t.hashCode()+"+"+n.hashCode();return T[e][r]}function w(e,t,n,r){T[e]=T[e]||{};var a=t.hashCode()+"+"+n.hashCode();T[e][a]=r}function D(e,t){return e===t?0:e>t?1:-1}function j(e,t){return e===t?0:e<t?-1:1}function _(e,t){return e?t?0:-1:t?1:0}function C(e,t){var n=_(e,t);if(0!==n)return n;if(e===t)return 0;var r=c.a.getUnix(e),a=c.a.getUnix(t);return r===a?0:r>a?1:-1}function I(e,t){if(null==e&&null==t)return 0;var n=_(e,t);return 0!==n?n:e?e.localeCompare(t):1}function M(e,t){return I(e.get("id"),t.get("id"))}function A(e,t){return P(d.ab(e),d.ab(t))}function x(e,t){var n=e.get("isSubTaskModel"),r=t.get("isSubTaskModel");return n===r&&r?2:n?1:r?-1:0}function R(e,t){return-D(e.get("priority"),t.get("priority"))}function P(e,t){return e===t?0:e?1:-1}function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.get("startDate"),a=t.get("startDate"),i=_(r,a);if(0!==i)return i;if(!r&&!a)return 0;var o=d.gb(e),c=d.gb(t);return 0!==(i=n?-P(c,o):-P(o,c))?i:o?L(e,t):U(e,t)}function L(e,t){var n=e.get("startDate"),r=t.get("startDate"),a=d.u(e),i=d.u(t),o=c.a.startOfDay(a),s=c.a.startOfDay(i);if(!o.isSame(s))return o.isBefore(s)?-1:1;var u=P(e.get("isAllDay"),t.get("isAllDay"));if(0!==u)return u;if(0!==(u=C(a,i)))return u;var l=c.a.startOfDay(n),f=c.a.startOfDay(r);return l.isSame(f)?u=C(n,r):l.isBefore(f)?-1:1}function U(e,t){var n=e.get("startDate"),r=t.get("startDate"),a=d.u(e),i=d.u(t),o=c.a.startOfDay(n),s=c.a.startOfDay(r);if(!o.isSame(s))return o.isBefore(s)?-1:1;var u=P(e.get("isAllDay"),t.get("isAllDay"));if(0!==u)return u;if(0!==(u=C(n,r)))return u;var l=c.a.startOfDay(a),f=c.a.startOfDay(i);return l.isSame(f)?u=C(a,i):l.isBefore(f)?-1:1}function F(e,t){return D(e.get("sortOrder"),t.get("sortOrder"))}function H(e,t){return B(Object(p.n)(e.get("projectId")),Object(p.n)(t.get("projectId")))}function B(e,t){if(!e||!t)return 0;if(e===t)return 0;if(e.get("id")===f.a("inboxId"))return-1;if(t.get("id")===f.a("inboxId"))return 1;var n,r,a,i;if(f.e()){var o=Object(h.d)(e)?e.get("teamId"):null,c=Object(h.d)(t)?t.get("teamId"):null,s=o?Object(g.b)(o):null,u=c?Object(g.b)(c):null;if(0!==_(s,u)){if(s)return s.get("expired")?1:-1;if(u)return u.get("expired")?-1:1}if(s&&u){var l=Y(s,u);if(0!==l)return l}}return n=Object(h.c)(e)&&Object(m.a)(e.get("groupId")),r=Object(h.c)(t)&&Object(m.a)(t.get("groupId")),a=n?n.get("sortOrder"):e.get("sortOrder"),i=r?r.get("sortOrder"):t.get("sortOrder"),n&&r&&n.get("id")===r.get("id")?D(e.get("sortOrder"),t.get("sortOrder")):D(a,i)}function Y(e,t){var n=e.get("expired"),r=P(n,t.get("expired"));if(0!==r)return r;if(n&&0!==(r=-C(e.get("expiredDate"),t.get("expiredDate"))))return r;return 0!==(r=-C(e.get("joinedTime"),t.get("joinedTime")))?r:I(e.get("id"),t.get("id"))}function W(e,t){if(""===e||""===t){if(""===e&&""===t)return 0;if(""===e)return-1;if(""===t)return 1}var n=e.substr(0,1),r=t.substr(0,1),a=s.j(n),i=s.j(r);if(a<i)return-1;if(a>i)return 1;if(a===l.e.isNum||a===l.e.isAlpha)return n<r?-1:n>r?1:W(e.substr(1),t.substr(1));var o=0;try{o=n.localeCompare(r,u.q)}catch(e){n<r&&(o=-1),n>r&&(o=1)}return 0!==o?o:W(e.substr(1),t.substr(1))}function K(e){if(d.F(e)){var t=e.get("isAllDay"),n=b.a.parseUTCString(e.get("dueDate"));return t?i()(n).subtract(1,"second"):i()(n)}return i()(b.a.parseUTCString(e.get("startDate")))}function G(e,t){var n=i()(b.a.parseUTCString(e.get("startDate"))),r=i()(b.a.parseUTCString(t.get("startDate"))),a=K(e),o=K(t),c=e.get("isAllDay"),s=t.get("isAllDay"),u=d.bb(e),l=d.bb(t);if(u&&!l)return 1;if(!u&&l)return-1;var f=n.clone().startOf("day"),p=r.clone().startOf("day");if(!f.isSame(p))return f.isBefore(p)?-1:1;var h=a.clone().startOf("day"),m=o.clone().startOf("day");return h.isSame(m)?P(c,s)||V(n,r)||-V(a,o):h.isBefore(m)?1:-1}function V(e,t){var n=_(e,t);return 0!==n?n:e===t||e.isSame(t)?0:e.isAfter(t)?1:-1}S.sortOrder=function(e,t){var n=A(e,t);if(0!==n)return n;var r=x(e,t);return 0!==r&&2!==r?r:2===r&&0!==(n=F(v.d(e),v.d(t)))||0!==(n=F(e,t))||0!==(n=j(e.get("status"),t.get("status")))?n:M(e,t)},S.order=function(e,t){var n=E("order",e,t);return void 0!==n||0!==(n=F(e,t))?(w("order",e,t,n),n):(w("order",e,t,n=M(e,t)),n)},S.smartProjectOrder=function(e,t){return D(e.get("order"),t.get("order"))},S.subtask=function(e,t){var n=e.get("status")||0,r=j(n,t.get("status")||0);if(0!==r)return r;if(0!==n){if(0!==(r=-_(e.get("completedTime"),t.get("completedTime"))))return r;if(e.get("completedTime")&&0!==(r=function(e,t){var n=_(e,t);return 0!==n?n:D(e,t)}(e.get("completedTime"),t.get("completedTime"))))return r}return 0!==(r=D(e.get("sortOrder"),t.get("sortOrder")))?r:I(e.get("id"),t.get("id"))},S.subtaskExceptStatus=function(e,t){var n=D(e.get("sortOrder"),t.get("sortOrder"));return 0!==n?n:I(e.get("id"),t.get("id"))},S.completedTime=function(e,t){var n=E("completedTime",e,t);if(void 0!==n)return n;var r=e.get("completedTime"),a=t.get("completedTime");return 0!==(n=_(r,a))||0!==(n=-C(r,a))?(w("completedTime",e,t,n),n):(w("completedTime",e,t,n=M(e,t)),n)},S.completion=function(e,t){var n=e.get("completedTime"),r=t.get("completedTime"),a=_(n,r);return 0!==a||0!==(a=-C(n,r))||0!==(a=R(e,t))||0!==(a=H(e,t))||0!==(a=F(e,t))?a:a=M(e,t)},S.progress=function(e,t){var n=-j(e.get("progress"),t.get("progress"));return 0!==n||0!==(n=N(e,t))||0!==(n=R(e,t))||0!==(n=H(e,t))||0!==(n=F(e,t))?n:n=M(e,t)},S.unCompleted=function(e,t){var n=N(e,t);return 0!==n||0!==(n=R(e,t))||0!==(n=H(e,t))||0!==(n=F(e,t))?n:n=M(e,t)},S.date=function(e,t){return C(e,t)},S.summaryListSort=function(e,t){var n=j(e.get("status"),t.get("status"));return 0!==n||0!==(n=-j(e.get("progress"),t.get("progress")))||0!==(n=0!==e.get("status")&&0!==t.get("status")?C(t.get("completedTime"),e.get("completedTime")):N(e,t))||0!==(n=R(e,t))||0!==(n=F(e,t))?n:n=M(e,t)},S.summaryDateSort=function(e,t){var n=j(e.get("status"),t.get("status"));return 0!==n||0!==(n=-j(e.get("progress"),t.get("progress")))||0!==(n=0!==e.get("status")&&0!==t.get("status")?C(t.get("completedTime"),e.get("completedTime")):N(e,t))||0!==(n=R(e,t))||0!==(n=H(e,t))||0!==(n=F(e,t))?n:n=M(e,t)},S.summaryPrioritySort=function(e,t){var n=j(e.get("status"),t.get("status"));return 0!==n||0!==(n=-j(e.get("progress"),t.get("progress")))||0!==(n=0!==e.get("status")&&0!==t.get("status")?C(t.get("completedTime"),e.get("completedTime")):N(e,t))||0!==(n=H(e,t))||0!==(n=F(e,t))?n:n=M(e,t)},S.summaryAssigneeSort=function(e,t){var n=j(e.get("status"),t.get("status"));return 0!==n||0!==(n=-j(e.get("progress"),t.get("progress")))||0!==(n=0!==e.get("status")&&0!==t.get("status")?C(t.get("completedTime"),e.get("completedTime")):N(e,t))||0!==(n=R(e,t))||0!==(n=H(e,t))||0!==(n=F(e,t))?n:n=M(e,t)},S.title=function(e,t){var n=E("title",e,t);if(void 0!==n)return n;var r=e.get("title").trim(),a=t.get("title").trim();return 0!==(n=r.localeCompare(a,u.q))?(w("title",e,t,n),n):(w("title",e,t,n=M(e,t)),n)},S.assignee=function(e,t){var n=function(e,t){var n=e.get("startDate"),r=t.get("startDate");return c.a.prefMoment(n).isSame(r,"d")?P(e.get("isAllDay"),t.get("isAllDay")):0}(e,t);return 0!==n||0!==(n=N(e,t))||0!==(n=R(e,t))||0!==(n=H(e,t))||0!==(n=F(e,t))?n:M(e,t)},S.priority=function(e,t){var n=E("priority",e,t);if(void 0!==n)return n;n=0;var r=e,a=t;if(0!==(n=R(r,a)))return w("priority",e,t,n),n;if(0!==(n=N(e,t)))return w("priority",e,t,n),n;if(0!==(n=A(r,a)))return w("priority",e,t,n),n;if(0!==(n=H(r,a)))return w("priority",e,t,n),n;var i=x(e,t);if(2===i){if(0!==(n=F(v.d(e),v.d(t))))return w("priority",e,t,n),n;n=F(e,t)}else n=1===i?v.d(e)===t?1:F(v.d(e),t):-1===i?v.d(t)===e?-1:F(e,v.d(t)):F(e,t);return 0!==n?(w("priority",e,t,n),n):(w("priority",e,t,n=M(e,t)),n)},S.dueDate=function(e,t,n){n=n||{};var r=E("dueDate"+JSON.stringify(n),e,t);if(void 0!==r)return r;var a=x(e,t);if(!n.inCalendar&&0!==(r=N(e,t)))return w("dueDate"+JSON.stringify(n),e,t,r),r;var i=e,o=t;if(n.inCalendar&&(1===a?i=v.d(e):-1===a&&(o=v.d(t))),0!==(r=R(i,o)))return w("dueDate"+JSON.stringify(n),e,t,r),r;if(0!==(r=A(i,o)))return w("dueDate"+JSON.stringify(n),e,t,r),r;if(0!==(r=H(i,o)))return w("dueDate"+JSON.stringify(n),e,t,r),r;if(2===a){if(0!==(r=F(v.d(e),v.d(t))))return w("dueDate"+JSON.stringify(n),e,t,r),r;r=F(e,t)}else r=1===a?v.d(e)===t?1:F(v.d(e),t):-1===a?v.d(t)===e?-1:F(e,v.d(t)):F(e,t);return 0!==r?(w("dueDate"+JSON.stringify(n),e,t,r),r):(r=M(e,t),w("dueDate"+JSON.stringify(n),e,t,r),r)},S.searchOrder=function(e,t){var n=E("searchOrder",e,t);if(void 0!==n)return n;if(0!==(n=j(e.get("status"),t.get("status"))))return w("searchOrder",e,t,n),n;if(0!==(n=0!==e.get("status")&&0!==t.get("status")?C(t.get("completedTime"),e.get("completedTime")):N(e,t,!0)))return w("searchOrder",e,t,n),n;var r=e,a=t;return 0!==(n=R(r,a))||0!==(n=A(r,a))||0!==(n=H(r,a))||0!==(n=F(e,t))?(w("searchOrder",e,t,n),n):(w("searchOrder",e,t,n=M(e,t)),n)},S.tagOrder=function(e,t){if(null==e&&null==t)return 0;var n=_(e,t);return 0!==n||0!==(n=F(e,t))?n:W(e.get("name"),t.get("name"))},S.tagName=W,S.projectOrder=function(e,t){return B(e,t)},S.sharedUsers=function(e,t){if(e.get("isOwner"))return-1;if(t.get("isOwner"))return 1;if(e.get("isMyself"))return-1;if(t.get("isMyself"))return 1;if(e.get("isAccept")&&!t.get("isAccept"))return-1;if(!e.get("isAccept")&&t.get("isAccept"))return 1;var n=-C(e.get("createdTime"),t.get("createdTime"));return 0!==n?n:e.get("displayName").localeCompare(t.get("displayName"))},S.mentionUsers=function(e,t){if(e.get("userId")===f.a("userId"))return-1;if(t.get("userId")===f.a("userId"))return 1;var n=-C(e.get("createdTime"),t.get("createdTime"));return 0!==n?n:e.get("displayName").localeCompare(t.get("displayName"))},S.modifiedTime=function(e,t){var n=-C(e.get("modifiedTime"),t.get("modifiedTime"));return 0!==n?n:M(e,t)},S.createdTime=function(e,t){var n=e.get("createdTime"),r=t.get("createdTime"),a=_(n,r);return 0!==a||0!==(a=-C(n,r))?a:M(e,t)},S.team=function(e,t){return Y(e,t)},S.taskGroupSortOrder=function(e,t,n,r){var a=function(e,t){return null!=e?null!=t?0:-1:null!=t?1:0}(e,t);return 0!==a?a:void 0===e?a=S.mixGroupSortOrder(n,r):0!==(a=D(e,t))?a:M(n,r)},S.mixGroupSortOrder=function(e,t){var n=function(e,t){var n=d.lb(e),r=d.lb(t);return n===r&&r?2:n?1:r?-1:0}(e,t);return 2===n?n=S.dueDate(e,t):0===n?0!==(n=N(e,t))?n:M(e,t):n},S.projectAndSortOrder=function(e,t){var n=x(e,t);if(0!==n&&2!==n)return n;var r=H(e,t);return 0!==r||2===n&&0!==(r=F(Object(o.n)(e.get("taskId")),Object(o.n)(t.get("taskId"))))||0!==(r=F(e,t))?r:M(e,t)},S.calendar=function(e,t){var n=d.bb(e),r=d.bb(t),a=d.ab(e),i=d.ab(t),o=e.get("status"),c=t.get("status");a?o=Object(k.d)(e):n&&(o=Object(O.g)(e)?1:0),i?c=Object(k.d)(t):r&&(c=Object(O.g)(t)?1:0);var s=0;if(0===o&&0===c)s=G(e,t);else{var u=function(e,t){return(t?a:i)||(t?n:r)?d.q(e):d.eb(e)?0:d.q(e)},l=u(e,!0),f=u(t,!1);if(o>0&&c>0){if(0===(s=-P(l>=1,f>=1)))if(n&&r)s=F(e,t);else if(n&&!r)s=1;else if(!n&&r)s=-1;else{s=-C(a?e.get("dueDate"):e.get("completedTime"),i?t.get("dueDate"):t.get("completedTime"))}}else s=o&&l>=1||c&&f>=1?G(e,t):o?1:-1}return 0!==s?s:S.dueDate(e,t,{inCalendar:!0})},S.project=function(e,t){var n=E("project",e,t);if(void 0!==n)return n;n=0;var r=v.d(e),a=v.d(t);return w("project",e,t,n=N(e,t)||R(r,a)||F(r,a)),n},S.tag=function(e,t){var n=y.i(e.get("tags")||Object(r.List)()),a=y.i(t.get("tags")||Object(r.List)()),i=0,o=Math.max(n.size,a.size);if(o>0)for(var c=0;c<o;c++){var s=n.get(c),u=a.get(c);if(0!==(i=_(s,u)))return i;if(0!==(i=S.tagOrder(s,u)))return i}var l=v.d(e),d=v.d(t);return N(e,t)||R(l,d)||H(l,d)||F(l,d)},S.teamMembers=function(e,t){var n=e.get("role"),r=t.get("role"),a=-P(0===n,0===r);if(0!==a)return a;if(0!==(a=D(n,r)))return a;if(0!==(a=-P(e.get("isMyself"),t.get("isMyself"))))return a;if(1===n&&0!==(a=-C(e.get("becameAdminTime"),t.get("becameAdminTime"))))return a;return-C(e.get("joinedTime"),t.get("joinedTime"))},S.subscribeEventAttendees=function(e,t){var n=-P(e.get("organizer"),t.get("organizer"));return 0!==n?n:0},S.subscribeCalendar=function(e,t){var n=-P("show"===e.get("show"),"show"===t.get("show"));return 0!==n?n:0},S.habit=function(e,t){var n=D(e.sortOrder,t.sortOrder);return 0!==n?n:0},S.archivedHabit=function(e,t){var n=e.sortOrder,r=e.modifiedTime,a=t.sortOrder,i=-C(r,t.modifiedTime);return 0===i&&(i=D(n,a)),0!==i?i:0},t.a=S},361:function(e,t,n){"use strict";var r=n(394),a=n.n(r),i=(n(50),n(121),n(350),n(319)),o=n.n(i),c=n(98),s=n.n(c),u=(n(61),n(380),n(111),n(110),n(340)),l=n(454),d=(n(205),n(208),n(203),n(152),n(120),n(346),n(210),n(416),n(174),n(204),n(160),n(326)),f=n(331),p=n(318),h=n(604),m=n(401),g=n(323),v=n(333),y=n(432),b=n(374),k=n(452);function O(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}var T=function(e){if(e){var t=d.a.getState().groups.groupList.toJS(),n=t.filter((function(e){return e.isNew})),r=new Map(t.map((function(e){return[e.id,e]})));e.forEach((function(e){var t=r.get(e.id);if(t)if(r.delete(e.id),t.isDeleted||t.etag===e.etag)n.push(t);else if(t.isDirty)if(b.u(e.id)){var a=b.o(e.id),i=Object(k.c)(a,e,t);b.i(e),n.push(i)}else n.push(t);else n.push(e);else n.push(e)})),n=n.map((function(e){return S(e)})),d.a.dispatch(Object(h.c)(n))}},S=function(e){if(e.name){var t=e.name.trim();e.name!==t&&(e.name=t,e.isDirty=!0)}return e},E=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.a.getState().groups.groupList,n=[],r=[],a=[],t.forEach((function(e){e.get("isDeleted")?a.push(e.get("id")):e.get("isNew")?n.push(Object(m.c)(e)):e.get("isDirty")&&r.push(Object(m.c)(e))})),!(n.length||r.length||a.length)){e.next=8;break}return e.next=8,u.f({add:n,update:r,delete:a}).then((function(e){var t=e.data;d.a.dispatch(Object(h.a)(t.id2etag,t.id2error))}));case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){O(i,r,a,o,c,"next",e)}function c(e){O(i,r,a,o,c,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),w=n(481),D=(n(73),n(173),n(153),n(156),n(145),n(33),n(143),n(154),n(497)),j=n(365),_=n(480),C=(n(354),n(324)),I=(n(456),n(342),n(382)),M=n(457),A=n(355),x=n(349);function R(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function P(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var L=function(e){var t,n=e.serverData,r=void 0===n?{}:n,a=e.isFullBatch,i=void 0!==a&&a,c=e.projectIdFetchFrom,s=[].concat(r.update||[]).concat(r.add||[]),u=(r.delete||[]).map((function(e){return e.columnId})),l=c?d.a.getState().columns.filter((function(e){return e.get("projectId")===c})).toJS():d.a.getState().columns.toJS(),f=[],p=u,h=o.a.groupBy(s,"projectId"),m=o.a.groupBy(l,"projectId"),g=P(o.a.uniq(o.a.keys(h).concat(o.a.keys(m))));try{var v=function(){var e=t.value,n=h[e]||[],r=m[e]||[];if(n.length){var a=r.filter((function(e){return e.syncStatus===j.e}));a.length&&a.forEach((function(t){p.push(t.id),I.b(t.id,e)}))}n.forEach((function(e){var t=r.find((function(t){return t.id===e.id})),n=!!t,a=n&&t.etag!==e.etag,i=n&&(t.syncStatus===j.a||t.syncStatus===j.c);(!n||a&&!i)&&(e.syncStatus=j.d,f.push(e))})),i&&r.forEach((function(e){var t=n.find((function(t){return e.id===t.id})),r=e.syncStatus===j.b||e.syncStatus===j.e;t||r||p.push(e.id)}))};for(g.s();!(t=g.n()).done;)v()}catch(e){g.e(e)}finally{g.f()}d.a.dispatch(D.d(f,p))},U=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.a.getState().columns,n=[],r=[],i=[],c=[],t.forEach((function(e){e.get("syncStatus")===j.c?(i.push({columnId:e.get("id"),projectId:e.get("projectId")}),c.push(e.get("id"))):e.get("syncStatus")===j.b||e.get("syncStatus")===j.e?n.push(Object(M.d)(e)):e.get("syncStatus")===j.a&&r.push(Object(M.d)(e))})),!(n.length||r.length||i.length)){e.next=9;break}return e.next=9,u.d({add:n,update:r,delete:i}).then((function(e){var t=e.data,n=[],r=[];if(!o.a.isEmpty(t.id2error))for(var a in t.id2error){var i=a,s=t.id2error[a];if(s===_.a.EXISTED)n.push({id:i,syncStatus:j.a});else if(s===_.a.NOT_EXISTED)c.includes(i)?r.push(i):n.push({id:i,syncStatus:j.b});else if(s===_.a.NO_PROJECT_PERMISSION){var u=Object(v.m)(i),l=u.get("id");x.k(u)?r.push(i):(x.m(u)||x.l(u))&&(r.push(i),d.a.dispatch(Object(y.j)(l,{})))}else s===_.a.EXCEED_QUOTA&&A.b({text:C.a("column_limit_warn")})}if(!o.a.isEmpty(t.id2etag))for(var f in t.id2etag){var p=t.id2etag[f];c.includes(f)?r.push(f):n.push({id:f,etag:p,syncStatus:j.d})}d.a.dispatch(D.d(n,r))}));case 9:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){R(i,r,a,o,c,"next",e)}function c(e){R(i,r,a,o,c,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),F=n(465),H=n(516),B=n(443),Y=n(444),W=n(426),K=n(348),G=n(339),V=function(){return u.Y().then((function(e){var t=e.data;return d.a.dispatch(function(e){return{type:G.Zb,data:e}}(t)),t}))},z=n(460),Z=n(492);function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){J(i,r,a,o,c,"next",e)}function c(e){J(i,r,a,o,c,"throw",e)}o(void 0)}))}}var X=function(){Object(z.a)()||Object(v.q)().toArray().some((function(e){return!!Object(x.n)(e)&&(Object(z.e)(),!0)})),Object(Z.a)()};function Q(e){return ee.apply(this,arguments)}function ee(){return(ee=$(regeneratorRuntime.mark((function e(t){var n,r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,r=void 0===n?{}:n,a=t.isFullBatch,i=void 0!==a&&a,L({serverData:r.columns,isFullBatch:i}),T(r.projectGroups),Object(w.b)({serverData:r.projectProfiles,isFullBatch:i}),Object(F.b)(r.filters),Object(H.b)(r.tags),Object(B.c)(r.syncTaskOrderBean),Object(Y.c)(r.syncTaskOrderBean),Object(W.c)(r.syncTaskOrderBean),e.next=11,Object(K.o)({serverData:r.syncTaskBean,isFullBatch:i});case 11:Object(l.e)()&&V(),Object(w.d)(),X();case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=function(){var e=$(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.a)();case 2:return e.abrupt("return",Promise.all([E(),Object(F.a)(),Object(H.a)(),Object(K.h)(),U()]));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(e,t){return new Promise((function(n,r){Object(u.A)(e).then((function(e){var a=e.data,i=(new Date).valueOf();Object(u.z)(t).then((function(e){o.a.isEmpty(e.data.add)&&o.a.isEmpty(e.data.update)&&o.a.isEmpty(e.data.delete)||(a.columnTimeStamp=i),a.columns=e.data,n(a)})).catch((function(e){r(e)}))})).catch((function(e){r(e)}))}))},re=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.checkPoint=0,this.columnTimeStamp=0}var t,n,r,a,i;return t=e,(n=[{key:"isFullBatch",value:function(){return 0===this.checkPoint}},{key:"pull",value:(i=$(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(this.checkPoint,this.columnTimeStamp);case 2:return t=e.sent,e.next=5,Q({data:t,isFullBatch:this.isFullBatch()});case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"commit",value:(a=$(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",te());case 1:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"updatePoint",value:function(e,t){this.checkPoint=e,t&&(this.columnTimeStamp=t)}}])&&q(t.prototype,n),r&&q(t,r),e}(),ae=n(421),ie=n(341),oe=n(363),ce=n(362),se=n(500),ue=n(157);function le(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function de(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){le(i,r,a,o,c,"next",e)}function c(e){le(i,r,a,o,c,"throw",e)}o(void 0)}))}}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),e}var me=Object(se.a)(),ge=function(){function e(){fe(this,e),this.batchSyncInstance=new re,this.syncing=!1,this.doSyncImmediately=this.doSync}var t,n;return he(e,[{key:"doSyncBegin",value:function(){this.syncing=!0}},{key:"doSyncFinish",value:function(){this.syncing=!1,b.a(),ue.a.dispatch("dataSyncFinished")}},{key:"doSyncFailed",value:function(e){this.syncing=!1,s.a.error("Sync failed: ",e)}},{key:"doSync",value:(n=de(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.syncing){e.next=4;break}return e.abrupt("return",Promise.resolve());case 4:return this.doSyncBegin(),e.prev=5,e.next=8,this.batchSyncInstance.pull();case 8:return t=e.sent,e.next=11,this.batchSyncInstance.commit();case 11:return this.batchSyncInstance.updatePoint(t.checkPoint,t.columnTimeStamp),this.doSyncFinish(),e.abrupt("return",Promise.resolve());case 16:return e.prev=16,e.t0=e.catch(5),this.doSyncFailed(e.t0),e.abrupt("return",Promise.reject(e.t0));case 20:case"end":return e.stop()}}),e,this,[[5,16]])}))),function(){return n.apply(this,arguments)})},{key:"pullFromServer",value:(t=de(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.batchSyncInstance.pull();case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),ve=function(){function e(){fe(this,e),this.batchSyncInstance=new re,this.localPoint=Object(f.c)(p.K.checkPoint,"json"),this.syncing=!1,this.doSync=o.a.debounce(this.doSyncOnce,500),this.doSyncImmediately=this.doSyncOnce}var t,n;return he(e,[{key:"doSyncBegin",value:function(){this.syncing=!0,d.a.dispatch(Object(ae.b)("ing"))}},{key:"doSyncFinish",value:function(){this.syncing=!1,d.a.dispatch(Object(ae.b)("complete")),b.a(),ue.a.dispatch("dataSyncFinished")}},{key:"doSyncFailed",value:function(e){this.syncing=!1,s.a.error("Sync failed: ",e)}},{key:"doSyncOnce",value:function(){var e=this;return new Promise((function(t,n){e.syncing?t():(e.batchSyncInstance.isFullBatch()?e.doFullBatchSync():e.doCheckBatchSync()).then((function(){return t()})).catch((function(t){return e.doSyncFailed(t),n(t)}))}))}},{key:"doFullBatchSync",value:(n=de(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.doSyncBegin(),e.next=3,this.batchSyncInstance.pull();case 3:if(t=e.sent,this.localPoint&&this.localPoint!==this.batchSyncInstance.checkPoint&&this.localPoint!==t.checkPoint?this.batchSyncInstance.updatePoint(this.localPoint,t.columnTimeStamp):(this.batchSyncInstance.updatePoint(t.checkPoint,t.columnTimeStamp),this.localPoint=null),!this.localPoint){e.next=10;break}return e.next=8,this.doCheckBatchSync();case 8:e.next=14;break;case 10:return e.next=12,this.batchSyncInstance.commit();case 12:this.dumpToLocalStorage(),this.doSyncFinish();case 14:ie.d()||Object(v.s)()>oe.a.projectNumber&&A.b({text:C.a("limit_tip_lists",{s1:oe.a.projectNumber}),key:"limitList",actionText:C.a("upgrade_now"),closable:!1,delayTime:1e4,onAction:function(){window.open(g.w+g.i+"/payment"),ce.w("list")}});case 15:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"doCheckBatchSync",value:(t=de(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.doSyncBegin(),e.next=3,this.batchSyncInstance.pull();case 3:return t=e.sent,e.next=6,this.batchSyncInstance.commit();case 6:this.batchSyncInstance.updatePoint(t.checkPoint,t.columnTimeStamp),this.dumpToLocalStorage(),this.doSyncFinish();case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"dumpToLocalStorage",value:function(){Object(f.f)(p.K.checkPoint,this.batchSyncInstance.checkPoint),Object(K.k)()}}]),e}();t.a=me?new ge:new ve},362:function(e,t,n){"use strict";n.d(t,"i",(function(){return u})),n.d(t,"k",(function(){return y})),n.d(t,"l",(function(){return b})),n.d(t,"m",(function(){return k})),n.d(t,"n",(function(){return O})),n.d(t,"j",(function(){return T})),n.d(t,"p",(function(){return S})),n.d(t,"q",(function(){return E})),n.d(t,"r",(function(){return D})),n.d(t,"s",(function(){return j})),n.d(t,"u",(function(){return _})),n.d(t,"t",(function(){return C})),n.d(t,"d",(function(){return I})),n.d(t,"c",(function(){return M})),n.d(t,"h",(function(){return A})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return R})),n.d(t,"g",(function(){return P})),n.d(t,"b",(function(){return N})),n.d(t,"a",(function(){return L})),n.d(t,"o",(function(){return U})),n.d(t,"w",(function(){return F})),n.d(t,"v",(function(){return H}));n(205),n(119),n(155),n(33),n(112),n(158);var r=n(98),a=n.n(r),i=n(323),o=n(334),c=n(328),s=function(e,t,n){try{var r=[e,t,n].filter((function(e){return!!e}));i.k?(r.unshift("_trackEvent"),window._czc&&window._czc.push(r)):(r.unshift("send","event"),window.gaProxy(r))}catch(e){a.a.error("track error",e)}},u=function(e,t){s("error",e,t)},l=function(e){var t=c.a.dateFormatToMoment(e,"YYYY-MM-DD"),n=c.a.startOfDay(),r=t.diff(n,"days");return r<0?"<0":r<=30?""+r:">30"},d=function(e,t){s("list",e,t)},f=function(e,t){s("tasklist",e,t)},p=function(e,t){s("detail",e,t)},h=function(e,t){s("due",e,t)},m=function(e,t){s("settings",e,t)},g=function(e,t){s("upgrade",e,t)},v=function(e,t){s("note",e,t)},y=function(e){v("convert",e)},b=function(e){v("reminder",e)},k=function(e){v("summary",e)},O=function(e){v("template",e)},T=function(e){d("list",e)},S=function(e){f("btn",e)},E=function(e){f("drag",e)},w=function(){var e=o.d().split("/"),t="tasks";return o.y()?t=e[2]:o.s()?t="inbox":o.v()?t="list":o.C()&&(t="tag"),{tasks:"all",today:"today",week:"n7d",inbox:"inbox",list:"list",tag:"tag"}[t]},D=function(){var e=w();f("group_add_list",e)},j=function(e){p("btn",e)},_=function(e){p("sub_task",e)},C=function(e){p("comment",e)},I=function(e){h("date",e)},M=function(e){var t=l(e);h("date",t)},A=function(e){h("time",e)},x=function(e,t){if(e.indexOf("TRIGGER:")>-1&&(e=e.slice(8)),t){var n=e.match(/(-)?P([0-9]+)?D/);if(n){var r=n[2]||0;n[1]&&r++,h("reminder_all_day",r+"d")}}else h("reminder_time",e)},R=function(e){h("reminder_count",e)},P=function(e){var t,n={never:"on_time_event",daily:"daily",weekly:"weekly",monthly:"monthly",yearly:"yearly",lunar_yearly:"lunar_yearly",other:"other",end_repeat:"end_repeat"};if(e.repeatFlag)if(e.repeatFrom+""=="2"){var r=e.repeatFlag.match(/FREQ=(\S*?;)/);if(!r)return;r=r[1].slice(0,-1).toLowerCase(),t=e.repeatFlag.indexOf("LUNAR:")>-1&&"yearly"===r?"lunar_yearly":r}else t="other";else t="on_time_event";n[t]&&(h("repeat",n[t]),e.repeatFlag.indexOf("UNTIL=")>-1&&h("repeat",n.end_repeat))},N=function(e){h("repeat_by",{0:"by_due_date",1:"by_completion_date",2:"by_default"}[e])},L=function(e){h("btn",e)},U=function(e){m("subscribe_calendar",e)},F=function(e){g("show",{settings:"settings",reminder:"reminder_count",list:"list_count",task:"task_count",subtask:"sub_task_count",sharing:"share_count",attachment:"upload_count","plugin-tkcalendar":"calendar_view","plugin-calendarSubscribe":"subscribe_calendar","plugin-version":"revision","plugin-calendar":"mini_calendar",share_count_remind:"share_count_remind",description:"description",theme:"theme",custom_smartlist:"custom_smartlist",time_duration:"time_duration",subtask_reminder:"subtask_reminder",list_activity:"list_activity",task_activity:"task_activity",historical_statistics:"historical_statistics",statistics:"historical_statistics",advanced_search:"advanced_search",windows:"windows",duplicate_project:"duplicate_project",summary:"summary"}[e]||e)},H=function(e){g("prompt",{settings:"settings",reminder:"reminder_count",list:"list_count",task:"task_count",subtask:"sub_task_count",sharing:"share_count",attachment:"upload_count","plugin-tkcalendar":"calendar_view","plugin-calendarSubscribe":"subscribe_calendar","plugin-version":"revision","plugin-calendar":"mini_calendar",share_count_remind:"share_count_remind",description:"description",theme:"theme",custom_smartlist:"custom_smartlist",time_duration:"time_duration",subtask_reminder:"subtask_reminder",list_activity:"list_activity",task_activity:"task_activity",historical_statistics:"historical_statistics",statistics:"historical_statistics",advanced_search:"advanced_search",windows:"windows",duplicate_project:"duplicate_project",summary:"summary"}[e]||e)}},363:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return l}));n(356);var r=n(323);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={commentWordLimit:1024,attachmentSize:1e7,subtaskWordLimit:16e4,taskTitleWordLimit:16e4,taskContentWordLimit:16e4,taskDescWordLimit:2048,subscribeLimit:5,subscribeAccountLimit:3,taskAttachmentNumber:20,kanbanNumber:19},s={free:i({type:"free"},c,{projectNumber:9,projectTaskNumber:99,subtaskNumber:19,shareUserNumber:2,reminderNumber:5,inboxTaskNumber:999,habitNumber:5}),pro:i({type:"pro"},c,{projectNumber:299,projectTaskNumber:999,subtaskNumber:199,shareUserNumber:29,reminderNumber:2,inboxTaskNumber:1/0,habitNumber:5}),team:i({type:"team"},c,{projectNumber:499,projectTaskNumber:999,subtaskNumber:199,shareUserNumber:49,reminderNumber:2,inboxTaskNumber:1/0,habitNumber:5})},u={},l=function(e,t){u=i({},e?s.team:t?s.pro:s.free)};l(!1,r.l);var d=function(e){Object.assign(s.team,e.team),Object.assign(s.pro,e.pro),Object.assign(s.free,e.free)}},364:function(e,t,n){"use strict";n.d(t,"b",(function(){return S})),n.d(t,"e",(function(){return w})),n.d(t,"c",(function(){return D})),n.d(t,"d",(function(){return j})),n.d(t,"a",(function(){return _}));n(73),n(356),n(206),n(325);var r=n(320),a=n.n(r),i=n(602),o=n(383),c=n(318),s=n(330),u=n(397),l=n(385),d=n(402),f=n(329),p=n(405);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var a=T(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){y(n,e);var t=k(n);function n(e,r){var a,i,o;return m(this,n),(o=t.call(this,null!==(a=null==r?void 0:r.treeId)&&void 0!==a?a:e.id,null==r?void 0:r.treeParentId)).id=void 0,o.section=void 0,o.model=void 0,o.collapsed=!1,o.id=null!==(i=null==r?void 0:r.id)&&void 0!==i?i:e.id,o.section=e,o.model=r,o}return v(n,[{key:"parentId",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.id}},{key:"isSection",get:function(){return null==this.model&&this.section instanceof o.g}}]),v(n,[{key:"clone",value:function(){return Object.assign(Object.create(Object.getPrototypeOf(this)),this)}},{key:"equals",value:function(e){return e===this||e instanceof n&&(e.level===this.level&&(e.children.length===this.children.length&&(e.collapsed===this.collapsed&&(!!this.section.equals(e.section)&&(this.model===e.model||(!this.model||!e.model||a.a.is(this.model.originModel,e.model.originModel)))))))}}],[{key:"isArrayEqual",value:function(e,t){if(e===t)return!1;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1){var r=e[n],a=t[n];if(!r.equals(a))return!1}return!0}}]),n}(i.a),E=function(){function e(){m(this,e)}return v(e,[{key:"hasAttachments",value:function(){return!1}},{key:"hasContent",value:function(){return!1}},{key:"hasLocation",value:function(){return!1}},{key:"willRepeat",value:function(){return!1}},{key:"getProgressInfo",value:function(){}},{key:"hasProgress",value:function(){return!1}},{key:"hasAssign",value:function(){return!1}},{key:"hasStartDate",value:function(){return!!this.startDate}},{key:"parentId",get:function(){}},{key:"treeId",get:function(){return this.id}},{key:"treeParentId",get:function(){return this.parentId}},{key:"columnId",get:function(){}},{key:"taskId",get:function(){}},{key:"attachments",get:function(){return a.a.List([])}},{key:"tags",get:function(){return a.a.List([])}},{key:"content",get:function(){}},{key:"projectInfo",get:function(){}},{key:"isScheduleOwner",get:function(){return!1}},{key:"projectId",get:function(){}},{key:"isCompleted",get:function(){return!1}},{key:"isScheduleTask",get:function(){return!1}},{key:"isNote",get:function(){return!1}}]),e}(),w=function(e){y(n,e);var t=k(n);function n(e){var r;return m(this,n),(r=t.call(this)).task=void 0,r.task=e,r}return v(n,[{key:"hasAttachments",value:function(){return s.R(this.attachments)}},{key:"hasContent",value:function(){return s.E(this.task)}},{key:"hasLocation",value:function(){return s.H(this.task)}},{key:"willRepeat",value:function(){return s.tb(this.task)}},{key:"hasReminder",value:function(){return s.J(this.task)}},{key:"getProgressInfo",value:function(){var e,t=null!==(e=this.task.get("progress"))&&void 0!==e?e:0;return{progress:t,goal:100,percentage:100*Math.min(t/100,1)}}},{key:"hasProgress",value:function(){return s.I(this.task)}},{key:"hasAssign",value:function(){return s.C(this.task)}},{key:"modelType",get:function(){return c.s.Task}},{key:"treeId",get:function(){return"".concat(this.projectId,"/").concat(this.id)}},{key:"treeParentId",get:function(){var e=this.parentId;return e?"".concat(this.projectId,"/").concat(e):null}},{key:"id",get:function(){return this.task.get("id")}},{key:"parentId",get:function(){return this.task.get("parentId")}},{key:"title",get:function(){var e;return null!==(e=this.task.get("title"))&&void 0!==e?e:""}},{key:"columnId",get:function(){return this.task.get("columnId")}},{key:"dragItemType",get:function(){return c.h.TASK}},{key:"sortOrderType",get:function(){return c.I.task}},{key:"originModel",get:function(){return this.task}},{key:"attachments",get:function(){var e;return null!==(e=this.task.get("attachments"))&&void 0!==e?e:a.a.List([])}},{key:"tags",get:function(){var e;return null!==(e=this.task.get("tags"))&&void 0!==e?e:a.a.List([])}},{key:"content",get:function(){return this.task.get("content")}},{key:"projectInfo",get:function(){return Object(f.x)(this.task)}},{key:"isScheduleOwner",get:function(){return s.ib(this.task)}},{key:"listTipsElements",get:function(){var e=c.O,t=e.Tag,n=e.Project,r=e.SubTask,a=e.Attachment,i=e.Note,o=e.Location,s=e.Repeat,u=e.Reminder,l=e.Progress,d=e.Date,f=e.Assignment,p=[t,n,r,a,i,o,s,u,l,d];return this.isScheduleOwner&&p.push(f),p}},{key:"startDate",get:function(){return this.task.get("startDate")}},{key:"dueDate",get:function(){return this.task.get("dueDate")}},{key:"isAllDay",get:function(){return this.task.get("isAllDay")}},{key:"projectId",get:function(){return this.task.get("projectId")}},{key:"isCompleted",get:function(){return s.T(this.task)}},{key:"sortOrder",get:function(){return this.task.get("sortOrder")}},{key:"isScheduleTask",get:function(){return s.jb(this.task)}},{key:"isSubtask",get:function(){return!!this.parentId}},{key:"status",get:function(){return this.task.get("status")}},{key:"isNote",get:function(){return s.fb(this.task)}}]),n}(E),D=function(e){y(n,e);var t=k(n);function n(e){var r;return m(this,n),(r=t.call(this)).event=void 0,r.event=e,r}return v(n,[{key:"hasContent",value:function(){return s.E(this.event)}},{key:"hasLocation",value:function(){return s.H(this.event)}},{key:"willRepeat",value:function(){return s.tb(this.event)}},{key:"hasReminder",value:function(){return u.d(this.event)}},{key:"modelType",get:function(){return c.s.Event}},{key:"id",get:function(){return this.event.get("id")}},{key:"parentId",get:function(){}},{key:"title",get:function(){var e;return null!==(e=this.event.get("title"))&&void 0!==e?e:""}},{key:"dragItemType",get:function(){return c.h.EVENT}},{key:"sortOrderType",get:function(){return c.I.subscribe}},{key:"originModel",get:function(){return this.event}},{key:"content",get:function(){return this.event.get("content")}},{key:"listTipsElements",get:function(){var e=c.O,t=e.Reminder,n=e.Date;return[e.Project,t,n]}},{key:"startDate",get:function(){return this.event.get("startDate")}},{key:"dueDate",get:function(){return this.event.get("dueDate")}},{key:"isAllDay",get:function(){return this.event.get("isAllDay")}},{key:"sortOrder",get:function(){return this.event.get("sortOrder")}},{key:"projectInfo",get:function(){var e,t=null!==(e=this.event.get("color"))&&void 0!==e?e:"transparent",n=this.event.get("calendarName"),r=this.event.get("calendarId");if(!n){var a=Object(p.a)(this.event.get("calendarId"));r=a.get("accountId"),n=a.get("name")}return{id:r,name:n,color:t}}}]),n}(E),j=function(e){y(n,e);var t=k(n);function n(e){var r;return m(this,n),(r=t.call(this)).habit=void 0,r.habit=e,r}return v(n,[{key:"hasReminder",value:function(){return d.f(this.habit)}},{key:"getProgressInfo",value:function(){var e=d.a(this.habit);return{progress:e.value,goal:e.goal,percentage:e.percentage}}},{key:"hasProgress",value:function(){return d.d(this.habit)}},{key:"modelType",get:function(){return c.s.Habit}},{key:"id",get:function(){return this.habit.get("id")}},{key:"parentId",get:function(){}},{key:"title",get:function(){var e;return null!==(e=this.habit.get("title"))&&void 0!==e?e:""}},{key:"dragItemType",get:function(){return c.h.HABIT}},{key:"sortOrderType",get:function(){}},{key:"originModel",get:function(){return this.habit}},{key:"listTipsElements",get:function(){var e=c.O;return[e.Reminder,e.Progress,e.Date]}},{key:"startDate",get:function(){return this.habit.get("startDate")}},{key:"dueDate",get:function(){return this.habit.get("dueDate")}},{key:"isAllDay",get:function(){return this.habit.get("isAllDay")}},{key:"isCompleted",get:function(){return d.g(this.habit)}},{key:"sortOrder",get:function(){return this.habit.get("sortOrder")}}]),n}(E),_=function(e){y(n,e);var t=k(n);function n(e){var r;return m(this,n),(r=t.call(this)).checklistTask=void 0,r.checklistTask=e,r}return v(n,[{key:"hasReminder",value:function(){return l.e(this.checklistTask)}},{key:"modelType",get:function(){return c.s.Checklist}},{key:"id",get:function(){return this.checklistTask.get("id")}},{key:"parentId",get:function(){}},{key:"title",get:function(){var e;return null!==(e=this.checklistTask.get("title"))&&void 0!==e?e:""}},{key:"columnId",get:function(){return this.checklistTask.get("columnId")}},{key:"taskId",get:function(){return this.checklistTask.get("taskId")}},{key:"dragItemType",get:function(){return c.h.LIST_CHECKLIST}},{key:"sortOrderType",get:function(){return c.I.subtask}},{key:"originModel",get:function(){return this.checklistTask}},{key:"tags",get:function(){var e;return null!==(e=this.checklistTask.get("tags"))&&void 0!==e?e:a.a.List([])}},{key:"projectInfo",get:function(){return Object(f.x)(this.checklistTask)}},{key:"isScheduleOwner",get:function(){return s.ib(this.checklistTask)}},{key:"listTipsElements",get:function(){var e=c.O,t=e.Assignment,n=[e.Tag,e.Project,e.Reminder,e.SubtaskDate];return this.isScheduleOwner&&n.push(t),n}},{key:"startDate",get:function(){return this.checklistTask.get("startDate")}},{key:"dueDate",get:function(){return this.checklistTask.get("dueDate")}},{key:"isAllDay",get:function(){return this.checklistTask.get("isAllDay")}},{key:"projectId",get:function(){return this.checklistTask.get("projectId")}},{key:"isCompleted",get:function(){return s.T(this.checklistTask)}},{key:"sortOrder",get:function(){return this.checklistTask.get("sortOrder")}},{key:"isScheduleTask",get:function(){return s.jb(this.checklistTask)}}]),n}(E)},365:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"h",(function(){return l}));var r=0,a=3,i=0,o=1,c=2,s=3,u=4,l={DONE:100,NEW:101,UPDATED:102,DELETED:103,INIT:104}},368:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"e",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"d",(function(){return l})),function(e){e.ADD_ARCHIVED_EVENT="ADD_ARCHIVED_EVENT",e.REMOVE_ARCHIVED_EVENT="REMOVE_ARCHIVED_EVENT"}(r||(r={}));var a,i,o,c,s,u,l,d="ADD_ARCHIVED_EVENT",f="REMOVE_ARCHIVED_EVENT";!function(e){e.SET_LAST_CHECKIN_STAMP="SET_LAST_CHECKIN_STAMP",e.SET_LAST_RECORD_STAMP="SET_LAST_RECORD_STAMP",e.SET_PREFERENCE="SET_HABIT_PREFERENCE",e.SET_HABITS="SET_HABITS",e.ADD_HABIT="ADD_HABIT",e.ADD_HABITS="ADD_HABITS",e.UPDATE_HABIT="UPDATE_HABIT",e.UPDATE_HABITS="UPDATE_HABITS",e.UPDATE_SYNC_HABITS="UPDATE_SYNC_HABITS",e.UPDATE_HABIT_TOTAL_CHECKINS_AND_STREAKS="UPDATE_HABIT_TOTAL_CHECKINS_AND_STREAKS",e.UPDATE_HABIT_SYNC_STATUS="UPDATE_HABIT_SYNC_STATUS",e.REMOVE_HABIT="REMOVE_HABIT",e.REMOVE_HABITS="REMOVE_HABITS",e.SET_SINGLE_HABIT_CHECKIN="SET_SINGLE_HABIT_CHECKIN",e.SET_HABIT_CHECKINS="SET_HABIT_CHECKINS",e.ADD_HABIT_CHECKIN="ADD_HABIT_CHECKIN",e.ADD_SYNC_HABIT_CHECKIN="ADD_SYNC_HABIT_CHECKIN",e.UPDATE_HABIT_CHECKIN="UPDATE_HABIT_CHECKIN",e.UPDATE_SYNC_HABIT_CHECKIN="UPDATE_SYNC_HABIT_CHECKIN",e.UPDATE_HABIT_CHECKIN_SYNC_STATUS="UPDATE_HABIT_CHECKIN_SYNC_STATUS",e.REMOVE_HABIT_CHECKIN="REMOVE_HABIT_CHECKIN",e.REMOVE_SYNC_HABIT_CHECKIN="REMOVE_SYNC_HABIT_CHECKIN",e.SET_HABIT_RECORDS="SET_HABIT_RECORDS",e.SET_SINGLE_HABIT_RECORDS="SET_SINGLE_HABIT_RECORDS",e.ADD_HABIT_RECORD="ADD_HABIT_RECORD",e.ADD_SYNC_HABIT_RECORD="ADD_SYNC_HABIT_RECORD",e.UPDATE_HABIT_RECORD="UPDATE_HABIT_RECORD",e.UPDATE_SYNC_HABIT_RECORD="UPDATE_SYNC_HABIT_RECORD",e.UPDATE_HABIT_RECORD_SYNC_STATUS="UPDATE_HABIT_RECORD_SYNC_STATUS",e.DELETE_HABIT_RECORD="DELETE_HABIT_RECORD",e.REMOVE_HABIT_RECORD="REMOVE_HABIT_RECORD",e.REMOVE_SYNC_HABIT_RECORD="REMOVE_SYNC_HABIT_RECORD",e.RESET_SKIP_HABITS="RESET_SKIP_HABITS",e.ADD_SKIP_HABIT="ADD_SKIP_HABIT",e.SET_ACTIVE_TAB_BAR="SET_ACTIVE_TAB_BAR",e.REMOVE_HABIT_CHECKINS_AND_RECORDS="REMOVE_HABIT_CHECKINS_AND_RECORDS"}(a||(a={})),function(e){e.TOGGLE_COUNT_DOWN="TOGGLE_COUNT_DOWN"}(i||(i={})),function(e){e.SET_SMART_SETTINGS="SET_SMART_SETTINGS",e.UPDATE_SMART_ORDERS="UPDATE_SMART_ORDERS",e.UPDATE_SMART_SORTTYPE="UPDATE_SMART_SORTTYPE",e.UPDATE_SMART_STATUS="UPDATE_SMART_STATUS",e.SET_INBOX="SET_INBOX",e.UPDATE_INBOX_SORTTYPE="UPDATE_INBOX_SORTTYPE",e.UPDATE_INBOX_COLOR="UPDATE_INBOX_COLOR",e.UPDATE_INBOX_LISTMODE="UPDATE_INBOX_LISTMODE",e.SET_LISTS="SET_LISTS",e.ADD_LIST="ADD_LIST",e.DELETE_LIST="DELETE_LIST",e.REMOVE_LOCAL_LIST="REMOVE_LOCAL_LIST",e.UPDATE_LIST="UPDATE_LIST",e.UPDATE_LISTS="UPDATE_LISTS",e.UPDATE_LIST_SORTTYPE="UPDATE_LIST_SORTTYPE",e.UPDATE_LIST_ORDER="UPDATE_LIST_ORDER",e.UPDATE_LIST_GROUPID="UPDATE_LIST_GROUPID",e.UPDATE_LIST_USERCOUNT="UPDATE_LIST_USERCOUNT",e.SET_LIST_ORDERS="SET_LIST_ORDERS",e.SET_SMART_PROJECT_COUNTS="SET_SMART_PROJECT_COUNTS",e.AFTER_COMMIT_PROJECTS="AFTER_COMMIT_PROJECTS",e.AFTER_PULL_PROJECT_TASKS="AFTER_PULL_PROJECT_TASKS",e.UPDATE_LIST_MODE="UPDATE_LIST_MODE",e.UPDATE_LIST_KANBAN_MODE="UPDATE_LIST_KANBAN_MODE",e.UPDATE_LIST_NOTIFICATIONOPTIONS="UPDATE_LIST_NOTIFICATIONOPTIONS",e.UPDATE_LIST_OWNER="UPDATE_LIST_OWNER"}(o||(o={})),function(e){e.SET_TODAY="SET_TODAY",e.SET_MINUTE="SET_MINUTE",e.SET_HOUR_HEIGHT="SET_HOUR_HEIGHT",e.SET_HOUR_HEIGHT_LEVEL_UP="SET_HOUR_HEIGHT_LEVEL_UP",e.SET_HOUR_HEIGHT_LEVEL_DOWN="SET_HOUR_HEIGHT_LEVEL_DOWN",e.SET_FETCHING_STATE="SET_FETCHING_STATE",e.SET_WAITING_STATE="SET_WAITING_STATE",e.SET_SCHEDULE_STATUS="SET_SCHEDULE_STATUS",e.SET_MINIKALENDAE_STATUS="SET_MINIKALENDAE_STATUS",e.TOGGLE_SECTION_COLLAPSE_STATUS="TOGGLE_SECTION_COLLAPSE_STATUS",e.UPDATE_SEARCH_KEYWORDS="UPDATE_SEARCH_KEYWORDS",e.SET_IS_TASKLIST_EMPTY="SET_IS_TASKLIST_EMPTY",e.TOGGLE_TASK_COLLAPSE_STATUS="TOGGLE_TASK_COLLAPSE_STATUS",e.CLEAR_TASK_COLLAPSE_STATUS="CLEAR_TASK_COLLAPSE_STATUS",e.SET_TASK_COLLAPSE_STATUS="SET_TASK_COLLAPSE_STATUS",e.SET_IS_NOTE_ENABLED="SET_IS_NOTE_ENABLED"}(c||(c={})),function(e){e.MERGE_PREFERENCE="MERGE_PREFERENCE",e.SET_SMART_PROJECTS="SET_SMART_PROJECTS",e.SET_DEFAULT_DUE_DATE="SET_DEFAULT_DUE_DATE",e.SET_POSITION_OF_OVER_DUE="SET_POSITION_OF_OVER_DUE",e.SET_DEFAULT_TO_ADD="SET_DEFAULT_TO_ADD",e.SET_SHOW_MERIDIEM="SET_SHOW_MERIDIEM",e.SET_POMODORO_ENABLED="SET_POMODORO_ENABLED",e.SET_START_DAY_OF_WEEK="SET_START_DAY_OF_WEEK",e.SET_START_WEEK_OF_YEAR="SET_START_WEEK_OF_YEAR",e.SET_DAILY_REMIND_TIME="SET_DAILY_REMIND_TIME",e.SET_DAILY_REMIND_ENABLE="SET_DAILY_REMIND_ENABLE",e.SET_NOTIFICATION_ENABLE="SET_NOTIFICATION_ENABLE",e.SET_REMOVE_DATE="SET_REMOVE_DATE",e.SET_NLP_ENABLE="SET_NLP_ENABLE",e.SET_TEMPLATE_ENABLE="SET_TEMPLATE_ENABLE",e.SET_LUNAR_ENABLE="SET_LUNAR_ENABLE",e.SET_HOLIDAY_ENABLE="SET_HOLIDAY_ENABLE",e.SET_WEEK_NUMBERS_ENABLE="SET_WEEK_NUMBERS_ENABLE",e.SET_DEFAULT_PRIORITY="SET_DEFAULT_PRIORITY",e.SET_LANGUAGE="SET_LANGUAGE",e.SET_DEFAULT_REMINDS="SET_DEFAULT_REMINDS",e.SET_DEFAULT_AD_REMINDERS="SET_DEFAULT_AD_REMINDERS",e.SET_THEME="SET_THEME",e.SET_INBOX_COLOR="SET_INBOX_COLOR",e.TOGGLE_SHOWCOMPLETED="TOGGLE_SHOWCOMPLETED",e.TOGGLE_SHOWCHECKLIST="TOGGLE_SHOWCHECKLIST",e.TOGGLE_SHOWFUTURETASK="TOGGLE_SHOWFUTURETASK",e.UPDATE_COLLAPSEDTIME="UPDATE_COLLAPSEDTIME",e.SET_WEBCALENDARVIEW_FILTER="SET_WEBCALENDARVIEW_FILTER",e.SET_WEBCALENDAR_VIEWTYPE="SET_WEBCALENDAR_VIEWTYPE",e.SET_DEFAULT_TIME_MODE="SET_DEFAULT_TIME_MODE",e.SET_DEFAULT_TIME_DURATION="SET_DEFAULT_TIME_DURATION",e.SET_SHARED_PROJECT_NOTIFY_TOGGLE_ENABLE="SET_SHARED_PROJECT_NOTIFY_TOGGLE_ENABLE",e.SET_SHARED_PROJECT_NOTIFY_ADD_ENABLE="SET_SHARED_PROJECT_NOTIFY_ADD_ENABLE",e.SET_SHARED_PROJECT_NOTIFY_DELETE_ENABLE="SET_SHARED_PROJECT_NOTIFY_DELETE_ENABLE",e.SET_KEEP_TAG_INTEXT="SET_KEEP_TAG_INTEXT",e.SET_COUNT_DOWN_ENABLE="SET_COUNT_DOWN_ENABLE",e.SET_TIMEZONE_OPTION_ENABLE="SET_TIMEZONE_OPTION_ENABLE",e.TOGGLE_CAL_SHOW_CHECKLIST="TOGGLE_CAL_SHOW_CHECKLIST",e.TOGGLE_CAL_SHOW_COMPLETED="TOGGLE_CAL_SHOW_COMPLETED",e.TOGGLE_CAL_SHOW_DETAIL="TOGGLE_CAL_SHOW_DETAIL",e.TOGGLE_CAL_SHOW_FUTURE_TASK="TOGGLE_CAL_SHOW_FUTURE_TASK",e.SET_CAL_CELL_COLOR="SET_CAL_CELL_COLOR",e.TOGGLE_SHOW_DETAIL="TOGGLE_SHOW_DETAIL",e.SET_EMAIL_ENABLE="SET_EMAIL_ENABLE",e.SET_DEFAULT_PROJECT_ID="SET_DEFAULT_PROJECT_ID"}(s||(s={})),function(e){e.SET_TAGS="SET_TAGS",e.MERGE_TAGS_FROM_SERVER="MERGE_TAGS_FROM_SERVER",e.ADD_TAG="ADD_TAG",e.DELETE_TAG="DELETE_TAG",e.UPDATE_TAG_NAME="UPDATE_TAG_NAME",e.UPDATE_TAG_LABEL="UPDATE_TAG_LABEL",e.UPDATE_TAG_COLOR="UPDATE_TAG_COLOR",e.UPDATE_TAG_PARENT="UPDATE_TAG_PARENT",e.UPDATE_PARENT_OF_SUB_TAGS="UPDATE_PARENT_OF_SUB_TAGS",e.UPDATE_TAG_SORTORDER="UPDATE_TAG_SORTORDER",e.UPDATE_TAG_SORTTYPE="UPDATE_TAG_SORTTYPE",e.SET_TAG_SORTORDERS="SET_TAG_SORTORDERS",e.AFTER_COMMIT_TAGS="AFTER_COMMIT_TAGS",e.SET_DRAFT_TAG="SET_DRAFT_TAG",e.CLEAR_DRAFT_TAG="CLEAR_DRAFT_TAG"}(u||(u={})),function(e){e.SET_GROUPS="SET_GROUPS",e.UPDATE_GROUP_SORTTYPE="UPDATE_GROUP_SORTTYPE",e.UPDATE_GROUP_NAME="UPDATE_GROUP_NAME",e.TOGGLE_GROUP_SHOWALL="TOGGLE_GROUP_SHOWALL",e.SET_GROUP_ORDERS="SET_GROUP_ORDERS",e.ADD_GROUP="ADD_GROUP",e.DELETE_GROUP="DELETE_GROUP",e.AFTER_COMMIT_GROUPS="AFTER_COMMIT_GROUPS"}(l||(l={}))},369:function(e,t,n){"use strict";n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return m}));var r=n(0),a=n(142),i=n(319),o=n.n(i),c=n(157),s=n(418),u=n.n(s),l=function(e){var t=Object(r.useRef)(e);return Object(r.useEffect)((function(){t.current=e}),[e]),t.current};function d(){var e=Object(a.e)((function(e){return e.preference.get("theme").toLowerCase()}));return u.a["".concat(e,"ThemeColor")]}function f(e,t,n){Object(r.useEffect)((function(){var r=!1;function a(n){return n.target instanceof Node&&t&&t.current&&t.current.contains(n.target)&&!(e.current&&$(n.target).closest($(e.current)).length)}var i=null==t?void 0:t.current;return i&&$(i).on("mousedown",(function(e){a(e)&&(r=!0)})),i&&$(i).on("mouseup",(function(e){a(e)&&r&&(e.stopPropagation(),e.preventDefault(),n(),r=!1)})),function(){i&&$(i).off("mousedown"),i&&$(i).off("mouseup")}}),[n,t,e])}function p(e,t,n){Object(r.useEffect)((function(){function r(r){!(r.target instanceof Node&&t&&t.current&&t.current.contains(r.target))||e.current&&e.current.contains(r.target)||(r.preventDefault(),n())}var a=null==t?void 0:t.current;return a&&$(a).on("contextmenu",r),function(){a&&$(a).off("contextmenu",r)}}),[n,t,e])}function h(e,t){Object(r.useEffect)((function(){var n=o.a.uniqueId();return c.b.subscribe(n,e,t),function(){c.b.unSubscribe(n)}}),[e,t])}function m(e){var t=Object(r.useRef)(null),n=Object(r.useCallback)((function(n){t.current,n&&e&&e(n),t.current=n}),[e]);return[t,n]}},372:function(e,t,n){"use strict";n.d(t,"i",(function(){return c})),n.d(t,"h",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"f",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"j",(function(){return g})),n.d(t,"k",(function(){return v}));n(73),n(215),n(33),n(112);var r=n(400),a=n(318),i=n(328),o=(n(447),a.Q),c=function(e,t){if(!e||!t)return null;var n=t.match(r.a.trigger);if(!n)return null;var c=i.a.prefMoment(e).utc();n[7]&&n[8]&&n[9]&&c.hours(0).minutes(0).seconds(0);var s="-"===n[1],u=n.length;if(u>2)for(var l=2;l<u;l++)if(6!==l&&n[l]){var d=parseInt(n[l],10);s&&(d=-d),o[l]&&c.add(o[l],d)}return(c=c.startOf("minute")).format(a.m.atomTime)},s=function(e,t){var n=e.match(r.a.trigger);if(null==n)return i.a.prefMoment();var a=t?i.a.prefMoment(t):i.a.prefMoment(),c="-"===n[1],s=n.length;if(s>2)for(var u=2;u<s;u++)if(6!==u&&n[u]){var l=parseInt(n[u],10);c&&(l=-l),o[u]&&a.add(l,o[u])}return a},u=function(e,t){var n,a,i=0;if(e.trigger?(n=e.trigger.match(r.a.trigger),a=t.trigger.match(r.a.trigger)):(n=("TRIGGER:"+e).match(r.a.trigger),a=("TRIGGER:"+t).match(r.a.trigger)),!n)return 1;if(!a)return-1;if(!n[1]&&a[1])return-1;if(!a[1]&&n[1])return 1;for(var c in o)if(n[c]){if(!a[c]){i=1;break}var s=parseInt(n[c]),u=parseInt(a[c]);if(s!==u){i=s<u?-1:1,n[7]&&n[8]&&n[9]&&a[7]&&a[8]&&a[9]&&"-"===n[1]&&"-"===a[1]&&parseInt(c)>6&&(i*=-1);break}}else if(a[c]){i=-1;break}return i},l=function(e){if(e<0){var t=!0;e=-e}else t=!1;for(;e>360;)e-=360;var n=Math.round(e),r=60*Math.round(e-n),a=n+""+r+""+(3600*(e-n-r/60)).toFixed(1)+"";return t?"-"+a:a},d=function(e){var t=e.match(r.a.trigger);if(t&&t[7]&&t[8]&&t[9]){if("-"===t[1]){var n=parseInt(t[5],10)+1;return n%7==0?"TRIGGER:-P"+parseInt(n/7,10)+"W":"TRIGGER:-P"+n+"D"}return"TRIGGER:PT0S"}return e},f=function(e,t,n){var a=e.match(r.a.trigger);if(!a||a[7]&&a[8]&&a[9])return e;n=n||"HH:mm";var o=a[2]?parseInt(a[2],10):0,c=a[3]?parseInt(a[3],10):0;if(o||c)return null;var s=a[4]?parseInt(a[4],10):0,u=a[5]?parseInt(a[5],10):0;u=7*s+u;var l=a[7]?parseInt(a[7],10):0,d=a[8]?parseInt(a[8],10):0;l+=parseInt(d/60,10),d%=60,u+=parseInt(l/24,10),l%=24;var f="-"===a[1],p=t?i.a.dateFormatToMoment(t,n):i.a.prefMoment("4-12-1984 09:00","DD-MM-YYYY HH:mm"),h=parseInt(p.format("HH"),10);(d=parseInt(p.format("mm"),10)-d)<0&&(d=60+d,l+=1),(l=h-l)<0?l=24+l:0===u?f=!1:(d>0?(d=60-d,l=23-l):l>0&&(l=24-l),u-=1);var m="TRIGGER:";return f&&(m+="-"),m=m+"P"+u+"DT"+l+"H"+d+"M0S"},p=function(e,t){for(var n=(e=e||[]).length,a=[],i=0;i<n;i++){var o=null;if(o=t?e[i].match(r.a.trigger):e[i].trigger.match(r.a.trigger))parseInt(o[4]||0,10)+parseInt(o[5]||0,10)+parseInt(o[7]||0,10)+parseInt(o[8]||0,10)===0&&(t?e[i]="TRIGGER:PT0S":e[i].trigger="TRIGGER:PT0S");if(0===i)a.push(e[i]);else{for(var c=!1,s=0;s<a.length;s++)if(h(t?a[s]:a[s].trigger,t?e[i]:e[i].trigger)){c=!0;break}c||a.push(e[i])}}return a},h=function(e,t){e=f(e),t=f(t);var n=i.a.prefMoment().format("YYYY-MM-DD"),r=s(e,n),a=s(t,n);return!!r.isSame(a)},m=function(e){if(!e)return"";var t=e.match(r.a.trigger);if(!t)return"";var n=parseInt(t[4]||0,10),a=parseInt(t[5]||0,10),i=parseInt(t[7]||0,10),o=parseInt(t[8]||0,10);return(a=7*n+a)+i+o===0?"TRIGGER:PT0S":!a||i||o?a||!i&&!o?e:"TRIGGER:-PT".concat(o=60*i+o,"M"):"TRIGGER:-P".concat(a,"D")},g=function(e,t){if(t){var n=e<0,r=Math.abs(e),a=Math.floor(r/10080);r-=10080*a;var i=Math.floor(r/1440);r-=1440*i;var o=Math.floor(r/60),c=r-=60*o;return n?"TRIGGER:P0DT".concat(o,"H").concat(c,"M0S"):"TRIGGER:-P".concat(a,"W").concat(i,"DT").concat(o,"H").concat(c,"M0S")}return 0===e?"TRIGGER:PT0S":e<0?"TRIGGER:PT".concat(-e,"M"):"TRIGGER:-PT".concat(e,"M")},v=function(e,t){if(!e)return"";var n=e.match(r.a.trigger);if(!n)return"";var a=!!n[1],i=parseInt(n[4]||0,10),o=parseInt(n[5]||0,10),c=parseInt(n[7]||0,10),s=parseInt(n[8]||0,10);return t&&!a?null:1440*(7*i+o)+60*c+s}},374:function(e,t,n){"use strict";n.d(t,"c",(function(){return v})),n.d(t,"u",(function(){return y})),n.d(t,"o",(function(){return b})),n.d(t,"i",(function(){return k})),n.d(t,"b",(function(){return T})),n.d(t,"t",(function(){return S})),n.d(t,"n",(function(){return E})),n.d(t,"h",(function(){return w})),n.d(t,"e",(function(){return D})),n.d(t,"w",(function(){return j})),n.d(t,"q",(function(){return _})),n.d(t,"l",(function(){return C})),n.d(t,"d",(function(){return M})),n.d(t,"v",(function(){return A})),n.d(t,"p",(function(){return x})),n.d(t,"j",(function(){return R})),n.d(t,"f",(function(){return N})),n.d(t,"x",(function(){return L})),n.d(t,"r",(function(){return U})),n.d(t,"g",(function(){return F})),n.d(t,"s",(function(){return H})),n.d(t,"m",(function(){return B})),n.d(t,"k",(function(){return Y})),n.d(t,"a",(function(){return W}));n(205),n(203),n(61),n(152),n(120),n(144),n(50),n(207),n(111),n(204),n(110),n(160);var r=n(319),a=n.n(r),i=n(320),o=n(331),c=n(318),s=n(377),u=n(403),l=n(326);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=function(){function e(){f(this,e),this.data={}}var t,n,r;return t=e,(n=[{key:"setData",value:function(e){this.data=e}},{key:"set",value:function(e,t){this.data[e]=JSON.parse(JSON.stringify(t))}},{key:"get",value:function(e){return this.data[e]}},{key:"has",value:function(e){return a.a.isObject(this.data[e])}},{key:"del",value:function(e){this.has(e)&&delete this.data[e]}}])&&d(t.prototype,n),r&&d(t,r),e}(),h=new function e(){f(this,e),this.tasks=new p,this.projects=new p,this.tags=new p,this.csls=new p,this.folders=new p,this.taskParents=new p},m=o.c(c.K.original,"json");function g(e){K(e,h.folders)}function v(e){G(e,h.folders)}function y(e){return h.folders.has(e)}function b(e){return h.folders.get(e)}function k(e){e&&(i.Iterable.isIterable(e)?e.get("isNew")||e.get("isDirty")||y(e.get("id"))||g(e.toJSON()):e.isNew||!e.isDirty||y(e.id)||g(e))}function O(e){K(e,h.csls)}function T(e){G(e,h.csls)}function S(e){return h.csls.has(e)}function E(e){return h.csls.get(e)}function w(e){e&&(i.Iterable.isIterable(e)?e.get("isNew")||e.get("isDirty")||S(e.get("id"))||O(e.toJSON()):e.isNew||!e.isDirty||S(e.id)||O(e))}function D(e){G(e,h.tags)}function j(e){return h.tags.has(e)}function _(e){return h.tags.get(e)}function C(e){var t,n;e&&(i.Iterable.isIterable(e)?(t=e.get("status"),n=e.get("name")):(t=e.status,n=e.name),t!==u.b.DONE||j(n)||function(e){if(a.a.isObject(e)){var t=JSON.parse(JSON.stringify(e));h.tags.set(t.name,t)}}(e))}function I(e){K(e,h.projects)}function M(e){G(e,h.projects)}function A(e){return h.projects.has(e)}function x(e){return h.projects.get(e)}function R(e){e&&(i.Iterable.isIterable(e)?e.get("isNew")||e.get("isDirty")||A(e.get("id"))||I(e.toJSON()):e.isNew||!e.isDirty||A(e.id)||I(e))}m&&!a.a.isEmpty(m)&&(m.db?h.tasks.setData(JSON.parse(JSON.stringify(m.db))):(m.tasks&&h.tasks.setData(JSON.parse(JSON.stringify(m.tasks.data))),m.projects&&h.projects.setData(JSON.parse(JSON.stringify(m.projects.data))),m.tags&&h.tags.setData(JSON.parse(JSON.stringify(m.tags.data))),m.csls&&h.csls.setData(JSON.parse(JSON.stringify(m.csls.data))),m.folders&&h.folders.setData(JSON.parse(JSON.stringify(m.folders.data))),m.taskParents&&h.taskParents.setData(JSON.parse(JSON.stringify(m.taskParents.data)))));var P=function(e){K(e,h.tasks)},N=function(e){G(e,h.tasks)},L=function(e){return h.tasks.has(e)},U=function(e){return h.tasks.get(e)},F=function(e){G(e,h.taskParents)};var H=function(e){return h.taskParents.get(e)},B=function(e){e.get("isNew")||e.get("isDirty")||L(e.get("id"))||(P(Object(s.b)(e).toJSON()),function(e){var t;e&&(t=i.Iterable.isIterable(e)?{id:e.get("id"),parentId:e.get("parentId"),childIds:e.get("childIds")}:{id:e.id,parentId:e.parentId,childIds:e.childIds})&&K(t,h.taskParents)}(e))},Y=function(e){P(e)};function W(){var e;e=new Set(l.a.getState().tasks.taskList.toArray().filter((function(e){return e.get("isDirty")})).map((function(e){return e.get("id")}))),Object.keys(h.tasks.data).forEach((function(t){e.has(t)||N(t)})),Object.keys(h.taskParents.data).forEach((function(t){e.has(t)||F(t)}))}function K(e,t){if(a.a.isObject(e)){var n=JSON.parse(JSON.stringify(e));t.set(n.id,n)}}function G(e,t){t.del(e),o.f(c.K.original,JSON.stringify(h))}},376:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return g}));var r=n(394),a=n.n(r),i=(n(119),n(159),n(152),n(155),n(50),n(121),n(33),n(112),n(62),n(350),n(338)),o=n.n(i),c=n(98),s=n.n(c);function u(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){u(i,r,a,o,c,"next",e)}function c(e){u(i,r,a,o,c,"throw",e)}o(void 0)}))}}var d={MMMD:"MMM D",MMMMD:"MMMM D",LL:"LL",ll:"ll",slashDate:"YYYY/M/D",slashShortDate:"YY/M/D",fullDate:"YYYY/MM/DD",monthDate:"MM/DD",isMonthBeforeDate:!0},f={MMMD:"MMMDo",MMMMD:"MMMM D",LL:"LL",ll:"ll",slashDate:"YYYY/M/D",slashShortDate:"YY/M/D",fullDate:"YYYY-MM-DD",monthDate:"MM-DD",isMonthBeforeDate:!0},p=d;function h(e,t){return m.apply(this,arguments)}function m(){return(m=l(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:if(!t){e.next=5;break}return p=f,e.abrupt("return");case 5:return e.next=7,v(n);case 7:i=e.sent,r=d,i&&(i.format.indexOf("M")<i.format.indexOf("D")?r.monthDate=i.M+"/"+i.D:(r.MMMD="D MMM",r.MMMMD="D MMMM",r.LL="D MMMM, YYYY",r.ll="D MMM, YYYY",r.monthDate=i.D+"/"+i.M,r.isMonthBeforeDate=!1),r.slashDate=i.format.map((function(e){return i[e]})).join("/"),r.slashShortDate=i.format.map((function(e){return"Y"===e?"YY":e})).join("/"),r.fullDate=r.slashDate),p=r;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=function(e){return p[e]};function v(e){return y.apply(this,arguments)}function y(){return(y=l(a.a.mark((function e(t){var n,r,i,c,u,l,d,f,p,h,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={2017:"YYYY",17:"YY","02":"MM",2:"M","01":"DD",1:"D"},r=new Date(2017,1,1),i=r.toLocaleDateString(),t){if(c=window.navigator.language.replace("_","-").toLowerCase().replace(/\s*/g,""),u=o()(r),"en-us"!==c){l=o.a.locale();try{u.locale(c)}catch(e){s.a.error(e)}o.a.locale()!==l&&o.a.locale(l)}i=u.format("L")}if(d=i.match(/(\d+)[^\d](\d+)[^\d](\d+)[^\d]?/),f={format:[],Y:null,M:null,D:null},!d||4!==d.length){e.next=22;break}m=1;case 8:if(!(m<4)){e.next=20;break}if(!(p=n[d[m]])){e.next=16;break}h=p.slice(0,1),f[h]=p,f.format.push(h),e.next=17;break;case 16:return e.abrupt("return",null);case 17:m++,e.next=8;break;case 20:e.next=23;break;case 22:return e.abrupt("return",null);case 23:return e.abrupt("return",f);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},377:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return h}));n(73),n(205),n(119),n(152),n(33),n(158);var r=n(344),a=n(345);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=t.isAllDay,i=t.isFloating,o=t.fromTimeZone,c=void 0===o?a.h:o,s=t.toTimeZone,u=void 0===s?a.h:s;if(!e)return null;var l=r.a.parseUTCString(e);return l?n||i?r.a.formatToServerDate(Object(a.a)(l,c,u,!n)):e:null}var u=function(e,t){var n=t.isAllDay,r=t.isFloating,a=t.timeZone;return a?s(e,{isAllDay:n,isFloating:r,fromTimeZone:a}):e},l=function(e,t){var n=t.isAllDay,r=t.isFloating,a=t.timeZone;return a?s(e,{isAllDay:n,isFloating:r,toTimeZone:a}):e},d=function(e){if(null==e)return null;var t=e,n=t.get("startDate"),r=t.get("dueDate"),a=t.get("isAllDay"),i=t.get("isFloating"),o=t.get("timeZone"),c=t.get("items"),s=l(n,{isAllDay:a,isFloating:i,timeZone:o}),u=l(r,{isAllDay:a,isFloating:i,timeZone:o});if(t=(t=t.set("startDate",s)).set("dueDate",u),c){var d=c.filter(Boolean).map((function(e){var t,n=e,r=null===(t=n)||void 0===t?void 0:t.get("startDate");if(r){var a,c,s=l(r,{isAllDay:null===(a=n)||void 0===a?void 0:a.get("isAllDay"),isFloating:i,timeZone:o});n=null===(c=n)||void 0===c?void 0:c.set("startDate",s)}return n}));t.set("items",d)}return t};function f(e){var t=o({},e),n=e.startDate,r=e.dueDate,a=e.remindTime,i=e.isAllDay,c=e.isFloating,s=e.timeZone;return t.serverStartDate=n,t.serverDueDate=r,t.remindTime=n?a:null,t.startDate=u(t.serverStartDate,{isAllDay:i,isFloating:c,timeZone:s}),t.dueDate=u(t.serverDueDate,{isAllDay:i,isFloating:c,timeZone:s}),e.items&&e.items.length&&(t.items=e.items.filter(Boolean).map((function(t){var n=o({},t),r=t.startDate,a=t.isAllDay,i=e.timeZone,c=e.isFloating;return r&&-1!==r&&(n.serverStartDate=r),n.startDate=u(n.serverStartDate,{isAllDay:a,isFloating:c,timeZone:i}),n}))),t}var p=function(e){for(var t=["subcalendar","real-subtask","schedule"],n=(e.attr("class")||"").split(" "),r=0;r<t.length;r++)if(n.indexOf(t[r])>-1)return!1;return!0},h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n&&"list"===e?"smartProjectList/".concat(t):"".concat(e,"/").concat(t)}},379:function(e,t,n){"use strict";n.d(t,"w",(function(){return oe})),n.d(t,"v",(function(){return ce})),n.d(t,"u",(function(){return se})),n.d(t,"c",(function(){return ue})),n.d(t,"n",(function(){return fe})),n.d(t,"g",(function(){return pe})),n.d(t,"h",(function(){return ve})),n.d(t,"j",(function(){return ke})),n.d(t,"i",(function(){return Oe})),n.d(t,"m",(function(){return De})),n.d(t,"l",(function(){return je})),n.d(t,"d",(function(){return _e})),n.d(t,"z",(function(){return Ce})),n.d(t,"F",(function(){return Me})),n.d(t,"A",(function(){return xe})),n.d(t,"B",(function(){return Pe})),n.d(t,"y",(function(){return Le})),n.d(t,"C",(function(){return Ge})),n.d(t,"D",(function(){return qe})),n.d(t,"x",(function(){return $e})),n.d(t,"H",(function(){return Qe})),n.d(t,"a",(function(){return at})),n.d(t,"J",(function(){return ot})),n.d(t,"t",(function(){return st})),n.d(t,"s",(function(){return ut})),n.d(t,"L",(function(){return lt})),n.d(t,"G",(function(){return bt})),n.d(t,"E",(function(){return kt})),n.d(t,"I",(function(){return Tt})),n.d(t,"M",(function(){return St})),n.d(t,"p",(function(){return Et})),n.d(t,"q",(function(){return wt})),n.d(t,"r",(function(){return Dt})),n.d(t,"b",(function(){return jt})),n.d(t,"f",(function(){return _t})),n.d(t,"e",(function(){return Ct})),n.d(t,"o",(function(){return It})),n.d(t,"k",(function(){return Mt})),n.d(t,"K",(function(){return At}));n(73),n(205),n(173),n(203),n(153),n(61),n(152),n(209),n(156),n(346),n(144),n(50),n(573),n(121),n(33),n(207),n(154),n(111),n(112),n(204),n(110),n(350);var r=n(319),a=n.n(r),i=n(338),o=n.n(i),c=n(378),s=n(98),u=n.n(s),l=n(340),d=(n(341),n(326)),f=n(430),p=n(599),h=n(600),m=n(403);function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}var b=function(){function e(t){g(this,e),this.habitCheckin=void 0,this.oldId=void 0,this.habitCheckin=t.mutableCopy(),this.oldId=null}return y(e,[{key:"getId",value:function(){return this.habitCheckin.id}},{key:"setId",value:function(e){this.habitCheckin.id=e}},{key:"getOldId",value:function(){return this.oldId}},{key:"setOldId",value:function(e){this.oldId=e}},{key:"getSyncStatus",value:function(){return this.habitCheckin.syncStatus}},{key:"setSyncStatus",value:function(e){this.habitCheckin.syncStatus=e}},{key:"getStamp",value:function(){return this.habitCheckin.checkinStamp}},{key:"getData",value:function(){return this.habitCheckin}},{key:"setValue",value:function(e){this.habitCheckin.value=e}},{key:"setCheckinTime",value:function(e){this.habitCheckin.checkinTime=e}}]),e}(),k=function(){function e(t){g(this,e),this.habitRecord=void 0,this.oldId=void 0,this.habitRecord=t.mutableCopy(),this.oldId=null}return y(e,[{key:"getId",value:function(){return this.habitRecord.id}},{key:"setId",value:function(e){this.habitRecord.id=e}},{key:"getOldId",value:function(){return this.oldId}},{key:"setOldId",value:function(e){this.oldId=e}},{key:"getSyncStatus",value:function(){return this.habitRecord.syncStatus}},{key:"setSyncStatus",value:function(e){this.habitRecord.syncStatus=e}},{key:"getStamp",value:function(){return this.habitRecord.stamp}},{key:"getData",value:function(){return this.habitRecord}}]),e}(),O=(n(366),n(515)),T=n(386),S=n(425);function E(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var j=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;D(this,e),this.totalCheckIns=void 0,this.maxStreak=void 0,this.currentStreak=void 0,this.scheduledCheckIns=0,this.checkRate=0,this.totalCheckIns=t,this.maxStreak=n,this.currentStreak=r};function _(e){var t=ke(e.id),n=-1;if(t.forEach((function(e){n=-1===n?e.checkinStamp:Math.min(e.checkinStamp,n)})),-1===n)return new j;var r=t.filter((function(e){return ut(e.status,e.value,e.goal)})).map((function(e){return e.checkinStamp})),a=O.a.parseString(e.repeatRule);if(a.isWeekNDaysRepeat())return M(r,a.times);if(a.isEveryNDaysRepeat())return C(r,a.nDays);var i=E(r),c=A(Object(T.b)(n),o()().subtract(1,"day").startOf("day").toDate(),e.repeatRule);return i=i.concat(c),I(i=Array.from(new Set(i)),new Set(r))}function C(e,t){e.sort((function(e,t){return t-e}));var n=e.length,r=0,a=-1,i=0,c=null,s=new Date;return e.map((function(e){return Object(T.b)(e)})).forEach((function(e){null==c&&o()(s).diff(e,"days")>t?a=0:c&&o()(c).diff(e,"days")>t&&(r=Math.max(r,i),-1===a&&(a=i),i=0),i+=1,c=e})),r=Math.max(r,i),-1===a&&(a=i),new j(n,r,a)}function I(e,t){var n=0,r=0,a=-1;e.sort((function(e,t){return t-e}));var i=e.map((function(e){return t.has(e)})),o=0;return i.forEach((function(e,t){e&&(o+=1,n+=1),e&&!function(e){return e===i.length-1}(t)||(r=Math.max(r,o),-1===a&&(a=o),o=0)})),-1===a&&(a=0),new j(n,r,a)}function M(e,t,n){var r=new Map,a=-1,i=-1,c=-1;if(e.sort((function(e,t){return t-e})),e.map((function(e){return Object(T.b)(e)})).forEach((function(t,n){var s,u=o()(t),l=u.week(),d=u.weekYear(),f=100*d+l;r.set(f,(null!==(s=r.get(f))&&void 0!==s?s:0)+1),function(t){return t===e.length-1}(n)&&(a=f),i=-1!==i?Math.min(i,d):d,c=-1!==c?Math.max(c,d):d})),-1===a||-1===i||-1===c)return new j;i-=10;for(var s=new Map,u=i-10;u<c+10;u++){var l=o()([u,5,30]);s.set(u,l.weeksInYear())}var d,f=e.length,p=0,h=-1,m=!1,g=0,v=o()(),y=100*v.weekYear()+v.week();if(n){var b=o()(n);d=100*b.weekYear()+b.week()}for(var k=d||y;k>=a;){var O,S=null!==(O=r.get(k))&&void 0!==O?O:0,E=S>=t||k===y;E&&(g+=S,m=!0),E||(m&&(g+=S),p=Math.max(p,g),-1===h&&(h=g),g=S,m=!1),k=x(k,s)}return 0!==g&&(p=Math.max(p,g),-1===h&&(h=g)),-1===h&&(h=0),new j(f,p,h)}function A(e,t,n){var r=o()(e).subtract(1,"day").toDate();return S.b.betweenDatesOfRecurrentObject({repeatFlag:n,repeatFrom:"0",startDate:r},r,o()(t).endOf("days").toDate(),!0).map((function(e){return Object(T.a)(e)}))}function x(e,t){var n=Math.floor(e/100),r=e%100;return r<=1?(n-=1,r=t.get(n)):r-=1,100*n+r}var R,P=n(480),N=n(331),L=n(318);!function(e){e[e.CHECK=0]="CHECK",e[e.EDIT=1]="EDIT"}(R||(R={}));var U=n(157),F=n(324),H=n(323),B=n(432),Y=(n(363),n(387),n(206),n(325),n(0)),W=n.n(Y),K=(n(99),n(320)),G=n(384);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=te(e);if(t){var a=te(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ee(this,n)}}function ee(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}W.a.Component;var ne=n(513);function re(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function ae(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){re(i,r,a,o,c,"next",e)}function c(e){re(i,r,a,o,c,"throw",e)}o(void 0)}))}}function ie(){return d.a.getState().habit.preference||{}}function oe(){return ie().showInToday}function ce(){return ie().showInCalendar}function se(){return ie().enabled}function ue(){return d.a.getState().habit.lastCheckinStamps||{}}function le(e){var t;return null!==(t=d.a.getState().habit.lastCheckinStamps[e])&&void 0!==t?t:null}function de(e){var t;return null!==(t=d.a.getState().habit.lastRecordStamps[e])&&void 0!==t?t:null}function fe(){var e,t=(new Date).ap.YYYYMMDD;return null!==(e=d.a.getState().habit.skipHabits[t])&&void 0!==e?e:[]}function pe(e){return e.habit.habits||[]}function he(){return pe(d.a.getState()).filter((function(e){return e.syncStatus!==m.a.DELETED}))||[]}function me(){return pe(d.a.getState())}function ge(){var e=me();return 0===e.length?[]:e.filter((function(e){return f.a.includes(e.status)}))}function ve(){return 0===me().length?[]:ge().map((function(e){return e.id}))}function ye(e){return me().filter((function(t){return t.id===e}))[0]}function be(){return d.a.getState().habit.checkins||{}}function ke(e){return be()[e]||[]}function Oe(e,t,n){return ke(e).filter((function(e){return e.checkinStamp>=t&&e.checkinStamp<=n}))}function Te(){return d.a.getState().habit.records}function Se(e){return Te()[e]||[]}function Ee(e,t){var n=ye(e),r=ke(e).find((function(e){return e.checkinStamp===t}));if(r)return f.g.createInstance(n,r);var a=f.g.createInstance(n);return a.setCheckinStamp(t),a}function we(e,t){return ke(e.id).filter((function(e){return st(e.status,e.value,e.goal)&&(null==t||e.checkinStamp<t)})).map((function(t){return f.g.createInstance(e,t)}))}function De(e){return je(e.filter((function(e){return 0!==e.reminders.length})),fe()).filter((function(e){return!ct(e)}))}function je(e,t){var n,r=new Map((n=+(new Date).ap.YYYYMMDD,Object.values(be()).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return e.checkinStamp===n}))).map((function(e){return[e.habitId,e]}))),a=function(e){var t=be();return e.filter((function(e){var n=O.a.parseString(e.repeatRule);if(n.isWeekNDaysRepeat()){var r=o()(),a=n.times,i=e.id,s=t[i];if(a>=7)return!0;if(null==s||0===s.length)return!0;var u=Object(T.a)(r.startOf("week")),l=s.filter((function(e){return e.checkinStamp>=u&&ut(e.status,e.value,e.goal)})),d=Object(T.a)(new Date);return!!l.find((function(e){return e.checkinStamp===d}))||l.length<a}if(n.isEveryNDaysRepeat()){var f=n.rruleOptions.interval;if(null==f)return!1;if(f<2)return!0;var p=e.id,h=t[p],m=Object(T.a)(o()().subtract(f-1,"day"));return null==h||0===h.length||0===h.filter((function(e){return e.checkinStamp>=m&&ut(e.status,e.value,e.goal)})).length}var g=o()(),v=n.rruleOptions;if(v.freq===c.a.DAILY)return!0;if(v.freq===c.a.WEEKLY){var y=v.byweekday;return!!y&&y.find((function(e){return(e.weekday+1)%7===g.day()}))}return!1}))}(e).map((function(e){return e.id}));return e.reduce((function(e,n){var i=r.get(n.id);return t&&t.includes(n.id)||(!i||0===i.value&&i.status===f.d.unlabeled?a.includes(n.id)&&e.push(f.g.createInstance(n)):e.push(f.g.createInstance(n,i))),e}),[])}function _e(e,t,n){var r=je(e,n);if(t){var a=e.reduce((function(e,t){return e.concat(function(e){return we(e,+(new Date).ap.YYYYMMDD)}(t))}),[]);return r.concat(a)}return r.filter((function(e){return!ct(e)}))}function Ce(){return Ie.apply(this,arguments)}function Ie(){return(Ie=ae(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.I)();case 2:if((t=e.sent).data){e.next=5;break}return e.abrupt("return");case 5:n={enabled:t.data.enabled,showInCalendar:t.data.showInCalendar,showInToday:t.data.showInToday},d.a.dispatch(Object(p.p)(n));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(){return Ae.apply(this,arguments)}function Ae(){return(Ae=ae(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ie(),e.next=3,Object(l.mb)(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(){return Re.apply(this,arguments)}function Re(){return(Re=ae(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.K)();case 2:t=e.sent,ft(t.data.map((function(e){var t=(new f.b).fromJson(e);return t.syncStatus=m.a.DONE,t})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=ae(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(T.a)(o()(new Date).subtract(7,"days")),r=t?[t]:ve(),e.next=4,Le(r,n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e,t){return Ue.apply(this,arguments)}function Ue(){return(Ue=ae(regeneratorRuntime.mark((function e(t,n){var r,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return r=tt(t,"habitIds"),e.next=5,Object(l.H)(r,n);case 5:a=e.sent,i=a.data.checkins,o=nt(i,f.c),t.forEach((function(e){mt(o[e].map((function(e){return new b(e)})),e,n)}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(){return He.apply(this,arguments)}function He(){return(He=ae(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(T.a)(o()(new Date).subtract(1,"days")),n=ve(),e.next=4,Be(n,t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e,t){return Ye.apply(this,arguments)}function Ye(){return(Ye=ae(regeneratorRuntime.mark((function e(t,n){var r,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return r=tt(t,"habitIds"),e.next=5,Object(l.J)(r,n);case 5:a=e.sent,i=a.data.habitRecords,o=nt(i,f.e),t.forEach((function(e){vt(o[e].map((function(e){return new k(e)})),e,n)}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=ae(regeneratorRuntime.mark((function e(t){var n,r,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=tt([t],"habitIds"),e.next=3,Object(l.H)(n);case 3:r=e.sent,a=r.data.checkins,i=nt(a,f.c),ht(Object.values(i).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return new b(e)})),t),o=Object(T.a)(new Date),d.a.dispatch(Object(p.n)(t,o));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(e){return Ve.apply(this,arguments)}function Ve(){return(Ve=ae(regeneratorRuntime.mark((function e(t){var n,r,a,i,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=le(t))){e.next=5;break}return e.next=4,We(t);case 4:return e.abrupt("return");case 5:return r=Object(T.a)(o()(Object(T.b)(n)).subtract(91,"days")),a=tt([t],"habitIds"),e.next=9,Object(l.H)(a,r);case 9:i=e.sent,c=i.data.checkins,s=nt(c,f.c),mt(Object.values(s).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return new b(e)})),t,r);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=ae(regeneratorRuntime.mark((function e(t){var n,r,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=tt([t],"habitIds"),e.next=3,Object(l.J)(n);case 3:r=e.sent,a=r.data.habitRecords,i=nt(a,f.e),gt(Object.values(i).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return new k(e)})),t),o=Object(T.a)(new Date),d.a.dispatch(Object(p.o)(t,o));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(e){return Je.apply(this,arguments)}function Je(){return(Je=ae(regeneratorRuntime.mark((function e(t){var n,r,a,i,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=de(t))){e.next=5;break}return e.next=4,ze(t);case 4:return e.abrupt("return");case 5:return r=Object(T.a)(o()(Object(T.b)(n)).subtract(91,"days")),a=tt([t],"habitIds"),e.next=9,Object(l.J)(a,r);case 9:i=e.sent,c=i.data.habitRecords,s=nt(c,f.e),vt(Object.values(s).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return new k(e)})),t,r);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(){return Xe.apply(this,arguments)}function Xe(){return(Xe=ae(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=ve()).length){e.next=3;break}return e.abrupt("return");case 3:return n=tt(t,"habitIds"),e.next=6,Object(l.H)(n);case 6:r=e.sent,a=r.data.checkins,i=nt(a,f.c),d.a.dispatch(Object(p.m)(i)),o=Object(T.a)(new Date),t.forEach((function(e){d.a.dispatch(Object(p.n)(e,o))}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(){return et.apply(this,arguments)}function et(){return(et=ae(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe();case 2:return e.next=4,Ot();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(e,t){var n="";return e.forEach((function(e,r){n=n.concat("".concat((0===r?"":"&")+t,"=").concat(e))})),n}function nt(e,t){var n=Object.keys(e),r={};return n.forEach((function(n){r[n]=e[n].map((function(e){var n=(new t).fromJson(e);return n.syncStatus=m.a.DONE,n})).filter((function(e){return!e.checkinStamp||e.checkinStamp>=20100101}))})),r}function rt(e,t){var n=Object.keys(e),r={};return n.forEach((function(n){r[n]=e[n].map((function(e){return(new t).fromJson(e)}))})),r}function at(e,t,n){it(e.toJS(),t,n)}function it(e,t,n){switch(t){case f.i.allTarge:case f.i.nonTarget:n(e,e.goal);break;case f.i.autoTarget:n(e,e.value+e.step);break;case f.i.manualTarget:}}function ot(e,t,n){var r,a=e.taskType,i=f.c.createByHabitTask(e,t),o=e.habitId;if(r=a===f.h.habitCheckinTask?Object(p.r)(o,i):Object(p.a)(o,i),d.a.dispatch(r),St(o),h.b.doSync(h.a.checkinActionSync,{habitId:o,afterStamp:n}),!ct(e)&&st(i.status,i.value,e.goal)&&e.recordEnable){var c=function(e,t){var n=Se(e).find((function(e){return e.syncStatus!==m.a.DELETED&&e.stamp===t}));return n||null}(o,e.checkinStamp)||f.e.createByHabitTask(e);window.requestAnimationFrame((function(){U.a.dispatch("dispatchHabitRecordModal",{record:c,type:R.CHECK})}))}}function ct(e){return e.isHabit&&st(e.checkinStatus,e.value,e.goal)}function st(e,t,n){return t>=n||e===f.d.done||e===f.d.undone}function ut(e,t,n){return st(e,t,n)&&e!==f.d.undone}function lt(e,t){var n=new f.g;return n.updateWithHabitTask(e.toJS()),ot(n,t)}var dt=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.added=[],this.updated=[],this.deleted=[]};function ft(e){return pt.apply(this,arguments)}function pt(){return(pt=ae(regeneratorRuntime.mark((function e(t){var n,r,a,i,c,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new dt,r=n.added,a=n.updated,i=n.deleted,c=+(new Date).ap.YYYYMMDD,s=new Map(me().filter((function(e){return e.syncStatus!==m.a.NEW})).map((function(e){return[e.id,e]}))),t.forEach((function(e){var t=s.get(e.id);t?(t.syncStatus===m.a.DONE&&t.etag!==e.etag&&(e.fixGoal(),a.push(e)),s.delete(e.id)):r.push(e)})),s.forEach((function(e){i.push(e)})),r.length&&d.a.dispatch(Object(p.b)(r)),!a.length){e.next=12;break}return d.a.dispatch(Object(p.z)(a)),u=Object(T.a)(o()(new Date).subtract(1,"days").toDate()),e.next=11,Le(a.map((function(e){return e.id})),u);case 11:a.forEach((function(e){var t,n=null===(t=ke(e.id).find((function(e){return e.checkinStamp===c})))||void 0===t?void 0:t.mutableCopy();n&&("Boolean"===e.type&&(n.value>=n.goal?n.value=1:n.value=0),n.goal=e.goal,n.syncStatus=m.a.UPDATED,d.a.dispatch(Object(p.r)(n.habitId,n)))}));case 12:i.length&&d.a.dispatch(Object(p.i)(i.map((function(e){return e.id}))));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(e,t){var n=ke(t).map((function(e){return new b(e)})),r=e.map((function(e){return e.getData().checkinStamp})),i=n.map((function(e){return e.getData().checkinStamp})),o=a.a.min(r.concat(i));if(null!=o&&!(o-1<=0)){var c=yt(e,n,o-1),s=c.added,u=c.updated,l=c.deleted;s.length&&d.a.dispatch(Object(p.d)(s)),u.length&&d.a.dispatch(Object(p.x)(u)),l.length&&d.a.dispatch(Object(p.j)(l))}}function mt(e,t,n){var r=yt(e,ke(t).filter((function(e){return e.checkinStamp>n})).map((function(e){return new b(e)})),n),a=r.added,i=r.updated,o=r.deleted;a.length&&d.a.dispatch(Object(p.d)(a)),i.length&&d.a.dispatch(Object(p.x)(i)),o.length&&d.a.dispatch(Object(p.j)(o))}function gt(e,t){var n=Se(t).map((function(e){return new k(e)})),r=e.map((function(e){return e.getData().stamp})),i=n.map((function(e){return e.getData().stamp})),o=a.a.min(r.concat(i));if(null!=o&&!(o-1<=0)){var c=yt(e,n,o-1),s=c.added,u=c.updated,l=c.deleted;s.length&&d.a.dispatch(Object(p.e)(s)),u.length&&d.a.dispatch(Object(p.y)(u)),l.length&&d.a.dispatch(Object(p.k)(l))}}function vt(e,t,n){var r=yt(e,Se(t).filter((function(e){return e.stamp>n})).map((function(e){return new k(e)})),n),a=r.added,i=r.updated,o=r.deleted;a.length&&d.a.dispatch(Object(p.e)(a)),i.length&&d.a.dispatch(Object(p.y)(i)),o.length&&d.a.dispatch(Object(p.k)(o))}function yt(e,t,n){var r=function(e){var t=o()(Object(T.b)(e)),n=new Date,r=[];for(;t.isSameOrBefore(n);)r.push(Object(T.a)(t)),t.add(1,"day");return r}(n),a=new Map(e.map((function(e){return[e.getStamp(),e]}))),i=new Map(t.map((function(e){return[e.getStamp(),e]}))),c=new dt,s=c.added,u=c.updated,l=c.deleted;return r.forEach((function(e){var t=a.get(e),n=i.get(e);if(null==t){if(null==n)return;n.getSyncStatus()===m.a.DONE?l.push(n):n.getSyncStatus()===m.a.UPDATED&&(n.setSyncStatus(m.a.NEW),u.push(n))}else{var r;if(null==n)s.push(t);else if(t instanceof b&&n instanceof b&&(r=function(e,t,n){var r=e.getData(),a=t.getData(),i=r.habitId,o=a.habitId,c=Ee(i,n),s=Ee(o,n),u=Ct(c),l=Ct(s),d=[f.i.manualTarget,f.i.allTarge,f.i.autoTarget];if(d.includes(u)&&d.includes(l)){var p=ut(r.status,r.value,r.goal),h=ut(a.status,a.value,a.goal);if(p&&h){var m=r.checkinTime,g=a.checkinTime;if(null==m||null==g)return;var v=r.value,y=a.value;return m.getTime()>=g.getTime()?{value:v,checkinTime:g}:{value:y,checkinTime:m}}}return}(t,n,e)),n.getSyncStatus()===m.a.NEW||n.getSyncStatus()===m.a.UPDATED){if(n.setSyncStatus(m.a.UPDATED),n.setOldId(n.getId()),n.setId(t.getId()),r&&n instanceof b){var o=r,c=o.value,d=o.checkinTime;n.setValue(c),n.setCheckinTime(d)}u.push(n)}else if(n.getSyncStatus()===m.a.DONE){if(t.setOldId(n.getId()),r&&t instanceof b){var p=r,h=p.value,g=p.checkinTime;t.setValue(h),t.setCheckinTime(g)}u.push(t)}}})),c}function bt(){var e=new dt,t=e.added,n=e.updated,r=e.deleted;me().forEach((function(e){switch(e.syncStatus){case m.a.INIT:case m.a.NEW:t.push(e);break;case m.a.UPDATED:n.push(e);break;case m.a.DELETED:r.push(e.id)}})),t.length+n.length+r.length!==0&&Object(l.fb)({add:t.map((function(e){return e.toJsonServer()})),update:n.map((function(e){return e.toJsonServer()})),delete:r}).then((function(e){var r=e.status,i=e.data,o=t.concat(n);(200===r&&o.forEach((function(e){d.a.dispatch(Object(p.u)(e.id,m.a.DONE))})),a.a.isEmpty(i.id2error))||new Set(Object.keys(i.id2error)).forEach((function(e){var t=i.id2error[e],n=o.find((function(t){return t.id===e}));if(n)switch(t){case P.a.EXISTED:d.a.dispatch(Object(p.u)(n.id,m.a.UPDATED));break;case P.a.NOT_EXISTED:Object(p.u)(n.id,m.a.NEW);break;default:u.a.debug("$commitHabit : unexpected # Error: ",t," # id: ",e)}}))}))}function kt(){var e=new dt,t=e.added,n=e.updated,r=e.deleted,i=be();Object.keys(i).forEach((function(e){ke(e).forEach((function(e){switch(e.syncStatus){case m.a.INIT:case m.a.NEW:t.push(e);break;case m.a.UPDATED:n.push(e)}}))})),t.length+n.length+r.length!==0&&Object(l.db)({add:t.map((function(e){return e.toJsonServer()})),update:n.map((function(e){return e.toJsonServer()})),delete:r.map((function(e){return e.toJsonServer()}))}).then((function(e){var r=e.status,i=e.data,o=t.concat(n),c=new Set([]);200===r&&(a.a.isEmpty(i.id2error)||(c=new Set(Object.keys(i.id2error))).forEach((function(e){var t=i.id2error[e],n=o.find((function(t){return t.id===e}));if(n)switch(t){case P.a.EXISTED:d.a.dispatch(Object(p.s)(n.habitId,n.id,m.a.UPDATED));break;case P.a.NOT_EXISTED:var r=n.id,a=n.habitId;d.a.dispatch(Object(p.f)(a,r)),u.a.debug("$commitHabitCheckin : can't handle habit not existed # Error: ",t," # id: ",r," # habitId: ",a);break;default:u.a.debug("$commitHabitCheckin : unexpected # Error: ",t," # id: ",e)}})),o.forEach((function(e){c.has(e.id)||d.a.dispatch(Object(p.s)(e.habitId,e.id,m.a.DONE))})))})).catch((function(e){switch(Object(ne.g)(e).errorCode){case P.a.HABIT_NOT_EXIST:break;case P.a.DUPLICATE_HABIT_CHECKIN_EXCEPTION:t.forEach((function(e){d.a.dispatch(Object(p.f)(e.habitId,e.id))}))}}))}function Ot(){var e=new dt,t=e.added,n=e.updated,r=e.deleted,i=Te();Object.keys(i).forEach((function(e){Se(e).forEach((function(e){switch(e.syncStatus){case m.a.INIT:case m.a.NEW:t.push(e);break;case m.a.UPDATED:n.push(e);break;case m.a.DELETED:r.push(e)}}))})),t.length+n.length+r.length!==0&&Object(l.eb)({add:t.map((function(e){return e.toJsonServer()})),update:n.map((function(e){return e.toJsonServer()})),delete:r.map((function(e){return e.toJsonServer()}))}).then((function(e){var i=e.status,o=e.data,c=t.concat(n),s=new Set([]);200===i&&(a.a.isEmpty(o.id2error)||(s=new Set(Object.keys(o.id2error))).forEach((function(e){var t=o.id2error[e],n=c.find((function(t){return t.id===e}));if(n)switch(t){case P.a.EXISTED:d.a.dispatch(Object(p.t)(n.habitId,n.id,m.a.UPDATED));break;case P.a.NOT_EXISTED:Object(p.t)(n.habitId,n.id,m.a.NEW);break;case P.a.NO_HABIT:var r=n.habitId,a=ye(r);if(a)a.mutableCopy().syncStatus=m.a.NEW,d.a.dispatch(Object(p.w)([a]));else d.a.dispatch(Object(p.g)(r));break;default:u.a.debug("$commitHabitRecords : unexpected # Error: ",t," # id: ",e)}})),c.forEach((function(e){s.has(e.id)||d.a.dispatch(Object(p.t)(e.habitId,e.id,m.a.DONE))})),r.forEach((function(e){d.a.dispatch(Object(p.h)(e))})))}))}function Tt(){ge().forEach((function(e){try{var t=_({id:e.id,repeatRule:e.repeatRule});d.a.dispatch(Object(p.v)(e.id,t.totalCheckIns,t.maxStreak,t.currentStreak))}catch(t){u.a.debug(e.repeatRule,t)}}))}function St(e){var t=ye(e);if(t.syncStatus!==m.a.DELETED){var n=_({id:t.id,repeatRule:t.repeatRule});d.a.dispatch(Object(p.v)(t.id,n.totalCheckIns,n.maxStreak,n.currentStreak))}}function Et(){try{return rt(Object(N.c)(L.K.habitCheckIns,"json"),f.c)}catch(e){return{}}}function wt(){try{return rt(Object(N.c)(L.K.habitRecords,"json"),f.e)}catch(e){return{}}}function Dt(){try{var e=Object(N.c)(L.K.skipHabits,"json"),t=(new Date).ap.YYYYMMDD;return a=e,(r=t)in(n={})?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,n}catch(e){return{}}var n,r,a}function jt(){var e;d.a.dispatch(Object(p.l)()),e=fe(),Object(N.f)(L.K.skipHabits,JSON.stringify(e))}function _t(e,t){switch(e){case"Real":return function(e){switch(e){case f.f.manual:return f.i.manualTarget;case f.f.all:return f.i.allTarge;default:return f.i.autoTarget}}(t);case"Boolean":default:return f.i.nonTarget}}function Ct(e){return _t(e.type,e.step)}function It(e){return["Count",""].includes(e)?F.a("habit_count_unit"):e}function Mt(){var e,t,n,r=(null!==(e=null===(t=a.a.minBy(he(),(function(e){return e.sortOrder})))||void 0===t?void 0:t.sortOrder)&&void 0!==e?e:0)-H.t;return r<=H.s?(function(e){var t=H.t;if(e){var n=e.sort((function(e,t){var n=e.sortOrder,r=t.sortOrder;return n>r?1:n<r?-1:0})).map((function(e,n){return e.sortOrder=n*t,e.syncStatus=m.a.UPDATED,e}));d.a.dispatch(Object(p.w)(n))}else{var r=he().sort((function(e,t){var n=e.sortOrder,r=t.sortOrder;return n>r?1:n<r?-1:0})).map((function(e,n){return e.sortOrder=n*t,e.syncStatus=m.a.UPDATED,e}));d.a.dispatch(Object(p.w)(r))}}(),null===(n=a.a.minBy(he(),(function(e){return e.sortOrder})))||void 0===n?void 0:n.sortOrder):r}var At=function(){var e=ie().enabled?"show":"hide";d.a.dispatch(Object(B.l)(L.G.habit,e))}},381:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"e",(function(){return m}));n(153),n(119),n(154),n(319);var r=n(363),a=n(333),i=n(329),o=n(341),c=n(388),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.projectId,n=e.newCounts||1,a=Object(i.K)(t),o=0===t.indexOf("inbox");return o?a+n>r.a.inboxTaskNumber:a+n>r.a.projectTaskNumber},u=function(e,t){return Object(i.n)(t).get("items").size+(e=e||1)>r.a.subtaskNumber},l=function(){var e=Object(o.d)(),t=Object(o.c)()&&e;Object(r.d)(t,e)},d=function e(){return Object(o.d)()?Object(a.y)():e()},f=function(e,t){return g(e,t.length>r.a.taskTitleWordLimit)},p=function(e,t){return g(e,t.length>r.a.taskContentWordLimit)},h=function(e,t){return g(e,t.length>r.a.taskDescWordLimit)},m=function(e,t){return g(e,t.length>r.a.subtaskWordLimit)},g=function(e,t){var n=e.keyCode===c.a.backspace,r=[c.a.left_arrow,c.a.up_arrow,c.a.right_arrow,c.a.down_arrow].includes(e.keyCode),a=e.keyCode===c.a.c&&(e.ctrlKey||e.metaKey),i=e.keyCode===c.a.a&&(e.ctrlKey||e.metaKey),o=e.keyCode===c.a.x&&(e.ctrlKey||e.metaKey),s=e.keyCode===c.a.z&&(e.ctrlKey||e.metaKey);return!(!t||i||a||o||s||r||n)}},382:function(e,t,n){"use strict";n.d(t,"r",(function(){return D})),n.d(t,"a",(function(){return _})),n.d(t,"j",(function(){return C})),n.d(t,"f",(function(){return I})),n.d(t,"g",(function(){return M})),n.d(t,"h",(function(){return A})),n.d(t,"e",(function(){return x})),n.d(t,"o",(function(){return R})),n.d(t,"p",(function(){return P})),n.d(t,"l",(function(){return N})),n.d(t,"m",(function(){return L})),n.d(t,"n",(function(){return U})),n.d(t,"c",(function(){return F})),n.d(t,"b",(function(){return H})),n.d(t,"d",(function(){return B})),n.d(t,"k",(function(){return Y})),n.d(t,"i",(function(){return W})),n.d(t,"q",(function(){return K}));n(73),n(205),n(203),n(61),n(152),n(144),n(50),n(207),n(111),n(204),n(110),n(350);var r=n(319),a=n.n(r),i=n(98),o=n.n(i),c=n(320),s=n(326),u=n(327),l=n(329),d=n(330),f=n(328),p=n(318),h=n(357),m=n(333),g=n(349),v=n(361),y=n(412),b=n(340),k=(n(348),n(365)),O=n(420),T=n(345);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(e){var t=[];return e.forEach((function(e){if(e){var n=l.n(e);y.a.setTask(n),t.push(n)}})),t},j=function(e,t){var n=t.startDate,r=t.dueDate,a=t.isAllDay,i=t.isFloating,o=t.timeZone;if(e&&!d.ab(e)){var c,s=d.fb(e),l=!0,p=null==e?void 0:e.get("startDate"),h=null==e?void 0:e.get("reminders"),m=null==e?void 0:e.get("reminder"),g=null==e?void 0:e.get("repeatFrom"),v=n;r?(c=f.a.formatToUtcString(v),f.a.formatToUtcString(r),l=a):(null!=p&&!1===e.get("isAllDay")&&(v=f.a.formatToDateString(v),v+=" "+f.a.prefMoment(null==e?void 0:e.get("startDate")).format("HH:mm"),l=!1),c=f.a.formatToUtcString(v),d.e(e,c)),null==p&&d.Z(e)&&(h=u.a(l),m=null);var y={isAllDay:l,startDate:c=f.a.formatToUtcString(v),dueDate:d.e(e,c),reminders:h,reminder:m,remindTime:null,repeatFirstDate:c,repeatFlag:Object(O.c)(c,e.get("repeatFlag"),g),exDate:[],isFloating:i,timeZone:o};return s&&(y.dueDate=null,y.repeatFlag=null,y.repeatFrom=null),y}},_=function(e,t){var n=t.startDate,r=t.dueDate,i=t.isAllDay,o=t.isFloating,c=t.timeZone,u={};e.forEach((function(e){var t=j(e,{startDate:n,dueDate:r,isAllDay:i,isFloating:o,timeZone:c});t&&(u[e.get("id")]=t)})),s.a.dispatch(h.L(u));var l=D(a.a.keys(u));return v.a.doSync(),l},C=function(e,t){var n={};e.forEach((function(e){var r={},a=d.fb(e);if(t.startDate){var i=f.a.prefMoment(t.startDate),o=t.dueDate?f.a.prefMoment(t.dueDate).utc().format(p.m.atomTime):null;t.isAllDay&&(i=i.startOf("day"));var c=d.i(e,t.reminders||[]);(r={isAllDay:t.isAllDay,startDate:i.utc().format(p.m.atomTime),dueDate:o,repeatFlag:t.repeatFlag,repeatFrom:t.repeatFrom,reminders:c,reminder:null,remindTime:null,exDate:t.exDate||[],isFloating:t.isFloating,timeZone:t.timeZone}).repeatFlag=Object(O.c)(r.startDate,r.repeatFlag,r.repeatFrom)}else r={remindTime:null,reminder:null,startDate:null,dueDate:null,isAllDay:null,repeatFlag:null,repeatFrom:null,reminders:null,exDate:[],isFloating:!1,timeZone:T.h};a&&(r.dueDate=null,r.repeatFrom=null,r.repeatFlag=null),e&&(n[e.get("id")]=r)})),s.a.dispatch(h.L(n));var r=D(a.a.keys(n));return v.a.doSync(),r},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n={};e.forEach((function(e){var r=d.kb(e),a=d.fb(e),i=d.b(e,f.a.prefMoment().add(t,"day"));if(r){var o=e.get("taskId"),c=l.n(o).get("items").toJS();c.forEach((function(t){t.id===e.get("id")&&(t.startDate=i)})),n[o]={items:c}}else{var s=e.get("id"),u=d.e(e,i),p=d.a(e),h=d.c(e,p),m=e.get("repeatFlag")||null,g=e.get("repeatFrom"),v={status:0,startDate:i,dueDate:u,repeatFirstDate:i,isAllDay:p,reminders:h,repeatFlag:m&&Object(O.c)(i,m,g),exDate:[],isDirty:!0};a&&(v.dueDate=null,v.repeatFlag=null,v.repeatFrom=null),n[s]=v}})),s.a.dispatch(h.L(n)),v.a.doSync()},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};e.forEach((function(e){if(d.kb(e)){var n=e.get("taskId"),r=l.n(n).get("items").toJS();r.forEach((function(t){t.id===e.get("id")&&(t.startDate=-1,t.isAllDay=null,t.snoozeReminderTime=null)})),t[n]={items:r}}else{var a=e.get("id");t[a]={reminders:null,isAllDay:null,status:0,startDate:null,dueDate:null,repeatFlag:null,repeatFrom:null,exDate:[],isDirty:!0,isFloating:!1,timeZone:T.h}}})),s.a.dispatch(h.L(t)),v.a.doSync()},A=function(e,t){var n=[];e.forEach((function(e){null!=e&&n.push({id:null==e?void 0:e.get("id"),priority:t,status:0,isDirty:!0})})),s.a.dispatch(h.l(n)),v.a.doSync()},x=function(e,t){var n=[],r=[];e.forEach((function(e){n.push({id:e.get("id"),assignee:t,status:0,isDirty:!0}),r.push({projectId:e.get("projectId"),taskId:e.get("id"),assignee:t})})),s.a.dispatch(h.l(n)),b.a(r).then((function(e){a.a.isEmpty(e.id2error)||o.a.debug(e.id2error),v.a.doSync()}))},R=function(e,t,n){var r=parseInt("".concat(t),10),a=[];if(e.toArray().filter((function(e){return!d.fb(e)})).forEach((function(e){e.get("priority")===t||d.ab(e)?n&&a.push(E({id:e.get("id")},n,{isDirty:!0})):a.push(E({id:e.get("id"),priority:r},n,{isDirty:!0}))})),a.length){s.a.dispatch(h.l(a));var i=D(a.map((function(e){return e.id})));return v.a.doSync(),i}return[]},P=function(e){s.a.dispatch(h.l(e)),v.a.doSync()},N=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{setNewOrder:!1},r=[],a=n.setNewOrder;e.toArray().forEach((function(n,i){n&&(n.get("columnId")!==t&&r.push({id:n.get("id"),columnId:t,sortOrder:a?l.u(n.get("projectId"),void 0,e.size-i):n.get("sortOrder"),isDirty:!0}))})),s.a.dispatch(h.l(r));var i=D(r.map((function(e){return e.id})));return v.a.doSync(),i},L=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{setNewOrder:!1},r=arguments.length>3?arguments[3]:void 0,a=[],i=n.setNewOrder;e.toArray().forEach((function(n,o){n&&(n.get("columnId")!==t&&a.push({id:n.get("id"),columnId:t,sortOrder:i?l.u(n.get("projectId"),r,e.size-o):n.get("sortOrder"),isDirty:!0}))})),s.a.dispatch(h.l(a));var o=D(a.map((function(e){return e.id})));return v.a.doSync(),o},U=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.map((function(e){return{id:e.id,parentId:e.parentId}}));l.cb(n),D(n.map((function(e){return e.id}))),t&&v.a.doSync()},F=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(c.List)(s.a.getState().tasks.taskList.toArray().filter((function(t){return t.get("projectId")===e})));if(g.o(Object(m.n)(e))){var r=[];n.forEach((function(e){e&&r.push(e.get("id"))})),s.a.dispatch(h.j(r))}else B(n,{onServer:!1},t)},H=function(e,t){var n=Object(c.List)(s.a.getState().tasks.taskList.toArray().filter((function(n){return n.get("columnId")===e&&n.get("projectId")===t})));N(n,void 0)},B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{onServer:!0},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[],a=[],i=1===e.size&&d.jb(e.get(0)),o={};e.toArray().forEach((function(e){var t=e.get("id"),c=e.remove("attendId").set("deleted",1).set("assignee",-1).set("modifiedTime",f.a.formatToUtcString());!i&&n&&(c=c.set("syncStatus",k.g)),r.push(c),a.push(t),y.a.deleteTask(t);var s,u=e.get("parentId");u&&(null==(null===(s=o[u])||void 0===s?void 0:s.push(t))&&(o[u]=[t]))})),s.a.dispatch(h.p(o)),s.a.dispatch(h.o(r)),s.a.dispatch(h.j(a)),t.onServer&&v.a.doSync()},Y=function(e,t){var n=e.map((function(e){return{projectId:null==e?void 0:e.get("projectId"),taskId:null==e?void 0:e.get("id"),assignee:t}}));b.a(n).then((function(n){var r=n.data,i=r.id2etag,c=r.id2error;a.a.isEmpty(c)||o.a.debug(c);var u=new Set(Object.keys(i));e.filter((function(e){return!!e&&u.has(e.get("id"))})).forEach((function(e){if(e){var n=e.get("id");s.a.dispatch(h.E(n,t));var r=l.n(n);y.a.setTask(r)}}))}))},W=function(e,t){var n=t.selected,r=t.singleSelected,i=[];e.forEach((function(e){if(e){var t=e.get("tags")?e.get("tags").toArray():[],o=a.a.union(t,n),c=a.a.difference(t,n.concat(r));o=a.a.difference(o,c),i.push({id:e.get("id"),tags:o,isDirty:!0})}})),s.a.dispatch(h.l(i)),D(i.map((function(e){return e.id}))),v.a.doSync()},K=function(e){var t=[],n=[];e.forEach((function(e){if(e&&d.tb(e)){var r=e.get("id"),a=E({id:r,status:0,items:d.ob(e),completedTime:void 0,repeatFlag:d.B(e),progress:0,isDirty:!0},d.r(e));t.push(a),n.push(r)}})),s.a.dispatch(h.l(t)),l.o(n).forEach((function(e){y.a.setTask(e)})),v.a.doSync()}},383:function(e,t,n){"use strict";n.d(t,"g",(function(){return R})),n.d(t,"j",(function(){return P})),n.d(t,"e",(function(){return N})),n.d(t,"l",(function(){return L})),n.d(t,"m",(function(){return U})),n.d(t,"b",(function(){return F})),n.d(t,"k",(function(){return H})),n.d(t,"d",(function(){return B})),n.d(t,"c",(function(){return Y})),n.d(t,"a",(function(){return W})),n.d(t,"h",(function(){return K})),n.d(t,"f",(function(){return G})),n.d(t,"i",(function(){return V}));n(73),n(205),n(203),n(153),n(152),n(120),n(204);var r=n(338),a=n.n(r),i=n(320),o=n(318),c=n(603),s=n(657),u=n(601),l=n(329),d=n(342),f=n(382),p=n(157),h=(n(0),n(319)),m=n.n(h),g=(n(653),n(348));m.a.uniqueId();var v=n(442),y=n(426),b=n(330),k=n(334),O=n(429),T=n(439);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var a=_(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),e}var A=function(e){f.n(e.map((function(e){return{id:e.id,parentId:void 0}})))},x=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=l.N(e),a=r.list,i=r.map,o=l.M(a,i),c=o.filter((function(e){return null!=e.model&&!t(e.section)})),s=c.map((function(e){return e.model.originModel}));return n&&A(c.filter((function(e){return 0!==e.level}))),s},R=function(){function e(t,n,r,a){C(this,e),this.noHeader=void 0,this.id=void 0,this.name=void 0,this.needingBuildTree=!0,this.isSortFree=!0,this.canDrop=!0,this.id=t,this.name=null!=n?n:"",this.noHeader=null!=r&&r,null!=a&&(this.isSortFree=a)}return M(e,[{key:"equals",value:function(t){return t===this||t instanceof e&&(t instanceof Y?this.name===t.name:this.id===t.id)}},{key:"createOnEnterInSection",value:function(e,t,n,r){}},{key:"insertTasks",value:function(e,t,n,r,a,i,o,c){l.U(e,t,n,r,a,i,o,c)}},{key:"dropTasks",value:function(e){}},{key:"createOnEnterProperties",get:function(){return{}}}]),e}(),P=function(e){E(n,e);var t=D(n);function n(){var e;return C(this,n),(e=t.call(this,"note","note")).canDrop=!1,e.noHeader=!1,e.needingBuildTree=!1,e.isSortFree=!1,e}return M(n,[{key:"createOnEnterProperties",get:function(){return{kind:o.L.Note}}}]),n}(R),N=function(e){E(n,e);var t=D(n);function n(e,r,a,i){var o;return C(this,n),(o=t.call(this,e,a,!1,i)).date=void 0,o.id=e,o.date=r,o}return M(n,[{key:"createOnEnterInSection",value:function(e,t,n,r){this.date&&u.a(e,t,n,a()(this.date).format("YYYYMMDD"),r)}},{key:"insertTasks",value:function(e,t,n,r,i,o,c,s){var l=this.date?a()(this.date).format("YYYYMMDD"):void 0;if(1===e.length&&["overdue","next7days","later"].includes(this.id)){var d,f=null===(d=e[0].model)||void 0===d?void 0:d.originModel;if(f)switch(this.id){case"overdue":T.h(f)&&(l=void 0);break;case"next7days":T.g(f)&&(l=void 0);break;case"later":T.f(f)&&(l=void 0)}}u.f(e,t,n,l,r,o,c)}},{key:"dropTasks",value:function(e){var t=this,n=x(e,(function(e){return e.id===t.id}));if(this.date){var r=Object(d.j)(this.date);f.f(n,r)}else{var a=e[0].model;a.isScheduleOwner&&a.isScheduleTask?p.a.dispatch("showConfirmClearTimeModal",{taskId:a.id,projectId:a.projectId}):f.g(n)}}},{key:"formatDate",get:function(){return this.date?a()(this.date).format(o.m.dateTime):""}},{key:"createOnEnterProperties",get:function(){return{startDate:this.formatDate}}}]),n}(R),L=function(e){E(n,e);var t=D(n);function n(e,r,a){var i;return C(this,n),(i=t.call(this,e,r)).priority=o.x.none,i.priority=a,i}return M(n,[{key:"createOnEnterInSection",value:function(e,t,n,r){c.a(e,t,n,this.priority,r)}},{key:"insertTasks",value:function(e,t,n,r,a,i,o,s){c.f(e,t,n,this.priority,r,i,o)}},{key:"dropTasks",value:function(e){var t=this,n=x(e,(function(e){return e.id===t.id})),r=parseInt("".concat(this.priority),10);f.h(n,r)}},{key:"createOnEnterProperties",get:function(){return{priority:parseInt("".concat(this.priority),10)}}}]),n}(R),U=function(e){E(n,e);var t=D(n);function n(e,r,a){var i;return C(this,n),(i=t.call(this,e,r)).disabled=void 0,i.disabled=a,i}return M(n,[{key:"createOnEnterInSection",value:function(e,t,n,r){s.a(e,t,n,this.id,r)}},{key:"insertTasks",value:function(e,t,n,r,a,i,o,c){s.e(e,t,n,this.id,r,o)}},{key:"dropTasks",value:function(e){var t=this,n=x(e,(function(e){return e.id===t.id}));v.j(i.List(n),this.id,void 0,(function(e){y.e(e)}))}},{key:"createOnEnterProperties",get:function(){return{projectId:this.id}}}]),n}(R),F=function(e){E(n,e);var t=D(n);function n(e,r){var a;return C(this,n),(a=t.call(this,null!=e?e:"completed","completed")).date=void 0,a.isSortFree=!1,a.date=r,a}return M(n,[{key:"dropTasks",value:function(e){var t=this,n=i.List(x(e,(function(e){return e.id===t.id}),!1));if(1===n.size&&n.get(0).get("isSubTaskModel")){var r=n.get(0);g.D(l.n(r.get("taskId")),r.get("id"))}else n.forEach((function(e){k.o()?g.F(e.get("id"),t.date||new Date):b.tb(e)?v.l(e):v.m(i.List([e]),O.a.Completed)}))}},{key:"createOnEnterProperties",get:function(){return{status:2,completedTime:a()().format(o.m.atomTime)}}}]),n}(R),H=function(e){E(n,e);var t=D(n);function n(){return C(this,n),t.call(this,"order","",!0)}return n}(R),B=function(e){E(n,e);var t=D(n);function n(){var e;return C(this,n),(e=t.call(this,"tempSection","")).type="tempSection",e}return n}(R),Y=function(e){E(n,e);var t=D(n);function n(){var e;C(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).type="order",e}return M(n,[{key:"insertTasks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.isSortFree&&l.S(e,t,n,r,this.id)}},{key:"dropTasks",value:function(e){var t=this,n=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=l.N(e),a=r.list,o=r.map,c=l.M(a,o),s=c.filter((function(e){return null!=e.model&&!t(e.section)})),u=i.List(s.map((function(e){return e.model.originModel}))),d=l.l(u);return n&&A(s),d}(e,(function(e){return e.id===t.id}));f.m(n,this.id,{setNewOrder:!0},"top")}},{key:"createOnEnterProperties",get:function(){return{columnId:this.id}}}]),n}(R),W=function(e){E(n,e);var t=D(n);function n(e,r){var a;return C(this,n),(a=t.call(this,e,r)).assignee=void 0,a.assignee=parseInt(e,10),a.isSortFree=!1,a}return M(n,[{key:"createOnEnterProperties",get:function(){return{assignee:this.id}}}]),M(n,[{key:"dropTasks",value:function(e){var t=this,n=x(e,(function(e){return e.id===t.id}),!1);f.e(n,this.assignee)}}]),n}(R),K=function(){function e(){C(this,e),this.id="loadMore",this.name="show_more_tasks"}return M(e,[{key:"equals",value:function(t){return t===this||t instanceof e&&this.id===t.id}}]),e}(),G=function(e){E(n,e);var t=D(n);function n(){return C(this,n),t.call(this,"order","",!0)}return n}(R),V=function(){function e(t,n){C(this,e),this.id="moreChildren",this.count=1,this.id="moreChildren/".concat(t),this.count=n}return M(e,[{key:"equals",value:function(t){return t===this||t instanceof e&&(this.id===t.id&&this.count===t.count)}},{key:"name",get:function(){return 1===this.count?"one_completed_tasks":"n_completed_tasks"}}]),e}()},384:function(e,t,n){"use strict";n(206),n(325);var r=n(0),a=n.n(r),i=n(321),o=n.n(i),c=n(319),s=n.n(c),u=n(99),l=n.n(u),d=n(100),f=n.n(d);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var a=b(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(i,e);var t,n,r,a=v(i);function i(){return h(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){this.createContainer()}},{key:"componentDidUpdate",value:function(e){var t=this.props.didUpdate;t&&t(e)}},{key:"componentWillUnmount",value:function(){this.removeContainer()}},{key:"createContainer",value:function(){this._container=this.props.getContainer(),this.forceUpdate()}},{key:"removeContainer",value:function(){this._container&&this._container.parentNode.removeChild(this._container)}},{key:"render",value:function(){return this._container?l.a.createPortal(this.props.children,this._container):null}}])&&m(t.prototype,n),r&&m(t,r),i}(a.a.Component);k.propTypes={getContainer:f.a.func.isRequired,children:f.a.node.isRequired,didUpdate:f.a.func};var O=n(419),T=n(332),S=n(388),E=n(324),w=n(157);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var a=P(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(c,e);var t,n,r,i=A(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).onKeyDown=function(e){if(t.props.keyboard){var n=$(document.activeElement);n.is("input, div[contenteditable=true], textarea")&&n.parents($(t.popup)).length?(e.metaKey||e.ctrlKey)&&e.keyCode===S.a.enter&&(t.onOk(e),e.stopPropagation()):e.keyCode===S.a.enter&&(t.onOk(e),e.stopPropagation())}},t.onClose=function(e){var n=t.props,r=n.onCancel,a=n.onClose;a?a(e):r&&r(e)},t.onCancel=function(e){var n=t.props.onCancel;n&&n(e)},t.onOk=function(e){var n=t.props.onOk;n&&n(e)},t.state={transitionStyle:{transform:"scale(0.9)",opacity:"0.2"}},t.getContainer=t.getContainer.bind(R(t)),t.getComponent=t.getComponent.bind(R(t)),t.onClose=t.onClose.bind(R(t)),t.onCancel=t.onCancel.bind(R(t)),t.onMaskClick=t.onMaskClick.bind(R(t)),t.onOk=t.onOk.bind(R(t)),t.onKeyDown=t.onKeyDown.bind(R(t)),t.onContextMenuPopCover=t.onContextMenuPopCover.bind(R(t)),t.escListenId=s.a.uniqueId(),t}return t=c,(n=[{key:"componentDidMount",value:function(){this.componentDidUpdate({})}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.visible&&(e.visible||(this.openTime=Date.now(),setTimeout((function(){t.popup&&t.popup.focus(),t.setState({transitionStyle:{transform:"scale(1)",opacity:"1"}})})),w.b.subscribe(this.escListenId,"modal",this.onClose)))}},{key:"componentWillUnmount",value:function(){w.b.unSubscribe(this.escListenId),document.body.focus()}},{key:"onMaskClick",value:function(e){e.stopPropagation(),this.props.maskClosable&&(Date.now()-this.openTime<300||e.target===e.currentTarget&&this.onClose(e))}},{key:"onContextMenuPopCover",value:function(e){var t=this.props.onContextMenuPopCover;t&&t(e)}},{key:"getContainer",value:function(){var e=this.props.getContainer;if(e)return e();var t=document.createElement("div");return document.body.appendChild(t),t}},{key:"getComponent",value:function(){var e=this,t=this.props,n=t.title,r=t.closable,i=t.id,c=t.coverClassName,s=t.className,u=t.footerClassName,l=t.header,d=t.footer,f=t.children,p=t.noHeader,h=t.noFooter,m=t.height,g=this.state.transitionStyle,v=this.renderDefaultFooter();return a.a.createElement("div",{className:"popup-cover ".concat(c),onClick:this.onMaskClick,onKeyDown:this.onKeyDown,onContextMenu:this.onContextMenuPopCover},a.a.createElement("div",{ref:function(t){e.popup=t},className:"popup fast-transition ".concat(s),id:i,style:_({},g,{height:m}),tabIndex:-1},p?null:a.a.createElement("div",{className:"popup-header"},n&&a.a.createElement("h1",{className:"popup-title text-primary text-def"},n),l,r&&a.a.createElement("a",{className:"popup-close close",onClick:this.onClose},a.a.createElement(T.a,{name:"close"}))),a.a.createElement("div",{className:"popup-body"},f),h?null:a.a.createElement("div",{className:o()("popup-footer",u)},null==d?v:d)))}},{key:"renderDefaultFooter",value:function(){var e=this.props,t=e.loading,n=e.loadingText,r=e.disabled,i=e.extraFooterElement,o=e.isAbleShowCancelButton,c=e.okText,s=e.cancelText,u=c||E.a("confirm"),l=s||E.a("close");return a.a.createElement(a.a.Fragment,null,i,o?a.a.createElement(O.a,{onClick:this.onCancel,type:"cancel"},l):null,a.a.createElement(O.a,{type:"primary",onClick:this.onOk,loading:t,loadingText:n||u+"...",disabled:r},u))}},{key:"render",value:function(){return this.props.visible?a.a.createElement(k,{getContainer:this.getContainer},this.getComponent()):null}}])&&I(t.prototype,n),r&&I(t,r),c}(a.a.Component);t.a=N;N.defaultProps={className:"",visible:!1,loading:!1,disabled:!1,keyboard:!0,closable:!0,maskClosable:!0,loadingText:"",noFooter:!1,footerClassName:"",isAbleShowCancelButton:!0,onCancel:null,onClose:null,getContainer:null,onOk:null,onContextMenuPopCover:null,extraFooterElement:null,title:"",id:"",coverClassName:"",header:null,footer:null,children:null,noHeader:!1,okText:"",cancelText:"",height:""}},385:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"h",(function(){return m})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return v}));var r=n(328),a=n(327),i=n(372),o=n(318),c=n(324),s=n(329),u=function(e,t){return e.merge({isSubTaskModel:!0,taskAttendId:t.get("attendId")||"",taskId:t.get("id"),priority:t.get("priority"),tags:t.get("tags"),projectId:t.get("projectId"),assignee:t.get("assignee"),startDate:m(e)?e.get("startDate"):null})},l=function(e){var t=e.get("startDate");if(e.get("status"))return!1;if(!t)return!1;if(d(e))return!0;if(e.get("isAllDay")){var n=r.a.prefMoment(t).format("YYYY-MM-DDT")+"09:00";t=i.i(r.a.prefMoment(n),"TRIGGER:PT0S")}return r.a.prefMoment(t).diff(r.a.prefMoment().startOf("minute"),"minutes")>0},d=function(e){var t=e.get("status"),n=e.get("snoozeReminderTime");return!t&&(!!n&&r.a.getUnix(n)>r.a.getUnix())},f=function(e){var t=e.get("snoozeReminderTime");if(t&&d(e)){var n,i=r.a.prefMomentFromUtc(t,o.m.atomTime),s=r.a.getDueDateLocalZoneDate(t).diff(r.a.startOfDay(),"days"),u=c.c()?"A hh:mm":"hh:mm A",l=a.b("showMeridiem")?i.format(u):i.format("HH:mm");0===s?n=c.a("today")+", "+c.a("snooze_until",{s1:l}):1===s&&(n=c.a("today")+", "+c.a("snooze_until",{s1:c.a("tomorrow")+l}))}return n},p=function(e){var t=e.get("isAllDay"),n=m(e)?e.get("startDate"):null;return a.m(n,"",t,!0)},h=function(e){var t=e.get("taskId");return t?s.n(t):e},m=function(e){var t=e.get("startDate");return t&&-1!==t},g=function(e){return e.get("status")>0},v=function(e){return g(e)&&e.get("completedTime")&&m(e)}},386:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"i",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"f",(function(){return h})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return g})),n.d(t,"h",(function(){return v}));n(205),n(173),n(203),n(153),n(210),n(416),n(33),n(154),n(112),n(158),n(146),n(204);var r=n(338),a=n.n(r),i=n(98),o=n.n(i),c=n(474),s=n(425);function u(e){if(e){var t=e.match(/COUNT=(\d+)/);if(t)return parseInt(t[1],10)}return 0}function l(e,t){try{e.includes("=")||(e+="=");var n=t.split(":"),r=n[1].split(";").filter((function(t){return!t.startsWith(e)}));if(0===r.length)return t;var a=n[0]+":";return r.forEach((function(e,t){a+=e,t!==r.length-1&&(a+=";")})),a}catch(e){return o.a.error("removeKeyValueFromRRule",e),t}}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(!t.includes(e))return n;var r=y(e,t);if(null==r)return n;var a=parseInt(r,10);return Number.isNaN(a)?n:a}function f(e,t){return e&&t&&t.includes(e)?y(e,t):""}function p(e){var t=e.byWeekday;if(null==t||t instanceof Array&&0===t.length)return!1;var n=e.byMonthDay;return null==n||n instanceof Array&&0===n.length}function h(e,t){return t===c.a.defaultVal&&(e.isSkipWeekend&&e.isSkipLegalRestDay)}function m(e){var t=Math.floor(e/1e4),n=Math.floor((e-1e4*t)/100);return new Date(t,n-1,e%100)}function g(e){var t=a()(e);return 1e4*t.get("year")+100*(t.get("month")+1)+t.get("date")}function v(e){var t=e.startDate,n=e.repeatFlag,r=e.repeatFrom;if(null==t||!n||!r)return!1;if(r===c.a.completedTime){if(n.includes("COUNT="))return d("COUNT",n)>1;if(n.includes("UNTIL="))return null!=s.b.occurrenceDateOfRecurrentObject(e)}else if(n.includes("COUNT=")||n.includes("UNTIL="))return null!=s.b.occurrenceDateOfRecurrentObject(e);return!0}function y(e,t){var n,r=null===(n=t.split(":")[1].split(";").find((function(t){return t.startsWith(e)})))||void 0===n?void 0:n.split("=");return r&&2===r.length?r[1]:null}},387:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));n(153),n(206),n(325),n(33),n(62),n(214);var r=n(0),a=n.n(r),i=(n(99),n(319)),o=n.n(i),c=n(384),s=n(419),u=n(341),l=n(324),d=n(342),f=n(318),p=n(323),h=n(363),m=n(381),g=n(362);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var a=w(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=null,j=(a.a.Component,function(e){D&&D.show(e)})},388:function(e,t,n){"use strict";t.a={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause_break:19,caps_lock:20,escape:27,space:32,page_up:33,page_down:34,end:35,home:36,left_arrow:37,up_arrow:38,right_arrow:39,down_arrow:40,insert:45,delete:46,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,left_window_key:91,right_window_key:92,select_key:93,numpad_0:96,numpad_1:97,numpad_2:98,numpad_3:99,numpad_4:100,numpad_5:101,numpad_6:102,numpad_7:103,numpad_8:104,numpad_9:105,multiply:106,add:107,subtract:109,decimal_point:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,num_lock:144,scroll_lock:145,semi_colon:186,equal_sign:187,comma:188,dash:189,period:190,forward_slash:191,grave_accent:192,open_bracket:219,back_slash:220,close_braket:221,single_quote:222,firefox_command:224}},393:function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"f",(function(){return m}));n(153),n(33),n(154),n(112),n(158),navigator.userAgent.match(/Android/i),navigator.userAgent.match(/BlackBerry/i),navigator.userAgent.match(/iPhone|iPad|iPod/i)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints,navigator.userAgent.match(/Opera Mini/i),navigator.userAgent.match(/IEMobile/i),navigator.userAgent.match(/MicroMessenger/i);var r,a=navigator.userAgent.toLowerCase(),i=(a.match(/webkit/i),a.match(/safari/)&&null===a.match(/chrome/)),o=null!==a.match(/chrome/),c=null!==a.match(/firefox/),s=null!==a.match(/trident/),u=null!==a.match(/msie 10.0/),l=null!==a.match(/edge/),d=((r=document.createElement("b")).innerHTML="\x3c!--[if lte IE 9 ]><i></i><![endif]--\x3e",r.getElementsByTagName("i").length,null!==a.match(/safari/)&&a.match(/qqbrowser/),o&&parseInt(a.match(/chrome\/(\d+)/)&&a.match(/chrome\/(\d+)/)[1]),o&&parseInt(a.match(/chrome\/(\d+)/)[1]),function(){if(!s)return!1;var e=a.split("msie"),t=a.split(/rv:(\d+)/);return e&&parseInt(e[1])||t&&parseInt(t[1])}()),f=function(){return d},p=navigator.platform.match(/Mac/),h=(p&&a.match(/applewebkit/),function(){return!!(window.CSS&&window.CSS.supports&&window.CSS.supports("color","var(--a)"))}),m=function(){return navigator.userAgent.toLowerCase().includes("lark")}},395:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return f}));n(205),n(173),n(119),n(152);var r=n(326),a=n(333),i=(n(334),n(401)),o=function(){return r.a.getState().groups.groupList},c=function(e){var t=o();return e?t.filter((function(t){return t.get("teamId")===e})):t.filter((function(e){return!e.get("teamId")}))},s=function(e){return o().find((function(t){return t.get("id")===e}))},u=function(){return r.a.getState().groups.groupList.filter((function(e){return 0!==a.w(e.get("id")).length}))},l=function(){return o().filter((function(e){return!!e.get("teamId")}))},d=function(e){var t=c(e).minBy((function(e){return e.get("sortOrder")}));return t&&t.get("sortOrder")!==1/0?t.get("sortOrder"):0},f=function(e){return c(e).filter((function(e){return!i.b(e)&&!e.get("isDeleted")}))}},397:function(e,t,n){"use strict";n.d(t,"b",(function(){return T})),n.d(t,"e",(function(){return S})),n.d(t,"k",(function(){return E})),n.d(t,"c",(function(){return _})),n.d(t,"a",(function(){return C})),n.d(t,"d",(function(){return I})),n.d(t,"h",(function(){return M})),n.d(t,"i",(function(){return A})),n.d(t,"j",(function(){return x})),n.d(t,"f",(function(){return R})),n.d(t,"g",(function(){return P}));n(73),n(205),n(153),n(61),n(152),n(156),n(346),n(50),n(207),n(154),n(111),n(110),n(160);var r=n(320),a=n(338),i=n.n(a),o=n(328),c=n(342),s=n(372),u=n(365),l=n(354),d=n(318),f=n(345),p=n(425),h=n(344);var m=function e(t){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.repeatFlag=void 0,this.repeatFrom=void 0,this.startDate=void 0,this.completedTime=void 0,this.timeZoneId=void 0,this.exDates=void 0,this.repeatFlag=t.get("repeatFlag"),this.repeatFrom=null!==(n=t.get("repeatFrom"))&&void 0!==n?n:d.A.defaultVal,this.startDate=null!==(r=h.a.parseUTCString(t.get("dueStart")))&&void 0!==r?r:void 0;var a=t.get("eXDates");this.exDates=new Set((a||[]).map((function(e){return i()(e).format("YYYYMMDD")})))};function g(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O={subscribeEvent2Cycles:new Map},T=function(){O.subscribeEvent2Cycles=new Map},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=b({title:"",content:"",sortOrder:0,priority:0,startDate:null,dueDate:null,status:0,items:null,accountId:"",calendarName:"",calendarId:"",isSubscribeTask:!0,repeatFrom:d.A.dueDate},e,{timeZone:e.timeZone||e.timezone||f.h}),a=r.fromJS(n);return a=w(a),a=j(a),a=_(a,t.eventDetachDateSet),a=C(a),a=D(a)},E=function(e){var t=e.toJSON();return t.id=t.eventId,(t=c.m(t)).timezone=t.isAllDay?null:t.timeZone,t.reminders=t.reminders?t.reminders.map((function(e){return s.k(e.trigger,t.isAllDay)})).filter((function(e){return"number"==typeof e})):null,delete t.originalCalendarId,delete t.startDate,delete t.dueDate,delete t.sortOrder,delete t.priority,delete t.status,delete t.items,delete t.repeatFrom,delete t.accountId,delete t.calendarId,delete t.isSubscribeTask,delete t.hasMoved,delete t.syncStatus,delete t.eventId,delete t.timeZone,delete t.serverReminders,t},w=function(e){return R(e)?e.set("id","".concat(e.get("eventId"),"@").concat(e.get("originalCalendarId")||e.get("calendarId"))):e},D=function(e){var t=e.get("isAllDay"),n=e.get("reminders");if(n){var a=n.filter((function(e){return 0===e||!!e})).map((function(e){return r.Map.isMap(e)?e:r.Map({id:Object(l.a)(),trigger:s.j(e,t)})}));return e.set("reminders",a)}return e.set("reminders",null)},j=function(e){var t=e.get("isAllDay"),n=e.get("dueStart"),r=e.get("dueEnd"),a=n,i=r;return t&&(a=o.a.formatToLocalStart(n),i=o.a.formatToLocalStart(r)),e.set("dueStart",a).set("dueEnd",i)},_=function(e,t){if(t&&t.size){var n=e.get("isAllDay"),r=e.get("eXDates")||[],a=g(t).map((function(e){return n?o.a.formatToLocalStart(e):e}));e=e.set("eXDates",g(new Set([].concat(g(r),g(a)))).sort())}return e},C=function(e){var t=i()().startOf("days"),n=e.get("dueStart"),r=e.get("dueEnd"),a=e.get("eXDates")||[],c=!!e.get("repeatFlag"),s=t.diff(r)>=0,u=e.set("startDate",n).set("dueDate",o.a.formatToUtc(r));if(c){var l=!(!a||!a.length)&&a.includes(u.get("dueStart"));if(s||l){var d=h.a.parseUTCString(r),f=h.a.parseUTCString(n),g=i()(d).diff(f,"milliseconds"),v=t.clone().subtract(g-1,"milliseconds").toDate(),y=new m(u),b=p.b.occurrenceDateOfRecurrentObjectFromDate(v,y);if(b){var k=i()(b).add(g,"milliseconds");u=u.merge({startDate:h.a.formatToServerDate(b),dueDate:h.a.formatToServerDate(k)})}}}return u},I=function(e){var t=e.get("startDate");return!!t&&o.a.prefMoment(t).diff(o.a.prefMoment().startOf("minute"),"minutes")>0},M=function(e){return e.get("syncStatus")===u.h.UPDATED},A=function(e){return e.get("syncStatus")===u.h.DELETED},x=function(e){return!!e.get("originalStartTime")},R=function(e){return e.get("isSubscribeTask")&&!!e.get("accountId")},P=function(e){return e.get("isSubscribeTask")&&!e.get("accountId")}},400:function(e,t,n){"use strict";var r={columnNameFilter:/[\\\/\"\:\*\?\<\>\|]/g,projectNameFilter:/[\\\/\"\:\?\<\>\|\*]/g,tagNameFilter:/[\\\/\*\"\:\?\<\>\|#||\s]/g,autocomplete:/^[\d\w\s\-\:\u4e00-\u9fa5]+$/,trigger:/^TRIGGER\:(-)?P(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(\d+H)?(\d+M)?(\d+S)?)?/,calendarUrl:/^[a-zA-z]+:\/\/[^\s]*/,emailRegexp:/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,9}$/i,urlProjectId:/\/?project\/([^\s\/\#]*)/i,urlTaskId:/\/?task\/([^\s\/\#]*)/i,link:/(((http|https|ftp|ftps)\:\/\/)?([a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?))/g,email:/\b([A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4})\b/gi,protocol:/^((http|https|ftp|ftps)\:\/\/)/g,tag:/&((\w{2,8})|(#\d{2,8});)/g,escapeReg:/([\\\.\$\^\{\[\(\|\)|\*|\+|\?|\}])/g,specialUrl:/^\d+\.(||||||||||||||||||||||||||||||||||||||||||||||||||||||)$/,weekSectionId:/Week([0-9])/,hasZhChar:/[\u4e00 - \u9fa5]/gi};t.a=r},401:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return d}));n(160);var r=n(320),a=n(319),i=n.n(a),o=n(318),c=n(449),s=n(342),u=function(e){return Object(r.Map)(i.a.extend({id:"",name:"",sortOrder:"",sortType:"",listType:o.t.group,teamId:null},e))},l=function(e){var t=Object(s.e)(e).toJSON();return delete t.isNew,delete t.isDirty,delete t.isDeleted,delete t.editing,t},d=function(e){if(e){var t=e.get("teamId");return Object(c.d)(t)}return!0}},402:function(e,t,n){"use strict";n.d(t,"h",(function(){return c})),n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return m}));n(203),n(153),n(209),n(33),n(204);var r=n(338),a=n.n(r),i=n(324),o=(n(379),n(430));function c(e){return!(!e||!e.get("isHabit"))}function s(e){return e&&c(e)&&(e.get("value")>=e.get("goal")||e.get("checkinStatus")===o.d.undone||e.get("checkinStatus")===o.d.done)}function u(e){if(s(e))return!1;var t=/^(\d{2}):(\d{2})$/,n=e.get("reminders"),r=a()(),i=r.year(),o=r.month(),c=r.date(),u={hour:0,minute:0};return n.forEach((function(e){if(t.test(e)){var n=t.exec(e);if(null==n)return;var r=+n[1],a=+n[2];(u.hour<r||u.hour===r&&u.minute===a)&&(u.hour=r,u.minute=a)}})),!(a()([i,o,c,u.hour,u.minute]).toDate()<r.toDate())}function l(e){return"Real"===e.get("type")}function d(e){return l(e)&&e.get("value")>0}function f(e){var t;return p(null!==(t=e.get("value"))&&void 0!==t?t:0,e.get("goal"))}function p(e,t){return{value:e,goal:t,percentage:100*Math.min(e/t,1)}}function h(e){switch(e.get("type")){case"Real":switch(e.get("step")){case o.f.manual:return o.i.manualTarget;case o.f.all:return o.i.allTarge;default:return o.i.autoTarget}case"Boolean":default:return o.i.nonTarget}}function m(e){var t=e.get("unit");return["Count",""].includes(t)?Object(i.a)("habit_count_unit"):t}},403:function(e,t,n){"use strict";var r,a;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),function(e){e[e.DONE=100]="DONE",e[e.NEW=101]="NEW",e[e.UPDATED=102]="UPDATED",e[e.DELETED=103]="DELETED",e[e.INIT=104]="INIT"}(r||(r={})),function(e){e[e.NEW=0]="NEW",e[e.UPDATED=1]="UPDATED",e[e.DONE=2]="DONE",e[e.INIT=3]="INIT"}(a||(a={}))},404:function(e,t,n){"use strict";n.d(t,"g",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"k",(function(){return c})),n.d(t,"j",(function(){return s})),n.d(t,"i",(function(){return u})),n.d(t,"l",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"c",(function(){return m}));var r=n(368),a=function(e){return{type:r.h.SET_TAGS,data:e}},i=function(e){return{type:r.h.ADD_TAG,data:e}},o=function(e){return{type:r.h.DELETE_TAG,name:e}},c=function(e,t){return{type:r.h.UPDATE_TAG_NAME,name:e,newName:t.toLowerCase()}},s=function(e,t){return{type:r.h.UPDATE_TAG_LABEL,name:e,newLabel:t}},u=function(e,t){return{type:r.h.UPDATE_TAG_COLOR,name:e,color:t}},l=function(e,t){return{type:r.h.UPDATE_TAG_PARENT,name:e,parent:t}},d=function(e,t){return{type:r.h.UPDATE_PARENT_OF_SUB_TAGS,oldParent:e,newParent:t}},f=function(e){return{type:r.h.SET_TAG_SORTORDERS,data:e}},p=function(e){return{type:r.h.AFTER_COMMIT_TAGS,id2etag:e}},h=function(e,t){return{type:r.h.SET_DRAFT_TAG,subTags:e,order:t}},m=function(){return{type:r.h.CLEAR_DRAFT_TAG}}},405:function(e,t,n){"use strict";n.d(t,"e",(function(){return h})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"g",(function(){return y})),n.d(t,"d",(function(){return b})),n.d(t,"f",(function(){return k}));n(414),n(205),n(173),n(203),n(152),n(156),n(204);var r=n(326),a=n(320),i=n(334),o=n(397),c=n(518),s=n(359),u=n(341),l=n(482),d=function(){return r.a.getState().subscribeAccounts.accounts},f=function(){return r.a.getState().subscribeAccounts.calendars},p=function(e){var t=d(),n=f(),r=t.find((function(t){return t.get("id")===e}));return(r&&r.get("calendarIds")||Object(a.List)()).map((function(e){return n.get(e)})).filter((function(e){return a.Map.isMap(e)&&!c.b(e)}))},h=function(){return l.b(r.a.getState())},m=function(e){return f().get(e)},g=function(){var e=i.g();return p(e).sort(s.a.subscribeCalendar).get(0)},v=function(e){var t;return r.a.getState().subscribeAccounts.events.forEach((function(n){var r=n.find((function(t){return t.get("id")===e}));if(r)return t=r,!1})),t},y=function(e){return!!Object(o.g)(e)||!!Object(o.f)(e)&&(!u.d()||(s=e.get("calendarId"),!(l=m(s))||c.b(l))||(t=e.get("calendarId"),n=d(),r=f(),!(i=n.find((function(e){return e.get("id")===t})))||(i.get("calendarIds")||Object(a.List)()).every((function(e){var t=r.get(e);return t&&c.b(t)}))));var t,n,r,i,s,l},b=function(){var e=i.g();return p(e).map((function(e){return{complete:e.get("name")+" ",match:e.get("name"),key:e.get("id")}})).toArray()},k=function(e){return!!r.a.getState().subscribeAccounts.accounts.find((function(t){return t.get("id")===e}))}},412:function(e,t,n){"use strict";n(152),n(50),n(121);var r=n(98),a=n.n(r),i=n(377),o=(n(61),n(111),n(110),n(820)),c=n.n(o),s=n(500);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p={name:"localdatabase",storeName:"tasks",version:1},h=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.taskStore=null,this.pomoStore=null,this.versionStore=null}var t,n,r;return t=e,(n=[{key:"isSupported",value:function(){return!Object(s.a)()&&c.a.supports(c.a.INDEXEDDB)}},{key:"initialize",value:function(){if(this.isSupported()){c.a.config(p);var e=this.taskStore=c.a.createInstance(l({},p,{storeName:"tasks"})),t=this.pomoStore=c.a.createInstance(l({},p,{storeName:"pomodoro"})),n=this.versionStore=c.a.createInstance(l({},p,{storeName:"version"}));return Promise.all([e.ready(),t.ready(),n.ready()])}return Promise.reject(new Error("browser is not support indexedb"))}},{key:"getStoreData",value:function(e){var t=[];return new Promise((function(n,r){e.iterate((function(e){t.push(e)})).then((function(){n(t)})).catch((function(e){r(e)}))}))}},{key:"resetStore",value:function(e,t){var n=t.map((function(t){return e.setItem(t.id,t)}));return Promise.all(n)}},{key:"flush",value:function(){return c.a.clear()}}])&&f(t.prototype,n),r&&f(t,r),e}()),m=n(331),g=n(326),v=n(318),y=n(511);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=v.K.tasks,O=v.K.pomodoros,T=v.K.webappVersion,S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.StorageType=null,this.syncStorageTaskListHashCode=null}var t,n,r;return t=e,(n=[{key:"initialize",value:function(){var e=this;return new Promise((function(t){if(Object(s.a)())return e.StorageType="none",void t();h.initialize().then((function(){var n=Object(m.c)(k,"json");n?(Object(m.d)(k),h.resetStore(h.taskStore,n).then((function(){e.StorageType="indexeddb",t()}))):(e.StorageType="indexeddb",t())})).catch((function(n){a.a.error("indexeddb initialize failed:",n),Object(y.captureException)(n),e.StorageType="localStorage",t()}))}))}},{key:"isAsyncStore",value:function(){return"indexeddb"===this.StorageType}},{key:"getTasks",value:function(){var e=this;return new Promise((function(t){if(e.isAsyncStore())h.getStoreData(h.taskStore).then((function(e){t(e)})).catch((function(e){Object(y.captureException)(e)}));else if("localStorage"===e.StorageType){var n=(Object(m.c)(k,"json")||[]).map((function(e){return Object(i.c)(e)}));t(n)}else{if("none"!==e.StorageType)throw new Error("Illegal Access getTasks");t([])}}))}},{key:"setTask",value:function(e){var t=this;return new Promise((function(n,r){if(t.isAsyncStore())h.taskStore.setItem(e.get("id"),Object(i.b)(e).toJS()).then(n).catch((function(e){return Object(y.captureException)(e),r(e)}));else if("localStorage"===t.StorageType)try{var a=g.a.getState().tasks.taskList,o=a.hashCode();if(t.syncStorageTaskListHashCode!==o){var c=a.map((function(e){return Object(i.b)(e)}));Object(m.f)(k,JSON.stringify(c)),t.syncStorageTaskListHashCode=o}n()}catch(e){r(e)}else if("none"===t.StorageType)throw new Error("Illegal Access setTask")}))}},{key:"deleteTask",value:function(e){var t=this;return new Promise((function(n,r){if(t.isAsyncStore())h.taskStore.removeItem(e).then(n).catch((function(e){Object(y.captureException)(e),r(e)}));else if("localStorage"===t.StorageType)try{var a=g.a.getState().tasks.taskList,i=a.hashCode();if(t.syncStorageTaskListHashCode!==i){var o=a.toJS();Object(m.f)(k,o),t.syncStorageTaskListHashCode=i}n()}catch(e){r(e)}else{if("none"!==t.StorageType)throw new Error("Illegal Access deleteTask");n()}}))}},{key:"clearTasks",value:function(){var e=this;return new Promise((function(t,n){if("indexeddb"===e.StorageType)h.taskStore.clear().then((function(){t()})).catch((function(e){Object(y.captureException)(e),n(e)}));else{if("localStorage"!==e.StorageType)throw new Error("Illegal Access clearTasks");try{Object(m.d)(k),t()}catch(e){n(e)}}}))}},{key:"getPomos",value:function(){var e=this;return new Promise((function(t){if("indexeddb"===e.StorageType)h.getStoreData(h.pomoStore).then((function(e){t(e)})).catch((function(e){Object(y.captureException)(e)}));else{var n=Object(m.c)(O);t(n)}}))}},{key:"setPomo",value:function(e){var t=this;return new Promise((function(n,r){"indexeddb"===t.StorageType?h.pomoStore.setItem(e.id,e).then((function(){n()}),(function(e){Object(y.captureException)(e),r()})):n()}))}},{key:"getVersion",value:function(){var e=this;return new Promise((function(t){if("indexeddb"===e.StorageType)h.getStoreData(h.versionStore).then((function(e){t(e)})).catch((function(e){Object(y.captureException)(e)}));else{var n=Object(m.c)(T);t(n)}}))}},{key:"setVersion",value:function(e){var t=this;return new Promise((function(n,r){"indexeddb"===t.StorageType?h.versionStore.setItem(e.key,e.version).then((function(){n()}),(function(e){Object(y.captureException)(e),r()})):"localStorage"===t.StorageType?(Object(m.f)(T,e.version),n()):"none"===t.StorageType&&n()}))}},{key:"clear",value:function(){var e=this;return new Promise((function(t,n){"indexeddb"===e.StorageType?h.flush().then((function(){Object(m.a)().then((function(){t()}))})).catch((function(e){a.a.error("Unable to close async storage: ",e),Object(y.captureException)(e),n()})):"localStorage"===e.StorageType?Object(m.a)().then((function(){t()})):"none"===e.StorageType&&t()}))}}])&&b(t.prototype,n),r&&b(t,r),e}();t.a=new S},418:function(e,t,n){e.exports={filterMenuItemLeftPadding:"12",filterMenuItemLevelPadding:"26",calendarNavHeight:"52",calendarDayLabelHeight:"30",greyThemeColor:"#4b6fde",darkThemeColor:"#313643",classicThemeColor:"#7086da",nightThemeColor:"#5979de",beijingThemeColor:"#df4c45",hangzhouThemeColor:"#419f90",londonThemeColor:"#5e2da5",moscowThemeColor:"#4a99ae",newyorkThemeColor:"#f58646",sanfranciscoThemeColor:"#e7854e",seoulThemeColor:"#4da8a0",shanghaiThemeColor:"#7013a0",guangzhouThemeColor:"#0048a3",shenzhenThemeColor:"#086662",sydneyThemeColor:"#3d48b9",tokyoThemeColor:"#df5884",cairoThemeColor:"#e78930",losangelesThemeColor:"#95477e",springThemeColor:"#4ca349",summerThemeColor:"#00ace7",autumnThemeColor:"#f28749",winterThemeColor:"#698fd6",lightBackGroundColor:"#fff",darkBackGroundColor:"#1c1d1f",taskLevelOffset:"16",taskLevelKanbanOffset:"18"}},419:function(e,t,n){"use strict";n(73),n(119),n(144);var r=n(0),a=n.n(r),i=n(321),o=n.n(i);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(e){var t,n=e.children,r=e.onClick,i=void 0===r?function(){}:r,l=e.loading,d=void 0!==l&&l,f=e.loadingText,p=e.href,h=e.htmlType,m=void 0===h?"button":h,g=e.className,v=e.size,y=void 0===v?"middle":v,b=e.type,k=void 0===b?"primary":b,O=e.prefix,T=void 0===O?"btn":O,S=e.disabled,E=void 0!==S&&S,w=u(e,["children","onClick","loading","loadingText","href","htmlType","className","size","type","prefix","disabled"]),D=p?"a":"button",j="";switch(y){case"large":j="lrg";break;case"middle":j="med";break;case"small":j="sml";break;case"tiny":j="tny"}var _=o()(T,g,(s(t={},"".concat(T,"-").concat(k),k),s(t,"".concat(T,"-").concat(j),j),s(t,"".concat(T,"-").concat(d),d),t));return a.a.createElement(D,c({},w,{type:p?void 0:m||"button",href:p,onClick:function(e){return i(e)},className:_,disabled:E||d}),d?f:n)}},420:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return f}));n(205),n(153),n(159),n(152),n(356),n(144),n(33),n(154),n(112),n(158);var r=n(378),a=n(479),i=n(318),o=n(328),c=n(431);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(e){var t=e.repeatFlag,n=e.repeatFrom,a={kind:"no",freq:"",onMonth:"date",whichMonth:"",weekdays:[],monthdays:[],mweekdays:{},tt_skip:"",tt_workday:"",repeatFrom:n,weekStart:e.weekStart};if(t){var o,u,l=t.includes("LUNAR"),d=new c.a(t),f=d.interval||1,p=d.byWeekday,h=d.byMonthDay,m=d.ttSkip,g=d.ttWorkday,v=(s(o={},r.b.DAILY,"daily"),s(o,r.b.WEEKLY,"weekly"),s(o,r.b.MONTHLY,"monthly"),s(o,r.b.YEARLY,l?"lunar_yearly":"yearly"),o),y=(s(u={},r.b.SU.weekday,"SU"),s(u,r.b.MO.weekday,"MO"),s(u,r.b.TU.weekday,"TU"),s(u,r.b.WE.weekday,"WE"),s(u,r.b.TH.weekday,"TH"),s(u,r.b.FR.weekday,"FR"),s(u,r.b.SA.weekday,"SA"),u);if(d.forgettingCurveRule)return{kind:"ebbinghaus_curve",count:d.count,until:d.untilUTCDate};Object.assign(a,{digit:f,count:d.count,until:d.untilUTCDate,tt_skip:m,tt_workday:g});var b=v[d.freq];if(b&&Object.assign(a,{kind:b,freq:b}),f>1||[i.A.dueDate,i.A.completedTime].includes(n)?Object.assign(a,{kind:"advanced"}):"HOLIDAY,WEEKEND"===m&&Object.assign(a,{kind:"weekdaily"}),p)if(a.onMonth="week",7!==p.length||m){var k=p.map((function(e){return y[e.weekday]})),O={n:p[0].n,weekday:k[0]},T="yearly"===a.freq?d.byMonth:"";Object.assign(a,{kind:"advanced",whichMonth:T,weekdays:k,mweekdays:O})}else Object.assign(a,{kind:"daily"});else h&&(Array.isArray(h)?Object.assign(a,{kind:"advanced",monthdays:h}):Object.assign(a,{monthdays:[h]}),g&&Object.assign(a,{onMonth:"workday",mworkday:g,monthdays:[]}))}else Object.assign(a,{kind:"no"});return a},l=function(e){var t=e.date,n=e.repeatData,c=n.count,s=n.until,u=function(e){var t=e.date,n=e.data,c=n.kind,s=n.repeatFrom,u=n.monthdays,l=n.weekdays,d=n.mweekdays,f=n.mworkday,p=n.freq,h=n.digit,m=n.tt_skip,g=n.weekStart,v=n.onMonth,y=n.whichMonth,b=i.A.completedTime===s,k={0:r.b.SU,1:r.b.MO,2:r.b.TU,3:r.b.WE,4:r.b.TH,5:r.b.FR,6:r.b.SA};if("no"===c)return{};if("ebbinghaus_curve"===c)return{isForgettingCurve:!0};if("daily"===c)return{freq:r.b.DAILY,interval:1};if("weekdaily"===c)return{freq:r.b.DAILY,interval:1,tt_skip:"HOLIDAY,WEEKEND"};if("weekly"===c)return{freq:r.b.WEEKLY,interval:1};if("monthly"===c)return{freq:r.b.MONTHLY,interval:1,bymonthday:o.a.prefMoment(t||void 0).format("D")};if("yearly"===c)return{freq:r.b.YEARLY,interval:1};if("lunar_yearly"===c)return"30"===(new a.a).solar2lunar(t?new Date(t):new Date).lDay||u&&u.includes(-1)?{freq:r.b.YEARLY,interval:1,bymonthday:-1}:{freq:r.b.YEARLY,interval:1};if("advanced"===c){if("daily"===p)return{freq:r.b.DAILY,interval:h,tt_skip:m||null};if("weekly"===p)return{freq:r.b.WEEKLY,interval:h,tt_skip:m||null,wkst:k[g],byweekday:b?null:(l||[]).map((function(e){return r.b[e]})).filter((function(e){return null!=e}))};if("monthly"===p){if("date"===v)return u.length?{freq:r.b.MONTHLY,interval:h,tt_skip:m||null,bymonthday:b?null:u}:{freq:r.b.MONTHLY,interval:h,tt_skip:m||null,bymonthday:b?null:o.a.prefMoment(t||void 0).format("D")};if("week"===v&&d.n&&d.weekday){var O=d.n,T=d.weekday;return{freq:r.b.MONTHLY,interval:h,tt_skip:m||null,byweekday:b?null:r.b[T.toUpperCase()].nth(O)}}if("workday"===v&&f)return{freq:r.b.MONTHLY,interval:h,tt_workday:b?null:f,bymonthday:b?null:parseInt(f,10)}}if("yearly"===p){var S=d.weekday,E=d.n;return y&&E&&S?{freq:r.b.YEARLY,interval:h,bymonth:y,tt_skip:m||null,byweekday:r.b[S.toUpperCase()].nth(E)}:{freq:r.b.YEARLY,interval:h,tt_skip:m||null}}}return{}}({date:t,data:n});return"no"===n.kind?null:(u&&"number"==typeof c&&(u.count=c),u&&s&&(u.until=s),u&&Object.keys(u).length?u:null)},d=function(e,t,n){if(!e)return null;if(!t)return null;var r=t.split(";");if(e&&t.match(/LUNAR:/)&&t.match(/FREQ=YEARLY/)){var c=new a.a,s=new Date(o.a.prefMoment(e).format("YYYY-MM-DD")),u=c.solar2lunar(s);r=r.map((function(e){var t=e.split("=");return"BYMONTH"===t[0]?(t[1]=u.lMonth,t.join("=")):"BYMONTHDAY"===t[0]?(t[1]=u.lDay,t.join("=")):e}))}if(e&&n===i.A.defaultVal&&t.match(/BYMONTHDAY=/)&&t.match(/FREQ=MONTHLY/)){var l=o.a.prefMoment(e).format("D");r=r.map((function(e){var t=e.split("=");return"BYMONTHDAY"===t[0]?(t[1]=l,t.join("=")):e}))}return r.join(";")},f=function(e,t){var n=t&&t.match(/UNTIL=\d+T?\d+Z?/);if(n&&o.a.prefMoment(n[0].split("=")[1]).isBefore(o.a.prefMoment(e)))return!0;return!1}},421:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"g",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return l}));var r=n(368),a=function(e){return{type:r.c.SET_TODAY,data:e}},i=function(e){return{type:r.c.SET_MINUTE,data:e}},o=function(e){return{type:r.c.SET_FETCHING_STATE,data:e}},c=function(e){return{type:r.c.TOGGLE_TASK_COLLAPSE_STATUS,path:e}},s=function(e){return{type:r.c.CLEAR_TASK_COLLAPSE_STATUS,envPath:e}},u=function(e,t){return{type:r.c.SET_TASK_COLLAPSE_STATUS,envPath:e,ids:t}},l=function(e){return{type:r.c.SET_IS_NOTE_ENABLED,enabled:e}}},422:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s}));var r=n(396),a=n(320),i=n(319),o=n.n(i),c=Object(r.createSelectorCreator)(r.defaultMemoize,a.is),s=Object(r.createSelectorCreator)(r.defaultMemoize,o.a.isEqual)},425:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return y}));n(203),n(366),n(153),n(61),n(152),n(472),n(50),n(121),n(33),n(207),n(154),n(111),n(62),n(204),n(110);var r=n(338),a=n.n(r);n(378),n(98),n(386),n(431);n(479);var i;!function(e){e[e.FirstDay=1]="FirstDay",e[e.LastDay=2]="LastDay"}(i||(i={}));var o=n(474);n(344);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(){return window.userTimeZone||Intl.DateTimeFormat().resolvedOptions().timeZone}var d=/_[\w\d\$]*$/i,f="occurrenceDatesOfRRule",p={10:"occurrenceDatesOfRule"},h="occurrenceDatesOfRecurrentObject",m=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.a.defaultVal,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Set;u(this,e),this.repeatFlag=void 0,this.repeatFrom=void 0,this.startDate=void 0,this.completedTime=void 0,this.timeZoneId=void 0,this.exDates=void 0,this.repeatFlag=t,this.repeatFrom=n,this.startDate=r,this.completedTime=a,this.timeZoneId=i,this.exDates=c},g=function(){function e(){u(this,e)}return s(e,[{key:"now",value:function(){return b(new Date)}},{key:"nowWithZone",value:function(e){return b(new Date,e)}},{key:"getTimeInMillisByJs",value:function(e){var t=e.year,n=e.month,r=e.day,i=e.hour,o=e.minute,c=e.second,s=e.milliSecond,u=e.timeZoneId,l=new Date(t,n,r,i,o,c,s);return u?a.a.tz([t,n,r,i,o,c,s],u).toDate().getTime():l.getTime()}},{key:"getInstance",value:function(e,t,n,r,a,i,o,c){return O(e,t,n,r,a,i,o,c)}},{key:"getInstanceByTimeAndZone",value:function(e,t){return b(new Date(e),t)}},{key:"getDayOfWeek",value:function(e,t,n,r,i,o,c,s){return s&&a.a.tz(new Date(e,t,n,r,i,o,c),s).day()+1,a()(new Date(e,t,n,r,i,o,c)).day()+1}},{key:"getZoneOffset",value:function(e,t){return 60*-new Date(t).getTimezoneOffset()}},{key:"getCurrentTimeZoneID",value:function(){return Intl.DateTimeFormat().resolvedOptions().timeZone}},{key:"getGMTTimeZoneId",value:function(){return"Etc/UTC"}}]),e}(),v=new g;window.common.com.ticktick.task.DateConvert=g,window.common.com.ticktick.task.CalendarWrapperUtils.dateConvert=v;var y=new(function(){function e(){var t;u(this,e),this.kotlinInstance=void 0,this.holidayCheckable=void 0,this.kotlinInstance=(function(e,t){Object.entries(t).forEach((function(t){e[t[0]]=e[t[1]]})),Object.defineProperty(e,"holidayCheckable",{enumerable:!0,get:function(){return this.holidayCheckable_0}})}(t=new window.common.com.ticktick.recurrence.RecurrenceGenerator,function(e){var t={};for(var n in e){var r;if(!n.includes("holidayCheckable")){var a=null===(r=e[n])||void 0===r?void 0:r.length;if(n.includes(f)){if(!p[a])continue;t[p[a]]=n}else n.includes(h)||(t[n.replace(d,"")]=n)}}return t}(t)),t)}return s(e,[{key:"init",value:function(e){this.holidayCheckable=this.kotlinInstance.init({isWorkday:function(t){var n=t.timeZoneId?a.a.tz(new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.milliSecond),t.timeZoneId).format("YYYY-MM-DD"):a()(new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.milliSecond)).format("YYYY-MM-DD");return e.isWorkday(n)},isRest:function(t){var n=t.timeZoneId?a.a.tz(new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.milliSecond),t.timeZoneId).format("YYYY-MM-DD"):a()(new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.milliSecond)).format("YYYY-MM-DD");return e.isRest(n)}})}},{key:"occurrenceDateOfRecurrentObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.repeatFlag;if(null==n)return null;var r=this.occurrenceDatesOfRule(n,e.startDate,e.repeatFrom,e.exDates,void 0,void 0,e.completedTime,1,t,e.timeZoneId);return r.length>0?r[0]:null}},{key:"occurrenceDateOfRecurrentObjectFromDate",value:function(e,t){var n=this.occurrenceDatesOfRecurrentObjectFromDate(e,t);return n.length>0?n[0]:null}},{key:"occurrenceDatesOfRecurrentObjectFromDate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t.repeatFlag;return null==r?[]:this.occurrenceDatesOfRule(r,t.startDate,t.repeatFrom,t.exDates,e,void 0,t.completedTime,n,!1,t.timeZoneId)}},{key:"occurrenceDatesOfRecurrentObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=e.repeatFlag;return null==n?null:this.occurrenceDatesOfRule(n,e.startDate,e.repeatFrom,e.exDates,void 0,void 0,e.completedTime,t,!1,e.timeZoneId)}},{key:"betweenDatesOfRecurrentObject",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.startDate;if(null==a)return[];var i=e.repeatFlag;return null==i?[]:this.occurrenceDatesOfRule(i,a,e.repeatFrom,e.exDates,t,n,e.completedTime,0,r,e.timeZoneId,!0)}},{key:"occurrenceDatesOfRule",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.a.defaultVal,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set,i=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2,d=arguments.length>8&&void 0!==arguments[8]&&arguments[8],f=arguments.length>9?arguments[9]:void 0,p=arguments.length>10&&void 0!==arguments[10]&&arguments[10],h=f||l(),m=this.kotlinInstance.occurrenceDatesOfRule(e,b(t,h),n,Array.from(r).map((function(e){return b(a()(e).toDate(),h)})),b(i,h),b(c,h),b(s,h),u,d,h,p).toArray();return m=m.map((function(e){if(e){var t=e.year,n=e.month,r=e.day,i=e.hour,o=e.minute,c=e.second,s=e.milliSecond,u=e.timeZoneId;return u?a.a.tz([t,n,r,i,o,c,s],u).toDate():new Date(t,n,r,i,o,c,s)}return new Date}))}}]),e}());function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l(),n=k(e,t);if(!n)return null;var r=n.year,a=n.month,i=n.day,o=n.hour,c=n.minute,s=n.second,u=n.milliSecond,d=n.timeZoneId,f=void 0===d?"":d,p=O(r,a,i,o,c,s,u,f);return p}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e)return null;if(t){var n=a.a.tz(e,t);return{year:n.year(),month:n.month(),day:n.date(),hour:n.hour(),minute:n.minute(),second:n.second(),milliSecond:n.millisecond(),timeZoneId:t}}return{year:e.getFullYear(),month:e.getMonth(),day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),milliSecond:e.getMilliseconds(),timeZoneId:t}}function O(e,t,n,r,a,i,o){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:l(),s=new window.common.com.ticktick.task.TTCalendar,u=new Date(e,t,n,r,a,i,o);return s.year=u.getFullYear(),s.month=u.getMonth(),s.day=u.getDate(),s.hour=u.getHours(),s.minute=u.getMinutes(),s.second=u.getSeconds(),s.milliSecond=u.getMilliseconds(),s.timeZoneId=c,s}},426:function(e,t,n){"use strict";n.d(t,"e",(function(){return y})),n.d(t,"d",(function(){return b})),n.d(t,"a",(function(){return k})),n.d(t,"f",(function(){return O})),n.d(t,"b",(function(){return T})),n.d(t,"c",(function(){return S}));n(73),n(203),n(152),n(161),n(204);var r=n(320),a=n(453),i=n(326),o=n(339),c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{type:o.yc,listId:e,addOrders:t,removedOrders:n}},s=(n(331),n(318)),u=n(342),l=n(657),d=n(340),f=n(361),p=n(330),h=n(385);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){var t=[],n=e.get(0).get("projectId");e.reverse().forEach((function(e){var n=w(e);n&&t.push(n)})),e.forEach((function(e){var n=E(e);t=t.concat(n)})),i.a.dispatch(c(n,t)),D(n,t)},b=function(e){y(Object(r.List)([e]))},k=function(e,t,n,r,i){a.c((function(){return l.d(r)}),t,e,n,r,(function(e,t){return function(e,t){return{type:o.Fb,listId:e,orders:t}}(e,t)}),(function(e,t,n){return c(e,t,n)}),(function(e,t,n){return D(e,t,n)}),i)},O=function(e,t){var n={},r="#"+e,a="#"+t,c=l.b(r);if(c){var s=c.get("listId"),u=c.get("orders").toJS();n[s]||(n[s]={}),n[s][r]={changed:[],deleted:u},n[s][a]={changed:u,deleted:[]}}return i.a.dispatch(function(e,t){return{type:o.zc,oldProjectId:e,newProjectId:t}}(r,a)),n},T=function(e){var t={},n="#"+e,r=l.b(n);if(r){var a=r.get("listId"),c=r.get("orders").toJS();t[a]||(t[a]={}),t[a][n]={changed:[],deleted:c}}return i.a.dispatch(function(e){return{type:o.H,projectId:e}}(n)),t},S=function(e){if(e&&e.taskOrderByProject){var t,n=e.taskOrderByProject;i.a.dispatch((t=n,{type:o.Gb,data:t}))}},E=function(e){var t=[];Object(p.G)(e)&&Object(p.y)(e).forEach((function(n){if(n.get("startDate")&&0===n.get("status")){var r=w(Object(h.a)(n,e));r&&t.push(r)}}));return t},w=function(e){var t=e.get("isSubTaskModel"),n=l.d(e.get("projectId"));if(!n.size)return null;var r=e.get("id");return t?{id:r,order:a.g(n),type:s.I.subtask}:{id:r,order:a.h(n),type:s.I.task}},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={changed:t.map((function(e){return g({},e,{order:Object(u.d)(e.order)})})),deleted:n.map((function(e){return g({},e,{order:Object(u.d)(e.order)})}))};(r.changed.length||r.deleted.length)&&d.hb(e,r).then((function(){f.a.doSync()}))}},429:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.Uncompleted=0]="Uncompleted",e[e.Completed=2]="Completed"}(r||(r={}))},430:function(e,t,n){"use strict";n.d(t,"j",(function(){return k})),n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return E})),n.d(t,"c",(function(){return w})),n.d(t,"e",(function(){return D})),n.d(t,"h",(function(){return T})),n.d(t,"g",(function(){return A})),n.d(t,"f",(function(){return j})),n.d(t,"i",(function(){return _})),n.d(t,"d",(function(){return M}));n(73),n(120);var r=n(514),a=n(378),i=n(403),o=n(344),c=n(354),s=n(515),u=n(379),l=n(318);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}var k,O=function(){function e(){v(this,e),this[r.b]=!0}return b(e,[{key:"mutableCopy",value:function(){throw new Error("Must be implement in subclass")}}]),e}();!function(e){e[e.normal=0]="normal",e[e.archived=1]="archived"}(k||(k={}));var T,S=[k.normal],E=function(e){f(n,e);var t=h(n);function n(){var e;v(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).color="",e.iconRes="",e.createdTime=new Date,e.encouragement="",e.etag="",e.goal=0,e.id="",e.modifiedTime=new Date,e.name="",e.recordEnable=!1,e.reminders=[],e.repeatRule="",e.sortOrder=0,e.status=k.normal,e.step=0,e.totalCheckIns=0,e.maxStreak=0,e.currentStreak=0,e.type="",e.unit="",e.userId=0,e.syncStatus=i.a.NEW,e.isHabit=!0,e}return b(n,[{key:"updateWithHabit",value:function(e){var t,n;this.color=e.color,this.iconRes=e.iconRes,this.createdTime=e.createdTime,this.encouragement=e.encouragement,this.etag=e.etag,this.goal=e.goal,this.id=e.id,this.modifiedTime=e.modifiedTime,this.name=e.name,this.recordEnable=e.recordEnable,this.reminders=e.reminders,this.repeatRule=e.repeatRule,this.sortOrder=e.sortOrder,this.status=e.status,this.step=e.step,this.totalCheckIns=e.totalCheckIns,this.maxStreak=null!==(t=e.maxStreak)&&void 0!==t?t:this.maxStreak,this.currentStreak=null!==(n=e.currentStreak)&&void 0!==n?n:this.currentStreak,this.type=e.type,this.unit=e.unit,this.userId=e.userId,this.syncStatus=e.syncStatus}},{key:"fixGoal",value:function(){"Boolean"===this.type&&(this.goal=1)}},{key:"mutableCopy",value:function(){var e=new n;return e.updateWithHabit(this),e}},{key:"fromJson",value:function(e){var t,n,r=e.color,a=e.iconRes,i=e.createdTime,c=e.encouragement,s=e.etag,u=e.goal,l=e.id,d=e.modifiedTime,f=e.name,p=e.recordEnable,h=e.reminders,m=e.repeatRule,g=e.sortOrder,v=e.status,y=e.step,b=e.type,k=e.unit,O=e.userId,T=e.totalCheckIns;return this.color=null!=r?r:this.color,this.iconRes=null!=a?a:this.iconRes,this.createdTime=null!==(t=o.a.parseUTCString(i))&&void 0!==t?t:this.createdTime,this.encouragement=null!=c?c:this.encouragement,this.etag=null!=s?s:this.etag,this.goal=null!=u?u:this.goal,this.id=null!=l?l:this.id,this.modifiedTime=null!==(n=o.a.parseUTCString(d))&&void 0!==n?n:this.modifiedTime,this.name=null!=f?f:this.name,this.recordEnable=null!=p?p:this.recordEnable,this.reminders=null!=h?h:this.reminders,this.repeatRule=null!=m?m:this.repeatRule,this.sortOrder=null!=g?g:this.sortOrder,this.status=null!=v?v:this.status,this.step=null!=y?y:this.step,this.type=null!=b?b:this.type,this.unit=null!=k?k:this.unit,this.userId=null!=O?O:this.userId,this.totalCheckIns=null!=T?T:this.totalCheckIns,this}},{key:"toJsonServer",value:function(){var e=this.color,t=this.iconRes,n=this.createdTime,r=this.encouragement,a=this.etag,i=this.goal,c=this.id,s=this.modifiedTime,u=this.name,l=this.recordEnable,d=this.reminders,f=this.repeatRule,p=this.sortOrder,h=this.status,m=this.step,g=this.totalCheckIns,v=this.type,y=this.unit;return{color:e,iconRes:t,createdTime:o.a.formatToServerDate(n),encouragement:r,etag:a,goal:i,id:c,modifiedTime:o.a.formatToServerDate(s),name:u,recordEnable:l,reminders:d,repeatRule:f,sortOrder:p,status:h,step:m,totalCheckIns:g,type:v,unit:y}}},{key:"toJson",value:function(){var e=this.color,t=this.iconRes,n=this.createdTime,r=this.encouragement,a=this.etag,i=this.goal,c=this.id,s=this.modifiedTime,u=this.name,l=this.recordEnable,d=this.reminders,f=this.repeatRule,p=this.sortOrder,h=this.status,m=this.step,g=this.totalCheckIns,v=this.maxStreak,y=this.currentStreak,b=this.type,k=this.unit,O=this.userId,T=this.syncStatus;return{color:e,iconRes:t,createdTime:o.a.formatToServerDate(n),encouragement:r,etag:a,goal:i,id:c,modifiedTime:o.a.formatToServerDate(s),name:u,recordEnable:l,reminders:d,repeatRule:f,sortOrder:p,status:h,step:m,totalCheckIns:g,maxStreak:v,currentStreak:y,type:b,unit:k,userId:O,syncStatus:T}}}],[{key:"createDefault",value:function(){var e=new n;return e.id=Object(c.a)(),e.iconRes="habit_daily_check_in",e.name="",e.color=l.n.habit_daily_check_in.color,e.repeatRule=new s.a({freq:a.b.WEEKLY,byweekday:[a.b.SU,a.b.MO,a.b.TU,a.b.WE,a.b.TH,a.b.FR,a.b.SA]}).toICalString(),e.unit="Count",e.goal=1,e.type="Boolean",e.recordEnable=!1,e.sortOrder=Object(u.k)(),e}}]),n}(O),w=function(e){f(n,e);var t=h(n);function n(){var e;v(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).checkinStamp=0,e.checkinTime=null,e.goal=0,e.habitId="",e.id="",e.status=M.unlabeled,e.value=0,e.syncStatus=i.a.NEW,e}return b(n,[{key:"fromJson",value:function(e){var t=e.checkinStamp,n=e.checkinTime,r=e.goal,a=e.habitId,i=e.id,c=e.status,s=e.value;return this.checkinStamp=null!=t?t:this.checkinStamp,this.checkinTime=o.a.parseUTCString(n),this.goal=null!=r?r:this.goal,this.habitId=null!=a?a:this.habitId,this.id=null!=i?i:this.id,this.status=null!=c?c:this.status,this.value=null!=s?s:this.value,this}},{key:"toJsonServer",value:function(){var e=this.checkinStamp,t=this.checkinTime,n=this.goal,r=this.habitId,a=this.id,i=this.status,c=this.value;return{checkinStamp:e,checkinTime:o.a.formatToServerDate(t),goal:n,habitId:r,id:a,status:i,value:c}}},{key:"toJson",value:function(){var e=this.checkinStamp,t=this.checkinTime,n=this.goal,r=this.habitId,a=this.id,i=this.status,c=this.value,s=this.syncStatus;return{checkinStamp:e,checkinTime:o.a.formatToServerDate(t),goal:n,habitId:r,id:a,status:i,value:c,syncStatus:s}}},{key:"mutableCopy",value:function(){var e=new n;return e.updateWithHabitCheckin(this),e}},{key:"updateWithHabitCheckin",value:function(e){this.checkinStamp=e.checkinStamp,this.goal=e.goal,this.value=e.value,this.habitId=e.habitId,this.id=e.id,this.status=e.status,this.syncStatus=e.syncStatus,this.checkinTime=e.checkinTime}},{key:"fixStatus",value:function(){var e=this.status,t=this.value>=this.goal;e===M.undone?this.status=e:this.status=t?M.done:M.unlabeled}},{key:"fixCheckinTime",value:function(){Object(u.t)(this.status,this.value,this.goal)?null==this.checkinTime&&(this.checkinTime=new Date):this.checkinTime=null}},{key:"polishValue",value:function(){this.value=Math.round(100*this.value)/100}}],[{key:"createByHabitTask",value:function(e,t){var r=new n;switch(r.checkinStamp=e.checkinStamp,t>=0?(t>=e.goal?(r.checkinTime=new Date,r.goal=e.goal,r.status=M.done):(r.goal=e.habitGoal,r.status=M.unlabeled),r.value=t):(-1===t&&(r.status=M.undone),r.value=e.value,r.goal=e.goal),r.habitId=e.habitId,r.id=e.checkinId,e.taskType){case T.habitTask:r.syncStatus=i.a.NEW;break;case T.habitCheckinTask:r.syncStatus=i.a.UPDATED}return r}}]),n}(O),D=function(e){f(n,e);var t=h(n);function n(){var e;v(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).stamp=0,e.habitId="",e.id="",e.content="",e.emoji=0,e.syncStatus=i.a.NEW,e}return b(n,[{key:"updateWithHabitRecord",value:function(e){this.stamp=e.stamp,this.habitId=e.habitId,this.id=e.id,this.content=e.content,this.emoji=e.emoji,this.syncStatus=e.syncStatus}},{key:"mutableCopy",value:function(){var e=new n;return e.updateWithHabitRecord(this),e}},{key:"fromJson",value:function(e){var t=e.stamp,n=e.habitId,r=e.id,a=e.content,i=e.emoji;return this.stamp=null!=t?t:this.stamp,this.habitId=null!=n?n:this.habitId,this.id=null!=r?r:this.id,this.content=null!=a?a:this.content,this.emoji=null!=i?i:this.emoji,this}},{key:"toJsonServer",value:function(){return{stamp:this.stamp,habitId:this.habitId,id:this.id,content:this.content,emoji:this.emoji}}},{key:"toJson",value:function(){return{stamp:this.stamp,habitId:this.habitId,id:this.id,content:this.content,emoji:this.emoji,syncStatus:this.syncStatus}}}],[{key:"createByHabitTask",value:function(e){var t=new n;return t.stamp=e.checkinStamp,t.habitId=e.habitId,t}},{key:"createByHabitRecord",value:function(e,t,r){var a,i,o=new n;return o.id=e.id||Object(c.a)()||"",o.stamp=e.stamp,o.habitId=e.habitId,o.content=null!==(a=null!=t?t:e.content)&&void 0!==a?a:o.content,o.emoji=null!==(i=null!=r?r:e.emoji)&&void 0!==i?i:o.emoji,o}}]),n}(O);!function(e){e[e.habitTask=1]="habitTask",e[e.habitCheckinTask=2]="habitCheckinTask"}(T||(T={}));var j,_,C,I,M,A=function(){function e(){v(this,e),this.checkinStamp=0,this.checkinTime=null,this.completedTime=null,this.goal=0,this.habitId="",this.checkinId="",this.value=0,this.checkinStatus=M.unlabeled,this.sortOrder=0,this.status=0,this.title="",this.color="",this.isHabit=!0,this.reminders=[],this.step=0,this.type="",this.unit="",this.iconRes="",this.habitGoal=0,this.currentStreak=0,this.recordEnable=!0,this.id="",this.isAllDay=!0,this.startDate=null,this.dueDate=null,this.taskType=T.habitTask,this.habit=new E,this.habitCheckin=new w}return b(e,[{key:"setCheckinStamp",value:function(e){this.checkinStamp=e;var t=Math.floor(this.checkinStamp/1e4),n=Math.floor((this.checkinStamp-1e4*t)/100),r=Math.floor(this.checkinStamp-1e4*t-100*n),a=o.a.formatToServerDate(new Date(t,n-1,r));this.startDate=a,this.dueDate=a}},{key:"updateWithHabitTask",value:function(e){var t=e.checkinStamp,n=e.checkinTime,r=e.completedTime,a=e.goal,i=e.habitId,o=e.checkinId,c=e.value,s=e.checkinStatus,u=e.sortOrder,l=e.status,d=e.title,f=e.color,p=e.isHabit,h=e.reminders,m=e.step,g=e.type,v=e.unit,y=e.iconRes,b=e.habitGoal,k=e.currentStreak,O=e.id,T=e.isAllDay,S=e.startDate,E=e.dueDate,w=e.taskType,D=e.recordEnable;this.checkinStamp=t,this.checkinTime=n,this.completedTime=r,this.goal=a,this.habitId=i,this.checkinId=o,this.value=c,this.checkinStatus=s,this.sortOrder=u,this.status=l,this.title=d,this.color=f,this.isHabit=p,this.reminders=h,this.step=m,this.type=g,this.unit=v,this.iconRes=y,this.habitGoal=b,this.currentStreak=k,this.id=O,this.isAllDay=T,this.startDate=S,this.dueDate=E,this.taskType=w,this.recordEnable=D}},{key:"mutableCopy",value:function(){var t=new e;return t.updateWithHabitTask(this),t}},{key:"originHabitInstance",get:function(){return this.habit}},{key:"originCheckinInstance",get:function(){return this.habitCheckin}}],[{key:"createInstance",value:function(t,n,r){var a=new e,i=+(new Date).ap.YYYYMMDD;if(a.habit=t,null!=n)a.habitCheckin=n,a.checkinStamp=n.checkinStamp,a.checkinTime=o.a.formatToServerDate(n.checkinTime),a.completedTime=o.a.formatToServerDate(n.checkinTime),a.habitId=n.habitId,a.checkinId=n.id,a.value=n.value,a.checkinStatus=n.status,n.checkinStamp===i?(n.status!==M.done||"Real"===t.type?a.goal=t.goal:a.goal=n.goal,a.id=n.habitId):(a.goal=n.goal,a.id=n.id),a.taskType=T.habitCheckinTask;else{a.checkinStamp=i,a.habitId=t.id;var s=Object(c.a)();a.id=t.id,a.checkinId=s,a.value=0,a.goal=t.goal}r&&(a.checkinStamp=r),a.currentStreak=t.currentStreak,a.sortOrder=t.sortOrder,a.status=t.status,a.title=t.name,a.color=t.color,a.reminders=t.reminders,a.step=t.step,a.type=t.type,a.unit=t.unit,a.iconRes=t.iconRes,a.habitGoal=t.goal,a.recordEnable=t.recordEnable;var u=Math.floor(a.checkinStamp/1e4),l=Math.floor((a.checkinStamp-1e4*u)/100),d=Math.floor(a.checkinStamp-1e4*u-100*l),f=o.a.formatToServerDate(new Date(u,l-1,d));return a.startDate=f,a.dueDate=f,a}}]),e}();!function(e){e[e.manual=-1]="manual",e[e.all=0]="all"}(j||(j={})),function(e){e[e.autoTarget=1]="autoTarget",e[e.manualTarget=2]="manualTarget",e[e.allTarge=3]="allTarge",e[e.nonTarget=4]="nonTarget"}(_||(_={})),function(e){e[e.auto=1]="auto",e[e.manual=2]="manual",e[e.reset=3]="reset"}(C||(C={})),function(e){e[e.smiley=50]="smiley",e[e.smile=40]="smile",e[e.general=30]="general",e[e.sad=20]="sad",e[e.cry=10]="cry"}(I||(I={})),function(e){e[e.unlabeled=0]="unlabeled",e[e.undone=1]="undone",e[e.done=2]="done"}(M||(M={}))},431:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n(73),n(153),n(50),n(33),n(143),n(154),n(112),n(62),n(146);var r=n(378),a=n(338),i=n.n(a),o=n(98),c=n.n(o),s=n(386);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=function e(t,n,r){l(this,e),this.cycle=0,this.count=void 0,this.until=void 0,this.cycle=null!=t?t:this.cycle,this.count=n,this.until=r},f=function(){function e(t){if(l(this,e),this.rruleOptions={},this.forgettingCurveRule=void 0,this.completedRepeatCount=-1,this.isLunar=!1,this.ttSkip=null,this.ttWorkday=null,!t)throw new Error("parse failed: iCal is null");try{"string"==typeof t?this.createRuleFromString(t):this.createRuleFromOptions(t)}catch(e){c.a.error("Parsing rule error",e),this.createRuleFromString("RRULE:FREQ=DAILY;INTERVAL=1")}}var t,n,a;return t=e,(n=[{key:"toString",value:function(){var e=this.forgettingCurveRule,t=this.rruleOptions;if(e){var n="".concat("ERULE",":").concat("NAME","=").concat("FORGETTINGCURVE",";").concat("CYCLE","=").concat(e.cycle);return e.count?n+=";".concat("COUNT","=").concat(e.count):e.until&&(n+=";".concat("UNTIL","=").concat(e.until)),n}if(t){var a=new r.a(t).toString(),i=(a=a.replace(/BYDAY=\+/,"BYDAY=")).match(/(UNTIL=[\d]*)T[\d]*Z/);return i&&i.length>1&&(a=a.replace(/UNTIL=[\d]*(T[\d]*Z)/,i[1])),this.isLunar&&(a=a.replace(/RRULE:/,"LUNAR:")),this.ttSkip&&(a+=";".concat("TT_SKIP","=").concat(this.ttSkip)),this.ttWorkday&&(a+=";".concat("TT_WORKDAY","=").concat(this.ttWorkday)),a}return""}},{key:"createRuleFromOptions",value:function(e){var t=e.count,n=e.until;if(e.isForgettingCurve){var r=new d(0);n?r.until=Object(s.a)(i.a.utc(n)):t&&(r.count=t),this.forgettingCurveRule=r}else{var a={};a.freq=e.freq,a.dtstart=e.dtstart,a.interval=e.interval,a.wkst=e.wkst,a.count=e.count,a.tzid=e.tzid,a.until=e.until,a.bysetpos=e.bysetpos,a.bymonth=e.bymonth,a.bymonthday=e.bymonthday,a.bynmonthday=e.bynmonthday,a.byyearday=e.byyearday,a.byweekno=e.byweekno,a.byweekday=e.byweekday,a.bynweekday=e.bynweekday,a.byhour=e.byhour,a.byminute=e.byminute,a.bysecond=e.bysecond,a.byeaster=e.byeaster,this.rruleOptions=a;var o=e.tt_skip,c=e.tt_workday;this.ttSkip=null!=o?o:null,this.ttWorkday=null!=c?c:null}}},{key:"createRuleFromString",value:function(e){var t=e;if(!t)throw new Error("parse failed: iCalString is null");if(t.includes("TT_SKIP")){var n=Object(s.e)("TT_SKIP",t);t=Object(s.i)("TT_SKIP",t),this.ttSkip=n}if(t.includes("TT_WORKDAY")){var a=Object(s.e)("TT_WORKDAY",t);a&&a.includes("-1")?this.ttWorkday="-1":a&&a.includes("1")&&(this.ttWorkday="1"),t=Object(s.i)("TT_WORKDAY",t)}if(t.startsWith("ERULE")){var i=Object(s.e)("NAME",t);if("FORGETTINGCURVE"===(null==i?void 0:i.toLocaleUpperCase())){var o=Object(s.c)("CYCLE",t),c=Object(s.c)("UNTIL",t),u=Object(s.c)("COUNT",t),l=new d(o);-1!==c&&(l.until=c),-1!==u&&(l.count=u),this.forgettingCurveRule=l}}else t.includes("LUNAR")&&(t=t.replace("LUNAR","RRULE"),this.isLunar=!0),this.rruleOptions=r.a.parseString(t)}},{key:"byMonth",get:function(){var e;return null!==(e=this.rruleOptions.bymonth)&&void 0!==e?e:null},set:function(e){this.rruleOptions.bymonth=e}},{key:"byMonthDay",get:function(){var e;return null!==(e=this.rruleOptions.bymonthday)&&void 0!==e?e:null},set:function(e){this.rruleOptions.bymonthday=e}},{key:"byWeekday",get:function(){var e;return null!==(e=this.rruleOptions.byweekday)&&void 0!==e?e:null},set:function(e){this.rruleOptions.byweekday=e}},{key:"until",get:function(){return this.forgettingCurveRule?this.forgettingCurveRule.until:this.rruleOptions.until?Object(s.a)(i.a.utc(this.rruleOptions.until)):null}},{key:"untilUTCDate",get:function(){if(this.forgettingCurveRule&&this.forgettingCurveRule.until){var e=i()(Object(s.b)(this.forgettingCurveRule.until));return new Date(Date.UTC(e.year(),e.month(),e.date()))}return this.rruleOptions.until}},{key:"count",get:function(){return this.forgettingCurveRule?this.forgettingCurveRule.count:this.rruleOptions.count}},{key:"interval",get:function(){return this.rruleOptions.interval}},{key:"freq",get:function(){return this.rruleOptions.freq}},{key:"isSkipLegalRestDay",get:function(){var e,t;return null!==(e=null===(t=this.ttSkip)||void 0===t?void 0:t.includes("HOLIDAY"))&&void 0!==e&&e}},{key:"isSkipWeekend",get:function(){var e,t;return null!==(e=null===(t=this.ttSkip)||void 0===t?void 0:t.includes("WEEKEND"))&&void 0!==e&&e}},{key:"isMonthLastWorkDayRepeat",get:function(){var e,t;return null!==(e=null===(t=this.ttWorkday)||void 0===t?void 0:t.includes("-1"))&&void 0!==e&&e}},{key:"isMonthFirstWorkDayRepeat",get:function(){var e,t;return null!==(e=null===(t=this.ttWorkday)||void 0===t?void 0:t.includes("1"))&&void 0!==e&&e}}])&&u(t.prototype,n),a&&u(t,a),e}()},432:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"k",(function(){return i})),n.d(t,"l",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"j",(function(){return u})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return m}));var r=n(368),a=function(){return{type:r.g.SET_SMART_SETTINGS}},i=function(e){return{type:r.g.UPDATE_SMART_ORDERS,orders:e}},o=function(e,t){return{type:r.g.UPDATE_SMART_STATUS,id:e,status:t}},c=function(e){return{type:r.g.SET_INBOX,data:e}},s=function(e){return{type:r.g.SET_LISTS,data:e}},u=function(e,t){return{type:r.g.UPDATE_LIST,id:e,data:t}},l=function(e,t){return{type:r.g.UPDATE_LIST_SORTTYPE,id:e,sortType:t}},d=function(e,t){return{type:r.g.UPDATE_LIST_ORDER,id:e,order:t}},f=function(e,t){return{type:r.g.UPDATE_LIST_GROUPID,id:e,groupId:t}},p=function(e){return{type:r.g.SET_LIST_ORDERS,data:e}},h=function(e,t){return{type:r.g.AFTER_COMMIT_PROJECTS,id2etag:e,id2error:t}},m=function(e){return{type:r.g.AFTER_PULL_PROJECT_TASKS,projectId:e}}},439:function(e,t,n){"use strict";n.d(t,"c",(function(){return K})),n.d(t,"b",(function(){return G})),n.d(t,"d",(function(){return z})),n.d(t,"a",(function(){return te})),n.d(t,"e",(function(){return ue})),n.d(t,"g",(function(){return be})),n.d(t,"f",(function(){return ke})),n.d(t,"h",(function(){return Oe}));n(73),n(205),n(173),n(208),n(203),n(366),n(153),n(119),n(61),n(152),n(209),n(155),n(380),n(156),n(346),n(356),n(144),n(50),n(145),n(33),n(143),n(207),n(154),n(111),n(112),n(62),n(158),n(174),n(204),n(110);var r=n(396),a=n(320),i=n(319),o=n.n(i),c=n(338),s=n.n(c),u=n(402),l=n(422),d=n(326),f=n(352),p=n(451),h=n(349),m=n(401),g=n(333),v=n(323),y=n(395),b=(n(327),n(328)),k=n(330),O=n(385),T=n(457),S=(n(397),n(341)),E=(n(461),n(645),n(405),n(379)),w=n(329),D=(n(353),n(400)),j=n(359),_=n(482),C=n(646),I=n(547),M=n(430),A=n(365),x=n(344);function R(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N={today:{},tomorrow:{},next7days:{},later:{},overdue:{}},L=function(e){return e.preference.get("showChecklist")?"show":"hide"},U=function(e){return e.globalState.get("today")},F=function(e){return e.tasks.taskList},H=function(e){return e.tags},B=function(e){return e.preference.get("calendarViewConf").showCompleted},Y=Object(r.createSelector)([H,function(e,t){var n=t.tag;return n?n.get("name"):""}],(function(e,t){return t?e.filter((function(e){return e.get("parent")===t})).map((function(e){return e.get("name")})).unshift(t).toArray():[]})),W=Object(r.createSelector)([function(e){return E.g(e)}],(function(e){return e.filter((function(e){return e.syncStatus!==A.h.DELETED}))||[]})),K=function(e){return e.habit.checkins},G=(Object(l.b)([F],(function(e){return e.filter((function(e){return e.get("parentId")}))})),Object(r.createSelector)([W,U],(function(e){return e.filter((function(e){return M.a.includes(e.status)}))}))),V=(Object(r.createSelector)([E.u,W],(function(e,t){return e?t.filter((function(e){return M.a.includes(e.status)})).sort(j.a.habit):[]})),Object(r.createSelector)([E.u,W],(function(e,t){return e?t.filter((function(e){return!M.a.includes(e.status)})).sort(j.a.archivedHabit):[]})),Object(r.createSelector)([E.u,E.w,G,E.n,K],(function(e,t,n,r){if(e&&t){var i=E.l(n,r);return Object(C.a)(i)}return a.List([])}))),z=Object(r.createSelector)([E.u,E.w,G,E.n,K],(function(e,t,n,r){return e&&t?E.l(n,r).filter((function(e){return e.value<e.goal})).length:0})),Z=(Object(r.createSelector)([E.u,E.v,B,G,E.n,K],(function(e,t,n,r,i){return e&&t?Object(C.a)(E.d(r,n,i)):a.List([])})),Object(_.c)()),q=Object(_.e)(),J=Object(_.d)(),X=Object(_.f)(),Q=Object(l.b)([Z,q],(function(e,t){return e.concat(t)})),ee=Object(l.b)([J,X],(function(e,t){return e.concat(t)})),te=function(){Object.keys(N).forEach((function(e){N[e]={}}))},ne=function(e,t){return t.project},re=function(e){return function(t,n){return n[e]}},ae=function(e){return e.projects.projectList},ie=function(e){return e.projects.projectInbox},oe=(Object(r.createSelector)([F,ee,ae,ie],(function(e,t,n,r){var a=n.push(r),i=we(a),o=De(a),c=new Map(a.map((function(e){return[e.get("id"),e]})));return e.concat(t).filter((function(e){var t=c.get(e.get("projectId"));return(!k.ab(e)||!Oe(e))&&!je(e,t,o,i)}))})),Object(r.createSelector)([F,ae,ie],(function(e,t,n){var r=g.b({sort:!0,withInbox:!0,available:"edit"}).toArray(),a=new Map(r.map((function(e){return[e.get("id"),e]})));return e.filter((function(e){return null!=a.get(e.get("projectId"))}))})),Object(r.createSelector)([ae,ie],(function(e,t){return e.push(t)})),Object(r.createSelector)([H],(function(e){return e.map((function(e){return e.get("name")})).toArray()})),Object(r.createSelector)([function(e){return e.tasks.activeSelectedTaskIds.get("selected")}],(function(e){return e})),Object(r.createSelector)([F,ae,L],(function(e,t,n){var r=De(t),i=a.List();return e.filter((function(e){var t=_e(e,r);return"show"!==n||t||e.get("status")||!k.G(e)||e.get("items").forEach((function(t){if(O.g(t)){var n=O.a(t,e);i=i.push(n)}})),e.get("status")&&e.get("completedTime")&&!t})).concat(i)})),Object(r.createSelector)([F,ae],(function(e,t){var n=De(t);return e.filter((function(e){return!_e(e,n)}))}))),ce=(Object(r.createSelector)([F,ee,ae,ie,L,V,U],(function(e,t,n,r,i,o){var c=n.push(r),s=we(c),u=De(c),l="show"===i?se("today",ce(e,c,s,u)):a.List(),d=new Map(c.map((function(e){return[e.get("id"),e]}))),f=e.concat(t).filter((function(e){var t=d.get(e.get("projectId"));return(!k.ab(e)||!Oe(e))&&(!je(e,t,u,s)&&((!xe(e)||!Ue(e))&&(Pe(e)?0===k.m(e):!Ne(e)&&k.z(e)<=0)))})).concat(l).concat(o);return Object(w.l)(f,!1)})),Object(r.createSelector)([F,ee,ae,ie,L,U],(function(e,t,n,r,i){var o=n.push(r),c=we(o),s=De(o),u="show"===i?se("tomorrow",ce(e,o,c,s)):a.List(),l=new Map(o.map((function(e){return[e.get("id"),e]}))),d=e.concat(t).filter((function(e){var t=l.get(e.get("projectId"));if(je(e,t,s,c))return!1;if(Ne(e))return!1;var n=k.z(e),r=k.o(e);return 1===n||n<=0&&r>=1})).concat(u);return Object(w.l)(d,!1)})),Object(r.createSelector)([F,ee,ae,ie,L,V,U],(function(e,t,n,r,i,o){var c=n.push(r),s=we(c),u=De(c),l="show"===i?se("week",ce(e,c,s,u)):a.List(),d=new Map(c.map((function(e){return[e.get("id"),e]}))),f=e.concat(t).filter((function(e){var t=d.get(e.get("projectId"));return(!k.ab(e)||!Oe(e))&&(!je(e,t,u,s)&&((!xe(e)||!Ue(e))&&(Pe(e)?0===k.m(e):!Ne(e)&&k.z(e)<7)))})).concat(l).concat(o);return Object(w.l)(f,!1)})),Object(r.createSelector)([F,ne],(function(e,t){return e.filter((function(e){return e.get("projectId")===t.get("id")}))})),Object(l.b)([F,Y,ae],(function(e,t,n){var r=De(n);if(!t||0===t.length)return a.List();var i=e.filter((function(e){return!r.has(e.get("projectId"))})).filter((function(e){var n=e.get("tags");return!!n&&n.findIndex((function(e){return e&&t.includes(e.toLowerCase())}))>-1}));return Object(w.l)(i,!1)})),Object(r.createSelector)([Q,B],(function(e,t){return e.filter((function(e){return!!t||(k.o(e)>=0||k.z(e)>=0)}))})),Object(r.createSelector)([ne,F,ee,ae,ie,L],(function(e,t,n,r,i,o){var c=r.push(i),s=we(c),u=De(c),l=e.get("date"),d="show"===o?se("oneDay",ce(t,c,s,u),{date:l}):a.List(),f=new Map(c.map((function(e){return[e.get("id"),e]})));return t.concat(n).filter((function(e){var t=f.get(e.get("projectId"));return!je(e,t,u,s)&&k.W(e,l)})).concat(d)})),Object(r.createSelector)([F,ae,ne],(function(e,t,n){var r=function(e,t){return e.filter((function(e){return e.get("groupId")===t.get("id")}))}(t,n).map((function(e){return e.get("id")}));return e.filter((function(e){var t=e.get("projectId");return new Set(r).has(t)}))})),Object(r.createSelector)([F,ae,ie],(function(e,t,n){var r=t.push(n),a=De(r),i=new Map(r.map((function(e){return[e.get("id"),e]}))),o=e.filter((function(e){if(Re(e))return!1;if(_e(e,a))return!1;var t=i.get(e.get("projectId"));return Ie(e,t)}));return Object(w.l)(o,!1)})),Object(r.createSelector)([F,ee,ne,L,ae,ie,H],(function(e,t,n,r){var i,o=p.h(n),c=e;o&&(c=c.concat(t)),"show"===r&&p.a(n)&&e.forEach((function(e){!Pe(e)&&k.G(e)&&e.get("items").forEach((function(t){if(O.h(t)){var n=O.a(t,e);c=c.push(n)}}))}));var s=a.List();return p.e(n)?(i=p.c(n),s=c.filter((function(e){return le(e,i)}))):(i=p.g(n),s=c.filter((function(e){return ve(e,i)}))),{renderResult:Object(w.l)(s,!1),countResult:s.filter((function(e){return!Te(e)}))}})),function(e,t,n,r){var a=new Map(t.map((function(e){return[e.get("id"),e]})));return e.filter((function(e){if(_e(e,r))return!1;var t=a.get(e.get("projectId"));return!(Ce(e,n)&&!Ie(e,t))&&(!Pe(e)&&k.G(e))}))}),se=function(e,t,n){var r=Fe[{today:"isTodayAndOverdueSubTask",tomorrow:"isTomorrowSubTask",week:"isWeekAndOverdueSubTask",oneDay:"isOneDaySubTask",hasTime:"isTimedSubTask"}[e]],i=function(t,n){if(!O.g(t))return!1;switch(e){case"today":case"week":return 0===k.m(t);case"tomorrow":return 1===k.z(t);case"oneDay":return 0===k.z(t,n.date);default:return!0}},o=a.List();return t.forEach((function(e){k.G(e)&&e.get("items").forEach((function(t){if((O.f(t)?i:r)(t,n)){var a=O.a(t,e);o=o.push(a)}}))})),o},ue=function(e,t){var n;return p.e(t)?(n=p.c(t),le(e,n)):(n=p.g(t),ve(e,n))},le=function(e,t){var n=e.get("projectId");if(!k.ab(e)){var r=g.n(n);if(!r||h.h(r))return!1}var a=de(e,t),i=fe(e,t),o=pe(e,t),c=he(e,t),s=me(e,t);return a&&i&&o&&c&&s},de=function(e,t){return!t.list&&!t.group||ye._inAdvanceListOrGroup(e,t)},fe=function(e,t){return!t.tag||ye._inAdvanceTag(e,t.tag)},pe=function(e,t){if(!t.dueDate)return!0;var n=!1,r={overdue:"overDueForRule",today:"todayForRule",tomorrow:"tomorrowForRule",thisweek:"thisweekForRule",nextweek:"nextweekForRule",thismonth:"thismonthForRule"};if(Ne(e))return t.dueDate.includes("nodue");for(var a=0;a<t.dueDate.length;a++){var i,o=t.dueDate[a],c=r[o];if("nodue"!==o)if(c){if(ge[c].call(void 0,e)){n=!0;break}}else if(o.match(/\d+days$/)){if(i=o.match(/\d+/)[0],ge.nextNdaysForRule(e,i)){n=!0;break}}else if(o.match(/\d+dayslater$/)&&(i=o.match(/\d+/)[0],ge.ndaysLaterForRule(e,i))){n=!0;break}}return n},he=function(e,t){return!t.priority||!k.fb(e)&&-1!==t.priority.indexOf(e.get("priority")+"")},me=function(e,t){var n=S.a("userId"),r=e.get("assignee");if(t.assignee){if(-1===t.assignee.indexOf("noassignee")||r&&-1!==r){if(r&&-1!==r){var a=r===n?"me":"other";return-1!==t.assignee.indexOf(a)}return!1}return!0}return!0},ge={overDueForRule:function(e){var t=k.o(e);if(null!=t)return!k.fb(e)&&t<0;var n=k.z(e);return null!=n&&(!k.fb(e)&&n<0)},todayForRule:function(e){return k.W(e,new Date)},tomorrowForRule:function(e){var t=s()().add(1,"day").toDate();return k.W(e,t)},thisweekForRule:function(e){var t=s()().startOf("week").toDate(),n=s()().endOf("week").toDate();return k.X(e,t,n)},nextweekForRule:function(e){var t=s()().add(7,"day").startOf("week").toDate(),n=s()().add(7,"day").endOf("week").toDate();return k.X(e,t,n)},thismonthForRule:function(e){var t=s()().startOf("month").toDate(),n=s()().endOf("month").toDate();return k.X(e,t,n)},nextNdaysForRule:function(e,t){var n=s()().startOf("day").toDate(),r=s()().add(t-1,"day").endOf("day").toDate();return k.X(e,n,r)},ndaysLaterForRule:function(e,t){return k.z(e)>=t||k.o(e)>=t}},ve=function(e,t){var n=!0;if(!k.ab(e)){var r=e.get("projectId"),a=g.n(r);if(!a||h.h(a))return!1}for(var i=function(e,t,n){var r=n.logic||"and",a=n.condition,i=n.data,o="_inAdvance"+a.slice(0,1).toUpperCase()+a.slice(1),c=n.innerLogic,s=ye[o].call(void 0,t,i,c);if(k.kb(t)&&"dueDate"===a&&!s)return!1;switch(r){case"and":return Boolean(e)&&Boolean(s);case"or":return Boolean(e)||Boolean(s);case"not":return Boolean(e)&&!s}},o=0;o<t.filterList.length;o++){var c=t.filterList[o-1],s=t.filterList[o];if(n=i(n,e,s),k.kb(e)&&(c&&"dueDate"===c.condition||s&&"dueDate"===s.condition)&&!n){n=!1;break}}return n},ye={_inAdvanceListOrGroup:function(e,t,n){var r=e.get("projectId"),a=g.n(r);if(n=n||"or",k.ab(e))return!!o.a.isEmpty(t.list)||("not"===n?!t.list.includes(v.g):t.list.includes(v.g));if(a&&h.h(a))return!1;var i=Object.assign([],t.list)||[],c=t.group||[];c.length&&(c.forEach((function(e){var t=y.a(e);if(!m.b(t)){var n,r=g.r(e).toJS().map((function(e){return e.id}));(n=i).push.apply(n,R(r))}})),i=o.a.flattenDeep(i));var s=function(){return i.includes(r)};switch(n){case"not":return!s();case"or":return s();default:return!1}},_inAdvanceTag:function(e,t,n){var r=e.get("tags")?e.get("tags").toArray():[],a=Object(I.a)(d.a.getState()),i=t.reduce((function(e,t){return e.push.apply(e,[t].concat(R(a.get(t)||[]))),e}),[]),o=new Set(i);n=n||"or";var c=r.map((function(e){return e.toLowerCase()})),s=function(){return!(!o.has("!tag")||0!==c.length)||(!!(o.has("*withtags")&&c.length>0)||c.find((function(e){return o.has(e)})))};switch(n){case"not":return!s();case"or":return s();case"and":return function(){if(o.has("!tag"))return!1;var e=i.filter((function(e){return"!tag"!==e&&"*withtags"!==e}));return new Set([].concat(R(e),R(c))).size===c.length}();default:return!1}},_inAdvanceDueDate:function(e,t,n){var r=function(){if(Ne(e))return t.includes("nodue");for(var n={overdue:"overDueForRule",today:"todayForRule",tomorrow:"tomorrowForRule",thisweek:"thisweekForRule",nextweek:"nextweekForRule",thismonth:"thismonthForRule"},r=!1,a=0;a<t.length;a+=1){var i=t[a],o=n[i],c=void 0;if("nodue"!==t&&(o?r=ge[o].call(void 0,e):i.match(/\d+days$/)?(c=i.match(/\d+/)[0],r=ge.nextNdaysForRule(e,c)):i.match(/\d+dayslater$/)&&(c=i.match(/\d+/)[0],r=ge.ndaysLaterForRule(e,c)),!0===r))break}return r};switch(n){case"not":return!r();case"or":return r();default:return!1}},_inAdvancePriority:function(e,t){return!k.fb(e)&&t.includes(e.get("priority"))},_inAdvanceAssignee:function(e,t){var n=S.a("userId"),r=e.get("assignee");if(-1===t.indexOf("noassignee")||r&&-1!==r){if(r&&-1!==r){var a=r===n?"me":"other";return-1!==t.indexOf(a)}return!1}return!0}},be=function(e){var t=e.hashCode();if(void 0===N.next7days[t])if(Ee(e)){var n=s()().add(2,"day").startOf("day").toDate(),r=s()().add(7,"day").endOf("day").toDate();N.next7days[t]=k.X(e,n,r)}else N.next7days[t]=!1;return N.next7days[t]},ke=function(e){var t=e.hashCode();return void 0===N.later[t]&&(Ee(e)?N.later[t]=ge.ndaysLaterForRule(e,8):N.later[t]=!1),N.later[t]},Oe=function(e){var t=e.hashCode();return void 0===N.overdue[t]&&(Ee(e)?N.overdue[t]=ge.overDueForRule(e):N.overdue[t]=!1),N.overdue[t]},Te=function(e){return!k.fb(e)&&(e.get("isHabit")?Se(e):e.get("status")>0)},Se=function(e){return Object(u.g)(e)},Ee=function(e){return!Pe(e)&&!Ne(e)},we=function(e){return new Set(e.filter((function(e){return!1===e.get("inAll")})).map((function(e){return e.get("id")})))},De=function(e){return new Set(e.filter((function(e){return h.h(e)})).map((function(e){return e.get("id")})))},je=function(e,t,n,r){return!!_e(e,n)||!(!Ce(e,r)||Ie(e,t))},_e=function(e,t){if(Re(e))return!0;var n=e.get("projectId");return n?t.has(n):!Ae(e)},Ce=function(e,t){var n=e.get("projectId");return t.has(n)},Ie=function(e,t){return!!Me(t)&&e.get("assignee")===S.a("userId")},Me=function(e){return!!e&&e.get("userCount")>1},Ae=function(e){return k.ab(e)},xe=function(e){return k.fb(e)},Re=function(e){return e.get("deleted")>0},Pe=function(e){return e.get("status")>0},Ne=function(e){return!f.i(e.get("startDate"))},Le=function(e){return!f.i(e)},Ue=function(e){return k.gb(e)},Fe={isTodayAndOverdueSubTask:function(e){var t=e.get("startDate");return!Le(t)&&x.a.getOffsetDays(t)<=0},isTomorrowSubTask:function(e){var t=e.get("startDate");return!Le(t)&&1===x.a.getOffsetDays(t)},isWeekAndOverdueSubTask:function(e){var t=e.get("startDate");return!Le(t)&&x.a.getOffsetDays(t)<7},isOneDaySubTask:function(e,t){var n=e.get("startDate");return!(e.status||!f.i(n))&&0===x.a.getOffsetDays(n,t.date)},isTimedSubTask:function(e){return O.h(e)}};Object(r.createSelector)([function(e){return e.columns.filter((function(e){return!T.c(e)}))},function(e,t){return t.project.get("id")}],(function(e,t){return e.filter((function(e){return e.get("projectId")===t}))})),Object(r.createSelector)([oe,re("queryString"),re("serverSearchResultIdSet")],(function(e,t,n){var r=t.dueFrom,i=t.dueTo,c=new Set(t.projectIds),s=new Set(t.statuss),u=t.tags;if(t.keyword?$.trim(t.keyword):""){var l=$.trim(t.keyword).split(/\s+/),d=function(e,t){for(var n=0;n<t.length;n++){if((t[n].title||"").match(e))return!0}return!1},f={due:function(e){var t=b.a.prefMoment(e.get("startDate")),n=b.a.prefMoment(k.p(e));return!!e.get("startDate")&&((!r||!n.isBefore(r))&&(!i||!t.isAfter(i)))},list:function(e){return!!c.has(e.get("projectId"))},status:function(e){return!!s.has(e.get("status"))},tags:function(e){var t=e.get("tags").toJS();return o.a.isEmpty(t)?u.indexOf("!tag")>-1:o.a.intersection(t,u).length},keyword:function(e){for(var t,n=0;n<l.length;n++){t=l[n];var r=e.get("title"),a=e.get("items").toJS(),i=t.replace(D.a.escapeReg,"\\$1"),o=new RegExp(i,"i");if(k.S(e)){var c=e.get("desc")||"";if(!r.match(o)&&!d(o,a)&&!c.match(o))return!1}else{var s=e.get("content")||"";if(!r.match(o)&&!s.match(o))return!1}}return!0}};return e.filter((function(e){return!!n.has(e.get("id"))||!((r||i)&&!f.due(e))&&(!(!o.a.isEmpty(Array.from(c))&&!f.list(e))&&(!(!o.a.isEmpty(Array.from(s))&&!f.status(e))&&(!(!o.a.isEmpty(l)&&!f.keyword(e))&&!(!o.a.isEmpty(u)&&!f.tags(e)))))}))}return a.Map([])})),Object(r.createSelector)([function(e){return e.sharedUsers}],(function(e){return g.u().filter((function(t){return S.e()?!h.d(t)&&e.get(t.get("id")):e.get(t.get("id"))})).sort(j.a.order).map((function(t){var n=t.get("id"),r=t.get("name");return a.Map({id:n,name:r,members:e.get(n).sort(j.a.sharedUsers)})}))}))},442:function(e,t,n){"use strict";n.d(t,"d",(function(){return ST})),n.d(t,"c",(function(){return ET})),n.d(t,"e",(function(){return wT})),n.d(t,"b",(function(){return _T})),n.d(t,"i",(function(){return CT})),n.d(t,"j",(function(){return IT})),n.d(t,"a",(function(){return MT})),n.d(t,"l",(function(){return RT})),n.d(t,"m",(function(){return PT})),n.d(t,"k",(function(){return FT})),n.d(t,"h",(function(){return HT})),n.d(t,"g",(function(){return BT})),n.d(t,"f",(function(){return WT}));n(73),n(205),n(203),n(366),n(153),n(61),n(152),n(209),n(161),n(346),n(356),n(50),n(143),n(207),n(154),n(111),n(204),n(110),n(350);var r=n(320),a=n(319),i=n.n(a),o=n(98),c=n.n(o),s=n(375),u=n(338),l=n.n(u),d=n(344),f=n(157),p=n(607),h=n(429),m=n(551),g=n(355),v=n(324),y=n(335),b=n(361),k=n(382),O=n(352),T=n(329),S=n(455),E=n(466),w=n(330),D=(n(173),n(326)),j=n(333),_=function(){return D.a.getState().pomodoro.pomoTaskId},C=n(412),I=n(483),M=n(340),A=n(342),x=n(327),R=n(323),P=n(334),N=n(456),L=n(431),U=n(328),F=n(357),H=n(386),B=(n(156),n(33),n(62),n(582),n(0)),Y=n.n(B),W=n(321),K=n.n(W),G=n(1545),V=n(142),z=n(369);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=Y.a.forwardRef((function(e,t){var n=e.type;return Y.a.createElement(n||"a",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{ref:t,type:void 0}))}));J.displayName="Anchor";var X=J,Q=n(332),ee=n(364),te=function(e){var t=e.model,n=e.pendingCompleted,r="checkbox";return t.isNote?r="note":t.isCompleted||n?r="completed":w.S(t.originModel)?r="subtask":t instanceof ee.a&&(r="real-subtask"),t instanceof ee.c?r="subcalendar":t instanceof ee.e&&t.isScheduleTask&&(r="schedule"),Y.a.createElement("span",{className:"checker avoid-event"},Object(Q.a)({name:r,className:K()({"i-4":"completed"!==r,"i-o-12":"completed"===r,"i-black":"completed"===r}),style:{width:14,height:14}}))},ne=n(831),re=n.n(ne);var ae=function(e){var t,n,r,a=e.collapsed,i=e.toggleCollapsed,o=e.className,c=e.type;return Y.a.createElement("span",{className:K()(re.a.collapsed,o),onClick:function(e){i&&i(e)}},Y.a.createElement(Q.a,{name:function(){switch(c){case"bold":return"triangle-down";case"thin":default:return"thin-triangle-down"}}(),className:K()("i-s-12 i-o-24",(t={},n=re.a.rotate,r=a,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t))}))},ie=n(318),oe=n(376),ce=function(e){var t,n,r=e.utc,a=e.className,i=void 0===a?"":a;return Y.a.createElement("span",{className:i},(t=r,n="",n+=" "+U.a.prefMomentFromUtc(t,ie.m.atomTime).format(Object(oe.a)("ll"))))},se=n(499),ue=(n(211),n(119),n(155),n(120),n(467)),le=n(835),de=n.n(le),fe=n(836),pe=n.n(fe);var he=function(e){var t,n,r,a=e.percentage,i=e.size,o=e.color,c=e.bgColor,s=e.className,u=Object(V.e)((function(e){return e.preference.get("theme").toLowerCase()})),l=Object(z.f)();return Y.a.createElement("div",{className:K()(pe.a.circle,(t={},n=pe.a.noData,r=0===a,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t),s),style:{height:null!=i?i:"auto",width:null!=i?i:"auto"}},Y.a.createElement(de.a,{animate:!0,animationDuration:"1s",responsive:!1,size:"100%",lineWidth:"50",progress:a,progressColor:null!=o?o:l,bgColor:(null!=c?c:"night"===u)?"#ffffff":"#000000",roundedStroke:!0,showPercentage:!1,showPercentageSymbol:!1}))},me=(n(206),n(325),n(520)),ge=n(99),ve=n.n(ge),ye=n(662),be={adjustX:1,adjustY:1},ke=[0,0],Oe={topLeftBoult:{points:["bl","tl"],overflow:be,offset:[-10,-8],targetOffset:ke},topCenterBoult:{points:["bc","tc"],overflow:be,offset:[0,-8],targetOffset:ke},topRightBoult:{points:["br","tr"],overflow:be,offset:[-15,-8],targetOffset:ke},bottomLeftBoult:{points:["tl","bl"],overflow:be,offset:[-10,8],targetOffset:ke},bottomCenterBoult:{points:["tc","bc"],overflow:be,offset:[0,8],targetOffset:ke},bottomRightBoult:{points:["tr","br"],overflow:be,offset:[15,8],targetOffset:ke},topLeft:{points:["bl","tl"],overflow:be,offset:[-10,-4],targetOffset:ke},topCenter:{points:["bc","tc"],overflow:be,offset:[0,-4],targetOffset:ke},topRight:{points:["br","tr"],overflow:be,offset:[0,-4],targetOffset:ke},bottomLeft:{points:["tl","bl"],overflow:be,offset:[0,4],targetOffset:ke},bottomCenter:{points:["tc","bc"],overflow:be,offset:[0,4],targetOffset:ke},bottomRight:{points:["tr","br"],overflow:be,offset:[0,4],targetOffset:ke}};function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){De(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t){return(Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xe(e);if(t){var a=xe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Me(this,n)}}function Me(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?Ae(e):t}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(o,e);var t,n,r,a=Ie(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).onClick=function(e){e.stopPropagation?e.stopPropagation():e.domEvent.stopPropagation();var n=t.props,r=n.menu.props;"visible"in n||t.setState({visible:!1}),n.onMenuClick&&n.onMenuClick(e),r.onClick&&r.onClick(e)},t.onVisibleChange=function(e){var n=t.props;"visible"in n||t.setState({visible:e}),n.onVisibleChange(e)},t.afterVisibleChange=function(e){if(e&&t.props.minMenuWidthMatchTrigger){var n=t.getPopupDomNode(),r=ve.a.findDOMNode(Ae(t));r&&n&&(r.offsetWidth>n.offsetWidth&&(n.style.minWidth="".concat(r.offsetWidth,"px"),t.menu&&t.menu._component&&t.menu._component.alignInstance&&t.menu._component.alignInstance.forceAlign()),t.props.nodePosHandleAfterVisible&&t.props.nodePosHandleAfterVisible(n,r))}if(e){var a=t.getPopupDomNode();if(a&&t.props.scrollToSelected){var i=a.querySelector("ul.dropdown-menu-menu"),o=a.querySelector('li[role="menuitem"].active');i&&o&&(i.scrollTop=o.offsetTop-i.offsetHeight/2)}t.props.onShow&&t.props.onShow(a)}else{var c=t.getPopupDomNode();t.props.onHide&&t.props.onHide(c)}},t.saveBoult=function(e){t.boult=e},t.saveMenu=function(e){t.menu=e},t.saveTrigger=function(e){t.trigger=e},t.state="visible"in e?{visible:e.visible}:{visible:e.defaultVisible},t.onAlign=t.onAlign.bind(Ae(t)),t.hide=t.hide.bind(Ae(t)),t.escListenId=i.a.uniqueId(),t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props.action,n=this.state.visible;t.includes("contextMenu")&&this.trigger&&$(this.trigger).on("mousedown",(function(){e.onVisibleChange(!1)})),n&&(f.b.subscribe(this.escListenId,"dropdown",this.hide),this.isEscEventExist=!0)}},{key:"componentWillUnmount",value:function(){this.props.action.includes("contextMenu")&&this.trigger&&$(this.trigger).off("mousedown"),f.b.unSubscribe(this.escListenId)}},{key:"componentWillReceiveProps",value:function(e){var t=e.visible;void 0!==t&&this.setState({visible:t})}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.visible;t.visible!==n&&n&&!this.isEscEventExist&&f.b.subscribe(this.escListenId,"dropdown",this.hide),t.visible===n||n||f.b.unSubscribe(this.escListenId)}},{key:"hide",value:function(){this.onVisibleChange(!1),this.menu&&this.menu.close&&this.menu.close()}},{key:"getMenuElement",value:function(){var e=this.props,t=e.menu,n=e.prefixCls,r=e.boult,a={prefixCls:"".concat(n,"-menu"),onClick:this.onClick};return"string"==typeof t.type&&delete a.prefixCls,r?(a.key="menu",Y.a.createElement("div",{},[Y.a.createElement("div",{className:"boult",key:"boult",ref:this.saveBoult}),Y.a.cloneElement(t,a)])):Y.a.cloneElement(t,a)}},{key:"getTriggerElement",value:function(){var e=this.props.children,t={ref:this.saveTrigger,className:e.props.className};return Y.a.cloneElement(e,t)}},{key:"getPopupDomNode",value:function(){return this.menu.getPopupDomNode()}},{key:"onAlign",value:function(e,t){if(this.props.boult){this.setBoultPosition(t);var n={"dropup-menu":t.offset[1]<0};e.className=K()(e.className,n)}}},{key:"setBoultPosition",value:function(e){var t=this.props.boultOffset,n=e.offset,r=e.points[0],a=e.points[1],i=this.trigger?this.trigger.offsetWidth:0;"tl"===r&&"bl"===a&&(this.boult.style.top=void 0!==t.top?"".concat(t.top,"px"):"".concat(-n[1],"px"),this.boult.style.left=void 0!==t.left?"".concat(t.left,"px"):"".concat(-n[0]+i/2-9,"px")),"tc"===r&&"bc"===a&&(this.boult.style.top=void 0!==t.top?t.top:"".concat(-n[1],"px"),this.boult.style.left=void 0!==t.left?t.left:"calc(50% - 9px)"),"tr"===r&&"br"===a&&(this.boult.style.top=void 0!==t.top?t.top:"".concat(-n[1],"px"),this.boult.style.right=void 0!==t.right?t.right:"".concat(n[0]+i/2+9,"px")),"bl"===r&&"tl"===a&&(this.boult.style.top=void 0!==t.top?t.top:"calc(100% - ".concat(n[1],"px)"),this.boult.style.left=void 0!==t.left?t.left:"".concat(-n[0]+i/2-9,"px")),"bc"===r&&"tc"===a&&(this.boult.style.top=void 0!==t.top?t.top:"calc(100% - ".concat(n[1],"px)"),this.boult.style.left=void 0!==t.left?t.left:"calc(50% - 9px)"),"br"===r&&"tr"===a&&(this.boult.style.top=void 0!==t.top?t.top:"calc(100% - ".concat(n[1],"px)"),this.boult.style.right=void 0!==t.right?t.right:"".concat(n[0]+i/2+9,"px"))}},{key:"getAlign",value:function(){var e={};return this.props.autoAdjustOverflow||(e={overflow:{adjustX:0,adjustY:0}}),e}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,r=t.transitionName,a=t.animation,i=t.align,o=t.placement,c=t.getMenuContainer,s=t.showAction,u=t.hideAction,l=t.menuClassName,d=t.menuStyle,f=t.boult,p=t.disabled,h=t.action,m=t.destroyPopupOnHide,g=je(t,["prefixCls","transitionName","animation","align","placement","getMenuContainer","showAction","hideAction","menuClassName","menuStyle","boult","disabled","action","destroyPopupOnHide"]),v=we({},d),y=we({},i,{},this.getAlign()),b=o+(f?"Boult":"");return(this.props.alignPoint||h&&h.includes("contextMenu"))&&(e=!0),p?this.getTriggerElement():Y.a.createElement(ye.a,Se({},g,{alignPoint:e,prefixCls:n,ref:this.saveMenu,popupClassName:K()(l),popupStyle:v,builtinPlacements:Oe,action:h,showAction:s,hideAction:u,popupPlacement:b,popupAlign:y,popupTransitionName:r,popupAnimation:a,popupVisible:this.state.visible,afterPopupVisibleChange:this.afterVisibleChange,popup:this.getMenuElement(),onPopupVisibleChange:this.onVisibleChange,onPopupAlign:this.onAlign,getPopupContainer:c,destroyPopupOnHide:m}),this.getTriggerElement())}}])&&_e(t.prototype,n),r&&_e(t,r),o}(B.Component);Re.defaultProps={minMenuWidthMatchTrigger:!1,prefixCls:"dropdown-menu",action:["click"],showAction:[],hideAction:[],menuClassName:"",menuStyle:{},defaultVisible:!1,onVisibleChange:function(){},placement:"bottomLeft",boult:!1,disabled:!1,boultOffset:{},destroyPopupOnHide:!0,autoAdjustOverflow:!0,onShow:function(){},scrollToSelected:!0};var Pe=n(498);n(144);function Ne(){return(Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Le(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ue=function(e){var t=e.title,n=e.icon,r=e.isActive,a=e.isHideDirect,i=Le(e,["title","icon","isActive","isHideDirect"]),o=B.createElement("div",{className:K()("submenu-title",{"dropdown-menu-menu-item-selected":r})},n?n.isEmoji?B.createElement("span",{className:"icons"},B.createElement("span",{className:"emoji"},n.name)):B.createElement(Q.a,{name:n.name,className:n.className}):null,a?null:B.createElement(Q.a,{name:"chevron-right",className:"direct i-3"}),B.createElement("span",null,t));return B.createElement(Pe.b,Ne({},i,{title:o}))};function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(){return(He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Be(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ze(e);if(t){var a=ze(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ve(this,n)}}function Ve(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(i,e);var t,n,r,a=Ge(i);function i(){return Ye(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.multi,n=e.children,r=Be(e,["multi","children"]),a=this.props.selectedKeys||[],i=t&&Y.a.createElement(Q.a,{name:"selected",className:"i-3"});return Y.a.createElement(Pe.a,He({},r,{className:K()(r.className||"",{active:-1!==a.indexOf(this.props.eventKey)})}),n,i)}}])&&We(t.prototype,n),r&&We(t,r),i}(Y.a.Component),qe=function(e){var t=e.className,n=e.children;return Y.a.createElement("div",{className:K()("divider",t)},n)},Je=n(1546);var $e=function(e){var t=e.className,n=e.id;return Y.a.createElement("div",{className:K()("subtitle",t)},Y.a.createElement(Je.a,{id:n,tagName:"span"}))},Xe=Pe.c,Qe=n(341),et=n(339),tt=n(359),nt=(n(121),{userPublicProfileLocal:{},getUserPublicProfiles:function(e,t){var n=this;return new Promise((function(t,r){if(!e||!e.length)return[];for(var a=[],i=[],o=!1,c=0;c<e.length;c++){var s=n.userPublicProfileLocal[e[c]];s?a.push(s):(o=!0,i.push(e[c]))}o?n._getUserPublicProfileFromServer(i).then((function(){t(n._getUserPublicProfileFromLocal(e))})):t(a)}))},_getUserPublicProfileFromLocal:function(e){for(var t=[],n=0;n<e.length;n++){var r=this.userPublicProfileLocal[e[n]];r&&t.push(r)}return t},_getUserPublicProfileFromServer:function(e){var t=this,n=[],r=[];return e.length<20?r=e:(r=e.slice(0,20),n=e.slice(20,e.length)),Object(M.R)(r).then((function(e){if(t._storeUserPublicProfileToLocal(e.data),n.length)return t._getUserPublicProfileFromServer(n)}))},_storeUserPublicProfileToLocal:function(e){for(var t=0;t<e.length;t++)e[t].nickname||(e[t].nickname=e[t].displayName),this.userPublicProfileLocal[e[t].userCode]=e[t]},updateUserPublicProfiles:function(e){var t=this;e.forEach((function(e){var n=e.userCode,r=t.userPublicProfileLocal[n];r&&(r.nickname=e.displayName,r.avatarUrl=e.avatarUrl)}))}});Object(r.Map)();var rt=function(){return D.a.getState().sharedUsers},at=function(e){return M.P(e).then((function(t){var n=i.a.map(t.data,(function(t){return t.id=t.userId,t.projectId=e,t}));D.a.dispatch(function(e,t){return{type:et.Qb,projectId:e,data:t}}(e,n)),nt.updateUserPublicProfiles(n)}))},it=function(e){i.a.memoize((function(e){return i.a.debounce(at,R.x)}))(e)(e)},ot=function(e){return ct(e).filter((function(e){return e.get("isAccept")&&!e.get("deleted")})).sort(tt.a.mentionUsers)},ct=function(e){return rt().get(e)||Object(r.List)()},st=function(e){var t=e.projectId;return ot(t).map((function(e){var t=Qe.a("userId")===e.get("userId")?v.a("me"):e.get("displayName");return{match:t,complete:t+" ",avatarUrl:e.get("avatarUrl"),key:e.get("userId")}})).toArray()},ut=n(349);function lt(e){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mt(e);if(t){var a=mt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ht(this,n)}}function ht(e,t){return!t||"object"!==lt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mt(e){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(i,e);var t,n,r,a=pt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).handleError=function(){t.state.errored||t.setState({errored:!0})},t.state={errored:!1},t}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.url,n=e.defaultUrl,r=e.className,a=e.altText,i=void 0===a?"":a,o=e.title,c=void 0===o?"":o,s=this.state.errored;return Y.a.createElement("img",{className:r,title:c,src:s?n:t,alt:i,onError:this.handleError})}}])&&dt(t.prototype,n),r&&dt(t,r),i}(B.Component),vt="data: image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAC91BMVEUAAACUre6OreiUre6Ure6Ure6Ure53rNGGrd+Ure6Ure6Ure6Ure4lq4FFq56Ure6Ure6Ure6Ure6Ure6Ure6Ure6Ure6Ure6Ure6Ure4oq4Q/q5iUre4qq4aUre6Ure5Uq66Ure6Ure6Ure4hqn4uq4o1q5CUre5Tq65Wq7CUre48q5eUre6Ure6Ure6Ure6Ure6Ure6Ure6Ure6Ure5Qq6mUre5Sq6yUre5Vq7BYq7FNq6cyq4w5q5OUre5CrJ1Lq6ROq6hVq65CrJw6q5RHq6BLq6SUre4TqnT / 4bpcRjsAhGv / 1aP90J38zpn / zZb8z5v90p//06D/1KJ5Z1X7zZj6ypX7zJf6yJP80Jz7y5afjX7906H/3bP/3K/5yJH/4Lf+1qYdqnsYqnf837r/2qwMnnGTrOz/4Ln+2Kn/3bJeSj//3rUOoXEJmG+KreT/0p7+0Z3v0K+Tqun/2aoCh2yPren/z5oRp3NiU1GZr+yNodnHxtbRy9H70Z8/nXYPpHILm3AEkG0Ci2yAa1mis+eoteKwuN+DrN5zrc3Ow8b32bTNtJg7q5W/qJAwq4xzcYaji3NeS0RrrMX13L9drLdWq7D30alErJ6+ooSplYRrZG5pX2duV0llUEOcsOuPpN+8wdt5rNSKm8/x1bGAiK3gxqZ8gaN5e5mQtYoGk24LiW2agGmMdWJ0X1GSqOS4utbYz87Ev86Hk8KDjLbqzbLCz6fjxqTHrZCjuYyvmoetk3pMoXlnXGFkVlji08neyr6EkLzly7fx3bbpzarZvp/3z53BwpN1dY1gqIJvano3mnYrlXMlknIcjnEWjXCIcF1hUE3n1sZkrL6bnLHZ1a7Q1KtNq6fUyJiHsoh5roVvqoRxbX8ur3tCnXdgTkqQpuOcosJKq6Puz5+cyZvjyJqRjpqWupjlwJVrvI/Sr4qIgYRWo3xIoXmVhHOwj3CVp9mcp891sMRRq6ugmp/syZV3wJCwuYyckYt5q4HJpYFFnXmCdnBAuT3kAAAAR3RSTlMA+gjw4qg8DQZ21pUc/rj16MCakXtZSC4lIPvSTvjSszQXEAP+9OraQBbs2MzGuZ2KhIB6bGpcUSoeAoXv48nClHwoyuCql4avpW4AAA5QSURBVHja1Na9aipRFAXgfWacMc4I/v8ERFELIcQkJhKsbBecF5liSivxJcRWCyGIdiliayDd5XbpA+ZRbopbXjwze86M3u8NFmsvzqF4ZO3nsmvd3aZMU+CHMM3U7Z3llp/tLP0frhtlyxE4QThWuXFNF8ywM60bBHTTytgGXaBapiAQkihkanRJrqrFFJhSxeoVXYRu9d5EJOZ9tUvnVn/IQ4P8Q53O6KpSgDaFyrlOrPOUh1b5pw4l79rNQbucm/T7ki0KxEIUs5ScdkkgNqLUpmQYjznEKvdoUAIqKcQuVaG41fpIRL9GcTIGAgkRA4NiY/eQoJ5N8TBKSFgpllJGTSSuOSLthgJnIIakV9rCmVhp0qjuICTve/Zj7SEyp07aNEwENfvYzZeHT1/+tZiuvnb7NSIwG6RJBoFMPn4dFvLfpl+bb7BlSIeuiwBm25UvT/KX+wmY3K6Gmbeg5O2XMojP3St4WpEn3xlDZbKdyqCOW2Yr4w5F0m5CZT+VYby/gaXZpgiyDhRmSxnWnFeKk42QoweFzUKGd5iBo8dO0lb14c0ly/EFHE6buXPVPiZLybTgDaXJWnx6rMqxkmw+L8k4zXgHW+ocESx419XqUlguFL5kJNM1OFzt/6utjGjlgSNDoTSg8OLLqHZgaVAIdROneQcZHW8mZp0CSztQ2EgN3j1wOGkKyoLC5FPqsAOLRQENobKVWizWYBlSICMBBW8q9ZiDRYwoAKMJlQ+piT8DS9MgtRKUfktd5uApkZINpVdf6uKvwWOTgtGD0l7qswNPT3VcA6jNpT7HCXgGdFJNQO1darQBj6jRKX2ovUqdVmDq0wkVBPAmtXoBU+XE0lMIYCu1+sOsvbQ2EUUBHL+jUXxBq4jalag7ERUFv8LhyFV8jIiOCRlIiWmziq6CuootNCEYESSVRoSYVRK1IhWDT1oRV1X8Am5EFHyACxEXJjeJM5nMde4jYH/rdvFneu85TeYVKArxz/s+EPFqsCFv4qBoH+HYNgQO0XGo7zkoGtqmPNOZGwMOeQ0euvN9nQFCngw4ZPwOKDLWET8bQAxbfZfCKAHYQHyMGCCGhSyJUQLGiNjnP/yQJTJK/D4d2j4EHNyQ/77MAwxtJ177gUP/sOv/y8u3n3isGgZRjw92LIHpDsOrZLcs/hzRd/UKeClvXOtBzOAnu1m4Hwd160mPLSDu9sAaSouNXBbxMujYQtz2grj4+CDGeaaQnzuLzCTo2EtcdgyDhLpew0yt8XAuho5boGN4B3FsAhmfS8oJheJCFr0ugJZNxLEHZHww6zPjcgWZ6tdfc1n0dw+07HENkeUg453ZVJ8pBcaM1xerX4ufPl6iLRHkeAtalq9S/MuC92ZXrdio1jJ/m0ql0kw9s1irFhrF3MJ8FiPHXRLIcQ30bJJb4B13zK4c/lNvCEUe0OMs8yGQkzE7sqIhTBQ5LoOWEOnYDJJ+m20FDAo54xZBjknQs9n5BlfOZ7PtYWDIMbfzyHEL9KyW3bOc+7etLBdio0N9kPD3rWUGyIm/M5kqiocwZ9HfRdBjLBP5RoR//xYxyNjRHmH09xQ0rVQ7IvDNZCqyIaNqE1H0kGwFWXHWkYlhkEhviM2biGnQs5WF7ARpteDLlxk71OMoMrHKwjz2oDQ1NQnqdpKmEZD3hV2+UiFMEpvK05Zl5WPoYtOmFxOgbIS9PyPvp9k0Lx/CRuIjqyWHLgnaYt8FRexNm40g70friKB8SAIRyxbzCF1GaZtyyUb24om8d2JHBMOekDOImLKYab+Q64pbF3s9ZQ3I+84/Itlc/mHKeSIeUcTYNAvJo0uEdjwDNWuaIQbIO9cMmUM/7CRblW7IKY8xRKywB5JFlzDtUjzwBiHrQMUib4rk2383sU7IEY8ENqVy+VwW3aK0awrUrCMrQcUX3hGZtpgUMmFvyBns4oS8ADUryQGQNDH1ImU3zDz6emQxZU7IKfRHu1Kg5oDs7TvxgLYUOUcEcz13a/iwVxJ92bohG8lakDFL2z7xFq1YvtVR5oZw9sbzuiFr5cbIFO34WEWe+YXK38hkX4iNvkZ1798VZDeIu0u7XhYxAOeJHEKH3yCZBTW7yS4Qlr5O/6qIhZzoE/1niH0T1OwiIRA2Sx0x1ZCI/w9qjhEIkeUg7AF1JFFEsj8k8a9BkkqDouUSIWnqMiYWcrLPUfRzVmtnZCEGiJqgLhHVkBP8ifhAvQMMAsImqcuoSggT5kzE67Np0MAJCXwiCRQRPd3P/zef3eVk6IUEnxFbOeQPLXfy6jQQxwEcV1xxwR1BXE4iKgr+C5kf0SZWqj5pYtJF01JtKqUB0SqKK0gPrreiV08e9CQoCoq4gaIeRA8iiAcvioo3R6v+XprJMr/Ez/HRQ78v85uZTmamSF41TR8Eey1EDqLHrJoSJSl2HEdkBxJrq4DzX1ZNZcaR/sVMgljUIOnHEZxrIQMScBIHuaakM07ubdVp2YFkWzDHDuAss223swwyPtmkEZNIDiTd7QFd4OqaprlZNq1VOI1P5sS+jQNtSKIaDFIFzuBBWlkGWS2/Pnfi9PWLF/fduQ2JFIZzFBwMkmH3O4H/1KXpQyLmcBAT/gZxsxwQp/LFB6IKBLW3uJ4BPvZOH/tPk+NB8jDKcSWdOXw5iOgZBOX596uCX20n2l77+0f+QZ4J9ZV0NvAFOqJrEGTj90OG/jeHXg9LfE5JaSJfMiU6IKoIrGFfFLurF7o2NjpH44z0wwiahovYsk5AkIVfEIUE9rLstMbgawV5lZAiiZwY48fsLGt9Cr7okXcLgqoaZ0EMAx9cRiUygfLqDYtEwEvySFzaBCXm1dtihegYCLQ1zoRI1cBnTigpLSa9nsa2JdD6VcdWbMPKi7bQ0S3EDQMEl8UdEuc6EMpqaVwj09+5K3ELB8X+cyBga1zeic7hmztX+kpKSwibamLL3XE1zrVAqPE7xxbhz1y6ybjNiaRfCf+fe6awzr1AgUDlmJLWRNx4RnMwtPVwWxqBMnc1bHcZPpAxY4lbAcVVgixXG0QxATlm/s9f/Tnufu4oKc0ibM6M77iw4jlvS9s0Gg3DrOU9baANft9Y6d0pJZXJuF2W7BaI1VuaUL4BfjfYL9PPNxW6+biBmexYBUJUBVFcE4bcfcMGypeuKETjfVvKaZoXPkbtw/al8GwDAj4ydIbYwmYTN/mj5pcSY+8hQr220W15LTdvtw0Q+HCYjdYjRZlHOnaBOhdKjCvfALIb6h7md0a+gY2bRDkIg56vYAOll0D08ikGwSgnFTlrCEeT0JUe++fNCyB58UTFIKh8QW5gmSd9WAw1LzEOk7wk5sAgPtPPKsnNXC57fA+dXcH8SoQ6qX9SMciwS8mHlbXkA5XNM4Lm8B4kVbcdUrldTKyU+KEsoB5xPbWCiTy4CxIce8cODCJ0KVmlzCIeOu68YmJ7H0s0L2NkR2wQNj1RTzyXdgz8ZI+F2KWqrxM+FKdW2Ma9xSBi5fMJSn0S6WD+qRILc5h/q6sfHIhn6tt+u4lB6M1rPemqhPMsgspd1WtWXIxNPENMENSLGR1nLCNcXrH7HYtyVOW+FnK2AaGs2kjhHwwSYUV0oUwlXCfSOcMiHVG57wVupGYIU1SLucIonzBIhHJUPzxmofwFL80ei7ZX5X7kBvRizTQczGBU7U25IdhrRXseM4GXu3KnuYjF2KVyN3OjjXQ3F4vFzSN6DiUOgs7HXLkjcwnSyekszmGVe5QTIgVBFyQvOVw6g5oDuy1CEHKSGUtlLwprYo64buuenthDnDTSWte6mKvbCPWB3dZ9PbFHKneYkZOMHyt5mV6nx1Bct/WTtDtmaSuK4gB+6dK00C5SKJEUlwQyFrqEbuly4LRD26mQKQUzvThdeVPMe1nMEBwEcXZ7L58gX8AQYszgYBLBRdz8Bi7ePJVDNJpzzvt9gz/3nsOd/nfKDzJGxwem51v4k7DesNYBniBZW//YuugA1//203pDaeHkITA10Rn94rpGpwVs1V1G4ST5KnpfLULHHnODROjEwPdha6ECVFjK2gbCmvYeN8glOgEIdGoLpayimtzdKhDWtF8yczS6tLS4zhk1uWRNuLBIU3K3egsjIl1da8Iq6XMQaaEz+80yRKcORDLwX97Iyr33QSZAp9vg5Jgg3SyBvRqVe/Pr1reqIONbdC44QXbkN4teXd+EBfgdIIJxt9d/VuojvRhljqgAn/slwRkQ0ZGcrMzROKUDEcpuv38r+SRCfrFoSvBiVZAbnPNA4+Cz8NuOQ9Bo4Vyv8qoI50JQ+W5E3rVBpWnvk/x9RQ/nrA8aH43QD9DZxET0co4IadLF1o1UpgA6dUzcVJbHqAwwUQeNQsaIFfOgE2PitP9zif4IEzFo5ItGoZQDnTre25k8jTG5xTQ5ciWjUs6CToAPRtMrSnE1PUFMc6+yZaO0oU3iWXw0Hg5mUTQbDMf4yOrmPLthtPRJ/BhfFPogQzn0yjlQ8kJcquWBSq5sUinlgYEdJfRAJ18yKRULoOYHsaUQNgx8UCoUTWqZdUjDv2ueblIbhoEwDA/ZKBvrABECLWwjo7UQkW1skx/mHDPrdN1tbt7SA5Q01Y+fG7zMfI/nx7fn4xPfp46QgsTKJCQyElZEIyRjNVajLSQ0zFjJPEBS8cZYAd8ipBY0FqcDZCAUFqYE5OFPWNDJQzZiYSyEFwE5hQ6L6AJkFtcGs2vWCPkNuf+LlwHKMCpjCisD5RiXKYWdgbKsIkyOlIXyzrLFpFp5hjrEOmEy0yqgIntpkxzjYqG24+YI/4XcdoRdOGyuwTc1bjvAngQ5Mf4RTzLADgkve8IXUS+9gB2zo5w14y9Yz3Ksv+2XROPvUl37riH6iWKipuuvSt69iZDDFy1S3zfQ0UvtAAAAAElFTkSuQmCC",yt=function(e){var t=e.onActive,n=e.projectId,a=e.onSelect,i=e.selected,o=e.children,c=e.placement,s=void 0===c?"bottomCenter":c,u=e.menuClassName,l=Object(G.a)();Object(V.e)((function(){return ct(n)}));var d,f,p=function(e){var t=e.selectedKeys;a(parseInt(t[0],10))},h=function(e){var t=e.get("displayName");Qe.a("userId")===e.get("userId")&&(t=l.formatMessage({id:"me"}));var n=!(-1===parseInt(e.get("userId"),10));return Y.a.createElement(Ze,{key:e.get("userId")},n?Y.a.createElement("a",null,Y.a.createElement(gt,{className:"avatar med icon-avatar avatar-bd-divider",url:e.get("avatarUrl"),defaultUrl:vt}),Y.a.createElement("span",null,t)):Y.a.createElement("a",null,Y.a.createElement(Q.a,{name:"assignment-nobody",className:"i-3"}),Y.a.createElement("span",null,l.formatMessage({id:"assignment_nobody"}))))},m=(d=ot(n),f=[],d=d.unshift(Object(r.Map)({userId:"-1",isAccept:!0})),f=i&&-1!==i?["".concat(i)]:["-1"],Y.a.createElement(Xe,{onSelect:p,selectedKeys:f},d.map((function(e){return h(e)}))));return Y.a.createElement(Re,{disabled:Object(ut.g)(Object(j.n)(n)),menu:m,menuClassName:u,onVisibleChange:function(e){t&&t(e),e&&it(n)},placement:s},o)},bt=n(348);function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(){return(Ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function St(e,t){return(St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jt(e);if(t){var a=jt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return wt(this,n)}}function wt(e,t){return!t||"object"!==kt(t)&&"function"!=typeof t?Dt(e):t}function Dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&St(e,t)}(c,e);var t,n,a,o=Et(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).state={assignedUser:Object(r.Map)(),isActive:!1},t.onActive=t.onActive.bind(Dt(t)),t.onSelect=t.onSelect.bind(Dt(t)),t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.task,n=e.sharedUsers;this.setAssignedUser(t,n,{askServer:!0})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.task,n=e.sharedUsers,a=this.props;t.get("assignee")!==a.task.get("assignee")?this.setAssignedUser(t,n,{askServer:!0}):Object(r.is)(n,a.sharedUsers)||this.setAssignedUser(t,n,{askServer:!1})}},{key:"componentDidUpdate",value:function(){(0,this.props.setTaskTipsCache)()}},{key:"onActive",value:function(e){this.setState({isActive:e})}},{key:"onSelect",value:function(e){this.onActive(!1);var t=this.props.task,n=t;t.get("isSubTaskModel")&&(n=Object(T.n)(t.get("taskId"))),Object(bt.y)(n,e)}},{key:"setAssignedUser",value:function(e,t,n){var a=n.askServer,i=e.get("assignee");if(this.isAssignee(i)){var o=t.find((function(e){return e.get("id")===i}));o?this.setState({assignedUser:o}):a&&it(e.get("projectId"))}else this.setState({assignedUser:Object(r.Map)()})}},{key:"isAssignee",value:function(e){return!(-1===parseInt(e,10)||null==e)}},{key:"isSameAssignee",value:function(){var e=this.props.task,t=!0,n=null;return i.a.forEach(e,(function(e){n&&parseInt(n,10)!==parseInt(e.get("assignee"),10)?t=!1:n=e.get("assignee")})),t}},{key:"isSingleAssignee",value:function(){var e=this.props.task;return 1===e.length&&e.get("assignee")}},{key:"isMultiAssignee",value:function(){var e=this.props,t=e.task,n=e.isSameAssignee;return t.length>1&&n()}},{key:"render",value:function(){var e=this.props,t=e.task,n=e.isReadOnly,r=this.state,a=r.assignedUser,i=r.isActive,o=a.get("id"),c=this.isAssignee(o),s=Object(P.t)()?{onClick:function(e){e.stopPropagation()}}:{},u=Y.a.createElement("a",Ot({className:K()("dropdown-toggle",{"cr-disabled":n,active:i}),disabled:n,"data-toggle":"dropdown"},s),Y.a.createElement(gt,{className:"avatar def",title:a.get("displayName"),url:a.get("avatarUrl")||R.h,defaultUrl:vt}));return c?Y.a.createElement("span",{className:"assignment dropdown"},n?u:Y.a.createElement(yt,{menuClassName:"task-item-assignment",projectId:t.get("projectId"),selected:o,onSelect:this.onSelect,onActive:this.onActive},u)):null}}])&&Tt(t.prototype,n),a&&Tt(t,a),c}(Y.a.Component),Ct=Object(V.c)((function(e,t){return{sharedUsers:ct(t.task.get("projectId"))}}),null)(Object(me.c)(_t)),It=Y.a.createContext({rootLevel:0,env:"list",rootId:void 0}),Mt=n(396),At=n(422),xt=n(460);function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){Lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ht(e,t){return(Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wt(e);if(t){var a=Wt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Yt(this,n)}}function Yt(e,t){return!t||"object"!==Rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wt(e){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ht(e,t)}(i,e);var t,n,r,a=Bt(i);function i(){var e;Ut(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).getDateInfo=Object(At.b)([function(e){return e.task}],(function(e){var t=w.Y(e),n=e.toObject(),r=n.startDate,a=n.isAllDay;return{startDate:r,dueDate:n.dueDate,isAllDay:a,isDueDateAcrossDay:t}})),e.dateRangeFormat=Object(Mt.createSelector)([function(e){return e.startDate},function(e){return e.dueDate},function(e){return e.isAllDay},function(e){return e.isDueDateAcrossDay},function(e){return e.showTomorrow},function(e){return e.sortType},function(e){return e.showMeridiem},function(e){return e.today}],(function(t,n,r,a,i,o,c){if(!t||-1===t)return"";var s=e.props.intl;if(a){var u,l="",d=U.a.prefMomentFromUtc(t,ie.m.atomTime),f=U.a.getRealDueDate(n,r).utc().format(ie.m.atomTime),p=U.a.prefMomentFromUtc(f,ie.m.atomTime),h=U.a.prefMoment().startOf("day").diff(U.a.getDueDateLocalZoneDate(t),"days"),m=U.a.prefMoment().startOf("day").diff(U.a.getDueDateLocalZoneDate(f),"days");if(P.F()){var g=-1===h;if(g||-1===m)if(r||null===r)l=s.formatMessage({id:"tomorrow"});else{var y=g?d:p;u=v.c()?"A hh:mm":"hh:mm A",l=c?y.format(u):y.format("HH:mm")}else m<-1&&(l=s.formatMessage({id:"tomorrow"}));return l}return 0===h?(r||null===r?l=s.formatMessage({id:"today"}):(u=v.c()?"A hh:mm":"hh:mm A",l=" "+(c?d.format(u):d.format("HH:mm"))),l):-1===h?(r||o!==ie.J.dueDate||i?l+=s.formatMessage({id:"tomorrow"}):(u=v.c()?"A hh:mm":"hh:mm A",l+=" "+(c?d.format(u):d.format("HH:mm"))),l):0===m?(r||null===r?l=s.formatMessage({id:"today"}):(u=v.c()?"A hh:mm":"hh:mm A",l=" "+(c?p.format(u):p.format("HH:mm"))),l):h>0&&m<0?l=s.formatMessage({id:"today"}):h<0?(U.a.getDueDateLocalZoneDate(t).year()===U.a.prefMoment().year()?l+=" "+d.format(Object(oe.a)("MMMD")):l+=" "+d.format(Object(oe.a)("ll")),l):m>0?(U.a.getDueDateLocalZoneDate(f).year()===U.a.prefMoment().year()?l+=" "+p.format(Object(oe.a)("MMMD")):l+=" "+p.format(Object(oe.a)("ll")),l):l}return e.dateFormat(t,r,i,o,c,s)})),e.countdownRangeFormat=Object(Mt.createSelector)([function(e){return e.startDate},function(e){return e.dueDate},function(e){return e.isAllDay},function(e){return e.isDueDateAcrossDay},function(e){return e.nowMinute}],(function(t,n,r,a,i){if(!t||-1===t)return"";var o=e.props.intl;if(a){var c="",s=!1,u=U.a.getRealDueDate(n,r).utc().format(ie.m.atomTime),f=U.a.prefMoment().startOf("day").diff(U.a.getDueDateLocalZoneDate(t),"days"),p=U.a.prefMoment().startOf("day").diff(U.a.getDueDateLocalZoneDate(u),"days"),h=l()(d.a.parseUTCString(t)),m=l()(d.a.parseUTCString(u)),g=l()();if(P.F()){var y=-1===f;if(y||-1===p)if(r||null===r)c=o.formatMessage({id:"tomorrow"});else{if(y)return{countdownText:c="".concat(Math.abs(f)).concat(v.b()?"":" D"),isOverDue:s};var b=Math.floor(g.diff(h,"minutes",!0)),k=g.diff(h,"hours");c=b<0?Math.abs(b)>=60?60===Math.abs(b)?"1".concat(v.b()?"":" H"):"".concat(Math.abs(k)).concat(v.b()?"":" H"):"".concat(Math.abs(b)).concat(v.b()?"":" M"):v.b()?"":"Now"}else p<-1&&(c=o.formatMessage({id:"tomorrow"}));return{countdownText:c,isOverDue:s}}if(0===f){if(!r&&null!==r){var O=Math.floor(g.diff(h,"minutes",!0)),T=g.diff(h,"hours");return{countdownText:c=O<0?Math.abs(O)>=60?60===Math.abs(O)?"1".concat(v.b()?"":" H"):"".concat(Math.abs(T)).concat(v.b()?"":" H"):"".concat(Math.abs(O)).concat(v.b()?"":" M"):v.b()?"":"Now",isOverDue:s}}return{countdownText:c=o.formatMessage({id:"today"}),isOverDue:s}}if(0===p){if(r||null===r)c=o.formatMessage({id:"today"});else{var S=Math.floor(g.diff(m,"minutes",!0)),E=g.diff(m,"hours");S>0?(c=Math.abs(S)>=60?"".concat(Math.abs(E)).concat(v.b()?"":" H"):"".concat(Math.abs(S)).concat(v.b()?"":" M"),S>0&&(s=!0)):c=v.b()?"":"Now"}return{countdownText:c,isOverDue:s}}return f>0&&p<0?{countdownText:c=o.formatMessage({id:"today"}),isOverDue:s}:f<0?{countdownText:c="".concat(Math.abs(f)).concat(v.b()?"":" D"),isOverDue:s}:p>0?{countdownText:c="".concat(Math.abs(p)).concat(v.b()?"":" D"),isOverDue:s=!0}:{countdownText:c,isOverDue:s}}return e.countdownFormat(t,n,r,o)})),e}return t=i,(n=[{key:"dateFormat",value:function(e,t,n,r,a,i){var o,c="",s=U.a.prefMomentFromUtc(e,ie.m.atomTime),u=U.a.getDueDateLocalZoneDate(e).diff(U.a.startOfDay(),"days");return 0===u?(this.isTodayAndNotAcrossDay=!0,t?c+=i.formatMessage({id:"today"}):(o=v.c()?"A hh:mm":"hh:mm A",c+=" "+(a?s.format(o):s.format("HH:mm")))):1===u?t||r!==ie.J.dueDate||n?c+=i.formatMessage({id:"tomorrow"}):(o=v.c()?"A hh:mm":"hh:mm A",c+=" "+(a?s.format(o):s.format("HH:mm"))):-1===u?c+=i.formatMessage({id:"yesterday"}):u>0&&u<=6?c+=s.format("ddd"):U.a.getDueDateLocalZoneDate(e).year()===U.a.prefMoment().year()?c+=" "+s.format(Object(oe.a)("MMMD")):c+=" "+s.format(Object(oe.a)("ll")),c}},{key:"countdownFormat",value:function(e,t,n,r){var a="",i=!1,o=U.a.getDueDateLocalZoneDate(e).diff(U.a.startOfDay(),"days"),c=l()(),s=t&&l()(d.a.parseUTCString(t)),u=l()(d.a.parseUTCString(e));if(P.F()&&(1===o&&(a=n||null===n?r.formatMessage({id:"tomorrow"}):"".concat(o).concat(v.b()?"":" D")),a))return{countdownText:a,isOverDue:i};if(0===o)if(n)a=r.formatMessage({id:"today"});else{var f=Math.floor(c.diff(u,"minutes",!0)),p=c.diff(u,"hours");if(t){var h=Math.floor(c.diff(s,"minutes",!0)),m=c.diff(s,"hours");f>=0&&h<=0?a=v.b()?"":"Now":f<0?a=Math.abs(f)>=60?60===Math.abs(f)?"1".concat(v.b()?"":" H"):"".concat(Math.abs(p)).concat(v.b()?"":" H"):"".concat(Math.abs(f)).concat(v.b()?"":" M"):(a=Math.abs(h)>=60?"".concat(Math.abs(Math.floor(m))).concat(v.b()?"":" H"):"".concat(Math.abs(h)).concat(v.b()?"":" M"),h>0&&(i=!0))}else a=Math.abs(f)>=60?60===Math.abs(f)?"1".concat(v.b()?"":" H"):"".concat(Math.abs(p)).concat(v.b()?"":" H"):0===Math.abs(f)?v.b()?"":"Now":"".concat(Math.abs(f)).concat(v.b()?"":" M"),f>0&&(i=!0)}else a="".concat(Math.abs(o)).concat(v.b()?"":" D"),o<0&&(i=!0);return{countdownText:a,isOverDue:i}}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.showTomorrow,r=e.isShowCountDown,a=e.isCompletedSection,i=e.today,o=e.onClickDuedate,c=e.isInKanban,s=this.getDateInfo(this.props),u=y.a.currentSortType.get("sortType"),l=x.b("showMeridiem"),d=Object(xt.c)(),f="",p=!1;if(r&&!a){var h=this.countdownRangeFormat(Nt({sortType:u,showTomorrow:n,showMeridiem:l,nowMinute:d},s));f=h.countdownText,p=h.isOverDue}else f=this.dateRangeFormat(Nt({sortType:u,showTomorrow:n,showMeridiem:l},s,{today:i}));var m=r&&p&&!a;return Y.a.createElement("span",{className:t,onClick:function(e){o(e),c&&e.stopPropagation()},style:m?{color:"#e13e39"}:{}},f)}}])&&Ft(t.prototype,n),r&&Ft(t,r),i}(Y.a.Component),Gt=Object(V.c)((function(e){return{isShowCountDown:e.tasks.isShowCountDown.status,minute:e.globalState.get("minute"),today:e.globalState.get("today")}}),null)(Object(me.c)(Kt)),Vt=n(450),zt=n(353);function Zt(e){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e,t){return(Jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=en(e);if(t){var a=en(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Xt(this,n)}}function Xt(e,t){return!t||"object"!==Zt(t)&&"function"!=typeof t?Qt(e):t}function Qt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function en(e){return(en=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jt(e,t)}(i,e);var t,n,r,a=$t(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={hover:!1},t.deleteTagByClick=t.deleteTagByClick.bind(Qt(t)),t.gotoTagList=t.gotoTagList.bind(Qt(t)),t}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.tagName,r=t.tagColor,a=t.readOnly,i=t.onDelete,o=Vt.b(r,this.state.hover),c=zt.f(n),s=c?Vt.a(c):n;return Y.a.createElement("div",{className:K()("tag-item",{"custom-color":o,disable:a}),style:{background:o?o.bg:""},onClick:this.gotoTagList,onMouseEnter:function(){e.setState({hover:!0})},onMouseLeave:function(){e.setState({hover:!1})}},Y.a.createElement("a",{className:"tag-name",style:{color:o?o.fcolor:""}},s),!a&&i&&Y.a.createElement("a",{className:"delete",onClick:this.deleteTagByClick},Y.a.createElement(Q.a,{name:"tag-close"})))}},{key:"deleteTagByClick",value:function(e){var t=this.props,n=t.onDelete,r=t.tagName;n&&((e=e||window.event).stopPropagation(),n(r))}},{key:"gotoTagList",value:function(e){var t=this.props,n=t.tagName;t.readOnly||((e=e||window.event).stopPropagation(),this.props.navigateTo("/t/".concat(Object(O.b)(n.toLowerCase()),"/tasks")))}}])&&qt(t.prototype,n),r&&qt(t,r),i}(Y.a.Component);tn.defaultProps={readOnly:!1,tagName:"",tagColor:"",onDelete:null};var nn=Object(V.c)(null,(function(e){return{navigateTo:function(t){e(Object(s.d)(t))}}}))(tn),rn=n(385),an=n(402),on={},cn={};function sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(n),!0).forEach((function(t){ln(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dn=Object(At.b)([function(e){return e.projects.projectList},function(e){return e.projects.projectInbox}],(function(e,t){var n=t.get("color")?ln({},t.get("id"),t.get("color")):{};return e.reduce((function(e,t){return t.get("color")?un({},e,ln({},t.get("id"),t.get("color"))):e}),n)})),fn=Object(At.b)([function(e){return e.tags}],(function(e){return e.reduce((function(e,t){return t.get("color")?un({},e,ln({},t.get("name"),t.get("color"))):e}),{})})),pn=n(383),hn=n(405);function mn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vn=function(e){var t=e.layer,n=e.className,a=e.displayModel,o=e.onClickDuedate,s=a.model,u=T.Y(s.originModel),l=T.Y(s.originModel,{withPermission:!1}),d=a.section instanceof pn.b,p=Object(V.e)((function(e){return{tags:e.tags,today:e.globalState.get("today"),theme:e.preference.get("theme").toLowerCase(),tagColorMap:fn(e),isShowDetailMode:e.preference.get("showDetail")}}),i.a.isEqual),h=p.tags,m=p.tagColorMap,g=p.today,v=p.isShowDetailMode,b=Object(ue.d)().push,k=Object(B.useCallback)((function(e){var t=function(e){b(e)};e.stopPropagation();var n=s instanceof ee.c;if(null!=s.projectId||n)return n?Object(hn.f)(s.projectInfo.id)?void t("/q/".concat(s.projectInfo.id,"/subscribe-account-calendar")):void t("/q/".concat(s.projectInfo.id,"/subscribe-calendar")):void t(P.c(s.projectId))}),[s,b]),O=Object(B.useContext)(It).env,S="list"===O,E="kanban"===O,D=mn(Object(B.useState)(window.innerWidth<460),1)[0],_=mn(Object(B.useState)(new Date),2),C=_[0],I=_[1],M=Object(z.e)(C),A=Object(B.useRef)([]),R=Object(B.useRef)(null),N=Object(B.useRef)(i.a.uniqueId()),L=Object(B.useRef)(null),F=Object(z.e)(g),H=Object(z.e)(v);Object(B.useEffect)((function(){F===g&&H===v||I(new Date)}),[g,F,H,v]),Object(B.useEffect)((function(){A.current.includes("progress")&&L.current&&function(){var e=L.current;if(null!=e){var t=s.getProgressInfo();if(null!=t){var n=t.percentage,r=e.getContext("2d"),a=[e.width,e.height],i=Math.min(a[0],a[1])/2,o=[a[0]/2,a[1]/2];null!=r&&(r.clearRect(0,0,a[0],a[1]),r.beginPath(),r.moveTo(o[0],o[1]),r.arc(o[0],o[1],i,-.5*Math.PI,Math.PI*(2*n/100-.5),!1),r.lineTo(o[0],o[1]),r.closePath(),r.fillStyle="rgba(199,199,199,.5)",r.fill())}}}()})),Object(B.useEffect)((function(){return f.a.subscribe(N,"refreshReminderIcon",(function(e){e.id===s.id&&I(new Date)})),function(){f.a.unSubscribe(N,"refreshReminderIcon")}}),[s,I]);var W=Object(B.useCallback)((function(){if(!r.List.isList(s.tags))return null;var e=s.tags.toArray(),t=i.a.uniq(e.map((function(e){return zt.b(e)}))),n=zt.c(h);return u&&(t=i.a.intersection(t,n)),t.sort((function(e,t){var r=n.indexOf(e),a=n.indexOf(t);return r===a?0:r>a?1:-1})),t.length>0?t:null}),[u,s,h]),G=Object(B.useCallback)((function(){var e;on[s.id]||(on[s.id]={});var n=on[s.id];n.hash=s.originModel.hashCode(),n["layer".concat(t)]=A.current&&(null===(e=R.current)||void 0===e?void 0:e.outerHTML)}),[t,s]),Z=Object(B.useCallback)((function(e){var t=W();if(null==t)return[];if(D&&t.length)return[Y.a.createElement("div",{className:K()("tag-item tag-rest-count",{disable:l}),key:"tag-more"},"+".concat(t.length))];var n=e-1;return t.slice(0,e).map((function(e,r){if(r===n)return Y.a.createElement("div",{className:K()("tag-item tag-rest-count",{disable:l}),key:"tag-more"},"+".concat(t.length-n));var a=e.toLowerCase();return Y.a.createElement(nn,{key:a,tagName:e,tagColor:m[a],readOnly:l})}))}),[W,l,D,m]),q=Object(B.useCallback)((function(e){switch(e){case ie.O.Tag:if(S&&x.b("showDetail"))return null;var t=Z(3);return i.a.isEmpty(t)?null:Y.a.createElement("div",{key:"tag",className:"tag-list"},t);case ie.O.DetailModeTag:var n=Z(5);return i.a.isEmpty(n)?null:Y.a.createElement("div",{key:"tag",className:"tag-list hide-in-print"},n);case"attachment":return s.hasAttachments()?Y.a.createElement("span",{key:"attachment",className:K()("tip attrachment-hint active",{show:!0})},Y.a.createElement(Q.a,{name:"item-attachment",className:"i-s-16 i-o-12 i-black"})):null;case"note":return s.hasContent()?Y.a.createElement("span",{key:"note",className:K()("tip note-hint active",{show:!0})},Y.a.createElement(Q.a,{name:"item-text",className:"i-s-16 i-o-12 i-black"})):null;case"location":return s.hasLocation()?Y.a.createElement("span",{key:"location",className:K()("tip location-hint active",{show:!0})},Y.a.createElement(Q.a,{name:"item-location",className:"i-s-16 i-o-12 i-black"})):null;case"repeat":return s.willRepeat()?Y.a.createElement("span",{key:"repeat",className:K()("tip repeat-hint active",{show:!0})},Y.a.createElement(Q.a,{name:"item-repeat",className:"i-s-16 i-o-12 i-black"})):null;case"reminder":return s.hasReminder()?Y.a.createElement("span",{key:"reminder",className:K()("tip reminder-hint active",{show:!0})},Y.a.createElement(Q.a,{name:"item-reminder",className:"i-s-16 i-o-12 i-black"})):null;case"progress":if(s.isNote||!s.hasProgress())return null;switch(s.modelType){case ie.s.Task:return Y.a.createElement("span",{key:"progress",className:"tip progress-hint active show"},Y.a.createElement("canvas",{ref:L,className:"canvas-progress",width:"8",height:"8"}));case ie.s.Habit:var r=s.getProgressInfo();if(null==r)return null;var c=r.progress,f=r.goal,p=r.percentage;return Y.a.createElement(Y.a.Fragment,{key:"progress"},an.e(s.originModel)&&Y.a.createElement("span",{className:"tip progress-hint habit active show"},Y.a.createElement(he,{percentage:p,size:13})),Y.a.createElement("span",{className:"tip show"},Y.a.createElement("span",{className:"progress-text text-tny"},"".concat(c," / ").concat(f," ").concat(an.c(s.originModel)))));default:return null}case"date":if(s.hasStartDate()){var h=!s.dueDate||U.a.prefMoment(s.dueDate).isSame(U.a.prefMoment(s.startDate)),m=Object(j.h)();return s.isNote&&w.gb(s.originModel)?null:Y.a.createElement("span",{key:"date",className:"tip date-hint t-date show show-block"},Y.a.createElement(Gt,{className:K()("due-date text-tny inline-block",U.a.getDueDateClass(s.dueDate||s.startDate,s.isAllDay,h)),task:s.originModel,showTomorrow:!1,projectId:m,isCompletedSection:d,onClickDuedate:o,isInKanban:E}))}return null;case ie.O.ModifiedTime:if(s instanceof ee.e){var g=s.task.get("modifiedTime"),b=w.fb(s.task),O=y.a.currentSortType.get("sortType");if(v&&g&&b&&O===ie.J.modifiedTime)return Y.a.createElement("span",{key:"modified-time",className:"tip date-hint t-date show show-block"},Y.a.createElement(ce,{utc:g,className:"due-date text-tny inline-block"}))}return null;case ie.O.CreatedTime:if(s instanceof ee.e){var T=s.task.get("createdTime"),D=w.fb(s.task),_=y.a.currentSortType.get("sortType"),C=Object(j.g)(),I=!!C&&Object(ut.n)(C);if(v&&T&&D&&(_!==ie.J.modifiedTime||I&&null==_))return Y.a.createElement("span",{key:"modified-time",className:"tip date-hint t-date show show-block"},Y.a.createElement(ce,{utc:T,className:"due-date text-tny inline-block"}))}return null;case"subtaskDate":if(s.hasStartDate()){var M=rn.c(s.originModel),A=Object(j.h)();return Y.a.createElement("span",{key:"date",className:"tip date-hint t-date show show-block"},M?Y.a.createElement("span",{className:"due-date"},M):Y.a.createElement(Gt,{className:K()("text-tny inline-block",U.a.getDueDateClass(s.startDate,s.isAllDay,!0)),task:s.originModel,showTomorrow:!1,projectId:A,isCompletedSection:d,onClickDuedate:o,isInKanban:E}))}return null;case"project":var R=s instanceof ee.c,N=!l&&!P.v();R&&(N=!P.A());var F=s.projectInfo;if(N&&F){var H=F.color,B=F.name;return Y.a.createElement("span",{key:"project",className:K()("tip project-hint",{"has-color":"transparent"!==H,show:!0})},Y.a.createElement("i",{className:"project-color",style:{backgroundColor:H}}),Y.a.createElement("span",{className:"project-name text-tny",onClick:k},B))}return null;case"assignment":if(s.hasAssign()){var W=s.originModel;return Y.a.createElement(Ct,{key:"assignment",task:W,isReadOnly:u,setTaskTipsCache:G})}return null;case ie.O.SubTask:var V=a.model.originModel;return Object(w.D)(V)?Y.a.createElement("span",{key:ie.O.SubTask,className:K()("tip subTask-hint active",{show:!0})},Y.a.createElement(Q.a,{name:"descendant-task-small",className:"i-s-16 i-o-12 i-black"})):null;default:return null}}),[a.model,d,l,E,S,u,v,s,k,o,Z,G]),J=Object(B.useCallback)((function(){var e=s.isScheduleOwner,n=ie.O,r=n.Project,a=n.Attachment,i=n.Note,o=n.Location,c=n.Repeat,u=n.Reminder,l=n.Progress,d=n.Date,f=n.Tag,p=n.Assignment,h=n.DetailModeTag;switch(t){case ie.P.List:return s.listTipsElements;case ie.P.KanbanRow2:return[f];case ie.P.KanbanRow1:return e?[p]:[];case ie.P.KanbanRow3:var m=[r,a,i,o,c,u,d];return s.isCompleted||m.push(l),m;case ie.P.Detail:return[d];case ie.P.ListDetailExtraRow1:return[h];default:return[]}}),[t,s]),$=Object(B.useCallback)((function(){var e=[];if(E){var t;A.current.indexOf("tag")>-1?(e.push(q("tag")),t=A.current.filter((function(e){return"tag"!==e}))):t=A.current;var n=t.map((function(e){return q(e)})).filter((function(e){return!!e}));n.length&&e.push(Y.a.createElement("div",{className:"task-tips-more",key:"more-tips"},n))}else A.current.forEach((function(t){var n=q(t);n&&e.push(n)}));return e.filter((function(e){return!!e}))}),[E,q]),X=Object(B.useMemo)((function(){return M!==C&&c.a.info("forceUpdate tips: ",C),A.current=J(),$()}),[M,C,J,$]);return X.length?Y.a.createElement("div",{className:K()("tips",n),ref:R},X):null},yn=n(895),bn=n.n(yn),kn=(n(414),n(1554)),On=n(1555),Tn=n(418),Sn=n.n(Tn),En=n(336),wn=n(377),Dn=function(e,t,n,r,a,i,o,c,s){var u=n.model,l=u.originModel,d=n.id,f=ut.q(j.n(l.get("projectId"))),p=w.jb(l),h=u instanceof ee.c,m=u instanceof ee.a,g=u instanceof ee.d,v=a,y=i;if(t.metaKey||t.ctrlKey)if(f&&o(),h||m||p||g||f){var b=c(n);y=b.selectedTaskIds,v=b.activeTaskId}else v="",y=(y=y.includes(d)?y.filter((function(e){return e!==d})):y.concat([d])).filter((function(e){var t=T.n(e);return T.ab(t)&&o(),!w.jb(t)&&(!w.ab(t)&&!T.Y(t))}));else if(t.shiftKey)if(h||m||p||g||f||(v="",y=(y=y.includes(d)?y.filter((function(e){return e!==d})):y.concat([d])).filter((function(e){var t=T.n(e);return T.ab(t)&&o(),!w.jb(t)&&(!w.ab(t)&&!T.Y(t))}))),"kanban"===e&&(y=function(e){var t=T.A();if(e){var n=T.o(t);return"note"===e?n.filter((function(e){return e.get("kind")===ie.L.Note})).map((function(e){return e.get("id")})).toArray():n.filter((function(t){return t.get("columnId")===e})).map((function(e){return e.get("id")})).toArray()}return t}(s)),y.length&&1===y.length&&y[0]===d)y=[d];else if(y.length){var k=r.filter((function(e){return e.isSection})),O=new Map;k.forEach((function(e){O.set(e.section.id,e.collapsed)}));var S={};y.forEach((function(e){S[e]=!0})),y=[];for(var E=!1,D=!1,_=!1,C=!1,I=0;I<r.length;I++){var M=r[I].model;if(null!=M){var A=M.originModel,x=M.id,R=T.ab(A),P=!(w.kb(A)||w.ab(A)||w.jb(A)||w.bb(A)||R);if(R&&(C=!0),E?(D&&S[x]&&(_=!0),D||x!==d||(_=!0),P&&y.push(x)):(x===d?(E=!0,D=!0):S[x]&&(E=!0),E&&P&&y.push(x)),_)break}}C&&o()}else y=[d];else{var N=c(n);y=N.selectedTaskIds,v=N.activeTaskId}return{activeTaskId:v,selectedTaskIds:y}},jn=+Sn.a.taskLevelOffset,_n=+Sn.a.taskLevelKanbanOffset,Cn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=(Math.min(e,ie.a)-t)*("kanban"===n?_n:jn);return Math.max(r,0)},In=n(362),Mn=n(478),An=n(1551);n(896);i.a.uniqueId(),n(380),n(158),n(415);var xn="normal",Rn="inModal",Pn=Y.a.createContext(xn),Nn=function(e){var t=e.task,n=e.isDisable,r=e.isChecklistMode;return Y.a.createElement("div",{className:"switch-mode line-right"},Y.a.createElement("div",{className:"avoid-event",disabled:n,onClick:function(){n||(r?T.c(t,{},"clearEmpty"):T.b(t,"clearEmpty"))}},Y.a.createElement(Q.a,{name:r?"subtask-mode":"text-mode",className:r?"i-4 mode-subtask":"i-4 mode-text"})))},Ln=(n(112),n(337)),Un=n.n(Ln),Fn=n(1547),Hn=function(e,t){for(var n=/[!^~@*\s]/,r=e.getCursor(),a=e.getLine(r.line),i=r.ch-1,o=r.ch;i>-1;i--)if(n.test(a.charAt(i))){i+=1;break}i<0&&(i=0);var c=a.slice(i,o).match(/^[#]([^\\\/\*\"\'\:\?\<\>\|#||\s]*)/);if(!c)return Un.a.Pass;var s=zt.e().map((function(e){return{match:e,hint:e+" "}})),u=c[1]||"";e.showHint({hint:Un.a.hint.tag,completeSingle:!1,alignWithWord:!0,text:u,start:i,end:o,needClean:!0,callback:function(n,r){var a=r.text.slice(0,-1);if(zt.h().indexOf(a.toLowerCase())<0){var i=zt.a({name:a.toLowerCase(),label:a});t.addTag(i)}t.onAction("addTag",{tagName:a}),setTimeout((function(){e.getInputField().blur(),e.focus()}),R.x+10)},source:s})},Bn=function(e,t){for(var n=/[#!^~@\s]/,r=e.getCursor(),a=e.getLine(r.line),i=r.ch,o=r.ch-1;o>-1;o--)if(n.test(a.charAt(o))){o+=1;break}o=Math.max(0,o);var c=a.slice(o,i).match(/^[*|]([^\\\/\"\'\:\?\<\>\|*||\s]*)/)?function(){var e=[],t=v.c()?U.a.toMoment():U.a.toMoment().locale("en"),n=v.c()?v.a("today"):"Today",r=v.c()?v.a("tomorrow"):"Tomorrow",a=Object(oe.a)("MMMD"),i=v.c()?"":" ",o=x.s();e.push({match:t.format(a),key:t.startOf("day").format("YYYY-MM-DD"),calendar:n});for(var c=U.a.getCurrentInWhichDayOfWeek(),s=U.a.toMoment(),u=[],l=0;l<7;l++)u.push(s.day(o+l).format("dddd"));for(var d=U.a.toMoment(),f=1;f<=6-c;f++){var p=void 0;d.add(1,"days"),p=1===f?r:u[c+f],e.push({match:d.format(a),key:d.startOf("day").format("YYYY-MM-DD"),calendar:p})}for(var h=0;h<7;h++)d.add(1,"days"),e.push({match:d.format(a),key:d.startOf("day").format("YYYY-MM-DD"),calendar:v.a("next")+i+u[h]});var m=U.a.toMoment().startOf("month").add(1,"month");e.push({match:m.format(a),key:m.format("YYYY-MM-DD"),calendar:v.a("next_month")});var g=U.a.toMoment();return[2,3,4,5,6,7,8,9,10,11,12].forEach((function(t){g.add(1,"month"),e.push({match:"",key:g.startOf("month").format("YYYY-MM-DD"),calendar:g.startOf("month").format(a)})})),e}().map((function(e){return{key:e.key,match:e.match+" "+e.calendar,hint:(e.calendar||e.match)+" "}})):[];e.showHint({hint:Un.a.hint.detailDate,completeSingle:!1,alignWithWord:!0,start:o+1,end:i,needClean:!0,type:"*",callback:function(n,r){setTimeout((function(){t.onAction("changeStartDate",{newDate:r.key}),e.getInputField().blur(),e.focus()}),R.x+10)},source:c})},Yn=function(e,t,n){var r,a,i=n.type,o=n.getSelectOptions,c=n.codeMirrorHint,s=T.n(t.id||t.taskId)||t.model;"priority"===i?r=o():r=s?o({projectId:s.get("projectId")}):[];a="priority"===i?/[#^~@*\s]/:/[#!^~*\s]/;for(var u=e.getCursor(),l=e.getLine(u.line),d=u.ch-1,f=u.ch;d>-1;d--)if(a.test(l.charAt(d))){d+=1;break}d<0&&(d=0);var p=l.slice(d,f),h="";"priority"===i?h=/^[!|]([^\\\/\*\"\'\:\?\<\>\|!||\s]*)/:"assign"===i&&(h=/^[@|]([^\\\/\*\"\'\:\?\<\>\|@||\s]*)/);var m=p.match(h);if(!m)return Un.a.Pass;var g=m[1]||"";e.showHint({hint:c,completeSingle:!1,alignWithWord:!0,text:g,start:d,end:f,needClean:!0,type:m[1],callback:function(n,r){"priority"===i?(t.onAction("setPriority",{priority:r.key}),setTimeout((function(){e.getInputField().blur(),e.focus()}),R.x+10)):"assign"===i&&(t.onAction("setAssignee",{userId:r.key}),setTimeout((function(){e.getInputField().blur(),e.focus()}),R.x+400))},source:r})},Wn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=new Set(n);!r.has("date")&&Bn(e,t),!r.has("priority")&&Yn(e,t,{getSelectOptions:T.w,type:"priority",codeMirrorHint:Un.a.hint.detailPreset}),!r.has("assign")&&Yn(e,t,{getSelectOptions:st,type:"assign",codeMirrorHint:Un.a.hint.detailAssignee}),!r.has("tag")&&Hn(e,t)};n(897),n(898),n(174),n(123),n(124),n(210),n(416),n(145),n(146);function Kn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vn="header",zn="hr",Zn="unorderedList",qn="numberedList",Jn="uncheckedItem",$n="checkedItem",Xn="quote";function Qn(e,t,n,r){var a=[];e.findMarks(t,n).forEach((function(e){r?r(e)&&a.push(e):a.push(e)})),a.forEach((function(e){e.clear()}))}function er(e){if(!e.getOption("disableInput")){var t=e.listSelections();if(t&&0!==t.length){var n=Kn(t,1)[0].head.line,r=function(e){if(!e||!e.length)return null;var t=e[0];if(dr(t))return{start:t.start,end:t.end,type:zn};return null}(e.getLineTokens(n));if(r)nr(e,r,n);else{Qn(e,{line:n,ch:0},{line:n,ch:99999999999999},(function(e){return e.itemType===zn}))}}}}function tr(e){if(!e||!e.length)return null;for(var t,n=0,r=0;r<e.length;r+=1){var a=e[r];if(0===r){if(fr(a))return{start:a.start,end:a.end,type:Vn};if(pr(a))return{start:a.start,end:a.end,type:Xn};if(dr(a))return{start:a.start,end:a.end,type:zn}}if(mr(a))return{start:a.start,end:a.end,type:qn};if(hr(a)){t={start:a.start,end:a.end,type:Zn},n=r+1;break}if(!gr(a)&&!vr(a)&&!yr(a))break}if(t){var i=e[n];return i?function(e){return br(e,["formatting-checklist","unchecked"])}(i)?{start:t.start,end:i.end,type:Jn}:function(e){return br(e,["formatting-checklist","checked"])}(i)?{start:t.start,end:i.end,type:$n}:t:t}return null}function nr(e,t,n){var r,a=t.start,i=t.end,o={line:n,ch:a},c={line:n,ch:i};if(t.type===Vn){var s=Math.max(i-a-1,0);r=e.markText({line:n,ch:o.ch+1},c,{atomic:!1,replacedWith:cr(s)})}else t.type===zn?r=e.markText(o,c,{collapsed:!0,replacedWith:sr(),handleMouseEvents:!0,selectLeft:!0,selectRight:!0}):t.type===Zn?r=e.markText({line:n,ch:o.ch+1},c,{collapsed:!0,atomic:!0,replacedWith:ur(),handleMouseEvents:!0,selectLeft:!0,selectRight:!0}):t.type===Jn?r=e.markText({line:n,ch:o.ch+1},c,{collapsed:!0,atomic:!0,replacedWith:lr(!1),handleMouseEvents:!0,selectLeft:!0,selectRight:!0}):t.type===$n&&(r=e.markText({line:n,ch:o.ch+1},c,{collapsed:!0,atomic:!0,replacedWith:lr(!0),handleMouseEvents:!0,selectLeft:!0,selectRight:!0}));return r&&(r.isMarkHeader=!0,r.itemType=t.type),r}function rr(e,t){var n,r=tr(e.getLineTokens(t));return r&&(n=nr(e,r,t)),n}function ar(e,t,n){var r,a,i;return jr(e.getRange(t,n))?(a=Y.a.createElement(Q.a,{name:"md-task-link",className:"markdown-icon"}),(i=document.createElement("span")).className="mark-link",ve.a.render(a,i),r=i):r=function(){var e=Y.a.createElement(Q.a,{name:"md-link",className:"markdown-icon"}),t=document.createElement("span");return t.className="mark-link",ve.a.render(e,t),t}(),r.addEventListener("click",(function(t){if(t.preventDefault(),t.stopPropagation(),!e.getOption("readOnly")){var n=t.target.getBoundingClientRect(),r=e.coordsChar({left:n.left+n.width/2,top:n.top+n.height/2}),a=ir(e,r);a&&kr(e,a[0].string,a[1].string,{line:r.line,ch:a[1].start})}}),!1),e.markText(t,n,{collapsed:!0,replacedWith:r})}function ir(e,t,n){for(var r=e.getLineTokens(t.line),a=null,i=null,o=0;o<r.length;o+=1){var c=r[o];if(c.type)if(!c.type.split(" ").find((function(e){return e.startsWith("formatting")}))&&(br(c,["link"])?a=c:br(c,["string","url"])&&a&&(i=c),i)){if(or(a,t.ch,n)||or(i,t.ch,n))return[a,i];a=null,i=null}}return null}function or(e,t,n){return n?t>=e.start-1&&t<=e.end+1:t>=e.start&&t<=e.end}function cr(e){var t=Y.a.createElement(Q.a,{name:"md-h".concat(e),className:"markdown-icon"}),n=document.createElement("span");return n.className="mark-header mark-header-heading",ve.a.render(t,n),n}function sr(){var e=document.createElement("span");return e.className="mark-header-hr",e.innerText=" ",e}function ur(){var e=Y.a.createElement(Q.a,{name:"md-list-1",className:"markdown-icon"}),t=document.createElement("span");return t.className="mark-header",ve.a.render(e,t),t}function lr(e){var t=e?"md-item-checked":"md-item-unchecked",n=Y.a.createElement(Q.a,{name:t,className:"markdown-icon"}),r=document.createElement("span");return r.className="mark-header mark-header-item",ve.a.render(n,r),r}function dr(e){return br(e,"line-ticktick-hr")}function fr(e){return br(e,"formatting-header")}function pr(e){return br(e,"formatting-quote")}function hr(e){return br(e,"formatting-list-ul")}function mr(e){return br(e,"formatting-list-ol")}function gr(e){return null==e.type}function vr(e){return br(e,["tab"])}function yr(e){return br(e,["ticktick-list-indent"])}function br(e,t){if(!e.type)return!1;var n;n="string"==typeof t?[t]:t;for(var r=new Set(e.type.split(" ")),a=0;a<n.length;a+=1){var i=n[a];if(!r.has(i))return!1}return!0}function kr(e,t,n,r){e.showLink({width:215,height:100,title:t,url:n,anchorPos:r})}function Or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(n),!0).forEach((function(t){Sr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Er(e,t,n,r,a,i){var o=t.ranges[0],c=o.head,s=o.anchor,u=!t.ranges[0].empty(),l=c.ch,d=c.xRel;if(n(l)){var f={line:c.line,ch:c.ch,update:function(e,t){this.line=e,this.ch=t}};if("*mouse"===t.origin)i(f,d);else{var p=e.listSelections(),h=1===p.length?p[0].head:null;h&&(h.line!==c.line||Object(Ln.cmpPos)(c,h)>0)?a(f,t.origin):r(f,t.origin)}var m=f.line,g=f.ch;u?t.update([{anchor:s,head:{line:m,ch:g}}]):t.update([{anchor:Tr({},f,{sticky:"after"}),head:{line:m,ch:g,sticky:"after"}}])}}function wr(e,t){return function(e,t,n){var r=0;if(e&&e.length){var a=e[e.length-1];r=Math.min(Math.floor((a-t)/n)+1,9)}return r}(e.listStack,e.listMarkerLength,t)}function Dr(){return"^https?:\\/\\/(?:(?:www\\.)?(?:".concat(R.i.replace(".com","\\.com"),"))\\/(?:webapp\\/?)?#p\\/([0-9a-zA-Z]*)\\/tasks\\/([0-9a-zA-Z]*)")}function jr(e){var t=Dr(),n=new RegExp(t,"i"),r=e.match(n);return r&&r.length?{url:r[0],projectId:r[1],taskId:r[2]}:null}var _r=function(e){var t=null,n=Dr(),r=new RegExp("(".concat(n,")([ \\t]([^\\r\\n]*|[^\\n]*|[^\\r]*))?([\\s\\S]*)?"),"i"),a=e.match(r);if(a&&a.length)if(a.length>5){var i,o=null!==(i=a[6])&&void 0!==i?i:"";t={url:a[1],projectId:a[2],taskId:a[3],title:a[5],otherText:o}}else t={url:a[1],projectId:a[2],taskId:a[3]};if(t){var c=t,s=c.url,u=c.taskId,l=c.title,d=c.otherText;if(!l){var f=v.a("my_task"),p=Object(T.n)(u),h=p?p.get("title"):f;return h||(h=f),"[".concat(h,"](").concat(s,")")}var m="[".concat(l,"](").concat(s,")");if(-1!==e.indexOf(l))return m+d}return e};function Cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||Ir(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ir(e,t){if(e){if("string"==typeof e)return Mr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mr(e,t):void 0}}function Mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ar=/^(\s*)((\d+)([.)]))(\s+)/;function xr(e,t){var n=Ar,r=e.getLine(t);if(null!=r){var a=n.exec(r);if(null!=a){var i=!e.curOp;i&&e.startOperation();var o=new Map;o.set(t,a);for(var c=0,s=e.firstLine(),u=e.lastLine();;){var l=t+(c-=1);if(l<s)break;if(!(!1!==e.getStateAfter(l).list))break;var d=n.exec(e.getLine(l));if(!d)break;o.set(l,d)}for(var f=0;;){var p=t+(f+=1);if(p>u)break;if(!(!1!==e.getStateAfter(p).list))break;var h=n.exec(e.getLine(p));if(!h)break;o.set(p,h)}var m=new Map;Array.from(o.keys()).sort((function(e,t){return e-t})).forEach((function(t){var r=o.get(t);if(r){var a=parseInt(r[3],10);if(!Number.isNaN(a)){var i,c,s,u=(i=r[1].length,c=e.options.indentUnit,Math.min(Math.floor(i/c)+1,9)),l=e.getLine(t),d=(m.get(u)||0)+1,f=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ir(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}(m.keys());try{for(f.s();!(s=f.n()).done;){var p=s.value;p>u&&m.delete(p)}}catch(e){f.e(e)}finally{f.f()}if(m.set(u,d),parseInt(r[3],10)!==d){var h=l.match(n)[0];e.replaceRange(h.replace(n,r[1]+d+r[4]+r[5]),{line:t,ch:0},{line:t,ch:h.length},"manualMarkText")}}}})),i&&e.endOperation()}}}function Rr(e){return"anchor"in e&&(e=[e.head,e.anchor]),Object(Ln.cmpPos)(e[0],e[1])>0?[e[1],e[0]]:[e[0],e[1]]}function Pr(e,t){var n=Cr(e,2),r=n[0],a=n[1],i=Cr(t,2),o=i[0],c=i[1];return!(Object(Ln.cmpPos)(a,o)<0||Object(Ln.cmpPos)(r,c)>0)}function Nr(e){var t=e.lastLine(),n={line:t,ch:e.getLine(t).length};e.setSelection(n)}function Lr(e,t,n){var r=t.line,a=t.ch,i={line:r,ch:0},o=e.getLine(r).slice(0,a),c=e.getStateAfter(r);if((c.header||c.quote||!1!==c.list)&&o.length){var s=/^(\s*)(\s+|^#{1,6}(?:[\s\t])|>\s|[*+-]\s\[[x| ]\]\s|[*+-]\s|(\d+)([.)]\s))([\s\S]*)/i.exec(o);if(s&&(!n||s[5]&&s[5].length)){var u=s[1]+s[2];return i.ch=u.length,i}}return i}function Ur(e,t,n){if(!n||!n.length)return-1;if(0===e.listSelections().length)return-1;var r=t,a=n[0].getBoundingClientRect(),i=e.charCoords(r),o=parseInt(n.css("padding-bottom"),10),c=0;Number.isNaN(o)||(c=o);var s=n[0].scrollTop,u=s;return i.top-4<a.top?u=s+(i.top-4-a.top):i.bottom+4+c>a.bottom&&(u=s+(i.bottom+4+c-a.bottom)),u!==s?u:-1}n(214);var Fr="normal",Hr="linkify",Br="em_open",Yr="em_close",Wr="strong_open",Kr="strong_close",Gr="under_line_open",Vr="under_line_close",zr="strikethrough_open",Zr="strikethrough_close",qr="code_inline_open",Jr="code_inline_close",$r="mark_open",Xr="mark_close",Qr="link_open",ea="link_close",ta="link_url_open",na="link_url_close";function ra(e){return e.attrs&&e.attrs.length>0&&e.attrs[0].length>1&&"href"===e.attrs[0][0]?e.attrs[0][1]:""}var aa=function(e){var t=[],n=e.find((function(e){return"inline"===e.type}));if(n){var r,a=n.children,i=n.content,o=!1;a.forEach((function(e){var n=e.type,a=e.markup,c=e.content;if("link_open"===n&&"linkify"===a)return o=!0,void(r=ra(e));if(o)if("text"===n){var s=r;s&&i.includes(s)||(s=c),t.push({content:s,token:Hr})}else"link_close"===n&&(o=!1);else{if("link_open"===n)return t.push(ia("[",Qr)),void(r=ra(e));if(null==r||"link_close"!==n){var u=function(e){var t=e.type,n=e.markup,r=e.content,a=[];switch(t){case"text":if(!r)return;a.push({content:r,token:Fr});break;case"em_open":a.push(ia(n,Br));break;case"em_close":a.push(ia(n,Yr));break;case"strong_open":a.push(ia(n,Wr));break;case"strong_close":a.push(ia(n,Kr));break;case"s_open":a.push(ia(n,zr));break;case"s_close":a.push(ia(n,Zr));break;case"underline_open":a.push(ia(n,Gr));break;case"underline_close":a.push(ia(n,Vr));break;case"mark_open":a.push(ia(n,$r));break;case"mark_close":a.push(ia(n,Xr));break;case"code_inline":a.push(ia(n,qr)),a.push({content:r,token:Fr}),a.push(ia(n,Jr))}return a}(e);u&&(t=t.concat(u))}else"link_close"===n&&(t.push(ia("]",ea)),t.push(ia("(",ta)),r&&t.push({content:r,token:Fr}),t.push(ia(")",na)),r=null)}}))}return t};function ia(e,t){if(e)return{content:e,token:t}}n(159);var oa=n(491),ca=n(630),sa=n(636),ua=n(637),la=Object(oa.b)(),da=ca("zero",{linkify:!0}).use(ua).use(sa);function fa(e,t){var n=null,r=0,a=function(){e(),n=null},i=function(){var e=+new Date;if(n){if(e<r)return;clearTimeout(n)}n=setTimeout(a,t),r=e+100};return i.stop=function(){n&&(clearTimeout(n),n=null)},i}da.enable(["link","linkify"]),Un.a.defineMode("link-markdown",(function(e,t){Object(oa.a)(da.linkify),void 0===t.maxBlockquoteDepth&&(t.maxBlockquoteDepth=0),void 0===t.taskLists&&(t.taskLists=!0),void 0===t.strikethrough&&(t.strikethrough=!0),void 0===t.emoji&&(t.emoji=!1),void 0===t.fencedCodeBlockHighlighting&&(t.fencedCodeBlockHighlighting=!0),void 0===t.allowAtxHeaderWithoutSpace&&(t.allowAtxHeaderWithoutSpace=!1),void 0===t.xml&&(t.xml=!1),void 0===t.tokenTypeOverrides&&(t.tokenTypeOverrides={});var n={header:"header",code:"comment",inlineCode:"inline-code",quote:"quote",list1:"list-1",list2:"list-2",list3:"list-3",hr:"hr",formatting:"formatting",linkify:"linkify",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",underline:"underline",mark:"mark",emoji:"builtin"};for(var r in n)n.hasOwnProperty(r)&&t.tokenTypeOverrides[r]&&(n[r]=t.tokenTypeOverrides[r]);var a=/^(?:[*\-+]|^[0-9]+([.)]))\s/,i=/^\[(x| )\]\s/i,o=/^[^#!\[\]*_\\<>` "'(~:]+/;function s(e){var t=null;return-1===e.code&&(t="line-ticktick-code-block line-background-ticktick-code-block-bg"),e.linkHref=!1,e.linkText=!1,e.em=!1,e.strong=!1,e.underline=!1,e.mark=!1,e.strikethrough=!1,e.quote=0,e.prevLine=e.thisLine,e.thisLine={stream:null},e.taskOpen=!1,e.taskClosed=!1,e.inlineTokens=null,t}function u(e,t){return function(e,t,n){return t.f=t.inline=n,n(e,t)}(e,t,t.inline)}function l(e){var r=[];if(e.formatting){r.push(n.formatting),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var a=0;a<e.formatting.length;a++)r.push(n.formatting+"-"+e.formatting[a]),"header"===e.formatting[a]?r.push(n.formatting+"-"+e.formatting[a]+"-"+e.header):"quote"===e.formatting[a]?!t.maxBlockquoteDepth||t.maxBlockquoteDepth>=e.quote?r.push(n.formatting+"-"+e.formatting[a]+"-"+e.quote):r.push("error"):"code-block"===e.formatting[a]&&(r.push("line-ticktick-code-block"),r.push("line-background-ticktick-code-block-bg"),e.thisLine&&e.thisLine.fencedCodeEnd?(r.push("line-ticktick-code-block-end"),r.push("line-background-ticktick-code-block-end-bg")):(r.push("line-ticktick-code-block-begin"),r.push("line-background-ticktick-code-block-begin-bg")))}return e.linkHref?r.push(n.linkHref,"url"):(e.emoji&&r.push(n.emoji),e.linkText&&r.push(n.linkText),e.linkify&&r.push(n.linkify)),r.length?r.join(" "):null}function d(e,t){if(e.match(o,!0))return l(t)}function f(e,t){if(null==t.maybeLinkify&&(t.maybeLinkify=la.pretest(e.string)),!t.maybeLinkify){var n=t.text(e,t);if(void 0!==n)return n}if(t.list){if("checklist"===t.listType)" "===e.match(i,!0)[1]?(t.taskOpen=!0,t.taskClosed=!1):(t.taskClosed=!0,t.taskOpen=!1),t.formatting="checklist";else t.taskOpen=!1,t.taskClosed=!1;return t.list=null,l(t)}var r=e.string.slice(e.pos),a=da.parse(r,{});return t.inlineTokens=aa(a),e.eatSpace()?l(t):p(e,t)}function p(e,t){for(var n=t.inlineTokens;;){if(!e.next())return t.inlineTokens=null,l(t);if(!n||!n.length)return l(t);var r=n[0],a=r.content,i=r.token,o=e.current(),s=!1;if(t.linkHref&&i===Fr)try{encodeURIComponent(decodeURIComponent(o))===encodeURIComponent(decodeURIComponent(a))&&(s=!0)}catch(e){c.a.info("markdown parse URI malformed error")}if(o===a||s)switch(n.shift(),s=!1,i){case Fr:return l(t);case Hr:t.linkText=!0,t.linkify=!0;var u=l(t);return t.linkText=!1,t.linkify=!1,u;case Qr:return t.formatting="link",t.linkText=!0,l(t);case ea:t.formatting="link";var d=l(t);return t.linkText=!1,d;case ta:return t.formatting="link-string",t.linkHref=!0,l(t);case na:t.formatting="link-string";var f=l(t);return t.linkHref=!1,f;case Br:return t.formatting="em",t.em=a,l(t);case Yr:t.formatting="em";var p=l(t);return t.em=!1,p;case Wr:return t.formatting="strong",t.strong=a,l(t);case Kr:t.formatting="strong";var h=l(t);return t.strong=!1,h;case Gr:return t.formatting="underline",t.underline=a,l(t);case Vr:t.formatting="underline";var m=l(t);return t.underline=!1,m;case zr:return t.formatting="strikethrough",t.strikethrough=a,l(t);case Zr:t.formatting="strikethrough";var g=l(t);return t.strikethrough=!1,g;case qr:return t.formatting="code",t.code=a,l(t);case Jr:t.formatting="code";var v=l(t);return t.code=!1,v;case $r:return t.formatting="mark",t.mark=a,l(t);case Xr:t.formatting="mark";var y=l(t);return t.mark=!1,y;default:return l(t)}}}var h={startState:function(){return{f:u,prevLine:{stream:null},thisLine:{stream:null},block:u,htmlState:null,indentation:0,listMarkerLength:0,inline:f,text:d,formatting:!1,linkText:!1,linkHref:!1,code:0,em:!1,strong:!1,mark:!1,underline:!1,header:0,hr:!1,listType:null,list:!1,listStack:[],quote:0,strikethrough:!1,emoji:!1,fencedEndRE:null,inlineTokens:null}},copyState:function(e){return{f:e.f,prevLine:e.prevLine,thisLine:e.thisLine,block:e.block,indentation:e.indentation,listMarkerLength:e.listMarkerLength,localMode:e.localMode,localState:e.localMode?Un.a.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,formatting:!1,linkText:e.linkText,linkHref:e.linkHref,code:e.code,em:e.em,strong:e.strong,mark:e.mark,underline:e.underline,strikethrough:e.strikethrough,emoji:e.emoji,header:e.header,hr:e.hr,listType:e.listType,list:e.list,listStack:e.listStack.slice(0),quote:e.quote,md_inside:e.md_inside,fencedEndRE:e.fencedEndRE,inlineTokens:e.inlineTokens}},token:function(t,n){if(n.formatting=!1,t!==n.thisLine.stream){if(n.header=0,n.hr=!1,n.inlineTokens=null,n.linkText=!1,n.linkHref=!1,n.quote=0,n.taskOpen=!1,n.taskClosed=!1,t.match(/^\s*$/,!0))return s(n);if(n.prevLine=n.thisLine,n.thisLine={stream:t},!n.localState){n.f=n.block;var r=t.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(n.indentation=r,n.indentationDiff=null,r>0){var i=function(t){var n=t.indentation;if(!1!==t.list){for(var r=!0,a=t.listStack.slice(0);n<a[a.length-1];)if(a.pop(),!a.length){r=!1;break}if(r)return a[a.length-1]-t.listMarkerLength+e.indentUnit}return 0}(n);return t.match(a,!1)?"ticktick-list-indent":i?(t.backUp(Math.max(0,r-i)),"ticktick-list-indent"):null}}}else if(n.inlineTokens&&n.inlineTokens.length)return p(t,n);return n.f(t,n)},innerMode:function(e){return e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:h}},indent:function(e,t,n){return e.localState&&e.localMode.indent?e.localMode.indent(e.localState,t,n):0},blankLine:s,getType:l,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"link-markdown"};return h})),Un.a.defineMIME("text/markdown","link-markdown"),Un.a.defineMIME("text/x-markdown","link-markdown");var pa=function(e){return-1===e.search(/^(.*)?:\/\//)?"https://"+e:e},ha=function(e,t){var n=t.editable,r=t.text,a=t.url,i=void 0===a?"":a;switch(e){case"link":return'<a type="link" href="'.concat(pa(i),'" url="').concat(i,'" target="_blank"  class="contentUrl" contenteditable="').concat(n,'">').concat(r,"</a>");case"mdLink":return'<a type="mdLink" href="'.concat(pa(i),'" url="').concat(i,'" target="_blank"  class="contentUrl" contenteditable="').concat(n,'">').concat(r,"</a>");case"highlight":return'<marker contenteditable="'.concat(n,'">').concat(r,"</marker>");default:return""}},ma=function(e,t){var n=y.a.highlightKeyWordsRegExp;return null==n?e:e.replace(n,(function(e,n){return ha("highlight",{editable:t,text:n})}))},ga=function(e,t,n,r){var a="",i="calculate"===e,o="detail"===e,c={isLinkText:!1,isLinkHref:!1,linkText:"",linkHref:"",linkHrefRich:"",isHighlightInLink:!1},s=function(){c.isLinkText=!1,c.isLinkHref=!1,c.linkText="",c.linkHref="",c.linkHrefRich="",c.isHighlightInLink=!1},u=r.has("highlight"),l=da.parseInline(t,{}),d=aa(l);if(0===d.length)return O.e(t);for(;d.length>0;){var f=d.shift(),p=f.content,h=f.token,m=O.e(p);switch(h){case Qr:c.isLinkText=!0;break;case ea:c.isLinkText=!1;break;case ta:c.isLinkHref=!0;break;case na:c.isLinkHref=!1,c.linkText.trim()&&c.linkHref?a+=i?c.linkText:o?c.isHighlightInLink?"[".concat(c.linkText.trim(),"](").concat(c.linkHrefRich,")"):c.linkText.trim():ha("mdLink",{editable:n,text:c.isHighlightInLink?"[".concat(c.linkText.trim(),"](").concat(c.linkHrefRich,")"):c.linkText.trim(),url:c.linkHref}):a+="[".concat(c.linkText,"](").concat(c.linkHrefRich,")"),s();break;case Hr:s(),a+=i?m:o?ma(m,n):ha("link",{editable:n,text:u?m:ma(m,n),url:m});break;case Fr:default:c.isLinkHref||c.isLinkText?c.isLinkText?c.linkText=u?m:ma(m,n):(c.linkHref=m,c.linkHrefRich=u?m:ma(m,n),c.isHighlightInLink=c.linkHref!==c.linkHrefRich):a+=u?m:ma(m,n)}}return a};function va(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ya(e){return(ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ka(e,t){return(ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ea(e);if(t){var a=Ea(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ta(this,n)}}function Ta(e,t){return!t||"object"!==ya(t)&&"function"!=typeof t?Sa(e):t}function Sa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ea(e){return(Ea=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wa="ok",Da="ci",ja="hm",_a=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ka(e,t)}(i,e);var t,n,r,a=Oa(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e))._lastCRange=void 0,t.startFold=fa(t.startFoldImmediately.bind(Sa(t)),100),e.on("changes",(function(e,n){var r=!1;n.forEach((function(t){var n=t.from,a=t.to,i=t.origin;"+delete"===i&&n.line!==a.line&&xr(e,n.line),"manualMarkText"!==i&&"setValue"!==i&&"+delete"!==i&&(r=!0,Qn(e,n,a,(function(e){return null!=e.foldType})))})),r&&t.startFold()})),e.on("cursorActivity",(function(e){var n={};function r(t){var r=t.line;if(r in n)n[r].ch.push(t.ch);else{for(var a=e.getLineHandle(t.line).markedSpans||[],i=[],o=0;o<a.length;o++){var c=a[o],s=c.marker,u=c.from,l=c.to;null!=s.foldType&&i.push([s,u,l])}n[r]={lineNo:r,ch:[t.ch],markers:i}}}e.listSelections().forEach((function(e){r(e.anchor),r(e.head)})),t.startQuickFold()})),t}return t=i,(n=[{key:"reset",value:function(){Aa()}},{key:"startQuickFold",value:function(){var e=Ia;if(0!==e.length){var t=e[0],n=t;e.forEach((function(e){t>e&&(t=e),n<e&&(n=e)})),this.startFold.stop(),this.startFoldImmediately(t,n)}}},{key:"startFoldImmediately",value:function(e,t){var n=this,r=this.cm,a=r.firstLine();e&&e>=r.firstLine()&&e<=r.lastLine()&&(a=e);var i=r.lastLine()+1;t&&t>=r.firstLine()&&t<=r.lastLine()&&(i=t+1),Aa(),this.setPos(a,0,!0),r.operation((function(){return r.eachLine(a,i,(function(e){var t=e.lineNo();if(!(t<n.lineNo)){t>n.lineNo&&n.setPos(t,0);var a=new Array(e.text.length),i=new Array(e.text.length),o=e.markedSpans;o&&o.forEach((function(e){C(e)}));var c=n.lineTokens,s=tr(c);if(s){for(var u=s.start,l=s.end,d=!0,f=!1,p=u;p<l;p+=1){if(a[p]){d=!1;break}i[p]&&(f=!0)}if(d){f&&Qn(r,{line:t,ch:u},{line:t,ch:l});var h=nr(r,s,t);h&&C({marker:h,from:u,to:l})}}else if(o){var m=[];o.forEach((function(e){var t=e.marker,n=e.from,r=e.to;t.isMarkHeader&&(m.push({from:n,to:r}),t.clear())})),m.forEach((function(e){!function(e){for(var t=null==e.from?0:e.from,n=null==e.to?i.length:e.to,r=t;r<n;r++)i[r]=0,a[r]=0}(e)}))}for(;n.i_token<c.length;){for(var g=c[n.i_token],v=void 0,y=null,b=!0,k=g.start;k<g.end;k++)if(i[k]){b=!1;break}if(b)for(var O=Object.keys(Ca),T=0;T<O.length&&(v=O[T],!(y=Ca[v](n,g)));T+=1);if(y){var S=y.find(),E=S.from,w=S.to;if(y.foldType=v,y.on("clear",(function(e,t){Ma(e.line)})),E.line>t||E.ch>g.start){n.i_token++;for(var D=E.line===t?E.ch:i.length,j=w.line===t?w.ch:i.length,_=D;_<j;_++)i[_]=1}else{if(w.line!==t)return void n.setPos(w.line,w.ch);n.setPos(w.ch)}}else n.i_token++}}function C(e){for(var t=null==e.from?0:e.from,n=null==e.to?i.length:e.to,r=t;r<n;r++)i[r]=1,e.marker.isMarkHeader&&(a[r]=1)}}))}))}},{key:"requestRange",value:function(e,t,n,r){r||(r=t),n||(n=e);var a=this.cm;if(0!==a.findMarks(e,t).length)return ja;Ma(e.line),this._lastCRange=[n,r];for(var i=a.listSelections(),o=0;o<i.length;o+=1){var c=Rr(i[o]);if(Pr(this._lastCRange,c))return Da}return Ma(n.line),wa}}])&&ba(t.prototype,n),r&&ba(t,r),i}(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.line=void 0,this.lineNo=void 0,this.i_token=void 0,this.lineTokens=void 0,this.cm=t}var t,n,r;return t=e,(n=[{key:"setPos",value:function(e,t,n){void 0===t?(t=e,e=this.line):"number"==typeof e&&(e=this.cm.getLineHandle(e));var r=e===this.line,a=0;n||!r?(this.line=e,this.lineNo=e.lineNo(),this.lineTokens=this.cm.getLineTokens(this.lineNo)):(a=this.i_token,this.lineTokens[a].start>t&&(a=0));for(var i=this.lineTokens;a<i.length&&!(i[a].end>t);a++);this.i_token=a}}])&&va(t.prototype,n),r&&va(t,r),e}()),Ca={},Ia=[],Ma=function(e){Ia.push(e)},Aa=function(){Ia=[]};n(122);function xa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ra,Pa=0,Na=1,La=2,Ua=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caches=[],this.cm=t,t.on("beforeChange",(function(e,t){"setValue"===t.origin&&(n.caches=[])})),t.on("change",(function(e,t){if("setValue"===t.origin)n.caches=[];else{var r=t.from.line;n.caches.length>r&&n.caches.splice(r)}}))}var t,n,r;return t=e,(n=[{key:"getTokenTypes",value:function(e,t){var n=t?t.state:{},r=e.state,a=" "+e.type+" ";return{em:r.em?Na:n.em?La:Pa,strikethrough:r.strikethrough?Na:n.strikethrough?La:Pa,strong:r.strong?Na:n.strong?La:Pa,mark:r.mark?Na:n.mark?La:Pa,underline:r.underline?Na:n.underline?La:Pa,code:r.code?Na:n.code?La:Pa,linkText:r.linkText?Na:n.linkText?La:Pa,linkHref:r.linkHref&&!r.linkText?Na:r.linkHref||r.linkText||!n.linkHref||n.linkText?Pa:La,task:-1!==a.indexOf(" formatting-checklist ")?Na|La:Pa,hashtag:r.hmdHashtag?Na:n.hmdHashtag?La:Pa}}},{key:"extract",value:function(e,t){if(!t){var n=this.caches[e];if(n)return n}for(var r=this.cm.getLineTokens(e),a=this.cm.getLine(e),i=a.length,o=[],c={},s=0;s<r.length;s++){var u=r[s],l=this.getTokenTypes(u,r[s-1]);for(var d in l){var f=c[d];l[d]&Na&&(f||(f={type:d,begin:u.start,end:i,head:u,head_i:s,tail:r[r.length-1],tail_i:r.length-1,text:a.slice(u.start)},o.push(f),c[d]=f)),l[d]&La&&f&&(f.tail=u,f.tail_i=s,f.end=u.end,f.text=f.text.slice(0,f.end-f.begin),c[d]=null)}}return this.caches[e]=o,o}},{key:"findSpansAt",value:function(e){for(var t=this.extract(e.line),n=e.ch,r=[],a=0;a<t.length;a++){var i=t[a];if(i.begin>n)break;n>=i.begin&&i.end>=n&&r.push(i)}return r}},{key:"findSpanWithTypeAt",value:function(e,t){for(var n=this.extract(e.line),r=e.ch,a=0;a<n.length;a++){var i=n[a];if(i.begin>r)break;if(r>=i.begin&&i.end>=r&&i.type===t)return i}return null}}])&&xa(t.prototype,n),r&&xa(t,r),e}(),Fa=(Ra="LineSpanExtractor","function"==typeof Symbol?Symbol(Ra):"_\n"+Ra+"\n_"+Math.floor(65535*Math.random()).toString(16));function Ha(e){var t=e[Fa];return t||(t=new Ua(e),e[Fa]=t),t}function Ba(e,t,n){var r=Ha(e),a=r.findSpanWithTypeAt(t,"linkText");if(!a)return null;var i=r.findSpanWithTypeAt({line:t.line,ch:a.end+1},"linkHref");if(!i)return null;var o=i.begin+1,c=i.end-1;return o>=c?null:ar(e,{line:t.line,ch:o},{line:t.line,ch:c})}!function(e,t,n){var r=Ca;if(e in r&&!n)throw new Error("Folder ".concat(e," already registered"));r[e]=t}("link",(function(e,t){var n=e.cm;return"["!==t.string||!t.state.linkText||t.state.linkTitle||/\bimage\b/.test(t.type)?null:Ba(n,{line:e.lineNo,ch:t.start},(function(t,n){return e.requestRange(t,n)}))}),!0);var Ya=n(419);function Wa(e){return(Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ka(e,t){return(Ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ga(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Za(e);if(t){var a=Za(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Va(this,n)}}function Va(e,t){return!t||"object"!==Wa(t)&&"function"!=typeof t?za(e):t}function za(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Za(e){return(Za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ja(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $a(e,t,n){return t&&Ja(e.prototype,t),n&&Ja(e,n),e}Un.a.defineExtension("showLink",(function(e){var t=this.listSelections();if(!(t.length>1)){if(this.somethingSelected()){var n=Rr(t[0]);t[0].head.line!=t[0].anchor.line&&(n=[{line:n[0].line,ch:n[0].ch},{line:n[0].line,ch:99999999}],this.setSelection(n[0],n[1])),e.title=this.getRange(n[0],n[1]),e.titleRange=n}this.state.linkWidgetActive&&this.state.linkWidgetActive.close();var r=new Xa(this,e);this.state.linkWidgetActive=r,r.show()}}));var Xa=function(){function e(t,n){qa(this,e),this.cm=t,this.options=n,this.onContainerClick=this.onContainerClick.bind(this),this.onContainerKeyDown=this.onContainerKeyDown.bind(this),this.confirm=this.confirm.bind(this),this.close=this.close.bind(this),this.onRemove=this.onRemove.bind(this)}return $a(e,[{key:"show",value:function(){var e=this.cm,t=this.options,n=t.title,r=t.url,a=t.anchorPos,i=a||this.smallerSelectionPos(),o=this.getAdjustingScrollTop(i);o>=0&&(this.getScrollElt()[0].scrollTop=o);var c=this.container=document.body,s=e.charCoords(i),u=Y.a.createElement(Qa,{isNew:null==a,theme:e.options.theme,title:n,url:r,showRect:s,onConfirm:this.confirm,onCancel:this.close,onRemove:this.onRemove}),l=this.renderingElt=document.createElement("div");c.appendChild(l),this.linkModal=ve.a.render(u,l),Un.a.on(c,"mousedown",this.onContainerClick),Un.a.on(this.modalDom(),"keydown",this.onContainerKeyDown)}},{key:"isCursorVisible",value:function(){return this.getAdjustingScrollTop(this.smallerSelectionPos())<0}},{key:"getScrollElt",value:function(){return $(this.cm.getTextArea()).parents(".antiscroll-inner").eq(0)}},{key:"getAdjustingScrollTop",value:function(e){return Ur(this.cm,e,this.getScrollElt())}},{key:"modalDom",value:function(){return this.linkModal?this.linkModal.modalRefs.current:null}},{key:"onRemove",value:function(){this.handleAction(!0)}},{key:"close",value:function(){this.cm.state.linkWidgetActive===this&&(this.cm.state.linkWidgetActive=null,Un.a.off(this.container,"mousedown",this.onContainerClick),this.modalDom()&&Un.a.off(this.modalDom(),"keydown",this.onContainerKeyDown),ve.a.unmountComponentAtNode(this.renderingElt),this.cm.hadFocused&&this.isCursorVisible()&&this.cm.focus())}},{key:"confirm",value:function(){this.handleAction(!1)}},{key:"handleAction",value:function(e){var t=this.linkModal.getUrl().trim();if(t){var n=this.cm,r=this.linkModal.getTitle();if(!r){var a=jr(t);if(a){var i=a.taskId,o=v.a("my_task"),c=Object(T.n)(i);(r=c?c.get("title"):o)||(r=o)}else r=t}var s,u=this.options,l=u.anchorPos,d=u.titleRange,f="[".concat(r,"](").concat(t,")");if(l){var p=ir(n,l);if(p){var h={line:l.line,ch:p[0].start-1};n.replaceRange(e?r:f,h,{line:l.line,ch:p[1].end+1},"manualMarkText"),s=h}}else d?(s=d[0],n.replaceRange(f,d[0],d[1],"manualMarkText")):(s=this.smallerSelectionPos(),n.replaceSelection(f,void 0,"manualMarkText"));if(this.close(),s){var m=Ba(n,s);m&&(m.on("clear",(function(e,t){Ma(e.line)})),m.foldType="link")}}else this.close()}},{key:"smallerSelectionPos",value:function(){return Rr(this.cm.listSelections()[0])[0]}},{key:"onContainerClick",value:function(e){this.modalDom()&&(Un.a.contains(this.modalDom(),e.target)||this.close())}},{key:"onContainerKeyDown",value:function(e){switch(e.keyCode){case 13:e.preventDefault(),this.confirm();break;case 27:e.preventDefault(),this.close()}}},{key:"changeFocus",value:function(){var e=document.activeElement===this.titleElt,t=document.activeElement===this.urlElt;(e||t)&&e?this.urlElt.focus():this.titleElt.focus()}}]),e}(),Qa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ka(e,t)}(n,e);var t=Ga(n);function n(e){var r;return qa(this,n),(r=t.call(this,e)).modalRefs=Y.a.createRef(),r.titleRefs=Y.a.createRef(),r.urlRefs=Y.a.createRef(),r.onConfirm=r.onConfirm.bind(za(r)),r.onCancel=r.onCancel.bind(za(r)),r.onRemove=r.onRemove.bind(za(r)),r}return $a(n,[{key:"componentDidMount",value:function(){var e=this;this.useEffect();var t=this.props,n=t.title,r=t.url;setTimeout((function(){n?r?(e.titleRefs.current.focus(),e.titleRefs.current.select()):e.urlRefs.current.focus():e.titleRefs.current.focus()}),1)}},{key:"componentDidUpdate",value:function(e,t){this.useEffect()}},{key:"onCancel",value:function(){this.props.onCancel&&this.props.onCancel()}},{key:"onConfirm",value:function(){this.props.onConfirm&&this.props.onConfirm()}},{key:"onRemove",value:function(){this.props.onRemove&&this.props.onRemove()}},{key:"render",value:function(){var e=this.props,t=e.isNew,n=e.title,r=e.url,a=e.theme,i=e.showRect,o=t?v.a("add_link"):v.a("edit_link");return Y.a.createElement("div",{className:"CodeMirror-link-modal ".concat(a),ref:this.modalRefs,style:{left:i.left,top:i.bottom}},Y.a.createElement("div",{className:"modal-header"},Y.a.createElement("h1",{className:"modal-title text-primary text-def"},o),Y.a.createElement("a",{className:"modal-close",onClick:this.onCancel},Y.a.createElement(Q.a,{name:"close"}))),Y.a.createElement("div",{className:"modal-body"},Y.a.createElement("input",{ref:this.titleRefs,className:"link-title input-lrg",type:"text",placeholder:v.a("text"),defaultValue:n}),Y.a.createElement("input",{ref:this.urlRefs,className:"link-url input-lrg",type:"text",placeholder:v.a("link"),defaultValue:r})),this.renderDefaultFooter())}},{key:"renderDefaultFooter",value:function(){var e=this.props.isNew?Y.a.createElement(Ya.a,{onClick:this.onCancel,type:"cancel"},v.a("cancel")):Y.a.createElement(Ya.a,{onClick:this.onRemove,type:"cancel"},v.a("remove_link"));return Y.a.createElement("div",{className:"modal-footer"},e,Y.a.createElement(Ya.a,{type:"primary",onClick:this.onConfirm},v.a("confirm")))}},{key:"getTitle",value:function(){return this.titleRefs.current.value}},{key:"getUrl",value:function(){return this.urlRefs.current.value}},{key:"changeFocus",value:function(){var e=this.titleRefs.current,t=this.urlRefs.current,n=document.activeElement===e,r=document.activeElement===t;(n||r)&&n?t.focus():e.focus()}},{key:"useEffect",value:function(){var e=window.innerWidth,t=window.innerHeight,n=this.modalRefs.current,r=this.props.showRect,a=n.getBoundingClientRect();if(a.bottom-t>0){var i=a.bottom-a.top;r.top-(r.bottom-a.top)-i>0&&(n.style.top=r.top-i+"px")}var o=a.right-(e-10);o>0&&(n.style.left=r.left-o-10+"px")}}]),n}(Y.a.Component);n(953),n(954);Un.a.registerHelper("hint","preset",(function(e,t){var n=t.source,r=e.getCursor(),a=t.start,i=t.end,o=t.callback,c=t.text,s=[];return n.forEach((function(e,t){var n=e.match.toLowerCase(),r=c.toLowerCase();if(n.includes(r)){var a={key:e.key,displayText:e.match,text:e.complete,hint:function(e,t,n){"function"==typeof o&&o(t,n)}};s.push(a)}})),{list:s,from:Un.a.Pos(r.line,a),to:Un.a.Pos(r.line,i)}}));var ei=/[\d\w\s\-\:\u4e00-\u9fa5]/;Un.a.registerHelper("hint","date",(function(e,t){var n,r,a=e.getCursor(),i=e.getLine(a.line),o=t.source,c=[];if("number"==typeof t.start&&"number"==typeof t.end)n=t.start,r=t.end;else{for(r=n=a.ch;r<i.length&&ei.test(i.charAt(r));)++r;for(;n&&ei.test(i.charAt(n-1));)--n}if(o.length){var s=i.slice(n,r);if(s)o.forEach((function(e){var t=e.match.toLowerCase(),n=s.toLowerCase();t.includes(n)&&c.push({displayText:e.match,text:e.hint})}));else{var u=o,l=U.a.getCurrentInWhichDayOfWeek();u=[o[0],o[1],o[7],o[14-l]],c=u.map((function(e){return{displayText:e.match,text:e.hint}}))}}else c=[];return{list:c,from:Un.a.Pos(a.line,n),to:Un.a.Pos(a.line,r)}})),Un.a.registerHelper("hint","tag",(function(e,t){var n=t.source,r=t.callback,a=t.needClean,i=e.getCursor(),o=t.start,c=t.end,s=t.text;function u(e,t,n){var s="#"+n.text;a&&(s=""),e.replaceRange(s,Un.a.Pos(i.line,o),Un.a.Pos(i.line,c),"complete"),"function"==typeof r&&r(t,n)}var l=[];if(s){var d=!1;n.forEach((function(e){var t=e.match.toLowerCase(),n=s.toLowerCase();t.includes(n)&&(t===n?(d=!0,l.unshift({displayText:e.match,text:e.hint,hint:u})):l.push({displayText:e.match,text:e.hint,hint:u}))})),d||l.push({text:s+" ",displayText:v.a("create_tag",{s:s}),hint:u})}else n.forEach((function(e){l.push({displayText:e.match,text:e.hint,hint:u})}));return{list:l,from:Un.a.Pos(i.line,o),to:Un.a.Pos(i.line,c)}})),Un.a.registerHelper("hint","assignee",(function(e,t){var n=t.source,r=e.getCursor(),a=t.start,i=t.end,o=t.callback,c=t.text,s=[];return n.forEach((function(e,t){var n=e.match.toLowerCase(),r=c.toLowerCase();if(n.includes(r)){var a={index:t,key:e.key,displayText:e.match,avatarUrl:e.avatarUrl,text:e.complete,render:function(e,t,n){var r=document.createElement("img");r.className="avatar med icon-avatar avatar-bd-divider",r.src=n.avatarUrl;var a=document.createElement("span");return a.innerText=n.displayText,e.appendChild(r),e.appendChild(a),e},hint:function(e,t,n){"function"==typeof o&&o(t,n)}};s.push(a),s.sort((function(e,t){return e.index>t.index?1:-1}))}})),{list:s,from:Un.a.Pos(r.line,a),to:Un.a.Pos(r.line,i)}})),Un.a.registerHelper("hint","detailPreset",(function(e,t){var n=t.source,r=e.getCursor(),a=t.start,i=t.end,o=t.callback,c=t.text,s=t.needClean,u=t.type;function l(e,t,n){var c=u+n.text;s&&(c=""),e.replaceRange(c,Un.a.Pos(r.line,a),Un.a.Pos(r.line,i),"complete"),"function"==typeof o&&o(t,n)}var d=[];return n.forEach((function(e,t){var n=e.match.toLowerCase(),r=c.toLowerCase();if(n.includes(r)){var a={key:e.key,displayText:e.match,text:e.complete,hint:l};d.push(a)}})),{list:d,from:Un.a.Pos(r.line,a),to:Un.a.Pos(r.line,i)}})),Un.a.registerHelper("hint","detailAssignee",(function(e,t){var n=t.source,r=e.getCursor(),a=t.start,i=t.end,o=t.callback,c=t.text,s=t.needClean,u=t.type;function l(e,t,n){var c=u+n.text;s&&(c=""),e.replaceRange(c,Un.a.Pos(r.line,a),Un.a.Pos(r.line,i),"complete"),"function"==typeof o&&o(t,n)}var d=[];return n.forEach((function(e,t){var n=e.match.toLowerCase(),r=c.toLowerCase();if(n.includes(r)){var a={index:t,key:e.key,displayText:e.match,avatarUrl:e.avatarUrl,text:e.complete,render:function(e,t,n){var r=document.createElement("img");r.className="avatar med icon-avatar avatar-bd-divider",r.src=n.avatarUrl;var a=document.createElement("span");return a.innerText=n.displayText,e.appendChild(r),e.appendChild(a),e},hint:l};d.push(a),d.sort((function(e,t){return e.index>t.index?1:-1}))}})),{list:d,from:Un.a.Pos(r.line,a),to:Un.a.Pos(r.line,i)}}));var ti=/[\d\w\s\-\:\u4e00-\u9fa5]/;Un.a.registerHelper("hint","detailDate",(function(e,t){var n,r,a=e.getCursor(),i=e.getLine(a.line),o=t.source,c=t.type,s=t.needClean,u=t.callback,l=[];if("number"==typeof t.start&&"number"==typeof t.end)n=t.start,r=t.end;else{for(n=a.ch,r=n;r<i.length&&ti.test(i.charAt(r));)++r;for(;n&&ti.test(i.charAt(n-1));)--n}function d(e,t,i){var o=c+i.text;s&&(o=""),e.replaceRange(o,Un.a.Pos(a.line,n-1),Un.a.Pos(a.line,r),"complete"),"function"==typeof u&&u(t,i)}if(o.length){var f=i.slice(n,r);if(f)o.forEach((function(e){var t=e.match.toLowerCase(),n=f.toLowerCase();t.includes(n)&&l.push({key:e.key,displayText:e.match,text:e.hint,hint:d})}));else{var p=o,h=U.a.getCurrentInWhichDayOfWeek();p=[o[0],o[1],o[7],o[14-h]],l=p.map((function(e){return{key:e.key,displayText:e.match,text:e.hint,hint:d}}))}}else l=[];return{list:l,from:Un.a.Pos(a.line,n),to:Un.a.Pos(a.line,r)}}));n(638),n(639),n(640),n(642),n(955),n(956),n(641),n(957),n(958),n(959),n(960);var ni,ri,ai=n(630),ii=n(636),oi=n(637),ci=Object(oa.b)(),si=ai({linkify:!0}).use(oi).use(ii);function ui(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function li(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ui(Object(n),!0).forEach((function(t){di(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ui(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function di(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}si.disable(["image","newline","escape","autolink","html_inline","entity","strikethrough"]),Un.a.defineMode("markdown",(function(e,t){Object(oa.a)(si.linkify),void 0===t.maxBlockquoteDepth&&(t.maxBlockquoteDepth=0),void 0===t.taskLists&&(t.taskLists=!0),void 0===t.strikethrough&&(t.strikethrough=!0),void 0===t.emoji&&(t.emoji=!1),void 0===t.fencedCodeBlockHighlighting&&(t.fencedCodeBlockHighlighting=!0),void 0===t.allowAtxHeaderWithoutSpace&&(t.allowAtxHeaderWithoutSpace=!1),void 0===t.xml&&(t.xml=!1),void 0===t.tokenTypeOverrides&&(t.tokenTypeOverrides={});var n={header:"header",code:"comment",inlineCode:"inline-code",quote:"quote",list1:"list-1",list2:"list-2",list3:"list-3",hr:"hr",formatting:"formatting",linkify:"linkify",linkText:"link",linkHref:"string",highlight:"highlight",em:"em",strong:"strong",strikethrough:"strikethrough",underline:"underline",mark:"mark",emoji:"builtin"};for(var r in n)n.hasOwnProperty(r)&&t.tokenTypeOverrides[r]&&(n[r]=t.tokenTypeOverrides[r]);var a=/^([*\-_])(?:\1)(?:\s*\1){1,}\s*$/,i=/^(\*)(?:\s*\1){3}\s*$/,o=/^(?:[*\-+]|^[0-9]+([.)]))\s/,s=/^>\s/,u=/^\[(x| )\]\s/i,l=/^(#{1,6})(?:[\s\t])/,d=/^[^#!\[\]*_\\<>` "'(~:]+/,f=/^(```+)[\s\t]*([\w+#-]*)[^\n`]*$/;function p(e){var t=null;return-1===e.code&&(t="line-ticktick-code-block line-background-ticktick-code-block-bg"),e.highlight=!1,e.linkHref=!1,e.linkText=!1,e.em=!1,e.strong=!1,e.underline=!1,e.mark=!1,e.strikethrough=!1,e.quote=0,e.prevLine=e.thisLine,e.thisLine={stream:null},e.taskOpen=!1,e.taskClosed=!1,e.inlineTokens=null,t}function h(r,c){var d,p=0===r.start,h=!(d=c.prevLine.stream)||!/\S/.test(d.string),v=c.prevLine.hr,y=r.column()===c.indentation,b=c.indentation;null===c.indentationDiff&&function(e){var t=e.indentation,n=!1!==e.list;if(null===e.indentationDiff&&(e.indentationDiff=e.indentation,n)){for(e.em=!1,e.strong=!1,e.mark=!1,e.underline=!1,e.code=!1,e.strikethrough=!1,e.list=null;t<e.listStack[e.listStack.length-1];)e.listStack.pop(),e.listStack.length?e.indentation=e.listStack[e.listStack.length-1]:e.list=!1;!1!==e.list&&(e.indentationDiff=t-e.listStack[e.listStack.length-1])}}(c);var k=p&&(!1===c.list||v||h)&&!r.match(i,!1)&&r.match(a),O=null;if(r.eatSpace())return null;if(p&&y&&(O=r.match(l)))return c.quote=0,c.header=O[1].length,c.thisLine.header=!0,c.formatting="header",c.f=c.inline,g(c);if(p&&r.match(s))return c.quote=y?1:c.quote+1,c.formatting="quote",g(c);if(!k&&y&&(O=r.match(o))){var T=O[1]?"ol":"ul";return c.listMarkerLength=r.current().length,c.indentation=b+c.listMarkerLength,c.list=!0,c.quote=0,c.listStack.push(c.indentation),t.taskLists&&r.match(u,!1)?c.listType="checklist":c.listType=T,c.f=c.inline,c.formatting=["list","list-"+T],g(c)}return y&&(O=r.match(f,!0))&&function(e){var t=new RegExp("```+s*$"),n=1,r=e.lookAhead(n),a=!1;for(;null!=r;){var i=r.match(t);if(i&&0===i.index){a=!0;break}n+=1,r=e.lookAhead(n)}return a}(r)?(c.quote=0,c.fencedEndRE=new RegExp(O[1]+"+ *$"),c.localMode=t.fencedCodeBlockHighlighting&&function(t){if(Un.a.findModeByName){var n=Un.a.findModeByName(t);n&&(t=n.mime||n.mimes[0])}var r=Un.a.getMode(e,t);return"null"===r.name?null:r}(O[2]),c.localMode&&(c.localState=Un.a.startState(c.localMode)),c.f=c.block=m,c.formatting="code-block",c.code=-1,g(c)):k?(r.skipToEnd(),c.hr=!0,c.thisLine.hr=!0,n.hr+" line-ticktick-hr line-background-ticktick-hr-bg"):function(e,t,n){return t.f=t.inline=n,n(e,t)}(r,c,c.inline)}function m(e,t){var r,a=t.listStack[t.listStack.length-1]||0,i=t.indentation<a,o=a+3,c="line-ticktick-code-block line-background-ticktick-code-block-bg";if(t.fencedEndRE&&t.indentation<=o&&(i||e.match(t.fencedEndRE)))return t.formatting="code-block",t.thisLine.fencedCodeEnd=!0,i||(r=g(t)),t.localMode=t.localState=null,t.block=h,t.f=y,t.fencedEndRE=null,t.code=0,i?function(e,t,n){return t.f=t.block=n,n(e,t)}(e,t,t.block):r;if(t.localMode){var s=t.localMode.token(e,t.localState);return null==s?c:s+" "+c}return e.skipToEnd(),n.code+" "+c}function g(r){var a,i=[];if(r.formatting){i.push(n.formatting),"string"==typeof r.formatting&&(r.formatting=[r.formatting]);for(var o=0;o<r.formatting.length;o++)i.push(n.formatting+"-"+r.formatting[o]),"header"===r.formatting[o]?i.push(n.formatting+"-"+r.formatting[o]+"-"+r.header):"quote"===r.formatting[o]?!t.maxBlockquoteDepth||t.maxBlockquoteDepth>=r.quote?i.push(n.formatting+"-"+r.formatting[o]+"-"+r.quote):i.push("error"):"code-block"===r.formatting[o]&&(i.push("line-ticktick-code-block"),i.push("line-background-ticktick-code-block-bg"),r.thisLine&&r.thisLine.fencedCodeEnd?(i.push("line-ticktick-code-block-end"),i.push("line-background-ticktick-code-block-end-bg")):(i.push("line-ticktick-code-block-begin"),i.push("line-background-ticktick-code-block-begin-bg")))}(r.highlight?i.push(n.highlight):r.linkHref?i.push(n.linkHref,"url"):(r.strong&&i.push(n.strong),r.em&&i.push(n.em),r.underline&&i.push(n.underline),r.strikethrough&&i.push(n.strikethrough),r.emoji&&i.push(n.emoji),r.linkText&&i.push(n.linkText),r.linkify&&i.push(n.linkify),r.code&&-1!==r.code&&i.push(n.inlineCode),r.mark&&i.push(n.mark)),r.header&&(i.push(n.header,n.header+"-"+r.header),i.push("line-ticktick-header","line-ticktick-header-"+r.header)),r.quote)&&(i.push(n.quote),a=!t.maxBlockquoteDepth||t.maxBlockquoteDepth>=r.quote?r.quote:t.maxBlockquoteDepth,i.push(n.quote+"-"+a),i.push("line-ticktick-quote","line-ticktick-quote-"+a));if(!1!==r.list){var c=(r.listStack.length-1)%3;c?1===c?i.push(n.list2):i.push(n.list3):i.push(n.list1);var s=wr(r,e.indentUnit);i.push("line-ticktick-list-line"),i.push("line-ticktick-list-line-"+s),"checklist"===r.listType&&(i.push("line-ticktick-checklist"),r.taskOpen?i.push("unchecked"):r.taskClosed&&i.push("checked"))}return i.length?i.join(" "):null}function v(e,t){if(e.match(d,!0))return g(t)}function y(e,t){if(null==t.maybeLinkify&&(t.maybeLinkify=ci.pretest(e.string)),!t.maybeLinkify){var n=t.text(e,t);if(void 0!==n)return n}if(t.list){if("checklist"===t.listType)" "===e.match(u,!0)[1]?(t.taskOpen=!0,t.taskClosed=!1):(t.taskClosed=!0,t.taskOpen=!1),t.formatting="checklist";else t.taskOpen=!1,t.taskClosed=!1;return t.list=null,g(t)}var r=e.string.slice(e.pos),a=si.parse(r,{});return t.inlineTokens=aa(a),e.eatSpace()?g(t):b(e,t)}function b(e,t){for(var n=t.inlineTokens;;){if(!e.next())return t.inlineTokens=null,g(t);if(!n||!n.length)return g(t);var r=n[0],a=r.content,i=r.token,o=e.current(),s=!1;if(t.linkHref&&i===Fr)try{encodeURIComponent(decodeURIComponent(o))===encodeURIComponent(decodeURIComponent(a))&&(s=!0)}catch(e){c.a.info("markdown parse URI malformed error")}if(o===a||s)switch(s=!1,n.shift(),i){case Fr:return g(t);case Hr:t.linkText=!0,t.linkify=!0;var u=g(t);return t.linkText=!1,t.linkify=!1,u;case Qr:return t.formatting="link",t.linkText=!0,g(t);case ea:t.formatting="link";var l=g(t);return t.linkText=!1,l;case ta:return t.formatting="link-string",t.linkHref=!0,g(t);case na:t.formatting="link-string";var d=g(t);return t.linkHref=!1,d;case Br:return t.formatting="em",t.em=a,g(t);case Yr:t.formatting="em";var f=g(t);return t.em=!1,f;case Wr:return t.formatting="strong",t.strong=a,g(t);case Kr:t.formatting="strong";var p=g(t);return t.strong=!1,p;case Gr:return t.formatting="underline",t.underline=a,g(t);case Vr:t.formatting="underline";var h=g(t);return t.underline=!1,h;case zr:return t.formatting="strikethrough",t.strikethrough=a,g(t);case Zr:t.formatting="strikethrough";var m=g(t);return t.strikethrough=!1,m;case qr:return t.formatting="code",t.code=a,g(t);case Jr:t.formatting="code";var v=g(t);return t.code=!1,v;case $r:return t.formatting="mark",t.mark=a,g(t);case Xr:t.formatting="mark";var y=g(t);return t.mark=!1,y;default:return g(t)}}}var k={startState:function(){return{f:h,prevLine:{stream:null},thisLine:{stream:null},block:h,htmlState:null,indentation:0,listMarkerLength:0,inline:y,text:v,formatting:!1,linkText:!1,linkHref:!1,code:0,em:!1,strong:!1,mark:!1,underline:!1,header:0,hr:!1,listType:null,list:!1,listStack:[],quote:0,strikethrough:!1,emoji:!1,fencedEndRE:null,inlineTokens:null}},copyState:function(e){return{f:e.f,prevLine:e.prevLine,thisLine:e.thisLine,block:e.block,indentation:e.indentation,listMarkerLength:e.listMarkerLength,localMode:e.localMode,localState:e.localMode?Un.a.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,formatting:!1,linkText:e.linkText,linkHref:e.linkHref,code:e.code,em:e.em,strong:e.strong,mark:e.mark,underline:e.underline,strikethrough:e.strikethrough,emoji:e.emoji,header:e.header,hr:e.hr,listType:e.listType,list:e.list,listStack:e.listStack.slice(0),quote:e.quote,md_inside:e.md_inside,fencedEndRE:e.fencedEndRE,inlineTokens:e.inlineTokens}},token:function(t,n){if(n.formatting=!1,t!==n.thisLine.stream){if(n.header=0,n.hr=!1,n.inlineTokens=null,n.linkText=!1,n.linkHref=!1,n.quote=0,n.taskOpen=!1,n.taskClosed=!1,t.match(/^\s*$/,!0))return p(n);if(n.prevLine=n.thisLine,n.thisLine={stream:t},!n.localState){n.f=n.block;var r=t.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(n.indentation=r,n.indentationDiff=null,r>0){var a=function(t){var n=t.indentation;if(!1!==t.list){for(var r=!0,a=t.listStack.slice(0);n<a[a.length-1];)if(a.pop(),!a.length){r=!1;break}if(r)return a[a.length-1]-t.listMarkerLength+e.indentUnit}return 0}(n);return t.match(o,!1)?"ticktick-list-indent":a?(t.backUp(Math.max(0,r-a)),"ticktick-list-indent"):null}}}else if(n.inlineTokens&&n.inlineTokens.length)return b(t,n);return n.f(t,n)},innerMode:function(e){return e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:k}},indent:function(e,t,n){return e.localState&&e.localMode.indent?e.localMode.indent(e.localState,t,n):0},blankLine:p,getType:g,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return k})),Un.a.defineMIME("text/markdown","markdown"),Un.a.defineMIME("text/x-markdown","markdown");var hi=/^(\s*)(>\s|[*+-]\s\[[x| ]\]\s|[*+-]\s|(\d+)([.)]\s))/i,mi=/^(\s*)(>|[*+-] \[[x| ]\]|[*+-]|(\d+)[.)])(\s)$/i,gi=/[*+-]\s/,vi=/^(\s*)([*+-]|(\d+)([.)]))(\s)/,yi=Object(oa.b)();function bi(e,t){if(!1!==e.list){for(var n=!0,r=e.listStack.slice(0);t<r[r.length-1];)if(r.pop(),!r.length){n=!1;break}return n}return!1}function ki(e,t){for(var n="";t-- >0;)n+=e;return n}function Oi(e,t){var n;if(e.getOption("disableInput"))return Ln.Pass;var r=e.getCursor("start"),a=e.getCursor("end"),i=(di(n={},Xn,"> "),di(n,Zn,"* "),di(n,qn,"1. "),di(n,Jn,"- [ ] "),di(n,"h1","# "),di(n,"h2","## "),di(n,"h3","### "),di(n,"h4","#### "),di(n,"h5","##### "),di(n,"h6","###### "),n),o=!e.curOp;o&&e.startOperation();for(var c=null,s=[],u=r.line;u<=a.line;u+=1){var l=tr(e.getLineTokens(u));if(l&&l.type!==zn){var d=l.type;d===Vn?d="h"+(l.end-l.start-1):d===$n&&(d=Jn),u===r.line?c=d:c!==d&&(c=null),s.push({from:{line:u,ch:l.start},to:{line:u,ch:l.end}})}else c=null}if(s.forEach((function(t){e.replaceRange("",t.from,t.to,"manualMarkText")})),null!=t&&c!==t){for(var f=r.line;f<=a.line;f+=1){var p=e.getLine(f).match(/^([\s\t]*)(.*)/);if(p){var h=void 0,m=void 0;"quote"===t||t.startsWith("h")?(h=0,m=i[t]):(h=p[1].length,m=p[1]+i[t]),e.replaceRange(m,{line:f,ch:0},{line:f,ch:h},"manualMarkText"),rr(e,f)}}t===qn&&xr(e,r.line)}return r.line!==a.line&&e.setSelection({line:r.line,ch:0},{line:a.line,ch:99999999999999},{origin:"+move"}),o&&e.endOperation(),e.focus(),!0}function Ti(e,t,n,r){if(e.getOption("disableInput"))return Ln.Pass;if(1!==e.listSelections().length)return Ln.Pass;for(var a=fi(Rr(e.listSelections()[0]),2),i=a[0],o=a[1],c=[],s=o.line-i.line>0,u=i.line;u<=o.line;u+=1){var l={line:u,ch:0},d={line:u,ch:e.getLine(u).length};u===i.line&&(l.ch=i.ch),u===o.line&&(d.ch=o.ch);var f=Si(e,t,l,d,n,r,s);f&&c.push(f)}var p=!e.curOp;p&&e.startOperation();var h=i,m=o,g=c.filter((function(e){return"add"===e.origin}));(g.length>0?g:c).forEach((function(t){h.line===t.selection[0].line&&(h=t.selection[0]),m.line===t.selection[1].line&&(m=t.selection[1]),e.replaceRange(t.replacement,t.from,t.to,"manualMarkText")}));var v=null==n?0:n.length,y=null==r?v:r.length;return h.line===m.line&&m.ch-h.ch===v+y?e.setSelection({line:h.line,ch:h.ch+v},null,"+move"):e.setSelection(h,m,{origin:"+move"}),p&&e.endOperation(),e.focus(),!0}function Si(e,t,n,r,a,i,o){if(n.line!==r.line)throw new Error("startPoint.line is not equal endPoint.line");if(0===e.getLine(n.line).length&&o)return null;var c,s,u,l=e.getLineTokens(n.line),d=tr(l);if(d){if(d.type===zn)return null;n.ch=Math.max(d.end,n.ch)}for(var f=0;f<l.length;f+=1){var p=l[f];if(!c&&p.start>n.ch)break;if(Ei(p)[t]){if(!c){c=p;continue}p.end>=r.ch&&(s=p);break}}var h=a,m=null==i?h:i;if(s){r={line:(n={line:n.line,ch:c.start}).line,ch:s.end},u=e.getRange(n,r),"bold"===t?u=u.replace(/^(\*\*|__)([\s\S]*)\1/,"$2"):"italic"===t?u=u.replace(/^(\*|_)([\s\S]*)\1/,"$2"):"strikethrough"===t?u=u.replace(/^(~~)([\s\S]*)\1/,"$2"):"underline"===t?u=u.replace(/^(~)([\s\S]*)\1/,"$2"):"mark"===t?u=u.replace(/^(::)([\s\S]*)\1/,"$2"):"inlineCode"===t&&(u=u.replace(/^(`)([\s\S]*)\1/,"$2"));var g={line:n.line,ch:c.start};return{origin:"remove",replacement:u,from:g,to:{line:n.line,ch:s.end},selection:[g,{line:n.line,ch:g.ch+u.length}]}}u=e.getRange(n,r),"bold"===t?u=(u=u.split("**").join("")).split("__").join(""):"italic"===t?u=(u=u.split("*").join("")).split("_").join(""):"strikethrough"===t?u=u.split("~~").join(""):"mark"===t?u=u.split("::").join(""):"underline"===t?u=u.split("~").join(""):"inlineCode"===t&&(u=u.split("`").join(""));var v=h+u+m;return{origin:"add",replacement:v,from:n,to:r,selection:[n,{line:n.line,ch:n.ch+v.length}]}}function Ei(e){if(!e.type)return{};var t=e.type.split(" "),n={};return t.forEach((function(e){"formatting-strong"===e?n.bold=!0:"formatting-code"===e?n.inlineCode=!0:"formatting-em"===e?n.italic=!0:"formatting-mark"===e?n.mark=!0:"formatting-underline"===e?n.underline=!0:"formatting-strikethrough"===e&&(n.strikethrough=!0)})),n}function wi(e){return e.extendSelectionsBy((function(t){return Lr(e,t.head)}),{origin:"+move",bias:1})}function Di(e,t,n){var r=e.charCoords(t.head,"div").top+5,a=e.coordsChar({left:0,top:r},"div");return 0!==a.ch?a:Lr(e,t.head,n)}function ji(e,t){if(1!==e.listSelections().length)return Ln.Pass;var n=Ci(e);return n.length>0||t?(e.execCommand("indentMore"),n.forEach((function(t){xr(e,t.fromLine)})),!0):(e.execCommand("insertTab"),!0)}function _i(e,t){if(1!==e.listSelections().length)return Ln.Pass;var n=Ci(e);return n.length>0||t?(e.execCommand("indentLess"),n.forEach((function(t){xr(e,t.fromLine)})),!0):(e.execCommand("insertTab"),!0)}function Ci(e){var t=e.listSelections()[0],n=t.head,r=t.anchor;if(!t.empty()&&Object(Ln.cmpPos)(n,r)>0){var a=[n,r];r=a[0],n=a[1]}else r===n&&(r={ch:n.ch,line:n.line},t.anchor=r);for(var i=[],o=null,c=n.line;c<=r.line;c+=1){if(vi.exec(e.getLine(c)))!1!==e.getStateAfter(c).list?o?o.toLine=c:o={fromLine:c,toLine:c}:o&&(i.push(o),o=null);else o&&(i.push(o),o=null)}return o&&i.push(o),i}Object.assign(Ln.commands,{TickTickNewlineAndContinue:function(e){if(e.getOption("disableInput"))return Ln.Pass;var t=e.listSelections();if(!t||0===t.length)return Ln.Pass;var n,r=fi(t,1)[0],a=r.head,i=r.empty(),o=e.getStateAfter(a.line),c=e.getLine(a.line),s=!1,u=!1!==o.list,l=o.quote,d=hi.exec(c),f=/^\s*$/.test(c.slice(0,a.ch)),p=!1;if(i&&(u||l)&&d&&!f)if(s=!0,mi.test(c)){var h=wr(o,e.getOption("indentUnit")),m="";h>1&&(m=ki("\t",h-1)),e.replaceRange(m,{line:a.line,ch:0},{line:a.line,ch:a.ch+1},"manualMarkText")}else{n="\n"+d[1]+((p=!(gi.test(d[2])||d[2].indexOf(">")>=0))?parseInt(d[3],10)+1+d[4]:d[2].replace(/x/i," "))}else if(i&&u&&c.length){var g=e.getOption("indentUnit");if(bi(o,c.length))s=!0,n="\n"+ki("\t",wr(o,g))}return s?(n&&(e.replaceSelection(n,void 0,"manualMarkText"),p&&xr(e,a.line),rr(e,a.line+1)),!0):(e.execCommand("newlineAndIndent"),!0)},TickTickNewline:function(e){if(e.getOption("disableInput"))return Ln.Pass;if(1!==e.listSelections().length)return Ln.Pass;var t=e.listSelections()[0].head,n=e.getStateAfter(t.line),r=e.getLine(t.line),a="\n";return!1!==n.list&&r.length&&bi(n,r.length)&&(a+=ki("\t",wr(n,e.getOption("indentUnit")))),e.replaceSelection(a,void 0,"manualMarkText"),!0},TickTickShiftTab:function(e){return _i(e,!1)},TickTickTab:function(e){return ji(e,!1)},TickTickInlineCode:function(e){Ti(e,"inlineCode","`")},TickTickFullScreen:function(e){f.a.dispatch("toggleFullScreen",e)},TickTickBold:function(e){Ti(e,"bold","**")},TickTickItalic:function(e){Ti(e,"italic","*")},TickTickStrikethrough:function(e){Ti(e,"strikethrough","~~")},TickTickUnderline:function(e){Ti(e,"underline","~")},TickTickHighlight:function(e){Ti(e,"mark","::")},TickTickHeading1:function(e){Oi(e,"h1")},TickTickHeading2:function(e){Oi(e,"h2")},TickTickHeading3:function(e){Oi(e,"h3")},TickTickUnorderedList:function(e){Oi(e,Zn)},TickTickOrderedList:function(e){Oi(e,qn)},TickTickBlockquote:function(e){Oi(e,Xn)},TickTickItemList:function(e){Oi(e,Jn)},TickTickShowLink:function(e){return e.getOption("readOnly")||e.getOption("disableInput")?Ln.Pass:(function(e,t,n,r){kr(e,t,n,r)}(e),!0)},TickTickSeparatorLine:function(e){if(e.getOption("disableInput"))return Ln.Pass;var t=e.listSelections();if(1!==t.length)return Ln.Pass;var n=t[0].head.line;return 0===e.getLine(n).trim().length?e.replaceRange("---\n",{line:n,ch:0},{line:n,ch:99999999999999},"manualMarkText"):(e.replaceSelection("\n---\n",void 0,"manualMarkText"),n+=1),rr(e,n),e.focus(),!0}});var Ii=Ln.keyMap.default===Ln.keyMap.macDefault?"Cmd":"Ctrl",Mi=(di(ni={Backspace:function(e){if(e.getOption("disableInput"))return Ln.Pass;if(1!==e.listSelections().length)return Ln.Pass;var t=e.listSelections()[0];if(!t.empty())return Ln.Pass;var n=t.head,r=e.getLine(n.line);if(0===n.line&&0===n.ch&&0===r.length)return e.execCommand("deleteLine"),!0;var a=e.getTokenAt(n),i=" "+a.type+" ",o=i.match(/\sformatting-link-string\s/),c=i.match(/\sformatting-link\s/);if(o||c){var s=ir(e,n,!0);if(!s)return Ln.Pass;var u=fi(s,2),l=u[0],d=u[1],f=n.line;return o?")"===a.string?(e.replaceRange("",{line:f,ch:l.start-1},{line:f,ch:d.end+1},"manualMarkText"),!0):(Qn(e,{line:f,ch:d.start},{line:f,ch:d.end}),Ln.Pass):c?(Qn(e,{line:f,ch:d.start},{line:f,ch:d.end}),Ln.Pass):Ln.Pass}var p=i.match(/\sformatting-list-ol\s/);if(p||i.match(/\sformatting-list-ul\s/)||i.match(/\sformatting-checklist\s/)||i.match(/\sformatting-quote\s/)){var h={line:n.line,ch:a.start},m={line:n.line,ch:a.end};i.match(/\sformatting-checklist\s/)&&(h={line:n.line,ch:a.start-2});var g="\t";return function(e,t){var n=t-1;if(n<e.firstLine())return!0;var r=e.getStateAfter(n);if(!1===r.list)return!0;var a=e.getOption("indentUnit"),i=wr(r,a);return wr(e.getStateAfter(t),a)>i}(e,n.line)&&(g=""),e.replaceRange(g,h,m,"manualMarkText"),p&&xr(e,n.line+1),!0}return Ln.Pass},LeftClick:function(e,t){if(1===t.outside||Math.abs(t.xRel)>10)return Ln.Pass;var n=e.getTokenAt(t),r=" "+n.type+" ";if(r.match(/\slink\s/)){if(r.match(/\sformatting-link\s/))return Ln.Pass;var a=null;if(r.match(/\slinkify\s/))a=e.getRange({line:t.line,ch:n.start},{line:t.line,ch:n.end});else{var i=ir(e,t);i&&(a=i[1].string)}if(!a)return!0;var o=yi.match(a);if(o&&o.length){var c=jr(o[0].url);if(c){var s={taskId:c.taskId,projectId:c.projectId};f.a.dispatch("onTaskModalChange",s)}else window.open(o[0].url,"_blank")}else window.open("//"+a,"_blank");return!0}return Ln.Pass}},"".concat(Ii,"-LeftClick"),(function(e,t){e.setSelection(t,t,!1)})),di(ni,"Space",(function(e){!function(e,t){if(e.getOption("disableInput"))return Ln.Pass;var n=e.listSelections();if(!n||0===n.length)return Ln.Pass;var r=fi(n,1)[0].head.line;e.replaceSelection(t,void 0,"manualMarkText"),rr(e,r)}(e," ")})),ni);"Cmd"===Ii?(Mi["Cmd-Backspace"]=function(e){for(var t,n,r=e.doc.sel.ranges,a=[],i=0;i<r.length;i++){for(var o=(n=r[i],{from:Di(e,n,!0),to:n.from()});a.length&&Object(Ln.cmpPos)(o.from,(t=a,t[t.length-1]).to)<=0;){var c=a.pop();if(Object(Ln.cmpPos)(c.from,o.from)<0){o.from=c.from;break}}a.push(o)}var s=!e.curOp;s&&e.startOperation();for(var u=a.length-1;u>=0;u--)e.replaceRange("",a[u].from,a[u].to,"+delete");s&&e.endOperation()},Mi["Cmd-Left"]=function(e){return e.extendSelectionsBy((function(t){return Di(e,t)}),{origin:"+move"})},Mi["Ctrl-A"]=wi,Mi["".concat(Ii,"-shift-0")]="TickTickFullScreen"):"Ctrl"===Ii&&(Mi["".concat(Ii,"-alt-0")]="TickTickFullScreen",Mi.Home=wi);var Ai={"Shift-Enter":function(){}},xi=li({},Mi,(di(ri={"Shift-Tab":"TickTickShiftTab",Tab:"TickTickTab"},"".concat(Ii,"-["),(function(e){return _i(e,!0)})),di(ri,"".concat(Ii,"-]"),(function(e){return ji(e,!0)})),di(ri,"Enter","TickTickNewlineAndContinue"),di(ri,"Shift-Enter","TickTickNewline"),di(ri,"".concat(Ii,"-alt-1"),"TickTickHeading1"),di(ri,"".concat(Ii,"-alt-2"),"TickTickHeading2"),di(ri,"".concat(Ii,"-alt-3"),"TickTickHeading3"),di(ri,"".concat(Ii,"-alt-4"),(function(e){Oi(e,"h4")})),di(ri,"".concat(Ii,"-alt-5"),(function(e){Oi(e,"h5")})),di(ri,"".concat(Ii,"-alt-6"),(function(e){Oi(e,"h6")})),di(ri,"".concat(Ii,"-shift-8"),"TickTickUnorderedList"),di(ri,"".concat(Ii,"-shift-7"),"TickTickOrderedList"),di(ri,"".concat(Ii,"-shift-U"),"TickTickBlockquote"),di(ri,"".concat(Ii,"-shift-S"),"TickTickItemList"),di(ri,"".concat(Ii,"-B"),"TickTickBold"),di(ri,"".concat(Ii,"-I"),"TickTickItalic"),di(ri,"".concat(Ii,"-shift-X"),"TickTickStrikethrough"),di(ri,"".concat(Ii,"-U"),"TickTickUnderline"),di(ri,"".concat(Ii,"-shift-Y"),"TickTickHighlight"),di(ri,"".concat(Ii,"-K"),"TickTickShowLink"),di(ri,"".concat(Ii,"-alt-C"),"TickTickInlineCode"),di(ri,"fallthrough","default"),ri));function Ri(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function Pi(e){return e.state.search||(e.state.search=new Ri)}function Ni(e,t,n){return e.getSearchCursor(t,n,{caseFold:!0,multiline:!0})}function Li(e,t,n){t.queryText=n,t.query=n,e.removeOverlay(t.overlay),t.overlay=function(e){return{token:function(t){e.lastIndex=t.pos;var n=e.exec(t.string);if(n&&n.index===t.pos)return t.pos+=n[0].length||1,"searching";n?t.pos=n.index:t.skipToEnd()}}}(t.query),e.addOverlay(t.overlay)}function Ui(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!=t){var r=Pi(e),a=t;Li(e,r,a),n&&Fi(e)}}function Fi(e,t,n){e.operation((function(){var r=Pi(e),a=Ni(e,r.query,null);(a.find(t)||(a=Ni(e,r.query,t?Un.a.Pos(e.lastLine()):Un.a.Pos(e.firstLine(),0))).find(t))&&(e.setSelection(a.from(),a.from()),e.scrollIntoView({from:a.from(),to:a.to()},20),r.posFrom=a.from(),r.posTo=a.to(),n&&n(a.from(),a.to()))}))}function Hi(e){e.operation((function(){var t=Pi(e);t.lastQuery=t.query,t.query&&(t.query=t.queryText=null,e.removeOverlay(t.overlay),t.annotate&&(t.annotate.clear(),t.annotate=null))}))}xi=Ln.normalizeKeyMap(xi),Ln.keyMap.inline=li({},Ai,{fallthrough:"default"}),Ln.keyMap.ticktickmd=xi,Ln.keyMap.tickticklink=li({},Mi,{},Ai,{fallthrough:"default"});var Bi=function(e,t){Hi(e),Ui(e,t)},Yi=function(e,t){Hi(e),Ui(e,t,!0)};n(125),n(212),n(509);function Wi(e){return(Wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ki,Gi,Vi=Un.a.Pos;function zi(e,t){for(var n=function(e){var t=e.flags;return null!=t?t:(e.ignoreCase?"i":"")+(e.global?"g":"")+(e.multiline?"m":"")}(e),r=n,a=0;a<t.length;a++)-1==r.indexOf(t.charAt(a))&&(r+=t.charAt(a));return n==r?e:new RegExp(e.source,r)}function Zi(e){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(e.source)}function qi(e,t,n){t=zi(t,"g");for(var r=n.line,a=n.ch,i=e.lastLine();r<=i;r++,a=0){t.lastIndex=a;var o=e.getLine(r),c=t.exec(o);if(c)return{from:Vi(r,c.index),to:Vi(r,c.index+c[0].length),match:c}}}function Ji(e,t,n){if(!Zi(t))return qi(e,t,n);t=zi(t,"gm");for(var r,a=1,i=n.line,o=e.lastLine();i<=o;){for(var c=0;c<a&&!(i>o);c++){var s=e.getLine(i++);r=null==r?s:r+"\n"+s}a*=2,t.lastIndex=n.ch;var u=t.exec(r);if(u){var l=r.slice(0,u.index).split("\n"),d=u[0].split("\n"),f=n.line+l.length-1,p=l[l.length-1].length;return{from:Vi(f,p),to:Vi(f+d.length-1,1==d.length?p+d[0].length:d[d.length-1].length),match:u}}}}function $i(e,t,n){for(var r,a=0;a<=e.length;){t.lastIndex=a;var i=t.exec(e);if(!i)break;var o=i.index+i[0].length;if(o>e.length-n)break;(!r||o>r.index+r[0].length)&&(r=i),a=i.index+1}return r}function Xi(e,t,n){t=zi(t,"g");for(var r=n.line,a=n.ch,i=e.firstLine();r>=i;r--,a=-1){var o=e.getLine(r),c=$i(o,t,a<0?0:o.length-a);if(c)return{from:Vi(r,c.index),to:Vi(r,c.index+c[0].length),match:c}}}function Qi(e,t,n){if(!Zi(t))return Xi(e,t,n);t=zi(t,"gm");for(var r,a=1,i=e.getLine(n.line).length-n.ch,o=n.line,c=e.firstLine();o>=c;){for(var s=0;s<a&&o>=c;s++){var u=e.getLine(o--);r=null==r?u:u+"\n"+r}a*=2;var l=$i(r,t,i);if(l){var d=r.slice(0,l.index).split("\n"),f=l[0].split("\n"),p=o+d.length,h=d[d.length-1].length;return{from:Vi(p,h),to:Vi(p+f.length-1,1==f.length?h+f[0].length:f[f.length-1].length),match:l}}}}function eo(e,t,n,r){if(e.length==t.length)return n;for(var a=0,i=n+Math.max(0,e.length-t.length);;){if(a==i)return a;var o=a+i>>1,c=r(e.slice(0,o)).length;if(c==n)return o;c>n?i=o:a=o+1}}function to(e,t,n,r){if(!t.length)return null;var a=r?Ki:Gi,i=a(t).split(/\r|\n\r?/);e:for(var o=n.line,c=n.ch,s=e.lastLine()+1-i.length;o<=s;o++,c=0){var u=e.getLine(o).slice(c),l=a(u);if(1==i.length){var d=l.indexOf(i[0]);if(-1==d)continue e;n=eo(u,l,d,a)+c;return{from:Vi(o,eo(u,l,d,a)+c),to:Vi(o,eo(u,l,d+i[0].length,a)+c)}}var f=l.length-i[0].length;if(l.slice(f)==i[0]){for(var p=1;p<i.length-1;p++)if(a(e.getLine(o+p))!=i[p])continue e;var h=e.getLine(o+i.length-1),m=a(h),g=i[i.length-1];if(m.slice(0,g.length)==g)return{from:Vi(o,eo(u,l,f,a)+c),to:Vi(o+i.length-1,eo(h,m,g.length,a))}}}}function no(e,t,n,r){if(!t.length)return null;var a=r?Ki:Gi,i=a(t).split(/\r|\n\r?/);e:for(var o=n.line,c=n.ch,s=e.firstLine()-1+i.length;o>=s;o--,c=-1){var u=e.getLine(o);c>-1&&(u=u.slice(0,c));var l=a(u);if(1==i.length){var d=l.lastIndexOf(i[0]);if(-1==d)continue e;return{from:Vi(o,eo(u,l,d,a)),to:Vi(o,eo(u,l,d+i[0].length,a))}}var f=i[i.length-1];if(l.slice(0,f.length)==f){var p=1;for(n=o-i.length+1;p<i.length-1;p++)if(a(e.getLine(n+p))!=i[p])continue e;var h=e.getLine(o+1-i.length),m=a(h);if(m.slice(m.length-i[0].length)==i[0])return{from:Vi(o+1-i.length,eo(h,m,h.length-i[0].length,a)),to:Vi(o,eo(u,l,f.length,a))}}}}function ro(e,t,n,r){var a;this.atOccurrence=!1,this.doc=e,n=n?e.clipPos(n):Vi(0,0),this.pos={from:n,to:n},"object"==Wi(r)?a=r.caseFold:(a=r,r=null),"string"==typeof t?(null==a&&(a=!1),this.matches=function(n,r){return(n?no:to)(e,t,r,a)}):(t=zi(t,"gm"),r&&!1===r.multiline?this.matches=function(n,r){return(n?Xi:qi)(e,t,r)}:this.matches=function(n,r){return(n?Qi:Ji)(e,t,r)})}function ao(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}String.prototype.normalize?(Ki=function(e){return e.normalize("NFD").toLowerCase()},Gi=function(e){return e.normalize("NFD")}):(Ki=function(e){return e.toLowerCase()},Gi=function(e){return e}),ro.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){for(var t=this.matches(e,this.doc.clipPos(e?this.pos.from:this.pos.to));t&&0==Un.a.cmpPos(t.from,t.to);)e?t.from.ch?t.from=Vi(t.from.line,t.from.ch-1):t=t.from.line==this.doc.firstLine()?null:this.matches(e,this.doc.clipPos(Vi(t.from.line-1))):t.to.ch<this.doc.getLine(t.to.line).length?t.to=Vi(t.to.line,t.to.ch+1):t=t.to.line==this.doc.lastLine()?null:this.matches(e,Vi(t.to.line+1,0));if(t)return this.pos=t,this.atOccurrence=!0,this.pos.match||!0;var n=Vi(e?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:n,to:n},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(e,t){if(this.atOccurrence){var n=Un.a.splitLines(e);this.doc.replaceRange(n,this.pos.from,this.pos.to,t),this.pos.to=Vi(this.pos.from.line+n.length-1,n[n.length-1].length+(1==n.length?this.pos.from.ch:0))}}},Un.a.defineExtension("getSearchCursor",(function(e,t,n){return new ro(this.doc,e,t,n)})),Un.a.defineDocExtension("getSearchCursor",(function(e,t,n){return new ro(this,e,t,n)})),Un.a.defineExtension("selectMatches",(function(e,t){for(var n=[],r=this.getSearchCursor(e,this.getCursor("from"),t);r.findNext()&&!(Un.a.cmpPos(r.to(),this.getCursor("to"))>0);)n.push({anchor:r.from(),head:r.to()});n.length&&this.setSelections(n,0)}));var io="ticktick-hidden-token",oo=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderLineHandler=function(e,t,r){n.procLine(t,r)},this.cm=t,this._rangesInLine={},this.hiddenTokenTypesSet=new Set(["strikethrough","strong","em","mark","underline"]),this.update=fa((function(){n.updateImmediately()}),50),this.renderLineHandler=this.renderLineHandler.bind(this)}var t,n,r;return t=e,(n=[{key:"start",value:function(){var e=this,t=this.cm;t.on("cursorActivity",(function(){e.update()})),t.on("focus",(function(){e.update()})),t.on("blur",(function(){e.update()})),t.on("renderLine",this.renderLineHandler),this.update(),t.refresh()}},{key:"updateImmediately",value:function(){var e=this;this.update.stop();var t=this.cm,n=t.listSelections(),r={},a={},i=this._rangesInLine;n.forEach((function(e){var t=Rr(e),n=t[0].line,i=t[1].line;r[n]=!0,r[i]=!0;for(var o=n;o<=i;o++)a[o]?a[o].push(t):a[o]=[t]})),this._rangesInLine=a,t.operation((function(){Object.keys(i).forEach((function(t){a[t]||e.procLine(~~t)}));var n=!1;Object.keys(a).forEach((function(t){e.procLine(~~t)&&r[t]&&(n=!0)})),n&&t.refresh()}))}},{key:"procLine",value:function(e,t){var n=this.cm,r=n.display.input.composing,a=n.hasFocus(),i="number"==typeof e?e:e.lineNo();"number"==typeof e&&(e=n.getLineHandle(e));var o=this._rangesInLine[i]||[],c=function(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[function(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}(n,i);if(!c||c.hidden||!c.measure)return!1;if(t||(t=c.text),!t)return!1;var s=!1,u=function(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache,before:!1};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!1};for(r=0;r<e.rest.length;r++)if(e.rest[r].lineNo()>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}(c,e,i).map,l=u.length/3;function d(e,t,n){for(var r=!1,a=n=n||0;a<l;a++){var i=u[3*a],o=(u[3*a+1],u[3*a+2]);if(i===e.head.start){if(/formatting-/.test(e.head.type)&&o.nodeType===Node.TEXT_NODE){var c=o.parentElement;(t?so(c,io):co(c,io))&&(r=!0)}if(e.tail&&/formatting-/.test(e.tail.type))for(var s=a+1;s<l;s++){var d=u[3*s],f=(u[3*s+1],u[3*s+2]);if(d==e.tail.start&&f.nodeType===Node.TEXT_NODE){var p=f.parentElement;(t?so(p,io):co(p,io))&&(r=!0)}if(d>=e.tail.end)break}}if(i>=e.begin)break}return r}0===o.length?co(t,"ticktick-active-line")&&(s=!0):so(t,"ticktick-active-line")&&(s=!0);for(var f=Ha(n).extract(i),p=0,h=0;h<f.length;h++){var m=f[h];if(this.hiddenTokenTypesSet.has(m.type)){for(var g=[{line:i,ch:m.begin},{line:i,ch:m.end}],v=m.begin;p<l&&u[3*p+1]<v;)p++;for(var y=!0,b=a&&Pr(g,[n.getCursor(),n.getCursor()]),k=0;k<o.length;k++){var O=o[k];if(a&&Pr(g,O)){y=!1;break}}r?d(m,!b,p)&&(s=!0):d(m,y,p)&&(s=!0)}}return s&&(delete c.measure.heights,c.measure.cache={}),s}}])&&ao(t.prototype,n),r&&ao(t,r),e}();function co(e,t){if(null==e)return!1;var n=" "+e.className+" ",r=" "+t+" ";return-1!==n.indexOf(r)&&(e.className=n.replace(r,"").trim(),!0)}function so(e,t){if(null==e)return!1;var n=" "+t+" ";return-1===(" "+e.className+" ").indexOf(n)&&(e.className=e.className+" "+t,!0)}function uo(e){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function po(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ho(e,t){return(ho=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yo(e);if(t){var a=yo(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return go(this,n)}}function go(e,t){return!t||"object"!==uo(t)&&"function"!=typeof t?vo(e):t}function vo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yo(e){return(yo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ho(e,t)}(o,e);var t,n,r,a=mo(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).autoSave=i.a.throttle((function(){y.a.autoSaveEnabled&&(c.a.info("Editor auto save at ",new Date),t.onSave(!1))}),4e3,{leading:!1}),t.state={isFocused:!1},t.isCursorActivated=!1,t.codeMirrorRef=Y.a.createRef(),t.onBlur=t.onBlur.bind(vo(t)),t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this.props.onMount;this.initEditor(),e()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.state.isFocused,n=this.props,r=n.placeholder,a=n.readOnly,i=n.id;this.codeMirror&&((this.codeMirror.getValue()!==e.value&&!t||i!==e.id)&&this.resetValue(e.value),r!==e.placeholder&&(this.codeMirror.setOption("placeholder",e.placeholder),this.blur(),$(this.codeMirror.display.wrapper).hasClass("CodeMirror-focused")&&(this.blur(),this.focus())),a!==e.readOnly&&(this.codeMirror.setOption("readOnly",e.readOnly),this.codeMirror.setOption("cursorBlinkRate",e.readOnly?-1:530)))}},{key:"componentWillUnmount",value:function(){}},{key:"onFocusChange",value:function(e,t,n){var r=this.props,a=r.onFocus,i=r.onBlur;this.setState({isFocused:e}),e?(this.codeMirror.hadFocused=!0,a(t,n)):(this.onBlur(),i(t,n))}},{key:"onBlur",value:function(){this.autoSave.cancel()}},{key:"onKeyDown",value:function(e,t){var n=this.props.onKeyDown;$(".CodeMirror-hints").length&&27===t.keyCode&&t.stopPropagation(),n(e,t)}},{key:"onKeyUp",value:function(e,t){var n=this.props.onKeyUp,r=void 0===n?function(){}:n;r(e,t)}},{key:"onMouseDown",value:function(e,t){if(y.a.hasTaskContextMenu)t.preventDefault();else{var n=this.props.onMouseDown;this.isClickOnMdCheckItem(e,t)||n(e,t)}}},{key:"onBeforeChange",value:function(e,t){(0,this.props.handleBeforeInput)(e.getValue(),t)}},{key:"onChange",value:function(e,t){var n=this.props,r=n.readOnly,a=n.onChange;r||(this.isMdMode()&&er(this.codeMirror),a(e,t),this.autoSave())}},{key:"onBeforeSelectionChange",value:function(e,t){this.isMdMode()&&function(e,t){if(1===t.ranges.length){var n,r=t.ranges[0].head,a=e.getLineTokens(r.line),i=tr(a),o=null;a.length>0&&yr(a[0])&&(o=a[0]),i?(i.type===Jn||i.type===$n||i.type===Zn||i.type===qn||i.type===Xn||i.type===Vn)&&(n={start:i.start,end:i.end}):n=o?{start:o.start,end:o.end}:null,n&&(!t.ranges[0].empty()&&t.ranges[0].anchor.ch>=n.end?Er(e,t,(function(e){return e>n.start&&e<n.end}),(function(e){e.update(e.line,n.start)}),(function(e){e.update(e.line,n.end)}),(function(e,t){t>-5?e.update(e.line,n.end):e.update(e.line,n.start)})):Er(e,t,(function(e){return e<n.end||e===n.end&&"before"===t.ranges[0].head.sticky}),(function(e){e.line>0?e.update(e.line-1,99999999999):e.update(e.line,n.end)}),(function(e){e.update(e.line,n.end)}),(function(e,t){e.update(e.line,n.end)})))}}(e,t)}},{key:"onCursorActivity",value:function(e){var t=this.props.onCursorActivity;this.adjustScrollPosition(e),t(e)}},{key:"onPaste",value:function(e,t){this.props.readOnly||(this.handlePastedText(e,t),this.mdFold&&this.mdFold.startFoldImmediately())}},{key:"onSave",value:function(e){var t=this.props,n=t.readOnly,r=t.onSave;n||r(e)}},{key:"getCodeMirror",value:function(){return this.codeMirror}},{key:"getValue",value:function(){return this.codeMirror?this.codeMirror.getValue():null}},{key:"getOptions",value:function(){var e=this.props,t=e.readOnly;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lo(Object(n),!0).forEach((function(t){fo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({mode:null,lineNumbers:!1,indentWithTabs:!1,dragDrop:!1,cursorScrollMargin:0,readOnly:t,cursorBlinkRate:t?-1:530,placeholder:e.placeholder},e.options)}},{key:"handlePastedText",value:function(e,t){var n=t.clipboardData||window.clipboardData||t.originalEvent.clipboardData;if(n.items&&n.items.length>1&&"string"!==n.items[1].kind)t.stopPropagation(),t.preventDefault();else{var r,a=this.props.handlePaste;if(t.preventDefault(),r=window.clipboardData&&window.clipboardData.setData?n.getData("text"):n.getData("text/plain"),a&&a(e,r))return;e.doc.replaceSelection(r)}}},{key:"isClickOnMdCheckItem",value:function(e,t){if(!this.isMdMode())return!1;if(e.getOption("readOnly"))return!1;var n=e.coordsChar({left:t.clientX,top:t.clientY}),r=function(e,t,n){var r=tr(e.getLineTokens(t));if(r&&(r.type===$n||r.type===Jn)){var a=e.findMarks({line:t,ch:0},{line:t,ch:999999999}).find((function(e){return e.itemType===$n||e.itemType===Jn}));if(a){var i=a.replacedWith.getBoundingClientRect();if(n>=i.left&&n<=i.left+i.width)return a}}return null}(e,n.line,t.clientX);if(r){t.preventDefault();var a=r.find(),i=a.from,o=a.to;r.clear();var c=e.getRange(i,o);return c=" [ ] "===c?" [x] ":" [ ] ",e.replaceRange(c,i,o,"manualMarkText"),rr(e,n.line),!0}return!1}},{key:"initEditor",value:function(){var e=this;this.codeMirror=Un.a.fromTextArea(this.codeMirrorRef.current,this.getOptions()),this.codeMirror.hadFocused=!1,this.isMdMode()&&(this.mdFold=new _a(this.codeMirror),new oo(this.codeMirror).start()),this.codeMirror.on("beforeChange",this.onBeforeChange.bind(this));var t=this.props,n=t.value,r=t.keyHandleMap,a=t.onBeforeNativeFocus;n&&(this.resetValue(n),this.codeMirror.refresh()),this.codeMirror.on("change",this.onChange.bind(this)),this.codeMirror.on("cursorActivity",this.onCursorActivity.bind(this)),this.codeMirror.on("beforeSelectionChange",this.onBeforeSelectionChange.bind(this)),this.codeMirror.on("focus",this.onFocusChange.bind(this,!0)),this.codeMirror.on("blur",this.onFocusChange.bind(this,!1)),this.codeMirror.on("paste",this.onPaste.bind(this)),this.codeMirror.on("keydown",this.onKeyDown.bind(this)),this.codeMirror.on("keyup",this.onKeyUp.bind(this)),this.codeMirror.on("mousedown",this.onMouseDown.bind(this)),this.codeMirror.setOption("extraKeys",r),this.codeMirror.display.input.focus=function(){var t=e.codeMirror.display.input;a(),Object.getPrototypeOf(t).focus.call(t)},Un.a.commands.save=this.onSave.bind(this)}},{key:"isMdMode",value:function(){return"markdown"===this.getOptions().mode||this.isMdLinkMode()}},{key:"isMdLinkMode",value:function(){return"link-markdown"===this.getOptions().mode}},{key:"resetValue",value:function(e){this.isMdMode()?(this.mdFold.reset(),this.codeMirror.setValue(e),this.mdFold.startFoldImmediately()):this.codeMirror.setValue(e),this.codeMirror.hadFocused=!1,this.codeMirror.refresh(),this.codeMirror.clearHistory()}},{key:"focus",value:function(){this.codeMirror&&this.codeMirror.focus()}},{key:"blur",value:function(){this.codeMirror&&this.codeMirror.getInputField().blur()}},{key:"adjustScrollPosition",value:function(e){var t=this.props.scrollEltSelector;if(t&&this.codeMirrorRef.current){var n=$(this.codeMirrorRef.current).closest(t);n&&0!==e.listSelections().length&&setTimeout((function(){var t=Ur(e,e.listSelections()[0].head,n);t>=0&&(n[0].scrollTop=t)}))}}},{key:"render",value:function(){var e=this.state.isFocused,t=this.props.className,n=K()("MDEditor notranslate",{"MDEditor-focused":e},t);return Y.a.createElement("div",{className:n,translate:"no"},Y.a.createElement("textarea",{ref:this.codeMirrorRef,autoComplete:"off",style:{display:"none"}}))}}])&&po(t.prototype,n),r&&po(t,r),o}(Y.a.Component),ko=bo;bo.defaultProps={id:"",onCursorActivity:function(e){},handleBeforeInput:function(e,t){},onMouseDown:function(e,t){},onKeyDown:function(e,t){},onKeyUp:function(e,t){},onFocus:function(e,t){},onBlur:function(e,t){},handlePaste:null,onSave:function(){},onMount:function(){},onChange:function(e,t){},onBeforeNativeFocus:function(){},options:{},readOnly:!1,placeholder:"",keyHandleMap:{},value:"",className:"",scrollEltSelector:""};var Oo=n(381),To=n(363),So=n(404),Eo=n(540);function wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Do(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Co=function(e){var t=e.id,n=e.isNoteTask,r=e.isScheduleOwner,a=e.title,o=e.desc,c=e.isReadOnly,s=e.subtaskNotText,u=e.isNewOutSingle,l=e.onAction,d=Object(G.a)(),p=Object(B.useRef)(e),h=Object(B.useCallback)((function(e){p.current.isNewOutSingle&&e&&e.focus()}),[]),m=Object(B.useRef)(i.a.uniqueId("TaskTitle")),v=jo(Object(z.b)(h),2),b=v[0],k=v[1],O=Object(B.useCallback)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=null===(e=b.current)||void 0===e?void 0:e.getCodeMirror();n&&(t?Yi(n,y.a.highlightKeyWordsRegExp):Bi(n,y.a.highlightKeyWordsRegExp))}),[b]);Object(B.useEffect)((function(){O()}),[O]),Object(B.useEffect)((function(){return f.a.subscribe(m,ty,(function(e){e.match;O()})),function(){f.a.unSubscribe(m,ty)}}),[O]);var T=Object(B.useCallback)((function(){if(b.current){var e=b.current.getValue();e!==a&&l("update",{text:e})}}),[b,l,a]),S=jo(Object(Fn.a)(T,R.x,{leading:!0}),1)[0],E=Object(V.d)(),w=Object(B.useCallback)((function(e){E(So.a(e))}),[E]),D=Object(B.useMemo)((function(){return n?d.formatMessage({id:"note_title"}):d.formatMessage({id:"placeholder_task_title"})}),[d,n]);Object(B.useEffect)((function(){var e=m.current;return f.a.subscribe(e,"focusToDetailTitle",(function(){b.current.focus(),b.current.getCodeMirror().setSelection(Un.a.Pos(0,0))})),function(){f.a.unSubscribe(e,"focusToDetailTitle")}}),[b]),Object(B.useEffect)((function(){var e=m.current;return f.a.subscribe(e,"focusToDetailTitleEnd",(function(){b.current.focus();var e=b.current.getCodeMirror();e.setCursor(e.lineCount(),0)})),function(){f.a.unSubscribe(e,"focusToDetailTitleEnd")}}),[b]);var j=Object(B.useCallback)((function(e){e&&En.w(d.formatMessage({id:"saving"}),1e3),l("save")}),[d,l]),_=Object(B.useCallback)((function(e,t){return!Oo.g(t,e.getValue()+"1")||(t.preventDefault(),t.stopPropagation(),g.b({text:d.formatMessage({id:"characters_upper_limit"})}),!1)}),[d]),C=Object(B.useCallback)((function(e,t){var n=A.n(t);return n=t.replace(/[\n\r]/g," "),b.current.getValue().length+n.length>To.a.taskTitleWordLimit&&g.b({text:d.formatMessage({id:"characters_upper_limit"})}),e.replaceSelection(_r(n)),!0}),[b,d]),I=Object(B.useCallback)((function(t){S(),b.current&&Wn(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(n),!0).forEach((function(t){Do(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{addTag:w}),n?["priority"]:[])}),[w,S,b,n,e]),M=Object(B.useCallback)((function(){Object(Eo.a)(t),cy()}),[t]),x=Object(B.useCallback)((function(){T(),Object(Eo.b)(t,a),sy(),u||l("save")}),[T,t,u,l,a]),N=Object(B.useCallback)((function(){s?o?f.a.dispatch("focusToDetailDesc",Un.a.Pos(0,0)):f.a.dispatch("focusToFirstSubTask"):f.a.dispatch("focusToDetailContent",Un.a.Pos(0,0))}),[o,s]),L=Object(B.useCallback)((function(e){"back"===e?f.a.dispatch("focusToTaskItem.list."+t):"forward"===e&&N()}),[N,t]),U=Object(B.useCallback)((function(){if(!Object(P.B)())return Un.a.Pass;u?l("save"):j(!0)}),[u,l,j]),F=Object(B.useMemo)((function(){return{Down:N,Tab:L.bind(void 0,"forward"),"Shift-Tab":L.bind(void 0,"back"),Enter:N,"Cmd-Enter":U,"Ctrl-Enter":U}}),[N,L,U]),H=Object(B.useMemo)((function(){return{mode:"link-markdown",theme:"link-markdown",keyMap:"tickticklink",indentUnit:4,tabSize:4,indentWithTabs:!1,selectionsMayTouch:!1,lineWrapping:!0,spellcheck:!0,cursorHeight:.8}}),[]);return Y.a.createElement("div",{id:"tasktitle",className:"line-left",onClick:function(e){r||g.b({text:d.formatMessage({id:"edit_schedule_content_limit"})})}},Y.a.createElement(ko,{ref:k,placeholder:D,readOnly:c,value:a,options:H,className:"title task-title disable-pre-line",onSave:j,onKeyDown:_,id:t,handlePaste:C,onChange:I,onFocus:M,onBlur:x,keyHandleMap:F}))},Io=n(961),Mo=n.n(Io);function Ao(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ro=function(e,t){var n=Object(G.a)(),r=Ao(Object(B.useState)(document.createElement("span")),2),a=r[0],i=r[1],o=Object(B.useRef)(a),c=Object(B.useMemo)((function(){return Object(w.fb)(e)}),[e]),s=Object(B.useMemo)((function(){var t=Object(j.n)(e.get("projectId"));return Object(ut.g)(t)}),[e]);return Object(B.useEffect)((function(){o.current=document.createElement("span");var e,r,a,u=Object(P.G)()||s;c?ve.a.render(Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("span",null,"".concat(n.formatMessage({id:"write_down_or"})," ")),Y.a.createElement("span",{className:K()(Mo.a.useTemplate,(e={},r=Mo.a.disabled,a=u,r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e)),onClick:u?function(){}:t},n.formatMessage({id:"add_from_template"}))),o.current):ve.a.render(Y.a.createElement(Y.a.Fragment,null,n.formatMessage({id:"placeholder_task_content"})),o.current),i(o.current)}),[s,c,n,t]),a},Po={mode:"markdown",keyMap:"ticktickmd",theme:"markdown-default",lineWrapping:!0,indentUnit:4,tabSize:4,indentWithTabs:!1,spellcheck:!0,selectionsMayTouch:!1,cursorHeight:.6},No=n(548);var Lo=function(e){var t=e.textId,n=void 0===t?"no_tasks_here":t,r=e.descId,a=void 0===r?"empty_default_list_b":r,i=e.iconsInfo,o=void 0===i?[{name:ie.j.default1,needTheme:!1},{name:ie.j.default2,needTheme:!0}]:i;return Y.a.createElement("div",{id:"task-list-body",className:"tl-body empty-list"},Y.a.createElement("div",{className:"empty-list-info",id:"task-ul-list-empty"},Y.a.createElement("div",{className:"empty-icon"},o.map((function(e){return Y.a.createElement(Q.a,{name:x.v()?"dark-"+e.name:e.name,key:e.name,className:K()("i-xxl",{"fill-theme":e.needTheme})})}))),n&&Y.a.createElement("span",{className:"text-lrg text-link line-sml"},v.a(n)),a&&Y.a.createElement("span",{className:"text-sml text-info line-sml"},v.a(a))))};var Uo=function(e){var t=e.title,n=e.hasChecklist,r=void 0!==n&&n;return Y.a.createElement("li",{className:"item"},r?Y.a.createElement(Q.a,{name:"subtask",className:"i-4 i-tny"}):Y.a.createElement(Q.a,{name:"checkbox",className:"i-4 i-tny"}),Y.a.createElement("span",{className:"item-title"},t||""))},Fo=n(384);function Ho(e){return(Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yo(e,t){return(Yo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vo(e);if(t){var a=Vo(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ko(this,n)}}function Ko(e,t){return!t||"object"!==Ho(t)&&"function"!=typeof t?Go(e):t}function Go(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vo(e){return(Vo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yo(e,t)}(i,e);var t,n,r,a=Wo(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).onCancelClick=t.onCancelClick.bind(Go(t)),t.onConfirmClick=t.onConfirmClick.bind(Go(t)),t}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.template,n=e.intl,r=n.formatMessage({id:"delete_template_intro"},{s1:t.title||""});return Y.a.createElement(Fo.a,{className:"delete-modal",visible:!0,maskClosable:!1,title:n.formatMessage({id:"delete_template"}),okText:n.formatMessage({id:"delete"}),onCancel:this.onCancelClick,onOk:this.onConfirmClick},Y.a.createElement("span",{className:"line-sml break-word",dangerouslySetInnerHTML:{__html:r}}))}},{key:"onCancelClick",value:function(){var e=this.props.onCancelClick;e()}},{key:"onConfirmClick",value:function(){var e=this.props,t=e.onConfirmClick,n=e.template.id;t(void 0===n?"":n)}}])&&Bo(t.prototype,n),r&&Bo(t,r),i}(Y.a.Component);zo.defaultProps={template:{},onCancelClick:function(){},onConfirmClick:function(){}};var Zo=Object(me.c)(zo),qo=n(464),Jo=n(962);function $o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$o(Object(n),!0).forEach((function(t){Qo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ec=function(e){var t=e.text,n=e.className;return Y.a.createElement(Jo.Motion,{style:{h:Object(Jo.spring)(t?19:0,Xo({},Jo.presets.stiff,{precision:19}))}},(function(e){var r=e.h;return Y.a.createElement("p",{className:K()("warn",n),style:{height:r+"px"}},t)}))},tc=n(388);function nc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ac=Object(me.c)((function(e){var t=e.intl,n=e.value,r=e.warningText,a=e.onValueChange,i=e.onEnterDown,o=e.onFocus,c=e.enableClear,s=void 0!==c&&c,u=nc(Object(B.useState)(!1),2),l=u[0],d=u[1],f=Object(B.useRef)(null);Object(B.useEffect)((function(){setTimeout((function(){f.current&&$(f.current).focus().select()}))}),[]);var p=Object(B.useCallback)((function(e){var t=e.target.value;a(t),d(!!t)}),[a,d]),h=Object(B.useCallback)((function(e){e.keyCode===tc.a.enter&&i()}),[i]),m=Object(B.useCallback)((function(e){o()}),[o]),g=Object(B.useCallback)((function(){a(""),d(!1)}),[a,d]);return Y.a.createElement("div",{className:"warning-input"},Y.a.createElement("div",{className:"input-wrap"},Y.a.createElement("input",{className:"input-lrg",type:"text",placeholder:t.formatMessage({id:"name"}),value:n,onChange:p,onKeyDown:h,onFocus:m,ref:f}),s&&l&&Y.a.createElement("div",{className:"clear",onClick:g},Y.a.createElement(Q.a,{className:"close",name:"close",fill:"#fff"}))),Y.a.createElement(ec,{className:"text-alert text-sml",text:r}))}));function ic(e){return(ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cc(e,t){return(cc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dc(e);if(t){var a=dc(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return uc(this,n)}}function uc(e,t){return!t||"object"!==ic(t)&&"function"!=typeof t?lc(e):t}function lc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dc(e){return(dc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cc(e,t)}(i,e);var t,n,r,a=sc(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={warningText:"",title:t.props.template.title||"",isShowSecondConifrm:!1},t.onCancelClick=t.onCancelClick.bind(lc(t)),t.onConfirmClick=t.onConfirmClick.bind(lc(t)),t.onCancelSecondConifrm=t.onCancelSecondConifrm.bind(lc(t)),t.onSecondConfirmClick=t.onSecondConfirmClick.bind(lc(t)),t}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.props.intl,n=this.state,r=n.warningText,a=n.title,i=n.isShowSecondConifrm;return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement(Fo.a,{className:"popup-med",visible:!0,maskClosable:!1,title:t.formatMessage({id:"rename"}),okText:t.formatMessage({id:"save"}),onCancel:this.onCancelClick,onOk:this.onConfirmClick,disabled:0===a.trim().length},Y.a.createElement(ac,{value:a,warningText:r,onValueChange:function(t){return e.setState({title:t})},onFocus:function(){e.toggleTitleWarn()},onEnterDown:function(){e.confirm()}})),i&&Y.a.createElement(Fo.a,{className:"popup-med",visible:!0,title:t.formatMessage({id:"replace"}),onCancel:this.onCancelSecondConifrm,onOk:this.onSecondConfirmClick},t.formatMessage({id:"same_name_teamplate_confirm_message"})))}},{key:"toggleTitleWarn",value:function(e){this.setState({warningText:e})}},{key:"onCancelClick",value:function(){this.props.onClosed()}},{key:"onCancelSecondConifrm",value:function(){this.setState({isShowSecondConifrm:!1})}},{key:"onConfirmClick",value:function(){this.confirm()}},{key:"onSecondConfirmClick",value:function(){var e=this.state.title.trim();this.props.onConfirmed(e),this.setState({isShowSecondConifrm:!1})}},{key:"confirm",value:function(){var e=this.state.title.trim();this.checkTitle(e)&&this.props.onConfirmed(e)}},{key:"checkTitle",value:function(e){var t=this.props,n=t.template,r=t.kind,a=qo.a(n.id,e,r);return!(a.length>0&&(this.toggleTitleWarn(a),1))}}])&&oc(t.prototype,n),r&&oc(t,r),i}(Y.a.Component);fc.defaultProps={onClosed:function(){},onConfirmed:function(){},template:{},kind:""};var pc=Object(me.c)(fc),hc=n(365),mc=n(461),gc=n(517);function vc(e){return(vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sc(e,t){return(Sc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ec(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=jc(e);if(t){var a=jc(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return wc(this,n)}}function wc(e,t){return!t||"object"!==vc(t)&&"function"!=typeof t?Dc(e):t}function Dc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jc(e){return(jc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sc(e,t)}(i,e);var t,n,r,a=Ec(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).renderTemplateHasChildren=function(){var e=t.props.template,n=Object(gc.b)([e]);return n.shift(),Y.a.createElement("ul",null,n.length>0&&Y.a.createElement("div",{className:"template-preview-divider"}),n.map((function(e){var t=!!(e.items&&(e.items.length||e.items.size)>0);return Y.a.createElement("div",{key:e.id,className:"template-level".concat(e.level)},Y.a.createElement(Uo,{title:e.title,hasChecklist:t}))})))},t.state={isDeleteModalShown:!1,isEditModalShown:!1},t.onMouseEnter=t.onMouseEnter.bind(Dc(t)),t.onMouseLeave=t.onMouseLeave.bind(Dc(t)),t.onMenuSelect=t.onMenuSelect.bind(Dc(t)),t.onMenuVisibleChange=t.onMenuVisibleChange.bind(Dc(t)),t.onDeleteCancelClick=t.onDeleteCancelClick.bind(Dc(t)),t.onDeleteConfirmClick=t.onDeleteConfirmClick.bind(Dc(t)),t.onEditModalClosed=t.onEditModalClosed.bind(Dc(t)),t.onEditModalConfirmed=t.onEditModalConfirmed.bind(Dc(t)),t.onClick=t.onClick.bind(Dc(t)),t.getDefaultProjectId=t.getDefaultProjectId.bind(Dc(t)),t}return t=i,(n=[{key:"render",value:function(){var e,t=this.props,n=t.template,r=t.isHover,a=t.isActive,i=t.isSelectModal,o=void 0!==i&&i,c=t.kind,s=n.title,u=n.content,l=n.desc,d=n.items,f=n.children,p=d&&d.length>0,h=(null==f?void 0:f.length)>0,m=l&&l.length>0;e=p?Y.a.createElement("ul",null,d.map((function(e,t){return Y.a.createElement(Uo,{key:t,title:e})}))):Y.a.createElement("p",{className:"content"},u);var g=this.getMenu(),v=this.state,y=v.isDeleteModalShown,b=v.isEditModalShown;return Y.a.createElement("div",null,Y.a.createElement("div",{className:K()("task-template-thumbnail",{active:a}),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:this.onClick},Y.a.createElement("div",{className:"title"},s),p&&m&&Y.a.createElement("p",{className:"desc"},l),e,h&&this.renderTemplateHasChildren(),(r||a)&&!o&&Y.a.createElement(Re,{boult:!1,menu:g,menuClassName:"l-dropdown list-menu",onVisibleChange:this.onMenuVisibleChange},Y.a.createElement("a",{className:"more",onClick:function(e){return e.stopPropagation()}},Y.a.createElement(Q.a,{name:"more-for-folder",className:"i-o-54"})))),y&&Y.a.createElement(Zo,{template:n,onCancelClick:this.onDeleteCancelClick,onConfirmClick:this.onDeleteConfirmClick}),b&&Y.a.createElement(pc,{kind:c,template:n,onClosed:this.onEditModalClosed,onConfirmed:this.onEditModalConfirmed}))}},{key:"onMouseEnter",value:function(){var e=this.props;(0,e.onHoverChanged)(e.template.id||"")}},{key:"onMouseLeave",value:function(){(0,this.props.onHoverChanged)("")}},{key:"onClick",value:function(){var e=this.props,t=e.template,n=e.onClick;n(t)}},{key:"getDefaultProjectId",value:function(e){var t;return t&&(Object(ut.g)(t)||t.get("id")===ie.G.all)?t=j.n(Qe.a("inboxId")):"g"===e[0]?t=j.i(e[1]):"f"===e[0]?t=mc.c():"p"===e[0]&&(t=j.n(e[1])),t?t.get("id"):""}},{key:"onMenuSelect",value:function(e){var t=e.selectedKeys,n=this.props,r=n.onMenuVisibleChange,a=n.template,i=n.kind,o=n.location,c=n.history;switch(r(!1),kc(t,1)[0]){case"applyTemplate":var s,u=null,l=o.state;if(l){var d=P.d(l.from).split("/");s=d.slice(0,3).join("/"),u=this.getDefaultProjectId(d)}var f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yc(Object(n),!0).forEach((function(t){bc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a,{projectId:u}),p=i===ie.y.Note?Object(bt.c)(f):Object(bt.d)(f);u=p.get("projectId");var h=Object(j.p)(u);Object(En.w)(v.a("template_toast_added",{s1:h})),b.a.doSync(),l&&(u.includes("inbox")?c.replace("/".concat(P.d(l.from))):c.replace("/".concat(s,"/").concat(p.get("id"))));break;case"rename":this.setState({isEditModalShown:!0});break;case"delete":this.setState({isDeleteModalShown:!0})}}},{key:"onMenuVisibleChange",value:function(e){var t=this.props,n=t.onMenuVisibleChange,r=t.template.id;n(e?r:"")}},{key:"onDeleteCancelClick",value:function(){this.setState({isDeleteModalShown:!1})}},{key:"onDeleteConfirmClick",value:function(e){qo.c(e),qo.b(e),this.setState({isDeleteModalShown:!1})}},{key:"onEditModalClosed",value:function(){this.setState({isEditModalShown:!1})}},{key:"onEditModalConfirmed",value:function(e){var t=this.props,n=t.template.id,r=t.kind,a={id:n,status:hc.h.UPDATED,title:e},i=qo.f(e,r).find((function(e){return e.get("id")!==n}));r===ie.y.Note?(qo.g(a),i&&qo.b(i.get("id"))):(qo.h(a),i&&qo.c(i.get("id"))),this.setState({isEditModalShown:!1})}},{key:"getMenu",value:function(){return Y.a.createElement(Xe,{onSelect:this.onMenuSelect},Y.a.createElement(Ze,{key:"applyTemplate"},Y.a.createElement(Je.a,{id:"apply_template",tagName:"a"})),Y.a.createElement(Ze,{key:"rename"},Y.a.createElement(Je.a,{id:"rename",tagName:"a"})),Y.a.createElement(Ze,{key:"delete"},Y.a.createElement(Je.a,{id:"delete",tagName:"a"})))}}])&&Tc(t.prototype,n),r&&Tc(t,r),i}(Y.a.Component);_c.defaultProps={template:{title:"Error",content:"",items:[]},isHover:!1,isActive:!1,onClick:function(e){},onHoverChanged:function(){},onMenuVisibleChange:function(){}};var Cc=Object(ue.e)(_c);function Ic(e){return(Ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ac(e,t){return(Ac=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nc(e);if(t){var a=Nc(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Rc(this,n)}}function Rc(e,t){return!t||"object"!==Ic(t)&&"function"!=typeof t?Pc(e):t}function Pc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nc(e){return(Nc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Lc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ac(e,t)}(i,e);var t,n,r,a=xc(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={hoverTemplateId:"",menuOpenedId:""},t.onHoverChanged=t.onHoverChanged.bind(Pc(t)),t.onMenuVisibleChange=t.onMenuVisibleChange.bind(Pc(t)),t.onItemClick=t.onItemClick.bind(Pc(t)),t}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.taskTemplates,r=t.className,a=t.noteTemplates,i=t.type,o=t.isSelectModal,c=void 0!==o&&o,s=this.state,u=s.hoverTemplateId,l=s.menuOpenedId,d=i!==ie.y.Note?n.length:a.length,f=i!==ie.y.Note?n:a;return 0===d?this.renderEmptyList():Y.a.createElement("div",{className:"task-template-container ".concat(r)},f.map((function(t,n){return Y.a.createElement(Cc,{kind:i,key:t.id,template:t,isHover:t.id===u,isActive:t.id===l,onHoverChanged:e.onHoverChanged,onMenuVisibleChange:e.onMenuVisibleChange,onClick:e.onItemClick,isSelectModal:c})})))}},{key:"renderEmptyList",value:function(){var e=this.props.type;return Y.a.createElement(Lo,{textId:"empty_task_template_a",descId:e===ie.L.Note?"empty_note_template_desc":"empty_template_desc",iconsInfo:[{name:ie.j.taskTemplate1,needTheme:!1},{name:ie.j.taskTemplate2,needTheme:!0}]})}},{key:"onMenuVisibleChange",value:function(e){this.props.isItemInteractionEnabled&&this.setState({menuOpenedId:e})}},{key:"onHoverChanged",value:function(e){this.props.isItemInteractionEnabled&&this.setState({hoverTemplateId:e})}},{key:"onItemClick",value:function(e){this.props.onItemClick(e)}}])&&Mc(t.prototype,n),r&&Mc(t,r),i}(Y.a.Component);Lc.defaultProps={className:"",isItemInteractionEnabled:!0,onItemClick:function(e){}};var Uc=Object(V.c)((function(e){return{taskTemplates:qo.e(ie.y.Task).sort(tt.a.createdTime).toJS(),noteTemplates:qo.e(ie.y.Note).sort(tt.a.createdTime).toJS()}}))(Lc);function Fc(e){return(Fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yc(e,t){return(Yc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gc(e);if(t){var a=Gc(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Kc(this,n)}}function Kc(e,t){return!t||"object"!==Fc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gc(e){return(Gc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yc(e,t)}(i,e);var t,n,r,a=Wc(i);function i(){return Hc(this,i),a.apply(this,arguments)}return t=i,r=[{key:"setAntiscrollWrapRef",value:function(e){Object(En.l)($(e))}}],(n=[{key:"render",value:function(){var e=this.props,t=e.intl,n=e.onItemSelect,r=e.onCancel,a=e.type,o=void 0===a?"":a,c=Y.a.createElement(No.a,{className:"link",onClick:function(){Object(In.n)("manage_template")},to:{pathname:"/settings/task-template",search:"?kind=".concat(o),state:{from:window.location.href}}},t.formatMessage({id:"manage_template"}));return Y.a.createElement(Fo.a,{className:"task-template-grid",visible:!0,title:o===ie.y.Note?t.formatMessage({id:"note_template"}):t.formatMessage({id:"task_template"}),footerClassName:"task-template-grid-footer",footer:c,onCancel:r},Y.a.createElement("div",{className:"antiscroll-wrap",ref:i.setAntiscrollWrapRef},Y.a.createElement("div",{className:"antiscroll-inner"},Y.a.createElement(Uc,{onItemClick:n,isItemInteractionEnabled:!1,type:o}))))}}])&&Bc(t.prototype,n),r&&Bc(t,r),i}(Y.a.Component),zc=Object(me.c)(Vc);function Zc(e){return(Zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jc(e,t){return(Jc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qc(e);if(t){var a=Qc(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Xc(this,n)}}function Xc(e,t){return!t||"object"!==Zc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qc(e){return(Qc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var es=Object(a.uniqueId)();B.Component;function ts(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ns(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ts(Object(n),!0).forEach((function(t){rs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ts(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function as(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return is(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return is(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function is(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var os=Y.a.forwardRef((function(e,t){var n=e.model,r=e.content,a=e.onAction,o=e.isReadOnly,c=e.taskId,s=e.isNewOutSingle,u=e.onBlur,l=e.isScheduleOwner,d=e.setCodeMirrorRef,p=e.listenId,h=Object(G.a)(),m=Object(B.useRef)(null),v=Object(B.useRef)(i.a.uniqueId());Object(B.useEffect)((function(){return f.a.subscribe(null,"focusToDetailContent",(function(e){var t,n,r;e&&(null===(n=m.current)||void 0===n||null===(r=n.getCodeMirror())||void 0===r||r.setSelection(e));null===(t=m.current)||void 0===t||t.focus()})),function(){f.a.unSubscribe("focusToDetailContent")}}),[]);var k=Object(B.useCallback)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=null===(e=m.current)||void 0===e?void 0:e.getCodeMirror();n&&(t?Yi(n,y.a.highlightKeyWordsRegExp):Bi(n,y.a.highlightKeyWordsRegExp))}),[]);Object(B.useEffect)((function(){k(!1)}),[k]),Object(B.useEffect)((function(){var e=v.current;return f.a.subscribe(e,ty,(function(e){var t=e.match;k("content"===t)})),function(){f.a.unSubscribe(e,ty)}}),[k]);var O=Object(B.useCallback)((function(){var e=m.current;if(e){var t=e.getValue();t!==r&&a("update",{text:t})}}),[r,a]),S=as(Object(Fn.a)(O,R.x,{leading:!0}),1)[0],E=Object(B.useCallback)((function(e){e&&En.w(h.formatMessage({id:"saving"}),1e3),a("save")}),[h,a]),D=Object(B.useCallback)((function(){if(!Object(P.B)())return Un.a.Pass;s?a("save"):E(!0)}),[s,a,E]),j=Object(B.useCallback)((function(e){if(!En.m(e))return Un.a.Pass;f.a.dispatch("focusToDetailTitle")}),[]),_=Object(B.useMemo)((function(){return{Up:j,"Cmd-Enter":D,"Ctrl-Enter":D}}),[j,D]),C=Object(B.useCallback)((function(){cy()}),[]),I=Object(B.useCallback)((function(){u&&u(),O(),sy(),s||a("save")}),[O,s,a,u]),M=Object(B.useCallback)((function(e,t){return!Oo.b(t,e.getValue())||(t.preventDefault(),t.stopPropagation(),g.b({text:h.formatMessage({id:"characters_upper_limit"})}),!1)}),[h]),A=Object(B.useCallback)((function(e,t){return!t||(e.getValue().length+t.length>To.a.taskContentWordLimit?(g.b({text:h.formatMessage({id:"characters_upper_limit"})}),!0):(e.replaceSelection(_r(t)),!0))}),[h]),x=Object(V.d)(),N=Object(B.useCallback)((function(e){x(So.a(e))}),[x]),L=Object(B.useCallback)((function(t){S(),m.current&&Wn(t,ns({},e,{addTag:N}),Object(w.fb)(n)?["priority"]:[])}),[N,S,n,e]),U=Object(B.useCallback)((function(e,t){return x(Object(F.U)(e,t))}),[x]),H=Object(B.useCallback)((function(e,t){return x(Object(F.C)(e,t,[],{}))}),[x]),W=Object(B.useCallback)((function(e,t){return x(Object(F.S)(e,t))}),[x]),z=Object(B.useCallback)((function(e,t){return x(Object(F.J)(e,t))}),[x]),Z=Object(B.useCallback)((function(e){!function(e,t,n,r,a,i){var o=Object(T.n)(e),c=null==o?void 0:o.get("kind"),s=Object(qo.d)(t),u=s.title,l=s.items,d=s.tags,f=s.content;if((!o||t.title&&!o.get("title"))&&n(e,u),(t.items||t.content)&&(c===ie.L.Note?r(e,f):(r(e,f),a(e,l))),t.tags){var p=null==o?void 0:o.get("tags").toArray();p&&p.length>0?i(e,p.concat(d)):i(e,d)}b.a.doSync()}(c,e,U,z,H,W),f.a.dispatch("HideTemplateModal",null)}),[z,H,W,U,c]),q=Object(B.useCallback)((function(){f.a.dispatch("AddTaskFromTemplateAction",{isShow:!0,onItemSelect:Z,type:ie.y.Note})}),[Z]),J=Ro(n,q);return Y.a.createElement("div",{id:"taskcontent",className:"td-task-text b-h"},Y.a.createElement("div",{className:K()("td-content editor-with-link",{"cr-disabled":o}),onClick:function(){l||g.b({text:h.formatMessage({id:"edit_schedule_content_limit"})});var e=m.current;if(o&&e){var t=e.getCodeMirror();if(t)t.getCursor(!0)===t.getCursor(!1)&&f.a.dispatchOne("showTeamProjectPermissionToast",p)}}},Y.a.createElement(ko,{ref:function(e){m.current=e,d(e)},placeholder:J,scrollEltSelector:"#content-view",readOnly:o,value:r,options:ns({},Po,{cursorHeight:.66}),id:c,onSave:E,onKeyDown:M,handlePaste:A,onChange:L,onFocus:C,onBlur:I,keyHandleMap:_})))}));os.displayName="TaskContent";var cs=os;function ss(e){return(ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function us(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ls(e,t){return(ls=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ds(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hs(e);if(t){var a=hs(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return fs(this,n)}}function fs(e,t){return!t||"object"!==ss(t)&&"function"!=typeof t?ps(e):t}function ps(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hs(e){return(hs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ms=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ls(e,t)}(o,e);var t,n,r,a=ds(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).editorConfig={mode:"link-markdown",theme:"link-markdown",keyMap:"tickticklink",indentUnit:4,tabSize:4,indentWithTabs:!1,selectionsMayTouch:!1,lineWrapping:!0,spellcheck:!0,cursorHeight:.8},t.uniqueId=i.a.uniqueId(),t.handlePaste=t.handlePaste.bind(ps(t)),t.handleUpdateDesc=t.handleUpdateDesc.bind(ps(t)),t.handleFocusDesc=t.handleFocusDesc.bind(ps(t)),t.handleBlurDesc=t.handleBlurDesc.bind(ps(t)),t.handleUpArrow=t.handleUpArrow.bind(ps(t)),t.handleDownArrow=t.handleDownArrow.bind(ps(t)),t.handleKeydownText=t.handleKeydownText.bind(ps(t)),t.saveTask=t.saveTask.bind(ps(t)),t.clickDesc=t.clickDesc.bind(ps(t)),t.debounceChangeDesc=i.a.debounce(t.__changeDesc,R.x),t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;this.tryToHighlightKeywords(),f.a.subscribe(null,"focusToDetailDesc",(function(t){t&&e.domEditor.getCodeMirror().setSelection(t),e.domEditor.focus()})),f.a.subscribe(this.uniqueId,ty,(function(t){var n=t.match;e.tryToHighlightKeywords("desc"===n)}))}},{key:"componentWillUnmount",value:function(){f.a.unSubscribe("focusToDetailDesc"),f.a.unSubscribe(this.uniqueId,ty)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isReadOnly,r=t.intl,a=t.id;return Y.a.createElement("div",{id:"task-desc",className:"b-h td-task-desc"},Y.a.createElement("div",{className:"td-sub-desc",disabled:n,onClick:this.clickDesc},Y.a.createElement(ko,{ref:function(t){e.domEditor=t},placeholder:r.formatMessage({id:"placeholder_task_content"}),scrollEltSelector:"#content-view",readOnly:n,options:this.editorConfig,id:a,value:this.props.desc,onSave:this.saveTask,handlePaste:this.handlePaste,onKeyDown:this.handleKeydownText,onChange:this.handleUpdateDesc,onFocus:this.handleFocusDesc,onBlur:this.handleBlurDesc,keyHandleMap:this.getKeyHandleMap()})))}},{key:"tryToHighlightKeywords",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.domEditor&&this.domEditor.getCodeMirror()&&(e?Yi(this.domEditor.getCodeMirror(),y.a.highlightKeyWordsRegExp):Bi(this.domEditor.getCodeMirror(),y.a.highlightKeyWordsRegExp))}},{key:"handleKeydownText",value:function(e,t){if(Oo.c(t,e.getValue()))return t.preventDefault(),t.stopPropagation(),g.b({text:this.props.intl.formatMessage({id:"characters_upper_limit"})}),!1}},{key:"handlePaste",value:function(e,t){return e.getValue().length+t.length>To.a.taskDescWordLimit&&(g.b({text:this.props.intl.formatMessage({id:"characters_upper_limit"})}),!0)}},{key:"clickDesc",value:function(){this.props.isScheduleOwner||g.b({text:this.props.intl.formatMessage({id:"edit_schedule_content_limit"})})}},{key:"handleUpdateDesc",value:function(e){var t=this.props;this.debounceChangeDesc(),this.domEditor&&Wn(e,t)}},{key:"__changeDesc",value:function(){if(this.domEditor){var e=this.domEditor.getValue();e!==this.props.desc&&this.props.updateTaskDesc(this.props.id,e)}}},{key:"handleFocusDesc",value:function(){cy()}},{key:"handleBlurDesc",value:function(){sy(),this.__changeDesc(),bt.u(this.props.id)}},{key:"getKeyHandleMap",value:function(){return{Up:this.handleUpArrow.bind(this),Down:this.handleDownArrow.bind(this),Tab:this.handleTab.bind(this,"forward"),"Shift-Tab":this.handleTab.bind(this,"back")}}},{key:"handleUpArrow",value:function(e){if(!En.m(e))return Un.a.Pass;f.a.dispatch("focusToDetailTitle")}},{key:"handleDownArrow",value:function(e){if(!En.n(e))return Un.a.Pass;f.a.dispatch("focusToFirstSubTask")}},{key:"handleTab",value:function(e,t){"back"===e?f.a.dispatch("focusToDetailTitle"):"forward"===e&&f.a.dispatch("focusToFirstSubTask")}},{key:"saveTask",value:function(e){var t=this.props,n=t.id,r=t.intl;e&&En.w(r.formatMessage({id:"saving"}),1e3),bt.u(n)}}])&&us(t.prototype,n),r&&us(t,r),o}(Y.a.Component),gs=Object(V.c)(null,(function(e){return{updateTaskDesc:function(t,n){e(Object(F.K)(t,n))},addTag:function(t){e(So.a(t))}}}),null,{forwardRef:!0})(Object(me.c)(ms,{forwardRef:!0})),vs=(n(208),n(101)),ys=n(1552),bs=n(1553),ks=function(){Object(En.c)(),iy()},Os={beginDrag:function(e,t,n){var r=function(e){return e&&e.getDecoratedComponentInstance?e.getDecoratedComponentInstance():e}(n);return r&&(r.$helper.innerHTML=r.$dnd.innerHTML,r.$helper.classList.remove("hide"),setTimeout((function(){r&&r.$helper.classList.add("hide")}))),f.a.dispatch("renderDragScroller"),{id:e.model.get("id"),taskId:e.taskId,isSubTask:!0,orderType:ie.I.subtask}},endDrag:function(e,t,n){ks(),y.a.dragHoverTarget="",f.a.dispatch("hideDragScroller")}},Ts={hover:function(e,t,n){if(Ss(e,t,n))switch(t.getItemType()){case ie.h.DETAIL_CHECKLIST:Es(e,t,n)}},drop:function(e,t,n){if(Ss(e,t,n))switch(t.getItemType()){case ie.h.DETAIL_CHECKLIST:ws(e,t,n)}}},Ss=function(e,t,n){return!t.getItem().isSubscribeTask},Es=function(e,t,n){var r=Ds(e,t,n);if(r){var a=e.model.get("id")+r;if(y.a.dragHoverTarget!==a){y.a.dragHoverTarget=a;var i=n.$dnd.getBoundingClientRect();ks(),oy(ie.i.ChecklistItem,{top:"top"===r?i.y:i.y+i.height,left:i.x,right:i.x+i.width})}}},ws=function(e,t,n){if(n){var r=Ds(e,t,n);if(r){Object(En.c)();var a=Object(T.n)(e.taskId),i=Object(w.y)(a);if(i){var o=i.findIndex((function(e){return e.get("id")===n.props.model.get("id")}));if(-1!==o){"bottom"===r&&o++;var c=0===o?null:i.get(o-1).get("id"),s=Object(w.f)(a,c,t.getItem().id);if(s){var u=[];Object.keys(s).forEach((function(e){u.push({id:e,sortOrder:s[e]})})),Object(bt.E)(a.get("id"),u)}}}}}};function Ds(e,t,n){if(!n)return"";var r=t.getItem();if(r.id===e.model.get("id")||r.id===e.taskId)return"";var a=n.$dnd.getBoundingClientRect(),i=(a.bottom-a.top)/2;return t.getClientOffset().y-a.top<i?"top":"bottom"}var js=Object(ys.a)(ie.h.DETAIL_CHECKLIST,Os,(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview()}})),_s=Object(bs.a)([ie.h.DETAIL_CHECKLIST],Ts,(function(e,t){return{connectDropTarget:e.dropTarget(),isDragOver:t.isOver()}})),Cs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.editable,r=void 0===n||n,a=t.noAutoLink,i=void 0!==a&&a,o=t.disabledSyntax,c=void 0===o?new Set([]):o,s=O.e(e)||"";return i||(s=ga("list",s,r,c)),s.replace(/\s$/,"&nbsp;")},Is=function(e){return ga("calculate",e,!1,new Set([]))};function Ms(e){return(Ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function As(){return(As=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xs(Object(n),!0).forEach((function(t){Ps(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ps(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ns(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ls(e,t){return(Ls=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Us(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bs(e);if(t){var a=Bs(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Fs(this,n)}}function Fs(e,t){return!t||"object"!==Ms(t)&&"function"!=typeof t?Hs(e):t}function Hs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bs(e){return(Bs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ys=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ls(e,t)}(o,e);var t,n,r,a=Us(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).wrapMouseDown=function(e){var n=t.props.onEditMouseDown;n&&n(e.target,t.htmlEl)},t.wrapMouseUp=function(e){var n=t.props.onEditMouseUp;n&&n(e.target,t.htmlEl),$(e.target).closest($(t.htmlEl)).length||t.focusAndPlaceCaretAtEnd()},t.autoSave=i.a.throttle((function(){c.a.info("Editor auto save at ",new Date),t.onSave()}),4e3,{isLeading:!1}),t.state={isEditing:!1,isFocusing:!1},t.lastValue=e.value,t.onMouseDown=t.onMouseDown.bind(Hs(t)),t.onKeyUp=t.onKeyUp.bind(Hs(t)),t.onKeyDown=t.onKeyDown.bind(Hs(t)),t.onKeyPress=t.onKeyPress.bind(Hs(t)),t.onFocus=t.onFocus.bind(Hs(t)),t.onBlur=t.onBlur.bind(Hs(t)),t.onPaste=t.onPaste.bind(Hs(t)),t.onChange=t.onChange.bind(Hs(t)),t.onContextMenu=t.onContextMenu.bind(Hs(t)),t.focusAndPlaceCaretAtEnd=t.focusAndPlaceCaretAtEnd.bind(Hs(t)),t.onCompositionStart=t.onCompositionStart.bind(Hs(t)),t.onCompositionEnd=t.onCompositionEnd.bind(Hs(t)),t.composing=!1,t.isEdited=!1,t._listenId=i.a.uniqueId(),t.xDistance=100,t}return t=o,(n=[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,r=this.state;return!this.htmlEl||e.id!==n.id||e.value!==n.value&&!this.isEdited||n.disabledSyntax!==e.disabledSyntax||n.readOnly!==e.readOnly||n.placeholder!==e.placeholder||n.className!==e.className||r.isFocusing!==t.isFocusing||r.isEditing!==t.isEditing||n.titleWidth!==e.titleWidth}},{key:"componentDidMount",value:function(){this.checkPlaceholder()}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){null!==this.htmlEl&&(this.props.value!==this.getValue()&&(this.lastValue=this.props.value,this.state.isEditing&&this.focusAndPlaceCaretAtEnd(!0)),this.checkPlaceholder())}},{key:"onSave",value:function(){var e=this.props,t=e.onSave;e.readOnly||t()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.readOnly,a=t.readOnlyFocusable,i=t.hidePlaceholder,o=t.placeholder,c=t.tabIndex,s=t.lineWrapping,u=t.convertOptions,l=void 0===u?{}:u,d=t.titleWidth,f=t.spellCheck,p=t.placeholderClassName,h=t.disabledSyntax,m=this.state.isFocusing,g={};a&&(g.tabIndex="-1"),r&&(g.disabled=!0);var v={cursor:r?"inherit":"text"};d&&(v.width=d);var y=m?new Set(["highlight"]):h;return Y.a.createElement("div",{className:K()("inline-editor ap-inline-editor notranslate",{"word-wrap":s,"word-nowrap":!s},n),style:{cursor:"pointer"},onMouseDown:this.wrapMouseDown,onMouseUp:this.wrapMouseUp,translate:"no"},Y.a.createElement("div",As({ref:function(t){return e.htmlEl=t},tabIndex:c,contentEditable:!r,spellCheck:f,dangerouslySetInnerHTML:{__html:Cs(this.props.value,Rs({},l,{lineWrapping:s,editable:!r,disabledSyntax:y}))},style:v,onMouseDown:this.onMouseDown,onInput:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onPaste:this.onPaste,onKeyUp:this.onKeyUp,onKeyDown:this.onKeyDown,onKeyPress:this.onKeyPress,onContextMenu:this.onContextMenu,onCompositionStart:this.onCompositionStart,onCompositionEnd:this.onCompositionEnd},g)),i?null:Y.a.createElement("div",{className:K()("input-placeholder",p),ref:"placeholder"},o))}},{key:"onCompositionStart",value:function(){this.composing=!0,this.props.onCompositionStart&&this.props.onCompositionStart()}},{key:"onCompositionEnd",value:function(){this.composing=!1,this.forceChange||this.onChange(),this.props.onCompositionEnd&&this.props.onCompositionEnd()}},{key:"onMouseDown",value:function(e){var t=$(e.target).closest("a.contentUrl"),n=this.props,r=n.autoLink,a=n.canAutoLinkOpen;r&&a&&t.length>0&&0===e.button&&(this.hasFocus()||(e.preventDefault(),window.open(t.attr("href"),"_blank")))}},{key:"onKeyUp",value:function(e){this.props.hidePlaceholder||this.checkPlaceholder(),this.props.listenKeyUp&&this.props.listenKeyUp(e)}},{key:"onKeyDown",value:function(e){this.props.listenKeyDown&&this.props.listenKeyDown(e)}},{key:"onKeyPress",value:function(e){this.props.listenKeyPress&&this.props.listenKeyPress(e)}},{key:"onContextMenu",value:function(e){this.props.listenContextMenu&&this.props.listenContextMenu(e)}},{key:"onPaste",value:function(e){var t;this.props.listenPaste?this.props.listenPaste(e):e.clipboardData.items&&e.clipboardData.items.length>1&&"string"!==e.clipboardData.items[1].kind?(e.stopPropagation(),e.preventDefault()):(e.preventDefault(),t=window.clipboardData&&window.clipboardData.setData?e.clipboardData.getData("text"):(e.originalEvent||e).clipboardData.getData("text/plain"),(t=A.n(t)).match(/[\n\r]/)?document.execCommand("insertText",!1,t.replace(/[\n\r]/g," ")):document.execCommand("insertText",!1,t))}},{key:"onChange",value:function(){if(this.htmlEl){var e=this.getValue();e!==this.lastValue?(this.isEdited=!0,!this.props.forceChange&&this.composing||(this.props.onChange&&this.props.onChange(e),this.lastValue=e),this.autoSave()):this.lastValue=e}}},{key:"onFocus",value:function(e){(e=e||window.event).stopPropagation(),this.isEdited=!1,this.state.isEditing||(this.setState({isEditing:!0,isFocusing:!0}),this.props.onFocus&&this.props.onFocus())}},{key:"onBlur",value:function(){this.isEdited=!1,this.setState({isEditing:!1,isFocusing:!1}),this.props.onBlur&&this.props.onBlur(),this.autoSave.cancel()}},{key:"hasFocus",value:function(){return this.state.isEditing}},{key:"getValue",value:function(){return this.htmlEl?function(e){var t="";try{var n=e.childNodes;0!==n.length&&n.forEach((function(e){var n=e instanceof HTMLElement?e.innerText:e.nodeValue;if(e instanceof HTMLElement){var r=e.getAttribute("url");if("mdLink"===e.getAttribute("type")&&n){var a="[".concat(n,"](").concat(r,")");t+=a}else t+=n}else t+=n}))}catch(n){c.a.warn("[convertToPlainText]: ",n),g.b({text:v.a("input_link_illegal")}),t=e.innerText}return t.replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/<br>/g,"").replace(new RegExp(String.fromCharCode(8203),"g"),"")}(this.htmlEl.cloneNode(!0)):""}},{key:"getEditor",value:function(){return this.htmlEl}},{key:"checkPlaceholder",value:function(){if(this.refs.placeholder){var e=$(this.refs.placeholder);this.getValue()?e.addClass("hide"):e.removeClass("hide")}}},{key:"addHighlight",value:function(e){var t=e.preText.slice(-1)+e.matchStr,n=e.symbolIndex-e.beforeOuterIndex,r=n+t.length;!$(this.htmlEl).find(".tag-item").length&&e.matchStr.length&&En.x(t,{tagName:"span",className:"tag-item",startIndex:n,endIndex:r,element:this.htmlEl})}},{key:"removeHighlight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".tag-item",t=$(this.htmlEl).find(e),n=En.h(this.htmlEl);t.replaceWith(document.createTextNode(t.text())),En.t(this.htmlEl,n)}},{key:"removeTagNode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".tag-item",r=$(this.htmlEl).find(n);if(r.length){var a=En.f(r[0]);r.remove(),En.g(a)}else En.d(t.length)}},{key:"focusAndPlaceCaretAtEnd",value:function(e){var t=this;this.setState({isFocusing:!0},(function(){t.htmlEl&&En.p(t.htmlEl,e)}))}}])&&Ns(t.prototype,n),r&&Ns(t,r),o}(Y.a.Component);Ys.defaultProps={readOnly:!1,readOnlyFocusable:!1,placeholder:"",hidePlaceholder:!0,value:"",autoLink:!0,isEditing:!1,forceChange:!1,className:"",lineWrapping:!1,titleWidth:void 0,onEditMouseDown:function(){},onEditMouseUp:function(){},spellCheck:!0,onSave:function(){},canAutoLinkOpen:!0,placeholderClassName:"",disabledSyntax:new Set([])};var Ws=Ys,Ks=n(447),Gs=n.n(Ks),Vs=n(354),zs=n(345),Zs=function(e){var t=e.startDate,n=e.startTime,a=e.dueDate,i=e.isAllDay,o=e.reminders,c=e.repeatFrom,s=e.repeatFlag,u=e.timeZone,l=void 0===u?zs.h:u,d=e.isFloating,f=void 0!==d&&d,p=e.exDate,h=l,m=Js({isAllDay:i,timeZone:l,isFloating:f}),g={meridiem:x.b("showMeridiem"),weekStart:x.s(),format:ie.m.atomTime,isAllDay:i,repeatFlag:s,repeatFrom:c,logicTimeZone:h,timeZone:m,isFloating:f,reminders:[],exDate:[],date:null,clock:null,end:null};if(g.reminders=r.List.isList(o)?o.toJS():Array.isArray(o)?o:[],g.exDate=r.List.isList(p)?p.toJS():p,t){if(Object.assign(g,$s(t,g)),a&&t!==a){var v=Object(zs.f)(a,i,m);g.end=$s(v,g)}}else if(i||(g.isAllDay=!0),n&&!i){var y=Object(zs.j)(n,m,"HH:mm");g.isAllDay=!1,g.date=null,g.clock=y.locale("en").format(g.meridiem?"hh:mm A":"HH:mm")}return g},qs=function(e){var t=e.reminders,n=e.isAllDay,r=e.repeatFrom,a=e.repeatFlag,o=e.exDate,c=e.date,s=e.clock,u=e.end,l=e.meridiem,d=e.logicTimeZone,f=void 0===d?zs.h:d,p=e.timeZone,h=e.isFloating,m=void 0!==h&&h,g={reminders:t,isAllDay:!i.a.isBoolean(n)||n,repeatFlag:a,repeatFrom:r,exDate:o,startDate:null,dueDate:null,timeZone:f,isFloating:m};if(c){if(s){var v=Object(zs.i)(c,s,l,p);g.startDate=v.isValid()?Object(zs.d)(v):null}else{var y=Object(zs.j)(c,p,"YYYY-MM-DD");g.startDate=y.isValid()?Object(zs.d)(y):null}if(u){var b=u.date||c,k=u.clock;if(k){var O=Object(zs.i)(b,k,l,p);g.dueDate=O.isValid()?Object(zs.d)(O):null}else{var T=Object(zs.j)(b,p,"YYYY-MM-DD").add(1,"days");g.dueDate=T.isValid()?Object(zs.d)(T):null}}else g.dueDate=null}else g.startDate=null,g.dueDate=null;return g},Js=function(e){var t=e.isAllDay,n=e.isFloating,r=e.timeZone;return!x.b("isTimeZoneOptionEnabled")||t||n?zs.h:r||zs.h},$s=function(e,t){var n=t.isAllDay,r=t.timeZone,a=t.meridiem,i=Object(zs.j)(e,r);return{date:i.format("YYYY-MM-DD"),clock:n?"":i.locale("en").format(a?"hh:mm A":"HH:mm")}};function Xs(e){return(Xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qs(e){return function(e){if(Array.isArray(e))return eu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return eu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eu(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nu(e,t){return(nu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ru(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ou(e);if(t){var a=ou(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return au(this,n)}}function au(e,t){return!t||"object"!==Xs(t)&&"function"!=typeof t?iu(e):t}function iu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ou(e){return(ou=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nu(e,t)}(o,e);var t,n,r,a=ru(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).state={showWidget:!1,value:e.defaultTime},t.compatibleBrowser=null!==navigator.userAgent.toLowerCase().match(/safari|trident|msie 10\.0|edge/)&&null===navigator.userAgent.toLowerCase().match(/chrome/),t.highlightedUnit="",t.meridianPosition=e.timeFormat.length+(e.showSeconds?8:5),t.handleDifference(),t.highlightUnitAndShowWidget=t.highlightUnitAndShowWidget.bind(iu(t)),t.highlightUnit=t.highlightUnit.bind(iu(t)),t.elementKeydown=t.elementKeydown.bind(iu(t)),t.onChangeTime=t.onChangeTime.bind(iu(t)),t.showWidget=t.showWidget.bind(iu(t)),t.hideWidget=t.hideWidget.bind(iu(t)),t.updateFromElementVal=t.updateFromElementVal.bind(iu(t)),t.handleWheel=t.handleWheel.bind(iu(t)),t.blurTimePicker=t.blurTimePicker.bind(iu(t)),t.widgetRef=Y.a.createRef(),t.triggerRef=Y.a.createRef(),t.wrapperRef=Y.a.createRef(),t.escListenId=i.a.uniqueId(),t}return t=o,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=this.props.defaultTime;e.defaultTime!==n&&this.setState({value:e.defaultTime},(function(){t.scrollToRightWidgetPos()}))}},{key:"componentDidUpdate",value:function(e,t){var n=this.state;!t.showWidget&&n.showWidget&&(this.wrapperRef.current&&En.l($(this.wrapperRef.current)),f.b.subscribe(this.escListenId,"timepicker",this.hideWidget),this.fixPosition(),this.scrollToRightWidgetPos()),t.showWidget&&!n.showWidget&&(this.wrapperRef.current&&En.r($(this.wrapperRef.current)),f.b.unSubscribe(this.escListenId))}},{key:"componentWillUnmount",value:function(){f.b.unSubscribe(this.escListenId)}},{key:"onChangeTime",value:function(){}},{key:"getTime",value:function(e){return this.formatTime(this.hour,this.minute,this.second,this.meridian,e)}},{key:"getCursorPosition",value:function(){var e=this.triggerRef.current;if(document.selection){e.focus();var t=document.selection.createRange(),n=document.selection.createRange().text.length;return t.moveStart("character",-e.value.length),t.text.length-n}return"selectionStart"in e?e.selectionStart:null}},{key:"setTime",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.needOffset=n;var r=this.props,a=r.showMeridiem,i=r.timeFormat,o=r.showSeconds;if(a){var c=new RegExp("([ 0-9:]+)"+i+"([ap]m)?","i"),s=e.match(c);if(!s)return;t=s[1].split(":"),this.meridian=s[2]}else t=e.split(":"),this.meridian=U.a.dateFormatToMoment(e,"HH:mm").locale("en").format("A");this.hour=parseInt(t[0],10),this.minute=parseInt(t[1],10),this.second=parseInt(t[2],10),Number.isNaN(this.hour)&&(this.hour=0),Number.isNaN(this.minute)&&(this.minute=0),Number.isNaN(this.second)&&(this.second=0),a?(this.hour>12?(this.hour%=12,this.meridian="PM"):this.hour<1&&(this.hour=12),"am"===this.meridian||"a"===this.meridian?this.meridian="AM":"pm"!==this.meridian&&"p"!==this.meridian||(this.meridian="PM"),"AM"!==this.meridian&&"PM"!==this.meridian&&(this.meridian="AM")):this.hour>=24?(this.hour%=24,this.meridian="PM"):this.hour<0&&(this.hour=0,this.meridian="AM"),this.minute<0?this.minute=0:this.minute>=60&&(this.minute=59),o&&(Number.isNaN(this.second)||this.second<0?this.second=0:this.second>=60&&(this.second=59)),this.update()}},{key:"formatWidgetTime",value:function(e){var t=this.props,n=t.showMeridiem,r=t.timeFormat;e<0?e+=1440:e>=1440&&(e-=1440);var a=[];return a[1]=this.formatUnit(e%60),n?(a[0]=Math.floor(e/60),a[1]+=r+(a[0]>=12?"PM":"AM"),a[0]=a[0]||12,a[0]=a[0]>12?this.formatUnit(a[0]%12):this.formatUnit(a[0])):a[0]=this.formatUnit(Math.floor(e/60)),a.join(":")}},{key:"formatUnit",value:function(e){return e<10?"0"+e:e}},{key:"handleDifference",value:function(){var e=this.props,t=e.minuteDifference,n=e.hourDifference;t=parseInt(t,10),(n=parseInt(n,10))>24&&(n%=24),t>60&&(t%=60),this.minuteDifference=t,this.hourDifference=n}},{key:"highlightUnitAndShowWidget",value:function(e){var t=this.props.onAwake,n=this.state.showWidget,r=this.highlightedUnit;this.highlightUnit(),r!==this.highlightedUnit&&this.updateFromElementVal(),t&&t(),"meridian"===r&&"meridian"===this.highlightedUnit&&this.toggleMeridian(),n?this.hideWidget():this.showWidget()}},{key:"highlightUnit",value:function(){var e=this.props.showSeconds,t=this.getCursorPosition();t>=0&&t<=2?this.highlightHour():t>=3&&t<=5?this.highlightMinute():t>=6&&t<=8&&e?this.highlightSecond():t>=this.meridianPosition&&t<=this.meridianPosition+2&&this.highlightMeridian()}},{key:"_highlightHour",value:function(){var e=$(this.triggerRef.current).get(0);this.highlightedUnit="hour",e.setSelectionRange&&e.setSelectionRange(0,2)}},{key:"_highlightMinute",value:function(){var e=$(this.triggerRef.current).get(0);this.highlightedUnit="minute",e.setSelectionRange&&e.setSelectionRange(3,5)}},{key:"_highlightSecond",value:function(){var e=$(this.triggerRef.current).get(0);this.highlightedUnit="second",e.setSelectionRange&&e.setSelectionRange(6,8)}},{key:"_highlightMeridian",value:function(){var e=this.props.showSeconds,t=$(this.triggerRef.current).get(0);this.highlightedUnit="meridian",t.setSelectionRange&&(e?t.setSelectionRange(9,11):t.setSelectionRange(this.meridianPosition,this.meridianPosition+2))}},{key:"_highlightCurrentUnit",value:function(){switch(this.highlightedUnit){case"hour":this._highlightHour();break;case"minute":this._highlightMinute();break;case"second":this._highlightSecond();break;case"meridian":this._highlightMeridian()}}},{key:"highlightHour",value:function(){var e=this.triggerRef.current;this.highlightedUnit="hour",e.setSelectionRange&&setTimeout((function(){e.setSelectionRange(0,2)}))}},{key:"highlightMinute",value:function(){var e=this.triggerRef.current;this.highlightedUnit="minute",e.setSelectionRange&&setTimeout((function(){e.setSelectionRange(3,5)}))}},{key:"highlightSecond",value:function(){var e=this.triggerRef.current;this.highlightedUnit="second",e.setSelectionRange&&setTimeout((function(){e.setSelectionRange(6,8)}))}},{key:"highlightMeridian",value:function(){var e=this.meridianPosition,t=this.triggerRef.current;this.highlightedUnit="meridian",t.setSelectionRange&&setTimeout((function(){t.setSelectionRange(e,e+2)}))}},{key:"updateFromElementVal",value:function(){var e=this.triggerRef.current.value;e&&this.setTime(e)}},{key:"blurTimePicker",value:function(){this.updateFromElementVal();var e=this.props.onBlur;e&&e({value:this.getTime(!0),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian})}},{key:"update",value:function(e){var t=this.props.onChangeTime;t&&t({value:this.getTime(!0),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian,offset:this.needOffset?this.offset:0}),this.setState({value:this.getTime()},e)}},{key:"updateWidget",value:function(){if(!1!==this.$widget){var e=this.props,t=e.showInputs,n=e.showSeconds,r=e.showMeridiem,a=this.hour<10?"0"+this.hour:this.hour,i=this.minute<10?"0"+this.minute:this.minute,o=this.second<10?"0"+this.second:this.second;t?(this.$widget.find("input.timepicker-hour").val(a),this.$widget.find("input.timepicker-minute").val(i),n&&this.$widget.find("input.timepicker-second").val(o),r&&this.$widget.find("input.timepicker-meridian").val(this.meridian)):(this.$widget.find("span.timepicker-hour").text(a),this.$widget.find("span.timepicker-minute").text(i),n&&this.$widget.find("span.timepicker-second").text(o),r&&this.$widget.find("span.timepicker-meridian").text(this.meridian))}}},{key:"formatTime",value:function(e,t,n,r,a){var i=this.props,o=i.showSeconds,c=i.timeFormat;n=n<10?"0"+n:n;var s=(e=e<10?"0"+e:e)+":"+(t=t<10?"0"+t:t)+(o?":"+n:"")+(a?" ":c)+r;return i.showMeridiem||(s=U.a.dateFormatToMoment(s,"HH:mm").locale("en").format("HH:mm")),s}},{key:"toggleMeridian",value:function(e,t){e||this.hideWidget(),this.meridian="AM"===this.meridian?"PM":"AM",this.update(t)}},{key:"showWidget",value:function(){var e=this;this.props.hasWidget&&this.setState({showWidget:!0},(function(){e.fixPosition(),e.scrollToRightWidgetPos()}))}},{key:"fixPosition",value:function(){var e=this.triggerRef.current.getBoundingClientRect(),t=e.top,n=e.bottom,r=e.height,a=window.innerHeight-n,i=t;a>304?(this.widgetRef.current.style.height="300px",this.widgetRef.current.style.top=r+4+"px"):i>304?(this.widgetRef.current.style.height="300px",this.widgetRef.current.style.top="-304px"):(this.widgetRef.current.style.top=r+"px",this.widgetRef.current.style.height=a-4+"px")}},{key:"scrollToRightWidgetPos",value:function(){var e=this.state.value;if(this.widgetRef.current){var t=0,n=x.i(e),r=$(this.wrapperRef.current).find(".antiscroll-inner")[0];if("Invalid date"!==n){var a=Array.from(r.childNodes);-1===(t=a.findIndex((function(e){return e.className.includes("active")})))&&(t=a.findIndex((function(e){var t=e.childNodes[0].innerText,r=new Date("2000/01/01 ".concat(n.trim())).getTime();return new Date("2000/01/01 ".concat(t.trim())).getTime()>r})))}r.scrollTop=36*t}}},{key:"hideWidget",value:function(){this.props.hasWidget&&this.setState({showWidget:!1})}},{key:"handleWheel",value:function(e){var t=this,n=null,r=this.triggerRef.current;if(e.nativeEvent.deltaY<=0?r.scrollTop<=0&&(n="decrement"):r.scrollTop+r.clientHeight>=r.scrollHeight&&(n="increment"),n)switch(this.highlightedUnit){case"hour":this[n+"Hour"](null,(function(){t._highlightHour()}));break;case"minute":this[n+"Minute"](null,(function(){t._highlightMinute()}));break;case"second":this[n+"Second"]((function(){t._highlightMinute()}));break;case"meridian":this.toggleMeridian(!1,(function(){t._highlightMeridian()}))}}},{key:"elementKeydown",value:function(e){var t=this,n=this.props,r=n.showMeridiem,a=n.isOpen,i=n.template,o=e.which?e.which:e.keyCode;switch(o){case 9:switch(this.updateFromElementVal(),this.highlightedUnit){case"hour":case"minute":case"meridian":e.preventDefault(),this.highlightNextUnit();break;case"second":r&&(e.preventDefault(),this.highlightNextUnit())}break;case 27:this.hideWidget(),this.updateFromElementVal();break;case 37:e.preventDefault(),this.highlightPrevUnit(),this.updateFromElementVal();break;case 38:if(e.preventDefault(),"meridian"===this.highlightedUnit||!a||"dropdown"!==i)switch(this.highlightedUnit){case"hour":this.decrementHour(null,(function(){t._highlightHour()}));break;case"minute":this.decrementMinute(null,(function(){t._highlightMinute()}));break;case"second":this.decrementSecond((function(){t._highlightSecond()}));break;case"meridian":this.toggleMeridian(!1,(function(){t._highlightMeridian()}))}break;case 39:e.preventDefault(),this.updateFromElementVal(),this.highlightNextUnit();break;case 40:if(e.preventDefault(),"meridian"===this.highlightedUnit||!a||"dropdown"!==i)switch(this.highlightedUnit){case"hour":this.incrementHour(null,(function(){t._highlightHour()}));break;case"minute":this.incrementMinute(null,(function(){t._highlightMinute()}));break;case"second":this.incrementSecond((function(){t._highlightSecond()}));break;case"meridian":this.toggleMeridian(!1,(function(){t._highlightMeridian()}))}break;case 13:a&&"dropdown"===i||this.hideWidget(),$(this.triggerRef.current).blur();break;default:e.preventDefault();var c=parseInt(e.key,10);if(229===o&&Number.isNaN(c))return;var s=this.getCursorPosition();229===o&&this.compatibleBrowser?this.updateCompatibleInput():s<=1||s>2&&s<5?(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105||c>=0&&c<=9)&&(this.updateInputNumber(e.keyCode%48),this.hideWidget()):s===this.meridianPosition?[97,112,65,80].includes(e.keyCode)&&this.toggleMeridian(!1,(function(){t._highlightMeridian()})):s===this.meridianPosition+1&&[109,77].includes(e.keyCode)&&this.toggleMeridian(!1,(function(){t._highlightMeridian()}))}}},{key:"highlightPrevUnit",value:function(){var e=this.props.showSeconds;switch(this.highlightedUnit){case"hour":this.highlightMeridian();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":e?this.highlightSecond():this.highlightMinute()}}},{key:"highlightNextUnit",value:function(){var e=this.props,t=e.showSeconds,n=e.showMeridiem;switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":t?this.highlightSecond():n?this.highlightMeridian():this.highlightHour();break;case"second":n?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}}},{key:"decrementHour",value:function(e,t){var n=this.props.showMeridiem;if(e=e||this.hourDifference)if(n){var r=!1;this.hour-=e,this.hour<1&&(this.hour+=12),11===this.hour&&(r=!r),r&&this.toggleMeridian(!0)}else this.hour-=e,this.hour<0&&(this.hour+=24);else this.decrementMinute();this.update(t)}},{key:"decrementMinute",value:function(e,t){e=e||this.minuteDifference,this.minute-=e,this.minute<0&&(this.minute+=60,this.decrementHour(1)),this.update(t)}},{key:"decrementSecond",value:function(e){var t=this.second-this.secondStep;t<0?(this.second=t+60,this.decrementMinute(1)):this.second=t,this.update(e)}},{key:"incrementHour",value:function(e,t){var n=this.props.showMeridiem;if(e=e||this.hourDifference)if(n){var r=!1;this.hour+=e,this.hour>12&&(this.hour-=12),12===this.hour&&(r=!r),r&&this.toggleMeridian(!0)}else this.hour+=e,this.hour>23&&(this.hour-=24);else this.incrementMinute();this.update(t)}},{key:"incrementMinute",value:function(e,t){e=e||this.minuteDifference,this.minute+=e,this.minute>59&&(this.minute-=60,this.incrementHour(1)),this.update(t)}},{key:"incrementSecond",value:function(e){var t=this.second+this.secondStep-this.second%this.secondStep;t>59?(this.second=t-60,this.incrementMinute(!0)):this.second=t,this.update(e)}},{key:"updateCompatibleInput",value:function(){var e=this.props,t=e.showMeridiem,n=e.timeFormat,r=$(this.triggerRef.current).val(),a=t?r.slice(0,r.lastIndexOf(n)):r,i="hour"===this.highlightedUnit?0:1;(a=a.split(":"))[i]=parseInt(a[i],10),this[this.highlightedUnit]=a[i],a[i]>=10&&(this.highlightNextUnit(),this.updateFromElementVal())}},{key:"updateInputNumber",value:function(e){var t=this,n=this.props,r=n.showMeridiem,a=n.timeFormat,i=$(this.triggerRef.current).val(),o=r?i.slice(0,i.lastIndexOf(a)):i,c=i.replace(o,""),s="hour"===this.highlightedUnit?0:1,u=0===(o=o.split(":"))[s].indexOf(" ");o[s]=parseInt(o[s],10),o[s]<10&&u?(o[s]=10*o[s]+e,this[this.highlightedUnit]=o[s],i=o.join(":").concat(c),this.setState({value:i},(function(){t.highlightNextUnit(),t.updateFromElementVal()}))):(this[this.highlightedUnit]=o[s],o[s]=" "+e,i=o.join(":").concat(c),this.setState({value:i},(function(){t._highlightCurrentUnit()})))}},{key:"clearTime",value:function(){this.triggerRef.current.value=""}},{key:"getTimeList",value:function(){for(var e=this,t=this.props,n=t.startClock,r=t.isCrossDay,a=t.endClock,i=[],o=[15,30,45],c=!1,s=0,u=0,l=n?+n.slice(3,5)%30:0,d=[],f=!1,p=new Date("2000/01/01 ".concat(a)).getTime();s<1440;)if(n&&!r&&a){var h=this.formatWidgetTime(s+l),m=this.formatWidgetTime(s+0),g=new Date("2000/01/01 ".concat(m)).getTime();if(n===h){c=!0,d.push.apply(d,Qs(o.map((function(t,n){var r=e.formatWidgetTime(s+l+t),a=new Date("2000/01/01 ".concat(r)).getTime(),i=!f&&a-p>=0;return i&&(f=!0),{text:r,isActive:i,displayInfo:t,unit:"time_mins"}})))),u=s,s+=60;continue}if(c){var v=g-p>=0&&!f,y=(s-u)/60;d.push({text:h,isActive:v,displayInfo:y,unit:1===y?"time_hr":"time_hrs"}),v&&(f=!0)}else{var b=g-p>=0&&!f;i.push({text:h,isActive:b,displayInfo:s/60,overDay:!0,unit:"time_hrs"}),b&&(f=!0)}s+=30}else{var k=this.formatWidgetTime(s),O=new Date("2000/01/01 ".concat(k)).getTime()-new Date("2000/01/01 ".concat(a)).getTime()>=0&&!f;O&&(f=!0),d.push({text:k,isActive:a?O:k===this.getTime(!0)}),s+=30}return this.offset=i.length>0?1:0,i.forEach((function(e){e.displayInfo+=(1440-u)/60})),d.push.apply(d,i),d}},{key:"renderWidget",value:function(){var e=this,t=this.props,n=t.widgetFooterComponent,r=t.isCrossDay,a=t.endClock,i=this.getTimeList(),o=!r&&a;return Y.a.createElement("div",{className:"timepicker-widget dropdown-menu open ".concat(o?"inline":""),ref:this.widgetRef},Y.a.createElement("div",{className:"timepicker-widget-content antiscroll-wrap",ref:this.wrapperRef},Y.a.createElement("ul",{className:"timepicker-quick-selector antiscroll-inner"},i.map((function(t){return Y.a.createElement("li",{key:t.text,className:K()("dropdown-menu-item",{active:t.isActive,"color-theme":t.isActive}),onClick:function(){e.setTime(t.text,t.overDay),e.setState({showWidget:!1})}},Y.a.createElement("a",null,t.text),o&&Y.a.createElement(Je.a,{id:t.unit,values:{s:t.displayInfo},tagName:"a"}))})))),Y.a.createElement("div",{className:"timepicker-widget-footer"},n))}},{key:"render",value:function(){var e=this,t=this.props,n=t.maxLength,r=t.placeholder,a=t.extraClassName,i=t.extraPlaceholderClassName,o=t.placeHolderChildren,c=this.state.showWidget,s=this.state.value;return s=s||"",Y.a.createElement(Y.a.Fragment,null,c&&this.renderWidget(),Y.a.createElement("div",{className:K()(i,{"hide-placeholder":!(!s&&o)}),onClick:function(){e.highlightUnitAndShowWidget();var t=e.triggerRef.current;setTimeout((function(){t.focus()}))}},o),Y.a.createElement("input",{ref:this.triggerRef,type:"text",maxLength:n,placeholder:r,className:K()(a,{"hide-placeholder":!s&&o}),onClick:this.highlightUnitAndShowWidget,onKeyDown:this.elementKeydown,value:s,onChange:this.onChangeTime,onBlur:this.blurTimePicker,onWheel:this.handleWheel,tabIndex:"-1"}))}}])&&tu(t.prototype,n),r&&tu(t,r),o}(Y.a.Component);cu.defaultProps={defaultTime:"",maxLength:12,placeholder:"",extraClassName:"",isOpen:!1,showSeconds:!1,showInputs:!1,showMeridiem:!0,template:"dropdown",timeFormat:"  |  ",hourDifference:1,minuteDifference:15,hasWidget:!1,widgetFooterComponent:null,onAwake:null,onBlur:null,onChangeTime:null,startClock:"",endClock:"",isCrossDay:!1,extraPlaceholderClassName:"",placeHolderChildren:null};var su=cu,uu=Y.a.forwardRef((function(e,t){var n=e.className,r=e.onClick,a=e.isReadOnly,i=e.titleText;return Y.a.createElement("div",{onClick:r,ref:t,className:K()(n,{"select-trigger-disabled":a})},Y.a.createElement("div",{className:K()("select-title",{"text-info":a})},i),Y.a.createElement("div",{className:"select-arrow"},""))}));uu.displayName="SelectTrigger";var lu=uu,du=Y.a.forwardRef((function(e,t){var n=e.children,r=e.onCancel,a=e.onConfirm,i=Object(G.a)();return Y.a.createElement("div",{className:"setting-confirm-popup",ref:t},n,Y.a.createElement("div",{className:"control"},Y.a.createElement("div",{className:"btns"},Y.a.createElement(Ya.a,{type:"cancel",size:"tiny",onClick:r},i.formatMessage({id:"cancel"})),Y.a.createElement(Ya.a,{size:"tiny",onClick:a},i.formatMessage({id:"ok"})))))}));du.displayName="SettingConfirmPopup";var fu=du;function pu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mu=Object(zs.g)().map((function(e){return{key:e,value:Object(zs.c)(e,{removeContinent:!0,shortenOffset:!1})}})).sort((function(e,t){return e.value>t.value?1:-1}));var gu=Object(me.c)((function(e){var t=e.intl,n=e.isFloating,r=e.timeZone,a=e.onTimezoneChange,i=Object(B.useRef)(null),o=pu(Object(B.useState)(""),2),c=o[0],s=o[1];Object(B.useEffect)((function(){var e=$(i.current);return En.l(e),function(){En.r(e)}}),[]);var u=Object(B.useMemo)((function(){return mu.filter((function(e){var t=e.key;return e.value.toLowerCase().includes(c.toLowerCase())&&t!==r})).map((function(e){var t=e.key,n=e.value;return Y.a.createElement(Ze,{key:t,title:n},n)}))}),[c,r]);return Y.a.createElement("div",{className:"select-menu"},Y.a.createElement("div",{className:"menu"},Y.a.createElement("div",{className:"header"},Y.a.createElement("input",{type:"text",placeholder:t.formatMessage({id:"search"}),value:c,onChange:function(e){s(e.target.value)},autoFocus:!0,className:"select-input text-primary"})),Y.a.createElement("div",{className:"header-select"},Y.a.createElement("div",{className:K()("option-item",{"option-item-selected":!n}),onClick:function(){a(r)}},Y.a.createElement("span",null,Object(zs.c)(r,{removeContinent:!0,shortenOffset:!1})),Y.a.createElement(Q.a,{name:"selected",className:"i-3"}))),Y.a.createElement("div",{className:"bd-divider divider"}),Y.a.createElement("div",{className:"list-wrapper antiscroll-wrap",ref:i},Y.a.createElement("div",{className:"antiscroll-inner"},Y.a.createElement(Xe,{defaultSelectedKeys:[r],multiple:!1,onSelect:function(e){a(e.key)},prefixCls:"option"},u)))))}));function vu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bu=Object(me.c)((function(e){var t=e.intl,n=e.isFloating,r=e.timeZone,a=e.onCancel,i=e.onConfirm,o=e.onShown,c=e.adaptToContainerWidth,s=void 0===c||c,u=vu(Object(B.useState)(r),2),l=u[0],d=u[1],f=vu(Object(B.useState)(n),2),p=f[0],h=f[1],m=Object(B.useRef)(null),g=Object(B.useRef)(null),v=Object(B.useRef)(null);Object(B.useEffect)((function(){o&&o(g.current)}),[o]);var y=Object(B.useCallback)((function(){i&&i({timeZone:l,isFloating:p})})),b=Object(B.useCallback)((function(e){h(!0),d(zs.h)})),k=Object(B.useCallback)((function(e){h(!1)})),O=Object(B.useCallback)((function(e){h(!1),d(e),m.current.hide()})),T=Object(B.useCallback)((function(e){if(s){var t=g.current,n=$(t).width();e.style.width=n+"px",e.style.left=parseFloat(e.style.left,10)+(t.getBoundingClientRect().left-e.getBoundingClientRect().left)+"px"}else{var r=$(g.current).find(".choose-timezone-title")[0].offsetWidth;e.style.width=r+"px"}}),[v]);return Y.a.createElement(fu,{onConfirm:y,onCancel:a},Y.a.createElement("div",{className:"choose-timezone-setting-menu text-root",ref:g},Y.a.createElement("div",{className:"choose-timezone-item"},Y.a.createElement("input",{type:"radio",id:"timezone",checked:!p,onChange:k}),Y.a.createElement("label",{htmlFor:"timezone"},t.formatMessage({id:"timezone_option_fixed_zone"})),Y.a.createElement(Re,{ref:m,disabled:p,destroyPopupOnHide:!0,autoAdjustOverflow:!0,menuClassName:"timecard-timezone-select-menu timecard-element",menu:Y.a.createElement(gu,{timeZone:l,isFloating:p,onTimezoneChange:O}),onShow:T},Y.a.createElement(lu,{ref:v,titleText:Object(zs.c)(l,{removeContinent:!0,shortenOffset:!0}),className:"choose-timezone-title multi-select-toggle",isReadOnly:p}))),Y.a.createElement("div",{className:"choose-timezone-item"},Y.a.createElement("input",{type:"radio",id:"time",checked:p,onChange:b}),Y.a.createElement("label",{htmlFor:"time"},t.formatMessage({id:"timezone_option_fixed_time"})),Y.a.createElement("div",{className:"desc text-info text-tny text-break-word"},t.formatMessage({id:"timezone_option_fixed_time_desc"}))),Y.a.createElement("div",{className:"choose-timezone-learn-more"},Y.a.createElement("a",{className:"text-info",href:R.k?"https://help.dida365.com/faqs/6609623323343060992/":"https://support.ticktick.com/hc/en-us/articles/360037435112",target:"_blank"},t.formatMessage({id:"learn_more"})))))}));function ku(e){var t=e.intl,n=e.menuContainer,r=e.menuTitleClassName,a=e.timeZone,i=e.isFloating,o=e.isReadOnly,c=e.submitChangedData,s=e.onMenuPositionChange,u=Object(B.useRef)(null),l=Object(B.useCallback)((function(){u.current&&u.current.hide()})),d=Object(B.useCallback)((function(e){c(e),l()})),f=Object(B.useMemo)((function(){return i?t.formatMessage({id:"timezone_option_fixed_time"}):Object(zs.c)(a,{removeContinent:!0,shortenOffset:!0})}),[t,i,a]);return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement(Re,{ref:u,disabled:o,destroyPopupOnHide:!0,autoAdjustOverflow:!0,getMenuContainer:function(e){return n},menu:Y.a.createElement(bu,{timeZone:a,isFloating:i,onConfirm:d,onCancel:l,getMenuContainer:function(e){return n}}),onShow:s},Y.a.createElement(lu,{titleText:f,isReadOnly:o,className:K()("choose-timezone-title text-root",r)})))}ku.defaultProps={onMenuPositionChange:void 0};var Ou=Object(me.c)(ku);var Tu=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getUTCMoment=function(e){return Object(zs.k)(e||void 0)},this.getDateMoment=function(e,t){return Object(zs.j)(e||void 0,n.timeZone,t)},this.getMeridiemDateTimeMoment=function(e,t,r){return Object(zs.i)(e,t,r,n.timeZone)},this.getStartOfDate=function(e){var t=n.getDateMoment(e);return t?t.startOf("day"):null},this.getStartOfYear=function(e){return n.getDateMoment(e,"YYYY")},this.getStartOfMonth=function(e){var t=n.getDateMoment(e);return t?t.startOf("month"):null},this.getEndOfMonth=function(e){var t=n.getDateMoment(e);return t?t.endOf("month"):null},this.getStartOfWeek=function(e){var t=n.getDateMoment(e);if(t){var r=t.day(),a=x.s(),i=(0===r?7:r)-1,o=0===a?(i+1)%7:6===a?(i+2)%7:i;return t.subtract(o,"day").startOf("day")}return null},this.isDateBetweenRange=function(e,t,r){var a=n.getDateMoment(e),i=n.getDateMoment(t),o=n.getDateMoment(r);return!!(a&&i&&o)&&(a-i.startOf("day")>=0&&a-o.endOf("day")<=0)},this.formatYMD=function(e){return Object(zs.b)(n.getDateMoment(e),"YYYY-MM-DD")},this.formatYM=function(e){return Object(zs.b)(n.getDateMoment(e),"YYYY-MM")},this.formatYYYY=function(e){return Object(zs.b)(n.getDateMoment(e),"YYYY")},this.formatSlashShortDate=function(e){var t=n.getDateMoment(e),r=Object(oe.a)("MMMD");return t.startOf("day").year()===n.getDateMoment().year()&&(r=Object(oe.a)("slashShortDate")),t.format(r)},this.timeZone=t},Su=Y.a.createContext(new Tu),Eu=function(e){return new Tu(e)},wu=Su;function Du(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ju(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ju(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ju(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _u=Object(me.c)((function(e){var t=e.intl,n=e.date,r=e.clock,a=e.meridiem,o=e.timeZone,c=e.logicTimeZone,s=e.isFloating,u=e.submitChangedData,l=e.isAbleDisplayTimezone,d=e.isAbleSelectTimezone,f=e.changeTimezone,p=e.onTimePickerAwake,h=e.startClock,m=e.endClock,g=e.isCrossDay,v=Object(B.useRef)(null),y=Object(B.useRef)(null),b=Object(B.useRef)(null),k=Object(B.useRef)(!1),O=Du(Object(B.useState)(!1),2),T=O[0],S=O[1],E=Object(B.useContext)(wu);Object(B.useEffect)((function(){r&&!T&&S(!0),!r&&T&&S(!1)}),[r,T]),Object(B.useEffect)((function(){T&&k.current&&(y.current&&(w(),setTimeout((function(){y.current.highlightUnitAndShowWidget()}))),k.current=!1)}),[T,w]),Object(B.useEffect)((function(){var e=i.a.uniqueId("TimecardDateTimeCommonTimeSetting"),t=!1;return $("body").on("mousedown.".concat(e),(function(){t=!!$(".choose-timezone-menu .dropdown-menu").length})),$("body").on("click.".concat(e),(function(e){if(!$(e.target).closest(v.current).length){if($(".choose-timezone-menu .dropdown-menu").length||t)return;y.current&&y.current.hideWidget()}})),function(){$("body").off("mousedown.".concat(e)),$("body").off("click.".concat(e))}}),[]);var w=Object(B.useCallback)((function(){if(p&&p(),!r){var e=c;d&&c!==zs.h&&(e=zs.h);var t=Object(zs.j)(new Date,Js({isAllDay:!1,isFloating:s,timeZone:e})).locale("en").startOf("hour").add(1,"hours").format(a?"hh:mm A":"HH:mm");y.current.setTime(t),u({date:n||E.formatYMD(),clock:t,isAllDay:!1,timeZone:e})}}),[r,n,E,d,s,c,a,p,u]);return Y.a.createElement("div",{className:K()("reminder-settings time",{"has-time":!!r})},Y.a.createElement("div",{className:"choose-time line",ref:v},Y.a.createElement("div",{className:"time-stamp"},Y.a.createElement("div",{className:"bootstrap-timepicker dropdown"},Y.a.createElement(su,{ref:y,placeholder:t.formatMessage({id:"set_time"}),hourDifference:0,minuteDifference:30,extraClassName:"input-sml text-center time-editor",extraPlaceholderClassName:"timepicker-placeholder",timeFormat:" ",onAwake:w,onChangeTime:function(e){var t={clock:e.value,isAllDay:!1,offset:e.offset};d&&!x.b("isTimeZoneOptionEnabled")&&(t.timeZone=zs.h,t.isFloating=!1),u(t)},defaultTime:r,showMeridiem:a,startClock:h,endClock:m,isCrossDay:g,hasWidget:!0,placeHolderChildren:Y.a.createElement(Y.a.Fragment,null,Y.a.createElement(Q.a,{name:"timecard_time"}),Y.a.createElement("span",null,t.formatMessage({id:"Time"}))),widgetFooterComponent:l?Y.a.createElement(Ou,{isReadOnly:!d,menuTitleClassName:"multi-select-toggle",menuContainer:b.current,timeZone:o,isFloating:s,submitChangedData:f,onMenuPositionChange:function(e){var t=$(e).parents(".choose-timezone-menu")[0],n=t.offsetWidth;e.style.width=n+"px",e.style.left=t.getBoundingClientRect().left-b.current.getBoundingClientRect().left+"px"}}):null}))),Y.a.createElement("span",{className:"delete fake-del",onClick:function(){y.current.clearTime(),y.current.hideWidget(),u({clock:null,isAllDay:!0,isFloating:!1})}}),Y.a.createElement("div",{className:"choose-timezone-menu",ref:b})))}));function Cu(e){return(Cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Iu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Au(e,t){return(Au=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Pu(e);if(t){var a=Pu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ru(this,n)}}function Ru(e,t){return!t||"object"!==Cu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pu(e){return(Pu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Nu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Au(e,t)}(i,e);var t,n,r,a=xu(i);function i(){return Iu(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.date,a=t.isDisabled,i=t.onClickDay,o=t.onDoubleClickDay,c=t.children,s=t.connectDropTarget,u=Y.a.createElement("span",{ref:function(t){e.$el=t},className:n,date:r,onClick:function(){a||i(r)},onDoubleClick:function(){a||o(r)}},c);return this.droppable&&s?s(u):u}}])&&Mu(t.prototype,n),r&&Mu(t,r),i}(Y.a.PureComponent);function Lu(e){return(Lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uu(e,t){return(Uu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bu(e);if(t){var a=Bu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Hu(this,n)}}function Hu(e,t){return!t||"object"!==Lu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bu(e){return(Bu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uu(e,t)}(n,e);var t=Fu(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).droppable=!0,r}return n}(Nu),Wu=[ie.h.TASK],Ku={hover:function(e,t,n){if(Gu(e,t,n)){var r="Kalendae"+e.date;if(y.a.dragHoverTarget!==r){y.a.dragHoverTarget=r;var a=n.$el;Object(En.c)(a),a.classList.add(ie.p.kalendaeDay)}}},drop:function(e,t,n){if(Gu(e,t,n)){Object(En.c)();var a,i=Object(T.A)(),o=t.getItem(),c=o.id,s=o.isSubTask,u=[];if(u=i.length>1&&-1!==i.indexOf(c)?i:[c],s){var l=Object(T.B)(o.taskId,o.id);l=l.set("isSubTaskModel",!0).set("taskId",o.taskId),a=Object(r.List)([l])}else a=Object(T.o)(u);if(Object(w.hb)(a.get(0)))g.b({text:v.a("edit_schedule_date_limit")});else{var d=U.a.getOffsetOfToday(e.date);k.f(a,d)}}}};function Gu(e,t,n){var r=t.getItem();return!r.isSubTask&&!r.isSubscribeTask}var Vu=Object(bs.a)(Wu,Ku,(function(e,t){return{connectDropTarget:e.dropTarget()}}))(Yu),zu=n(479),Zu=function(e){if(x.b("lunarEnabled")){var t=e.sy,n=e.ld,r=e.lM,a=e.lD,i=e.st;return t<2050?i||(1===n?r+"":a):""}return""},qu=function(e){if(x.b("weekNumbersEnabled")){var t=x.b("startDayOfWeek"),n=["SUN","MON","TUE","WED","THU","FIR","SAT"].findIndex((function(e){return e===t}));return e.sw===n?function(e){return x.b("weekNumbersEnabled")?v.a("calendar_view_week_of_year",{s:e.weekOfYear}):""}(e):""}return""},Ju=function(e,t){var n,r=t.showWeekOfYear;if(R.k){var a=(n=e,x.b("holidayEnabled")&&n.sf||""||function(e){if(x.b("holidayEnabled")){var t=e.lf||"";return e.sy<2050?t:""}return""}(e));return a?{isHoliday:!0,text:a}:{isHoliday:!1,text:a||(r?qu(e):"")||Zu(e)}}return{isHoliday:!1,text:r?qu(e):""}},$u=n(425);function Xu(e){return(Xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function el(e,t){return(el=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=al(e);if(t){var a=al(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return nl(this,n)}}function nl(e,t){return!t||"object"!==Xu(t)&&"function"!=typeof t?rl(e):t}function rl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function al(e){return(al=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var il={direction:"any",exDate:[],mode:"single",defaultSelectMode:"date",extraClassName:"",isFloat:!1,trigger:null,beforeDatesInvalid:!1,afterDatesInvalid:!1,isDisplayDateInfo:!1,canDrop:!1,isAbleSwitchMode:!0,dateInstance:new Tu,isTimeCardKalendae:!1,onChangeMonth:function(){},onHideKalendae:function(){}},ol=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&el(e,t)}(c,e);var t,n,a,o=tl(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).getWeekNames=Object(Mt.createSelector)([function(e){return e.dateInstance}],(function(e){for(var t=[],n=e.getStartOfWeek().subtract(1,"day"),r=0;r<7;r++){var a=n.add(1,"day");t.push({weekday:a.day(),name:a.format("dd")})}return t})),t.getDateArray=Object(Mt.createSelector)([function(e,t){return e.currentDate},function(e,t){return e.selectedDate},function(e,t){return e.exDate},function(e,t){return t.dateInstance},function(e,t){return t.showRepeat},function(e,t){return t.repeatFrom},function(e,t){return t.repeatFlag},function(e,t){return t.timeZone},function(e,t){return t.mode}],(function(e,n,r,a,i,o,c,s,u){for(var l=a.getStartOfMonth(e),d=a.getEndOfMonth(e),f=Object(zs.b)(Object(zs.j)(),"YYYY-MM-DD"),p=a.getStartOfWeek(l.clone()).subtract(1,"day"),h=new Set(t.getRepeatDates(p.clone().add(1,"day").toDate(),p.clone().add(42,"day").endOf("day").toDate(),i,o,n,c,r,s)||[]),m=a.getStartOfWeek(),g=[],v=0;v<42;v++){p.add(1,"day");var y=p.format("YYYY-MM-DD"),b=p-m;g.push({date:y,value:p.format("D"),isInWeek:b>=0&&b<=5184e5,isInMonth:p-l>=0&&p-d<=0,isToday:y===f,isSelected:t.isDaySelected(y),isDisabled:t.isDateDisabled(y),isInRepeat:h.has(y),isInRange:t.isDayInRange(y),isRangeStart:"range"===u&&y===n[0],isRangeEnd:"range"===u&&y===n[1]})}return g})),t.getDateArrayWithTaskCount=Object(Mt.createSelector)([t.getDateArray,function(e,t){return t.needTaskTip},function(e,t){return t.dateCount}],(function(e,t,n){return e.forEach((function(e){var r=!1;t&&(r=n[e.date]),e.hasTask=r})),e})),t.isBackTodayDisabled=function(){var e=t.props,n=e.isTimeCardKalendae,r=e.dateInstance,a=t.state,i=a.selectMode,o=a.currentDate,c=a.navYear;return!!n&&("date"===i?r.getDateMoment(o).format("YYYYMMDD")===r.getDateMoment().format("YYYYMMDD"):"month"===i&&r.getStartOfYear(c).format("YYYY")+r.getDateMoment(o).format("MM")===r.getDateMoment().format("YYYYMM"))},t.getYearArray=Object(Mt.createSelector)((function(e,t){return t.dateInstance}),(function(e,t){return e.navSelectedYear}),(function(e,t){return e.navYear}),(function(e,t){return e.currentDate}),(function(e,n,r,a){for(var i=n||e.formatYYYY(a),o=e.getStartOfYear(r).subtract(1,"year"),c=[],s=0;s<3;s++){o.add(1,"year");var u=o.format("YYYY");c.push({text:u,isActive:u===i,isDisabled:t.isYearDisabled(u)})}return c})),t.getSingleYearArray=Object(Mt.createSelector)((function(e,t){return t.dateInstance}),(function(e,t){return e.navSelectedYear}),(function(e,t){return e.navYear}),(function(e,t){return e.currentDate}),(function(e,n,r,a){var i=n||e.formatYYYY(a),o=[],c=e.getStartOfYear(r).format("YYYY");return o.push({text:c,isActive:c===i,isDisabled:t.isYearDisabled(c)}),o})),t.getMonthArray=Object(Mt.createSelector)((function(e,t){return t.dateInstance}),(function(e,t){return e.navSelectedYear}),(function(e,t){return e.currentDate}),(function(e,n,r){for(var a=e.getStartOfYear(n).subtract(1,"month"),i=[],o=e.formatYM(),c=e.formatYM(r),s=0;s<12;s++){a.add(1,"month");var u=a.format("MMM"),l=a.format("YYYY-MM");i.push({text:u,fullString:l,isActive:l===c,isCurrent:l===o,isDisabled:t.isMonthDisabeld(a.format("YYYY-MM"))})}return i}));var n=t.props,r=n.selected,a=n.mode,i=n.rangeAt,s=n.beforeDatesInvalid,u=n.afterDatesInvalid,l=n.exDate,d=n.dateInstance,f=n.defaultSelectMode,p=r?"range"===a?r["begin"===i?0:1]:r:void 0;return t.state={selectedDate:r||"",currentDate:t.getCurrentDateFromProps(e),navYear:d.formatYYYY(p),navSelectedYear:d.formatYYYY(p),beforeDatesInvalid:t.handleBeforeDatesInvalid(s),afterDatesInvalid:t.handleAfterDatesInvalid(u),exDate:l||[],selectMode:f},t.updateSelectedDate=t.updateSelectedDate.bind(rl(t)),t.doubleSelectedDate=t.doubleSelectedDate.bind(rl(t)),t.toPrevUnit=t.toPrevUnit.bind(rl(t)),t.toNextUnit=t.toNextUnit.bind(rl(t)),t.switchToMonthMode=e.isAbleSwitchMode?t.switchToMonthMode.bind(rl(t)):t.clickOnMonth.bind(rl(t)),t.changeYear=t.changeYear.bind(rl(t)),t.changeMonth=t.changeMonth.bind(rl(t)),t.backToToday=t.backToToday.bind(rl(t)),t.cacheTaskInDate={},t}return t=c,(n=[{key:"componentWillReceiveProps",value:function(e){if(e.selected!==this.props.selected&&this.setState({selectedDate:e.selected||"",currentDate:this.getCurrentDateFromProps(e)}),e.beforeDatesInvalid!==this.props.beforeDatesInvalid){var t=this.handleBeforeDatesInvalid(e.beforeDatesInvalid);t!==this.props.beforeDatesInvalid&&this.setState({beforeDatesInvalid:t})}if(e.afterDatesInvalid!==this.props.afterDatesInvalid){var n=this.handleAfterDatesInvalid(e.afterDatesInvalid);n!==this.props.afterDatesInvalid&&this.setState({afterDatesInvalid:n})}Object(r.is)(e.exDate||[],this.props.exDate)||this.setState({exDate:e.exDate||[]})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.isFloat,n=e.canDrop,r=e.useHTMLDrop,a=e.onHideKalendae,i=e.trigger;t&&$("body").on("click.kalendae",(function(e){$(e.target).parents(".kalendae").length||i&&$(e.target).closest(i).length||a()})),n&&!r&&this.initDroppable()}},{key:"componentWillUnmount",value:function(){this.props.isFloat&&$("body").off("click.kalendae"),this.props.canDrop&&!this.props.useHTMLDrop&&this.uninstallDroppable()}},{key:"componentDidUpdate",value:function(){this.props.canDrop&&!this.props.useHTMLDrop&&this.initDroppable()}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.props||{},a=this.state||{};if(e=e||{},t=t||{},Object.keys(n).length!==Object.keys(e).length||Object.keys(a).length!==Object.keys(t).length)return!0;for(var i in e)if(!Object(r.is)(n[i],e[i]))return!0;for(var o in t)if(a[o]!==t[o]||!Object(r.is)(a[o],t[o]))return!0;return!1}},{key:"refreshCurrentDate",value:function(){var e=this.props.dateInstance;this.setState({currentDate:e.formatYMD()})}},{key:"renderDayContent",value:function(e,t){var n=this.props.renderCustomDayContent,r=e.isInRepeat&&!e.isSelected;if(n)return n(e);var a=K()("k-day",{"k-in-month":e.isInMonth,"k-out-of-month":!e.isInMonth,"k-today":e.isToday,"k-selected":e.isSelected,"k-in-repeat":r,"k-range":e.isInRange,"k-range-begin":e.isRangeStart,"k-range-end":e.isRangeEnd,"k-task":e.hasTask,disable:e.isDisabled,"k-date-info":!!t});return Y.a.createElement("span",{className:a},e.value,t)}},{key:"render",value:function(){var e=this,t=this.state.currentDate,n=this.props,r=n.dateInstance,a=n.isTimeCardKalendae,o=r.getDateMoment(t),c=o.format("MMMM"),s=o.format("YYYY"),u=this.getWeekNames(this.props),l=this.getDateArrayWithTaskCount(this.state,this.props),d=this.getYearArray(this.state,this.props),f=this.getSingleYearArray(this.state,this.props),p=this.getMonthArray(this.state,this.props),h=l.map((function(t){return e.getDateInfoElement(t)})),m=h.some((function(e){return!!e})),g=this.isPrevDisabled(),v=this.isNextDisabled(),y=this.isBackTodayDisabled(),b=a?f:d;return Y.a.createElement("div",{id:this.props.id||null,className:K()("kalendae",this.props.extraClassName)},Y.a.createElement("div",{className:"k-calendar ".concat("month"===this.state.selectMode?"nav-open":"")},Y.a.createElement("div",{className:"k-title ".concat(a?"k-title-timecard":""," ")},Y.a.createElement("a",{className:K()("k-prev k-btn",{"k-btn-disable":g}),onClick:g?void 0:this.toPrevUnit},Y.a.createElement(Q.a,{name:"chevron-left"})),a&&Y.a.createElement("a",{className:K()("k-todayMonth k-btn",{"k-todayMonth-disable":y})},Y.a.createElement("div",{className:"circle",onClick:y?function(){}:this.backToToday})),Y.a.createElement("a",{className:K()("k-next k-btn",{"k-btn-disable":v}),onClick:v?void 0:this.toNextUnit},Y.a.createElement(Q.a,{name:"chevron-right"})),Y.a.createElement("div",{className:"k-caption"},Y.a.createElement("div",{className:"nav-selector ".concat("month"===this.state.selectMode?"open":"")},Y.a.createElement("span",{className:"nav-toggle",onClick:this.switchToMonthMode},Y.a.createElement("span",{className:"current-month"},c),Y.a.createElement("span",{className:"current-year"},s)),Y.a.createElement("span",{className:"nav-menu"},Y.a.createElement("ul",{className:"year"},b.map((function(t){return Y.a.createElement("li",{className:K()({active:t.isActive&&!a}),key:t.text,onClick:function(n){t.isDisabled||a||e.changeYear(t.text)}},Y.a.createElement("a",{className:K()("year-change",{disable:t.isDisabled})},t.text))}))),Y.a.createElement("ul",{className:"month"},p.map((function(t){return Y.a.createElement("li",{className:K()({active:t.isActive}),key:t.text,onClick:function(n){t.isDisabled||e.changeMonth(t.fullString)}},Y.a.createElement("a",{className:K()("month-change",{"month-current":t.isCurrent,disable:t.isDisabled})},t.text))}))))))),Y.a.createElement("div",{className:"k-header clearfix"},u.map((function(e){var t=e.name,n=e.weekday;return Y.a.createElement("span",{key:t,className:K()({"k-weekend":0===n||6===n})},t)}))),Y.a.createElement("div",{className:K()("k-days clearfix",{"k-info-days":m})},i.a.chunk(l,7).map((function(t,n){return Y.a.createElement("div",{className:K()("k-days-row",{"k-days-row-in-week":t[0].isInWeek}),key:n},t.map((function(t,r){var a=m?h[r+7*n]:null;return e.props.canDrop&&e.props.useHTMLDrop?Y.a.createElement(Vu,{key:t.date,date:t.date,isDisabled:t.isDisabled,onClickDay:e.updateSelectedDate,onDoubleClickDay:e.doubleSelectedDate},e.renderDayContent(t,a)):Y.a.createElement(Nu,{key:t.date,date:t.date,isDisabled:t.isDisabled,onClickDay:e.updateSelectedDate,onDoubleClickDay:e.doubleSelectedDate},e.renderDayContent(t,a))})))})))))}},{key:"getDateInfoElement",value:function(e){var t=this.props,n=t.dateInstance;if(t.isDisplayDateInfo){var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zu.a,n=t.solar2lunar(e),r=n.sYear,a=n.sMonth,i=n.sMonthName,o=n.sDay,c={"":0,"":1,"":2,"":3,"":4,"":5,"":6},s=new Date(r,a-1,o),u=Object(x.r)(s);return{sy:r,sm:a,smn:i,sd:o,symd:r+"-"+(a<10?"0"+a:a)+"-"+(o<10?"0"+o:o),sw:c[n.week],sW:n.week,ly:n.lYear,lm:n.lMonth,ld:n.lDay,lY:n.lunarYear,lM:n.lunarMonth,lD:n.lunarDay,st:n.solarTerms,sf:n.solarFestival,lf:n.lunarFestival,date:s,weekOfYear:u}}(n.getDateMoment(e.date).toDate()),a=Ju(r,{showWeekOfYear:!1}),i=1===r.ld,o=r.sy<2050?a.text:"";return o?Y.a.createElement("i",{className:K()({highlight:i})},o):null}return null}},{key:"updateSelectedDate",value:function(e){var t=this.state.selectedDate,n=this.props,r=n.dateInstance,a=n.mode,i=n.rangeAt,o=n.onBeforeChange,c=n.onChange;if("range"===a){var s,u;if("begin"===i){s=e;var l=r.getDateMoment(t[1]).diff(r.getDateMoment(t[0]),"day");u=r.getDateMoment(e).add(l,"day").format("YYYY-MM-DD")}else u=e,s=r.getDateMoment(e).isBefore(r.getDateMoment(t[0]),"day")?e:t[0];if(o&&o([s,u]))return;this.setState({selectedDate:[s,u]}),c&&c([s,u])}else{if(o&&o(e))return;this.setState({selectedDate:e}),c&&c(e)}}},{key:"doubleSelectedDate",value:function(e){var t=this.props,n=t.mode,r=t.onBeforeChange,a=t.onDoubleChange;if("range"!==n){if(r&&r(e))return;a&&a(e)}}},{key:"isPrevDisabled",value:function(){var e=this.state,t=e.selectMode,n=e.currentDate,r=e.navYear,a=e.beforeDatesInvalid,i=this.props,o=i.dateInstance,c=i.direction;if("date"===t){if("future"===c&&o.getDateMoment(n).format("YYYY-MM")===o.getDateMoment().format("YYYY-MM"))return!0;if(a&&o.getDateMoment(n).format("YYYY-MM")===o.getDateMoment(a).format("YYYY-MM"))return!0}else if("month"===t){if("future"===c&&r-o.getDateMoment().format("YYYY")<=0)return!0;if(a&&r-o.getDateMoment(a).format("YYYY")<=0)return!0}return!1}},{key:"toPrevUnit",value:function(){var e=this.props,t=e.onPrevUnit,n=e.isTimeCardKalendae,r=this.state.selectMode;"date"===r?this.toPrevMonth():"month"===r&&this.toPrevYear(n),t&&t({selectMode:r})}},{key:"toPrevMonth",value:function(){var e=this.state.currentDate,t=this.props,n=t.dateInstance,r=t.onChangeMonth,a=n.getDateMoment(e).subtract(1,"month").startOf("month").format("YYYY-MM-DD");this.setState({currentDate:a}),r&&r(a)}},{key:"toPrevYear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.state.navYear,n=this.props.dateInstance,r=n.getStartOfYear(t).subtract(e?1:3,"year");e?this.setState({navYear:r.format("YYYY"),navSelectedYear:r.format("YYYY")}):this.setState({navYear:r.format("YYYY")})}},{key:"isNextDisabled",value:function(){var e=this.props,t=e.dateInstance,n=e.direction,r=this.state,a=r.selectMode,i=r.currentDate,o=r.navYear,c=r.afterDatesInvalid;if("date"===a){if("past"===n&&t.getDateMoment(i).format("YYYY-MM")===t.getDateMoment().format("YYYY-MM"))return!0;if(c&&t.getDateMoment(i).format("YYYY-MM")===t.getDateMoment(c).format("YYYY-MM"))return!0}else if("month"===a){if("past"===n&&o-t.getDateMoment().format("YYYY")>=0)return!0;if(c&&o-t.getDateMoment(c).format("YYYY")>=0)return!0}return!1}},{key:"toNextUnit",value:function(){var e=this.props,t=e.onNextUnit,n=e.isTimeCardKalendae,r=this.state.selectMode;"date"===r?this.toNextMonth():"month"===r&&this.toNextYear(n),t&&t({selectMode:r})}},{key:"toNextMonth",value:function(){var e=this.props,t=e.dateInstance,n=e.onChangeMonth,r=this.state.currentDate,a=t.getDateMoment(r).add(1,"month").startOf("month").format("YYYY-MM-DD");this.setState({currentDate:a}),n&&n(a)}},{key:"toNextYear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props.dateInstance,n=this.state.navYear,r=t.getStartOfYear(n).add(e?1:3,"year");e?this.setState({navYear:r.format("YYYY"),navSelectedYear:r.format("YYYY")}):this.setState({navYear:r.format("YYYY")})}},{key:"turnToToday",value:function(){var e=this.props,t=e.dateInstance,n=e.onChangeSelectMode,r=this.state.selectMode;this.setState({selectMode:"date",currentDate:t.formatYMD(),navYear:t.formatYYYY()},(function(){"date"!==r&&n&&n(r)}))}},{key:"backToToday",value:function(){var e=this.props,t=e.dateInstance,n=e.onBeforeChange,r=e.onChange,a=this.state.selectMode;if("month"===a&&this.setState({currentDate:t.formatYMD(),navYear:t.formatYYYY(),navSelectedYear:t.formatYYYY()}),"date"===a){var i=t.formatYMD();if(n&&n(i))return;this.setState({selectedDate:i,currentDate:i,navYear:t.formatYYYY()}),r&&r(i)}}},{key:"switchToMonthMode",value:function(){var e=this.state,t=e.currentDate,n=e.selectMode,r=this.props,a=r.dateInstance,i=r.onChangeSelectMode,o=a.formatYYYY(t);this.setState({selectMode:"month",navYear:o,navSelectedYear:o},(function(){i&&i(n)}))}},{key:"clickOnMonth",value:function(){var e=this.props.onClickMonth;e&&e()}},{key:"changeYear",value:function(e){this.setState({navSelectedYear:e})}},{key:"changeMonth",value:function(e){var t=this.props,n=t.dateInstance,r=t.onChangeSelectMode,a=t.onChangeMonth,i=this.state.selectMode;this.setState({currentDate:n.formatYMD(e),selectMode:"date"},(function(){r&&r(i)})),a(e)}},{key:"isYearDisabled",value:function(e){var t=this.props,n=t.dateInstance,r=t.direction,a=this.state,i=a.beforeDatesInvalid,o=a.afterDatesInvalid;return"future"===r&&e<n.getDateMoment().year()||"past"===r&&e>n.getDateMoment().year()||!!(i&&n.getStartOfYear(e).endOf("year")<n.getDateMoment(i))||!!(o&&n.getStartOfYear(e).startOf("year")>n.getDateMoment(o))}},{key:"isMonthDisabeld",value:function(e){var t=this.props,n=t.dateInstance,r=t.direction,a=this.state,i=a.beforeDatesInvalid,o=a.afterDatesInvalid;return"future"===r&&n.getDateMoment(e)<n.getStartOfMonth()||"past"===r&&n.getDateMoment(e)>n.getStartOfMonth()||!!(i&&n.getEndOfMonth(e)<n.getDateMoment(i))||!!(o&&n.getStartOfMonth(e)>n.getDateMoment(o))}},{key:"isDateDisabled",value:function(e){var t=this.props,n=t.dateInstance,r=t.direction,a=this.state,i=a.beforeDatesInvalid,o=a.afterDatesInvalid,c=n.getDateMoment(e);return"future"===r&&c<n.getStartOfDate()||"past"===r&&c>n.getStartOfDate()||!!(i&&c<n.getDateMoment(i))||!!(o&&c>n.getDateMoment(o))}},{key:"getRepeatDates",value:function(e,t,n,r,a,i,o,c){var s=d.a.parseMoment(a,"YYYY-MM-DD").toDate();return n?"1"===r?[]:$u.b.occurrenceDatesOfRule(i,s,r,new Set(o),e,t,void 0,0,!1,c).map((function(e){return l()(e).format("YYYY-MM-DD")})):[]}},{key:"getCurrentDateFromProps",value:function(e){var t,n=e.selected,r=e.dateInstance;return t="range"===e.mode&&n instanceof Array?"begin"===e.rangeAt?n[0]:n[1]:n,r.formatYMD(t)}},{key:"isDayInRange",value:function(e){var t=this.props,n=t.dateInstance,r=t.mode,a=this.state.selectedDate;return"range"===r&&n.isDateBetweenRange(e,a[0],a[1])}},{key:"isDaySelected",value:function(e){var t=this.props,n=t.mode,r=t.rangeAt,a=this.state.selectedDate;return"range"===n?"begin"===r&&e===a[0]||"end"===r&&e===a[1]:e===a}},{key:"handleBeforeDatesInvalid",value:function(e){var t=this.props.dateInstance;if("boolean"===Xu(e))return!1;var n=t.formatYMD(e);return"Invalid date"!==n&&n}},{key:"handleAfterDatesInvalid",value:function(e){var t=this.props.dateInstance;if("boolean"===Xu(e))return!1;var n=t.formatYMD(e);return"Invalid date"!==n&&n}},{key:"initDroppable",value:function(){var e=this.props.dropOptions;$(".k-days span").droppable(e)}},{key:"uninstallDroppable",value:function(){var e=$(".k-days span");e&&e.hasClass("ui-droppable")&&e.droppable("destroy")}}])&&Qu(t.prototype,n),a&&Qu(t,a),c}(Y.a.Component);ol.defaultProps=il;var cl=ol;function sl(e){return(sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ul(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ll(e,t){return(ll=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=hl(e);if(t){var a=hl(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return fl(this,n)}}function fl(e,t){return!t||"object"!==sl(t)&&"function"!=typeof t?pl(e):t}function pl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hl(e){return(hl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ml=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ll(e,t)}(o,e);var t,n,r,a=dl(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=a.call(this,e,t)).settings=e.settings,n.state={startDate:n.settings.date||t.formatYMD(),dueDate:n.settings.end&&n.settings.end.date?n.settings.end.date:t.getDateMoment(n.state.startDate).add(1,"d").format("YYYY-MM-DD")},n.onDateChange=n.onDateChange.bind(pl(n)),n.cancel=n.cancel.bind(pl(n)),n.confirm=n.confirm.bind(pl(n)),n.rootRef=Y.a.createRef(),n.escListenId=i.a.uniqueId(),n}return t=o,(n=[{key:"componentDidMount",value:function(){var e;e=Object(P.B)()?document.querySelector(".tk-calendar").getBoundingClientRect():{top:0,height:window.innerHeight};var t=this.rootRef.current.getBoundingClientRect(),n=t.top+t.height-(e.top+e.height);n>0&&(this.rootRef.current.style.top=this.rootRef.current.offsetTop-n+"px"),f.b.subscribe(this.escListenId,"rangeCardSelect",this.cancel)}},{key:"componentWillUnmount",value:function(){f.b.unSubscribe(this.escListenId)}},{key:"render",value:function(){var e=this.props,t=e.intl,n=e.rangeAt,r=this.state,a=r.startDate,i=r.dueDate,o=this.context;return Y.a.createElement("div",{ref:this.rootRef,className:"timecard rangecard pop-shadow","data-type":n},Y.a.createElement("div",{className:"tc-inner"},Y.a.createElement("div",{className:"calendar-container"},Y.a.createElement(cl,{mode:"range",dateInstance:o,rangeAt:n,selected:[a,i],onChange:this.onDateChange})),Y.a.createElement("div",{className:"confirm-container btns"},Y.a.createElement("button",{className:"cancel-range-card btn-tny btn-cancel",onClick:this.cancel},t.formatMessage({id:"cancel"})),Y.a.createElement("button",{className:"confirm-range-card btn-tny btn-primary",onClick:this.confirm},t.formatMessage({id:"ok"})))))}},{key:"onDateChange",value:function(e){this.setState({startDate:e[0],dueDate:e[1]})}},{key:"cancel",value:function(){this.props.onCancel&&this.props.onCancel()}},{key:"confirm",value:function(){this.props.onConfirm&&this.props.onConfirm([this.state.startDate,this.state.dueDate])}}])&&ul(t.prototype,n),r&&ul(t,r),o}(Y.a.Component);ml.contextType=wu;var gl=Object(me.c)(ml,{forwardRef:!0});function vl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bl=Object(me.c)((function(e){var t,n,r=e.label,a=e.rangeAt,o=e.settings,c=e.intl,s=e.dateRangeUpdate,u=e.timeUpdate,l=e.isCrossDay,d=o.date,f=o.clock,p=o.meridiem,h=o.end,m=o.isAllDay,g=o.isFloating,v=o.timeZone,y=o.logicTimeZone,b=Object(B.useRef)(null),k=Object(B.useRef)(null),O=vl(Object(B.useState)(!1),2),T=O[0],S=O[1],E=Object(B.useContext)(wu);"end"===a?(t=h.date,n=h.clock):(t=d,n=f),Object(B.useEffect)((function(){var e=i.a.uniqueId("TimecardDateTimeAcrossDateRangeSetting_");return $("body").on("click.".concat(e),(function(e){T&&!$(e.target).closest(b.current).length&&k.current&&!$(e.target).closest(k.current.rootRef.current).length&&S(!1)})),function(){$("body").off("click.".concat(e))}}),[T]);var w=Object(B.useCallback)((function(){S(!1)}),[S]),D=function(){return S(!T)};return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("div",{className:"row range begin clearfix"},Y.a.createElement("p",{className:"title"},r),Y.a.createElement("div",{className:"range-wrapper",ref:b},Y.a.createElement("p",{className:"preview",onClick:D},function(e){var t=e.placeholder,n=e.date;return n?E.formatSlashShortDate(n):t}({placeholder:c.formatMessage({id:"task_due_date"}),date:t})),Y.a.createElement("div",{className:"range-reminder-container"},!m&&Y.a.createElement(_u,{isAbleDisplayTimezone:!1,meridiem:p,clock:n,date:t,isFloating:g,timeZone:v,logicTimeZone:y,submitChangedData:u,onTimePickerAwake:w,startClock:f,endClock:"end"===a?h.clock:null,isCrossDay:l})))),T&&Y.a.createElement(gl,{ref:k,rangeAt:a,settings:o,onCancel:D,onConfirm:function(e){s(e),S(!1)}}))}));var kl=Object(me.c)((function(e){var t=e.intl,n=e.isAllDay,r=e.switchAllDay;return Y.a.createElement("div",{className:"row allday"},Y.a.createElement("label",null,t.formatMessage({id:"all_day"})),Y.a.createElement("div",{className:"switch small round"},Y.a.createElement("input",{type:"checkbox",id:"across-day-allday",checked:n,onChange:r}),Y.a.createElement("label",{htmlFor:"across-day-allday"})))}));var Ol=Object(me.c)((function(e){var t=e.intl,n=e.isAllDay,r=e.timeZone,a=e.isFloating,i=e.timezoneUpdate,o=Object(B.useRef)(null);return Y.a.createElement(Y.a.Fragment,null,n?null:Y.a.createElement("div",{className:"row timezone"},Y.a.createElement("label",{htmlFor:"across-day-timezone"},t.formatMessage({id:"timezone"})),Y.a.createElement(Ou,{menuTitleClassName:"select-toggle",menuContainer:o.current,timeZone:r,isFloating:a,submitChangedData:i,onMenuPositionChange:function(e){var t=$("#js-timecard")[0],n=t.offsetWidth;e.style.width=n-20+"px",e.style.left=t.getBoundingClientRect().left-o.current.getBoundingClientRect().left+10+"px"}})),Y.a.createElement("div",{className:"choose-timezone-menu",ref:o}))}));function Tl(e){return(Tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function El(e,t){return(El=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_l(e);if(t){var a=_l(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Dl(this,n)}}function Dl(e,t){return!t||"object"!==Tl(t)&&"function"!=typeof t?jl(e):t}function jl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _l(e){return(_l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Cl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&El(e,t)}(o,e);var t,n,r,i=wl(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).settings=e.data.toJS(),n.defaultTimeDuration=n.getDefaultTimeDuration(),n.handleReminder(),n.initDate(),n.initEnd(),n.switchAllDay=n.switchAllDay.bind(jl(n)),n.listenDateRangeUpdate=n.listenDateRangeUpdate.bind(jl(n)),n.listenBeginTimeUpdate=n.listenBeginTimeUpdate.bind(jl(n)),n.listenEndTimeUpdate=n.listenEndTimeUpdate.bind(jl(n)),n.listenTimezoneUpdate=n.listenTimezoneUpdate.bind(jl(n)),n.state={isCrossDay:!1},n}return t=o,(n=[{key:"componentDidMount",value:function(){this.updateSettings(),this.settings.date!==this.settings.end.date&&this.setState({isCrossDay:!0})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props;e.data.get("timeZone")!==t.data.get("timeZone")&&(this.settings.timeZone=e.data.get("timeZone"))}},{key:"render",value:function(){var e=this.props,t=e.intl,n=e.isTimezoneDisabled;return Y.a.createElement("div",{className:"across-day"},Y.a.createElement(bl,{label:t.formatMessage({id:"pomo_start"}),rangeAt:"begin",settings:this.settings,dateRangeUpdate:this.listenDateRangeUpdate,timeUpdate:this.listenBeginTimeUpdate}),Y.a.createElement(bl,{label:t.formatMessage({id:"timecard_end"}),rangeAt:"end",settings:this.settings,dateRangeUpdate:this.listenDateRangeUpdate,timeUpdate:this.listenEndTimeUpdate,isCrossDay:this.state.isCrossDay}),Y.a.createElement(kl,{isAllDay:this.settings.isAllDay,switchAllDay:this.switchAllDay}),n?null:Y.a.createElement(Ol,{isAllDay:this.settings.isAllDay,timeZone:this.settings.timeZone,isFloating:this.settings.isFloating,timezoneUpdate:this.listenTimezoneUpdate}))}},{key:"getDefaultTimeDuration",value:function(){if(Qe.d()&&"1"===x.b("defaultTimeMode")){var e=x.b("defaultTimeDuration");return e>=1440&&(e-=1440),e}return 30}},{key:"handleReminder",value:function(){if(this.props.isFromSwitch&&this.settings.reminders&&this.settings.reminders.length>0){var e=[],t=[];this.settings.reminders.forEach((function(n){var r;r=n.trigger.split(";"),t.indexOf(r[0])>-1||(t.push(r[0]),e.push({id:n.id,trigger:r[0]}))})),this.settings.reminders=e,this.props.onSettingsUpdate&&this.props.onSettingsUpdate(this.settings)}}},{key:"initDate",value:function(){this.settings.date||(this.settings.date=this.context.getDateMoment().add(1,"hour").format("YYYY-MM-DD"))}},{key:"initEnd",value:function(){if(!this.settings.end){var e,t,n,r=this.props.isAcrossSameDate;this.settings.clock?(e=(n=this.combineDateAndClock(this.settings.date,this.settings.clock).add(r?0:30,"minutes")).format("YYYY-MM-DD"),t=this.formatClock(n),this.settings.end={clock:t,date:e}):this.props.isFromSwitch?(this.resetToLocalTimeZone(),this.setNextHour(!1)):r?(this.settings.isAllDay=!0,this.settings.end={date:this.settings.date}):(e=this.settings.date,this.settings.end={date:e},x.u()?(this.settings.isAllDay=!0,this.settings.end={date:this.context.getDateMoment(this.settings.date).add(this.defaultTimeDuration,"minutes").format("YYYY-MM-DD")}):(this.settings.isAllDay=!1,this.setNextHour(!0,!0)));var a=qs(this.settings);this.settings.startDate=a.startDate,this.settings.dueDate=a.dueDate}}},{key:"formatClock",value:function(e){if(this.settings.meridiem){var t=e.format("HH:mm").split(":");return t[0]=parseInt(t[0],10),t[1]+=t[0]>=12?" PM":" AM",t[0]=t[0]||12,t[0]=t[0]>12?this.formatUnit(t[0]%12):this.formatUnit(t[0]),t.join(":")}return e.format("HH:mm")}},{key:"formatStandardClock",value:function(e){var t=e.split(" ");if(2===t.length){var n=parseInt(t[0].split(":")[0],10),r=parseInt(t[0].split(":")[1],10),a=t[1];return"AM"===a&&12===n&&(n=0),"PM"===a&&12!==n&&(n+=12),this.formatUnit(n)+":"+this.formatUnit(r)}return e}},{key:"formatUnit",value:function(e){return e<10?"0"+e:e}},{key:"setNextHour",value:function(e,t){var n=this,r=this.settings,a=r.isFloating,i=r.logicTimeZone,o=Object(zs.j)(new Date,Js({isAllDay:!1,isFloating:a,timeZone:i})).startOf("hour").add(1,"hour"),c=e?this.defaultTimeDuration:30,s=o.clone().add(c,"minutes");if(this.settings.clock=this.formatClock(o),this.settings.isAllDay=!1,this.settings.end&&this.settings.end.date&&!this.settings.end.clock)this.settings.end.clock=this.formatClock(s);else{this.settings.end=this.settings.end||{};var u=s.clone().startOf("day").diff(o.clone().startOf("day"),"days");this.settings.end.date=u?this.context.getDateMoment(this.settings.date).add(u,"day").format("YYYY-MM-DD"):this.settings.date,this.settings.end.clock=this.formatClock(s)}if(t||!this.settings.reminders||!this.settings.reminders.length){this.settings.reminders=[];var l=x.g(!1);l&&l.forEach((function(e){n.settings.reminders.push({id:Object(Vs.a)(),trigger:e})})),this.props.onSettingsUpdate&&this.props.onSettingsUpdate(this.settings)}}},{key:"getStartDatePreview",value:function(){var e=this.settings.startDate||this.context.getDateMoment(),t=this.settings.isAllDay;return this.getDatePreview(e,t)}},{key:"getDueDatePreview",value:function(){var e,t=this.settings,n=t.timeZone,r=t.dueDate,a=t.isAllDay;return e=this.settings.dueDate?this.context.getDateMoment(Object(zs.f)(r,a,n)):this.context.getDateMoment(startDate).add(1,"d"),this.getDatePreview(e,a)}},{key:"getDatePreview",value:function(e){var t=this.props.intl;return e?this.context.formatSlashShortDate(e):t.formatMessage({id:"task_due_date"})}},{key:"switchAllDay",value:function(){this.settings.isAllDay?(this.resetToLocalTimeZone(),this.setNextHour(!1,!0),this.updateSettings()):(this.settings.clock=null,this.settings.end.clock=null,this.settings.reminders=x.a(!0),this.settings.isAllDay=!0,this.settings.isFloating=!1,this.resetToLocalTimeZone(),this.settings.reminders&&(this.settings.reminders=this.settings.reminders.toJS()),this.settings.end.date===this.settings.date&&(this.settings.end.date=this.settings.date),this.updateSettings())}},{key:"updateSettings",value:function(e,t){e=e||this.settings,this.settings.date=e.date,this.settings.end.date=e.end.date,this.settings.date===this.settings.end.date&&this.isStartAfterEnd()&&("begin"===t||"end"===t&&(this.settings.clock=this.settings.end.clock)),this.props.onSettingsUpdate(this.settings)}},{key:"isStartAfterEnd",value:function(){var e=this.combineDateAndClock(this.settings.date,this.settings.clock),t=this.combineDateAndClock(this.settings.end.date,this.settings.end.clock);return e.isAfter(t)}},{key:"combineDateAndClock",value:function(e,t){return this.context.getDateMoment(e+(this.settings.clock?" "+this.formatStandardClock(t):""))}},{key:"listenDateRangeUpdate",value:function(e){this.settings.date=e[0],this.settings.end.date=e[1];var t=this.settings,n=t.clock,r=t.end,a=this.context.getMeridiemDateTimeMoment(e[0],n,this.settings.meridiem),i=this.context.getMeridiemDateTimeMoment(e[1],r.clock,this.settings.meridiem);e[0]===e[1]&&a.isAfter(i)&&(a=i.clone().subtract(1,"hour"),this.settings.date=a.format("YYYY-MM-DD"),this.settings.clock=this.formatClock(a)),this.setState({isCrossDay:this.settings.date!==this.settings.end.date}),this.resetDisableTimeZoneData(),this.props.onSettingsUpdate(this.settings)}},{key:"listenBeginTimeUpdate",value:function(e){if(this.settings.clock!==e.clock){var t=Object(a.cloneDeep)(this.settings),n=Gs()(t.date+" "+t.clock),r=Gs()(t.end.date+" "+t.end.clock).diff(n,"minute");this.settings.clock=e.clock;var i=this.combineDateAndClock(this.settings.date,this.settings.clock),o=this.combineDateAndClock(this.settings.end.date,this.settings.end.clock);(o=i.add(r,"minute")).isAfter(i)||(this.settings.end.date=o.format("YYYY-MM-DD")),this.settings.end.clock=this.formatClock(o),this.setState({isCrossDay:this.settings.date!==this.settings.end.date}),this.resetDisableTimeZoneData(),this.updateSettings(this.settings,"begin")}}},{key:"listenEndTimeUpdate",value:function(e){if(this.settings.end.clock!==e.clock){this.settings.end.clock=e.clock;var t=this.combineDateAndClock(this.settings.date,this.settings.clock),n=this.combineDateAndClock(this.settings.end.date,this.settings.end.clock);e.offset&&(n=n.add(e.offset,"day"),this.settings.end.date=n.format("YYYY-MM-DD")),this.settings.date===this.settings.end.date&&t.isAfter(n)&&(t=n.clone(),this.settings.date=t.format("YYYY-MM-DD"),this.settings.clock=this.formatClock(t)),this.setState({isCrossDay:this.settings.date!==this.settings.end.date}),this.resetDisableTimeZoneData(),this.updateSettings(this.settings,"end")}}},{key:"listenTimezoneUpdate",value:function(e){"isFloating"in e&&(this.settings.isFloating=e.isFloating),"timeZone"in e&&(this.settings.logicTimeZone=e.timeZone),this.props.onSettingsUpdate(this.settings)}},{key:"resetDisableTimeZoneData",value:function(){x.b("isTimeZoneOptionEnabled")||(this.settings.logicTimeZone=zs.h,this.settings.isFloating=!1)}},{key:"resetToLocalTimeZone",value:function(){this.settings.logicTimeZone!==zs.h&&(this.settings.logicTimeZone=zs.h)}}])&&Sl(t.prototype,n),r&&Sl(t,r),o}(Y.a.Component);Cl.contextType=wu;var Il=Object(me.c)(Cl),Ml=n(420),Al=function(e){var t=e.quickSetOptions,n=Object(G.a)(),r=t.willRepeat,a=t.startDate,i=t.onSkipThisPeriod,o=t.setTime,c=function(){var e="YYYY-MM-DD",t=["today","tomorrow","nextweek","nextmonth"],n=[U.a.getStartOfDay(0,"days",e),U.a.getStartOfDay(1,"days",e),U.a.getStartOfDay(7,"days",e),U.a.getStartOfDay(1,"month",e)],i=["today","tomorrow","next_week","next_month"];r&&(t.push("nextperiod"),i.push("skip_this_period"),n.push("skip_this_period"));var o=a&&U.a.formatUtcToDateString(a);return t.map((function(e,t){return{time:n[t],text:i[t],isActive:o===n[t],iconName:"quick-"+e,extraIconClass:"i-mid i-o-36 i-h-o-54"}}))}();return Y.a.createElement("div",{className:"quick-set"},c.map((function(e){var t=K()("item avoid-event",{active:e.isActive});return Y.a.createElement("a",{className:t,key:e.iconName,onClick:function(t){"skip_this_period"===e.time?i():o(e.time)}},Y.a.createElement(Q.a,{name:e.iconName,className:e.extraIconClass}),Y.a.createElement("div",{className:"tooltip tip-transition line tip-center"},Y.a.createElement("span",null,n.formatMessage({id:e.text}))))})))};function xl(e){var t=e.data,n=e.isDateReadOnly,r=e.isTimeDisabled,a=e.isTimezoneDisabled,i=e.isTimezoneReadOnly,o=e.onUpdateStateData,c=e.onUpdateAnalyticData,s=e.onConfirmStateData,u=e.quickSetOptions,l=Object(B.useRef)(null),d=t.get("meridiem"),f=t.get("date"),p=t.get("clock"),h=t.get("isFloating"),m=t.get("timeZone"),g=t.get("logicTimeZone"),v=t.get("repeatFlag"),y=t.get("repeatFrom"),b=t.get("exDate"),k=b?b.toJS():[],O=Object(B.useContext)(wu);return Y.a.createElement("div",{className:"date-container"},u&&Y.a.createElement(Al,{quickSetOptions:u}),Y.a.createElement("div",{className:K()("calendar-container",{disabled:n})},Y.a.createElement(cl,{ref:l,dateInstance:O,showRepeat:!0,isDisplayDateInfo:!0,selected:f,repeatFlag:v,repeatFrom:y,exDate:k,timeZone:m,isTimeCardKalendae:!0,onChange:function(e){var t={date:e,exDate:[],repeatFlag:Object(Ml.c)(e?O.getDateMoment(e):null,v,y)};o(t)},onDoubleChange:function(e){s({date:e,exDate:[]})},onPrevUnit:function(e){"date"===e.selectMode&&c({isUsePrevMonthBtn:!0})},onNextUnit:function(e){"date"===e.selectMode&&c({isUseNextMonthBtn:!0})},onChangeSelectMode:function(e){"month"===e&&c({isOpenMonthSection:!0})}})),Y.a.createElement("div",{className:"divider"}),!r&&Y.a.createElement("div",{className:"reminder-time-container"},Y.a.createElement(_u,{isAbleDisplayTimezone:!a,isAbleSelectTimezone:!i,meridiem:d,clock:p,date:f,isFloating:h,timeZone:m,logicTimeZone:g,submitChangedData:function(e){var t={clock:e.clock,isAllDay:e.isAllDay,exDate:[]};!p&&e.clock&&(t.reminders=x.a().toJS()),e.clock||(t.reminders=[]),"date"in e&&(t.date=e.date),"isFloating"in e&&(t.isFloating=e.isFloating),"timeZone"in e&&(t.logicTimeZone=e.timeZone),o(t)},changeTimezone:function(e){var t={};"isFloating"in e&&(t.isFloating=e.isFloating),"timeZone"in e&&(t.logicTimeZone=e.timeZone),o(t)}})))}var Rl=function(e){var t=Object(B.useRef)(e);return Object(B.useEffect)((function(){t.current=e}),[e]),t.current};function Pl(e){var t=e.data,n=e.isTimeDisabled,r=e.isTimezoneReadOnly,a=e.isTimezoneDisabled,i=e.isSingleDateMode,o=e.isAcrossSameDate,c=e.onUpdateAnalyticData,s=e.onUpdateStateData,u=e.onConfirmStateData,l=e.quickSetOptions,d=Rl(i);return i?Y.a.createElement(xl,{data:t,isTimeDisabled:n,isTimezoneDisabled:a,isTimezoneReadOnly:r,onUpdateAnalyticData:c,onUpdateStateData:s,onConfirmStateData:u,quickSetOptions:l}):Y.a.createElement(Il,{data:t,isTimezoneDisabled:a,isAcrossSameDate:o,isFromSwitch:d&&!i,onSettingsUpdate:function(e){var t={clock:e.clock,date:e.date,end:e.end,isAllDay:e.isAllDay,reminders:e.reminders,isFloating:e.isFloating,logicTimeZone:e.logicTimeZone};s(t)}})}function Nl(e){return(Nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ll(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ul(e,t){return(Ul=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Yl(e);if(t){var a=Yl(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Hl(this,n)}}function Hl(e,t){return!t||"object"!==Nl(t)&&"function"!=typeof t?Bl(e):t}function Bl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yl(e){return(Yl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ul(e,t)}(i,e);var t,n,r,a=Fl(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).onVisibleChange=function(e){var n=t.props.onCancel;!1===e&&(t.setState({selected:t.defaultSelectedKeys}),n&&n({selectedKeys:t.defaultSelectedKeys})),t.setState({visible:e},(function(){t.props.onVisibleChange&&t.props.onVisibleChange(e)}))},t.saveSelected=function(e){var n=e.selectedKeys,r=t.props.onSelectChange;0===n.length||"none"===n[n.length-1]?n=["none"]:n.length>1&&"none"===n[0]&&(n=n.slice(1)),t.setState({selected:n}),r&&r({selectedKeys:n})},t.confirm=function(){var e=t.props.onConfirm;t.setState({visible:!1}),e&&e({selectedKeys:t.state.selected}),t.defaultSelectedKeys=A.b(t.state.selected)},t.cancel=function(){var e=t.props.onCancel;t.setState({visible:!1,selected:t.defaultSelectedKeys}),e&&e({selectedKeys:t.defaultSelectedKeys})},t.state={visible:e.defaultVisible,selected:e.selectedKeys},t.defaultSelectedKeys=A.b(e.selectedKeys),t.confirm=t.confirm.bind(Bl(t)),t.cancel=t.cancel.bind(Bl(t)),t.onVisibleChange=t.onVisibleChange.bind(Bl(t)),t.saveSelected=t.saveSelected.bind(Bl(t)),t.onShow=t.onShow.bind(Bl(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){En.l($(e.refs.wrapper))}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.defaultSelected,n=e.selectedKeys;void 0!==t&&this.setState({selected:t}),n!==this.state.selected&&this.setState({selected:n})}},{key:"componentWillUnmount",value:function(){En.r($(this.refs.wrapper))}},{key:"resetDefaultSelectKeys",value:function(e){this.defaultSelectedKeys=A.b(e)}},{key:"hideMenu",value:function(){this.setState({visible:!1})}},{key:"showMenu",value:function(){this.setState({visible:!0})}},{key:"onShow",value:function(e){var t=$(e).find(".antiscroll-wrap");En.l(t),this.props.onShow&&this.props.onShow(e)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.selectMenu,r=e.selectListHeader,a=e.confirmText,i=e.cancelText,o=e.className,c=e.selectedKeys,s=e.minMenuWidthMatchTrigger,u=e.placement,l=e.autoAdjustOverflow,d=e.intl,f=e.confirmDisabled,p=e.emptyContent,h=Y.a.createElement("div",{className:"select-list"},r,Y.a.createElement("div",{className:"list-wrapper antiscroll-wrap",ref:"wrapper"},n?Y.a.createElement(Xe,{className:"antiscroll-inner",multiple:!0,onSelect:this.saveSelected,onDeselect:this.saveSelected,selectedKeys:c,prefixCls:"option"},n):p),Y.a.createElement("div",{className:"control"},Y.a.createElement("div",{className:"btns"},Y.a.createElement(Ya.a,{type:"cancel",size:"tiny",onClick:this.cancel},i||d.formatMessage({id:"cancel"})),Y.a.createElement(Ya.a,{size:"tiny",onClick:this.confirm,disabled:f,className:"btn-confirm"},a||d.formatMessage({id:"ok"})))));return Y.a.createElement(Re,{onVisibleChange:this.onVisibleChange,visible:this.state.visible,menu:h,menuClassName:K()("multi-select-menu",o),minMenuWidthMatchTrigger:s,placement:u,autoAdjustOverflow:l,onShow:this.onShow,getMenuContainer:this.props.getMenuContainer,boult:this.props.isBoult},t)}}])&&Ll(t.prototype,n),r&&Ll(t,r),i}(Y.a.Component);Wl.defaultProps={defaultVisible:!1,selectedKeys:[],minMenuWidthMatchTrigger:!1,placement:"bottomCenter",onShow:function(){}};var Kl=Object(me.c)(Wl,{forwardRef:!0});function Gl(e){return(Gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zl(e,t){return(zl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$l(e);if(t){var a=$l(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ql(this,n)}}function ql(e,t){return!t||"object"!==Gl(t)&&"function"!=typeof t?Jl(e):t}function Jl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $l(e){return($l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zl(e,t)}(i,e);var t,n,r,a=Zl(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).rootRef=void 0,t.state={selectedKeys:e.selectedKeys},t.onConfirm=t.onConfirm.bind(Jl(t)),t.onCancel=t.onCancel.bind(Jl(t)),t.onSelectChange=t.onSelectChange.bind(Jl(t)),t.onVisibleChange=t.onVisibleChange.bind(Jl(t)),t.reSetState=t.reSetState.bind(Jl(t)),t.rootRef=Y.a.createRef(),t}return t=i,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({selectedKeys:e.selectedKeys})}},{key:"onConfirm",value:function(e){var t=e.selectedKeys,n=this.props,r=n.map,a=n.onConfirm,i=A.b(t).sort((function(e,t){return r[e].index-r[t].index}));this.setState({selectedKeys:i}),a&&a()}},{key:"onCancel",value:function(e){var t=e.selectedKeys,n=this.props,r=n.map,a=n.onCancel,i=A.b(t).sort((function(e,t){return r[e].index-r[t].index}));this.setState({selectedKeys:i}),a&&a(t)}},{key:"onSelectChange",value:function(e){var t=e.selectedKeys,n=this.props,r=n.onBeforeSelect,a=n.onSelectChange;r&&r(t)||(this.setState({selectedKeys:t}),a&&a(t))}},{key:"onVisibleChange",value:function(e){var t=this.props.onVisibleChange;t&&t(e)}},{key:"getTitle",value:function(){var e=this.state.selectedKeys,t=this.props,n=t.map,r=t.defaultTitle;return e.length&&"none"!==e[0]?e.map((function(e){var t;return null===(t=n[e])||void 0===t?void 0:t.value})).join(", "):r}},{key:"fixSelecedKeysByParent",value:function(e){this.setState({selectedKeys:e})}},{key:"reSetState",value:function(e){this.setState({selectedKeys:e})}},{key:"hideMenu",value:function(){this.rootRef.current.hideMenu()}},{key:"resetDefaultSelectKeys",value:function(e){this.rootRef.current&&this.rootRef.current.resetDefaultSelectKeys(e)}},{key:"render",value:function(){var e=this.props,t=e.menu,n=e.className,r=e.placement,a=e.onShow,i=e.onHide,o=e.showArrow,c=this.state.selectedKeys,s=this.getTitle();return Y.a.createElement(Kl,{ref:this.rootRef,selectMenu:t,className:n,placement:r,onShow:a,onHide:i,onConfirm:this.onConfirm,onCancel:this.onCancel,selectedKeys:c,onSelectChange:this.onSelectChange,onVisibleChange:this.onVisibleChange},Y.a.createElement("div",{className:"multi-select-toggle select-menu"},Y.a.createElement("div",{className:"select-title"},s),o&&Y.a.createElement("div",{className:"select-arrow"},"")))}}])&&Vl(t.prototype,n),r&&Vl(t,r),i}(Y.a.Component);Xl.defaultProps={selectedKeys:[],onConfirm:function(){},menu:{},onShow:function(){},showArrow:!0};var Ql=Xl,ed=n(372),td=n(400),nd=n(387);function rd(e){return(rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ad(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function id(e,t){return(id=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function od(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ud(e);if(t){var a=ud(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return cd(this,n)}}function cd(e,t){return!t||"object"!==rd(t)&&"function"!=typeof t?sd(e):t}function sd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ud(e){return(ud=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ld=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&id(e,t)}(o,e);var t,n,a,i=od(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).saveTrigger=function(e){t.trigger=e},t.state={selectedKeys:e.selectedKeys||[e.noneKey]},t.onSelect=t.onSelect.bind(sd(t)),t.onClick=t.onClick.bind(sd(t)),t.nodePosHandleAfterVisible=t.nodePosHandleAfterVisible.bind(sd(t)),t.rootRef=Y.a.createRef(),t.onShow=t.onShow.bind(sd(t)),t}return t=o,(n=[{key:"render",value:function(){var e=this.props,t=e.menu,n=e.menuClassName,r=e.getMenuContainer,a=e.isReadOnly,i=e.minMenuWidthMatchTrigger,o=e.withAntiscroll?Y.a.createElement("div",{className:"list-wrapper antiscroll-wrap",ref:"wrapper"},Y.a.createElement(Xe,{className:"antiscroll-inner",selectedKeys:this.state.selectedKeys,onSelect:this.onSelect,onClick:this.onClick,prefixCls:"dropdown-menu-menu"},t)):Y.a.createElement(Xe,{selectedKeys:this.state.selectedKeys,onSelect:this.onSelect,onClick:this.onClick},t);return a?this.getSelectToggle():Y.a.createElement(Re,{ref:this.rootRef,menu:o,menuClassName:n,minMenuWidthMatchTrigger:i,getMenuContainer:r,nodePosHandleAfterVisible:this.nodePosHandleAfterVisible,onShow:this.onShow},this.getSelectToggle())}},{key:"componentDidMount",value:function(){if(this.props.withAntiscroll){var e=this;setTimeout((function(){En.l($(e.refs.wrapper))}))}}},{key:"componentWillUnmount",value:function(){this.props.withAntiscroll&&En.r($(this.refs.wrapper))}},{key:"onShow",value:function(e){if(this.props.withAntiscroll){var t=$(e).find(".antiscroll-wrap");En.l(t)}this.props.onShow&&this.props.onShow(e)}},{key:"getSelectToggle",value:function(){var e=this.props,t=e.showArrow,n=e.children,r=e.isReadOnly,a=e.titleClassName,i=n||Y.a.createElement("div",{className:a||"multi-select-toggle select-menu"},Y.a.createElement("div",{className:K()("select-title",{readonly:r})},this.getTitle()),!r&&t&&Y.a.createElement("div",{className:"select-arrow"},"")),o={ref:this.saveTrigger};return Y.a.cloneElement(i,o)}},{key:"nodePosHandleAfterVisible",value:function(e,t){this.props.nodePosHandleAfterVisible&&this.props.nodePosHandleAfterVisible(e,t)}},{key:"componentWillReceiveProps",value:function(e){var t=e.selectedKeys;t&&!Object(r.is)(this.state.selectedKeys,t)&&this.setState({selectedKeys:t})}},{key:"getTitle",value:function(){var e,t=this.props,n=t.noneKey,r=t.defaultTitle,a=t.map,i=this.state.selectedKeys[0];return n&&r&&i===n?r:null!==(e=a[i])&&void 0!==e?e:a[n]}},{key:"onSelect",value:function(e){var t=e.selectedKeys,n=this.props.onSelect;this.setState({selectedKeys:t}),n&&n({selectedKeys:t})}},{key:"onClick",value:function(e){var t=this.props.onClick;t&&t(e)}},{key:"hideMenu",value:function(){this.rootRef.current.setState({visible:!1})}},{key:"showMenu",value:function(){this.rootRef.current.setState({visible:!0})}}])&&ad(t.prototype,n),a&&ad(t,a),o}(Y.a.Component);ld.defaultProps={showArrow:!0,noneKey:"none",minMenuWidthMatchTrigger:!0,withAntiscroll:!1};var dd=ld;function fd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hd=Object(me.c)((function(e){var t,n,r,a,i=e.intl,o=e.onUpdateReminderKey,c=e.date,s=e.meridiem,u=e.isHideTip,l=fd(Object(B.useState)("D"),2),d=l[0],f=l[1],p=fd(Object(B.useState)(1),2),h=p[0],m=p[1],g=fd(Object(B.useState)("09:00"),2),y=g[0],b=g[1],k=Object(B.useContext)(wu),O=Object(B.useRef)(null);return Object(B.useEffect)((function(){o(function(){var e="",t=1,n=k.getDateMoment(c).hours(0).minutes(0).seconds(0),r=k.getDateMoment(c).hours(0).minutes(0).seconds(0);if(h>0){var a="D"===d?parseInt(h,10):7*parseInt(h,10);r.subtract(a,"days"),t=-1,e+="-"}var i=k.getMeridiemDateTimeMoment("",y,s);r.hours(i.hours()).minutes(i.minutes());var o=0,u=0,l=0;return t>0?(o=r.diff(n,"days"),u=r.diff(n.add(o,"days"),"hours"),l=r.diff(n.add(u,"hours"),"minutes")):(o=n.diff(r,"days"),u=n.diff(r.add(o,"days"),"hours"),l=n.diff(r.add(u,"hours"),"minutes")),"".concat(e,"P").concat(o,"DT").concat(u,"H").concat(l,"M0S")}())}),[c,d,h,y,o,k,s]),Y.a.createElement("div",{className:"r-custom-container all-day clearfix"},(t=[{key:"D",text:i.formatMessage({id:"ahead_by_days"})},{key:"W",text:i.formatMessage({id:"ahead_by_weeks"})}],n={},r=[],t.forEach((function(e){n[e.key]=e.text,r.push(Y.a.createElement(Ze,{key:e.key},Y.a.createElement("a",null,e.text)))})),a={menu:r,map:n},Y.a.createElement("div",{className:"row r-ahead-type"},Y.a.createElement(dd,{menu:a.menu,map:a.map,selectedKeys:[d],menuClassName:"timecard-element",onSelect:function(e){var t=e.selectedKeys;d!==t[0]&&(f(t[0]),m(1),b("09:00"))},getMenuContainer:function(e){return O.current}}))),Y.a.createElement("div",{className:"row"},Y.a.createElement("span",null,i.formatMessage({id:"D"===d?"reminder_advance_day":"reminder_advance_week"})),Y.a.createElement("input",{type:"text",className:"r-custom-num input-sml text-center",value:h,onChange:function(e){var t=e.currentTarget,n=parseInt(t.value,10),r="D"===d?60:12;n>=0&&n<=r?n!==h&&m(n):m(n>r?r:0)},onClick:function(e){$(e.currentTarget).focus().select()}})),Y.a.createElement("div",{className:"row"},Y.a.createElement("span",null,i.formatMessage({id:"reminder_time_at"})),Y.a.createElement(su,{placeholder:i.formatMessage({id:"never_remind"}),showMeridiem:s,extraClassName:"r-custom-num input-sml text-center",defaultTime:x.j(y),timeFormat:" ",onChangeTime:function(e){var t=e.value,n=x.i(t);y!==n&&b(n)}})),function(){if(u)return null;var e=k.getMeridiemDateTimeMoment("",y,s),t=(c?k.getDateMoment(c):k.getDateMoment()).subtract("D"===d?h:7*h,"day").format("ll"),n=e.format(s?v.c()?"A hh:mm":"hh:mm A":"HH:mm");return Y.a.createElement("div",{className:"ahead-tip"},i.formatMessage({id:"allday_reminder_tip"},{s1:t,s2:n}))}(),Y.a.createElement("div",{ref:O}))}));function md(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vd=Object(me.c)((function(e){var t=e.intl,n=e.onUpdateReminderKey,r=e.date,a=e.clock,i=e.meridiem,o=e.isHideTip,c=md(Object(B.useState)(0),2),s=c[0],u=c[1],l=md(Object(B.useState)(0),2),d=l[0],f=l[1],p=md(Object(B.useState)(15),2),h=p[0],m=p[1],g=Object(B.useContext)(wu);Object(B.useEffect)((function(){var e;n(0===(e=24*s*60+60*d+h)?"PT0S":"-PT"+e+"M")}),[s,d,h,n]);var y=function(e){e.currentTarget.select()};return Y.a.createElement("div",{className:"r-custom-container take-time clearfix"},Y.a.createElement("div",{className:"row days-row"},Y.a.createElement("input",{type:"text",className:"r-custom-num input-sml text-center",value:s,onChange:function(e){var t=e.currentTarget,n=parseInt(t.value||0,10);isNaN(n)||(n>60?n=60:n<0&&(n=0),u(n))},onClick:y}),Y.a.createElement("span",null,t.formatMessage({id:s>1?"days":"day"}))),Y.a.createElement("div",{className:"row hrs-mins-row"},Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("input",{type:"text",className:"r-custom-num input-sml text-center",value:d,onChange:function(e){var t=e.currentTarget,n=parseInt(t.value||0,10);isNaN(n)||(n>23?n=23:n<0&&(n=0),f(n))},onClick:y}),Y.a.createElement("span",null,t.formatMessage({id:d>1?"hours":"hour"}))),Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("input",{type:"text",className:"r-custom-num input-sml text-center",value:h,onChange:function(e){var t=e.currentTarget,n=parseInt(t.value||0,10);isNaN(n)||(n>59?n=59:n<0&&(n=0),m(n))},onClick:y}),Y.a.createElement("span",null,t.formatMessage({id:h>1?"minutes":"minute"})))),Y.a.createElement("div",{className:"time-setting-tip"},function(){var e=0!==s?t.formatMessage({id:s>1?"time_days":"time_day"},{s:s}):"",n=0!==d?t.formatMessage({id:d>1?"time_hrs":"time_hr"},{s:d}):"",r=0!==h?t.formatMessage({id:h>1?"time_mins":"time_min"},{s:h}):"";R.o||(e+=" ",n+=" ");var a=e+n+r;return""===a?t.formatMessage({id:"on_time"}):t.formatMessage({id:"time_before"},{s:a})}()),function(){if(o)return null;var e=g.getMeridiemDateTimeMoment(r,a,i).subtract(s,"day").subtract(d,"hour").subtract(h,"minute"),n=e.format(i?v.c()?"A hh:mm":"hh:mm A":"HH:mm"),c=e.format("ll");return Y.a.createElement("div",{className:"ahead-tip"},t.formatMessage({id:"allday_reminder_tip"},{s1:c,s2:n}))}())})),yd=n(331);function bd(){return(bd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function kd(e){return function(e){if(Array.isArray(e))return Sd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Td(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Od(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||Td(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Td(e,t){if(e){if("string"==typeof e)return Sd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sd(e,t):void 0}}function Sd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ed(e){var t=e.intl,n=e.isAllDay,r=e.date,a=e.clock,i=e.meridiem,o=e.reminderKeys,c=e.setIsCustomSettingShown,s=e.defaultSelectOptions,u=e.extractOptions,l=e.onConfirm,d=Object(B.useRef)(null),f=Od(Object(B.useState)(""),2),p=f[0],h=f[1],m=Object(B.useContext)(wu);Object(B.useEffect)((function(){return $("body").on("click.timecardReminderCustomView",(function(e){$(e.target).closest(d.current).length||c(!1)})),function(){$("body").off("click.timecardReminderCustomView")}}),[c]),Object(B.useEffect)((function(){var e=d.current,t=e.getBoundingClientRect().top,n=e.offsetTop,r=t+e.offsetHeight-window.innerHeight;r>0&&(n-=r),$(e).css({top:n+"px"})}),[]),Object(z.a)("timeReminderCustomView",(function(){c(!1)}));return Y.a.createElement("div",{className:"r-select-custom r-select shadow pop-bg",ref:d},n?Y.a.createElement(hd,bd({date:r,meridiem:i,onUpdateReminderKey:h},u)):Y.a.createElement(vd,bd({date:r,clock:a,meridiem:i,onUpdateReminderKey:h},u)),Y.a.createElement("div",{className:"confirm-container btns"},Y.a.createElement("button",{id:"custom-cancel",className:"btn-tny btn-cancel",onClick:function(){c(!1)}},t.formatMessage({id:"cancel"})),Y.a.createElement("button",{id:"custon-confirm",className:"btn-tny btn-primary",onClick:function(){if(To.a.reminderNumber<=o.length)c(!1);else{if(t=p,r=!0,o.forEach((function(e){if("none"!==e){var n=m.formatYMD(),a=ed.h(ie.z+e,n),i=ed.h(ie.z+t,n);a.isSame(i)&&(r=!1)}})),r){!function(e){if(!s.includes(e)){var t=n?"recentDateReminderSet":"recentTimeReminderSet",r=y.a[t],a=[e].concat(kd(r.filter((function(t){return t!==e}))));a.length>7&&(a=a.slice(0,7)),y.a[t]=a,Object(yd.f)(ie.K[t],JSON.stringify(y.a[t]))}}(p);var e=o.concat([p]).sort(ed.d);l(e)}var t,r;c(!1)}}},t.formatMessage({id:"ok"}))))}Ed.defaultProps={extractOptions:{}};var wd=Object(me.c)(Ed);function Dd(){return(Dd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function jd(e){return function(e){if(Array.isArray(e))return Id(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Cd(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||Cd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cd(e,t){if(e){if("string"==typeof e)return Id(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Id(e,t):void 0}}function Id(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Md(e){var t=e.intl,n=e.date,r=e.clock,a=e.meridiem,i=e.isAllDay,o=e.reminderKeys,c=e.defaultSelectOptions,s=e.menuExtractOptions,u=e.customReminderExtract,l=e.onConfirm,d=Object(B.useRef)(null),f=Object(B.useRef)(null),p=_d(Object(B.useState)(o),2),h=p[0],m=p[1],g=_d(Object(B.useState)(null),2),b=g[0],k=g[1],O=_d(Object(B.useState)(!1),2),T=O[0],S=O[1];o!==b&&(b&&(m(o),f.current.resetDefaultSelectKeys(o)),k(o));var E=Object(B.useCallback)((function(e){if(e){var t=e.offsetHeight,n=d.current.getBoundingClientRect().top+d.current.offsetHeight-65;n+t>window.innerHeight&&(n=window.innerHeight-t),e.style.top=n+"px"}S(!1)}),[S]),w=Object(B.useMemo)((function(){var e,r,a,s;return e=function(){var e=jd(new Set([].concat(jd(c),jd(o||[])))).filter((function(e){return e&&"undefined"!==e&&"none"!==e})).sort(ed.d),t=i?"recentDateReminderSet":"recentTimeReminderSet",n=y.a[t].filter((function(t){return!e.includes(t)&&"none"!==t})).slice(0,2).sort(ed.d);return n.length?[].concat(jd(e),["recents"],jd(n),["custom"]):[].concat(jd(e),["custom"])}(),r=function(){var e=t.formatMessage;if(i){var n=e({id:"bracket"},{s1:x.k(ie.f)});return{P0DT9H0M0S:"".concat(e({id:"due_date_remind_time"})).concat(n),"-P0DT15H0M0S":"".concat(e({id:"days_before"},{s1:1})).concat(n),"-P1DT15H0M0S":"".concat(e({id:"days_before"},{s1:2})).concat(n),"-P2DT15H0M0S":"".concat(e({id:"days_before"},{s1:3})).concat(n),"-P6DT15H0M0S":"".concat(e({id:"week_before"},{s1:1})).concat(n),custom:e({id:"custom"})}}return{PT0S:e({id:"on_time"}),"-PT5M":e({id:"minutes_before"},{s1:5}),"-PT30M":e({id:"minutes_before"},{s1:30}),"-PT60M":e({id:"hour_before"},{s1:1}),"-PT1440M":e({id:"day_before"},{s1:1}),custom:e({id:"custom"})}}(),a=[],s={},e.forEach((function(e,t){if("recents"===e)a.push(Y.a.createElement(qe,{key:e+"-divider"})),a.push(Y.a.createElement($e,{id:"reminder_recents",key:e+"-title",className:"text-secondary text-tny"}));else{var o=r[e]||function(e){var t=e.isAllDay,n=e.trigger,r=e.startDate,a="";if(t){var i=U.a.prefMoment(r),o=ed.h(n,i.format("YYYY-MM-DD")),c=i.hours(0).minutes(0).seconds(0).diff(o,"days");o=o.format("HH:mm"),0===c&&1/c<0||0===c&&1/c>0&&"00:00"===o?c=0:c+=1,a=0===c?v.a("due_date_remind_time"):c%7==0?1===(c=parseInt(c/7,10))?v.a("week_before",{s1:c}):v.a("weeks_before",{s1:c}):1===c?v.a("day_before",{s1:c}):v.a("days_before",{s1:c}),a+=v.a("bracket",{s1:x.k(o)})}else{var s=n.match(td.a.trigger),u=parseInt(s[4]||0,10),l=parseInt(s[5]||0,10),d=parseInt(s[7]||0,10),f=parseInt(s[8]||0,10);if(d+=parseInt(f/60,10),f%=60,l=7*u+l+parseInt(d/24,10),d%=24,0!==l&&l+d+f===l)a=v.a(l>1?"days_before":"day_before",{s1:l});else if(0!==d&&l+d+f===d)a=v.a(d>1?"hours_before":"hour_before",{s1:d});else if(0!==f&&l+d+f===f)a=v.a(f>1?"minutes_before":"minute_before",{s1:f});else{var p,h=0!==l?v.a(l>1?"time_days":"time_day",{s:l}):"";(p=h.slice(-1).charCodeAt())<123&&p>96&&(h+=" ");var m=0!==d?v.a(d>1?"time_hrs":"time_hr",{s:d}):"";(p=m.slice(-1).charCodeAt())<123&&p>96&&(m+=" ");var g=h+m+(0!==f?v.a(f>1?"time_mins":"time_min",{s:f}):"");a=""===g?v.a("on_time"):v.a("time_before",{s:g})}}return a}({isAllDay:i,startDate:n||void 0,trigger:"".concat(ie.z).concat(e)});s[e]={value:o,index:t},a.push(Y.a.createElement(Ze,{multi:!0,key:e},o))}})),{menu:a,map:s}}),[n,c,t,i,o]);return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("div",{className:"r-select-smart r-select",ref:d},Y.a.createElement(Ql,Dd({ref:f,className:"timecard-element reminder-ahead-select advance",showArrow:!1,defaultTitle:Y.a.createElement(Y.a.Fragment,null,Y.a.createElement(Q.a,{name:"timecard_remind"}),Y.a.createElement("span",null,t.formatMessage({id:"reminder_time"}))),menu:w.menu,map:w.map,onShow:E,selectedKeys:h,onBeforeSelect:function(e){return e.length>=h.length&&To.a.reminderNumber<=h.length?(nd.a({type:ie.c.reminder}),!0):"custom"===e[e.length-1]?(S(!0),f.current.hideMenu(),!0):void 0},onSelectChange:function(e){var t=jd(e).sort(ed.d);m(t)},onConfirm:function(){l(h)}},s))),T?Y.a.createElement(wd,{menuExtractOptions:s,extractOptions:u,reminderKeys:h,isAllDay:i,date:n,clock:r,meridiem:a,defaultSelectOptions:c,setIsCustomSettingShown:S,onConfirm:l}):null)}Md.defaultProps={menuExtractOptions:{}};var Ad=Object(me.c)(Md);function xd(){return(xd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Rd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||Nd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pd(e){return function(e){if(Array.isArray(e))return Ld(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Nd(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nd(e,t){if(e){if("string"==typeof e)return Ld(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ld(e,t):void 0}}function Ld(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Fd.defaultProps={componentExtract:{},selectMenuExtract:{},customReminderExtract:{}};var Ud=function(e){if(!e||!e.size)return["none"];var t=/(-PT0M|-PT0H|-P0D|-P0W)$/;return e.map((function(e){var n=e.get("trigger");return n.match(t)?"PT0S":n.slice(8)})).reduce((function(e,t){return e.includes(t)?e:[].concat(Pd(e),[t])}),[]).sort(ed.d)};function Fd(e){var t=e.data,n=e.selectMenuExtract,r=e.componentExtract,a=e.customReminderExtract,i=e.onUpdateStateData,o=t.get("reminders"),c=t.get("isAllDay"),s=t.get("date"),u=t.get("clock"),l=t.get("meridiem"),d=Rd(Object(B.useState)((function(){return Ud(o)})),2),f=d[0],p=d[1],h=Object(B.useMemo)((function(){return function(e){return e?["P0DT9H0M0S","-P0DT15H0M0S","-P1DT15H0M0S","-P2DT15H0M0S","-P6DT15H0M0S"]:["PT0S","-PT5M","-PT30M","-PT60M","-PT1440M"]}(c)}),[c]);Object(B.useEffect)((function(){p(Ud(o))}),[o]);var m=Object(B.useCallback)((function(e){var t=new Set(e||[]),n=o.reduce((function(e,t){return e[t.get("trigger")]=t.toJS(),e}),{}),r=[];t.forEach((function(e){var t="".concat(ie.z).concat(e),a=n[t];a?r.push(a):"none"!==e&&r.push({id:Object(Vs.a)(),trigger:t})})),i({reminders:r})}),[o,i]),g=Object(B.useCallback)((function(){i({reminders:[]})}),[i]);return Y.a.createElement("div",xd({className:K()("reminder-ahead-section line",{"has-reminder":o.size})},r),Y.a.createElement(Ad,{menuExtractOptions:n,customReminderExtract:a,reminderKeys:f,isAllDay:c,date:s,clock:u,meridiem:l,defaultSelectOptions:h,onConfirm:m}),Y.a.createElement("span",{className:"delete fake-del",onClick:g}))}var Hd=Object(me.c)((function(e){var t,n,r,a,i,o=e.intl,c=e.repeatKind,s=e.repeatPreviewText,u=e.isSubscribeTask,l=e.setIsCustomSettingShown,d=e.submitChangedData,f=Object(B.useRef)(null),p=function(e){var t=e.selectedKeys[0];if("advanced"!==t){var n={repeatFrom:ie.A.defaultVal,kind:t};"ebbinghaus_curve"===t&&(n.repeatFrom=ie.A.dueDate),c!==t&&Object.assign(n,{until:null}),d(n)}},h=(t=[],n={},r=[c],a=[{key:"daily",value:o.formatMessage({id:"daily"})},{key:"weekly",value:o.formatMessage({id:"weekly"})},{key:"monthly",value:o.formatMessage({id:"monthly"})},{key:"yearly",value:o.formatMessage({id:"yearly"})},{key:"advanced",value:o.formatMessage({id:"custom"})}],u||(!R.o&&!R.k||!x.h()&&"lunar_year"!==c||a.splice(-1,0,{key:"lunar_yearly",value:o.formatMessage({id:"lunar_yearly"})}),R.k&&(a.splice(-1,0,{key:"weekdaily",value:o.formatMessage({id:"weekdaily"})}),a.splice(-1,0,{key:"ebbinghaus_curve",value:o.formatMessage({id:"ebbinghaus_curve"})}))),a.forEach((function(e){n[e.key]=e.value,t.push(Y.a.createElement(Ze,{key:e.key},Y.a.createElement("a",null,e.value)))})),{menu:t,map:n,selectedKeys:r});return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement(dd,{ref:f,menu:h.menu,map:h.map,selectedKeys:h.selectedKeys,showArrow:!1,menuClassName:"timecard-element freq-element",onSelect:p,onClick:function(e){"advanced"===e.key&&(f.current.hideMenu(),l(!0))},defaultTitle:o.formatMessage({id:"set_repeat"}),noneKey:"no"},Y.a.createElement("div",{className:"select-title need-highlight"},(i=h.map,"no"===c?Y.a.createElement(Y.a.Fragment,null,Y.a.createElement(Q.a,{name:"timecard_repeat"}),Y.a.createElement("span",null,o.formatMessage({id:"repeat_label"}))):"lunar_yearly"===c||"advanced"===c?s:i[c]))),Y.a.createElement("span",{className:"delete fake-del",onClick:function(){return p({selectedKeys:["no"]})}}))}));function Bd(e){return(Bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yd(Object(n),!0).forEach((function(t){Kd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gd(){return(Gd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Vd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zd(e,t){return(zd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$d(e);if(t){var a=$d(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return qd(this,n)}}function qd(e,t){return!t||"object"!==Bd(t)&&"function"!=typeof t?Jd(e):t}function Jd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $d(e){return($d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zd(e,t)}(o,e);var t,n,r,a=Zd(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=a.call(this,e,t)).tparam=n.defaultOptions(n.props.tparam),n.state={repeatFrom:n.tparam.repeatFrom,digit:n.tparam.digit,freq:n.tparam.freq,onMonth:n.tparam.onMonth,mweekdays:{n:n.tparam.mweekdays.n?n.tparam.mweekdays.n+"":"1",weekday:n.tparam.mweekdays.weekday||n.tparam.weekdays[0]||"SU"},whichMonth:n.tparam.whichMonth+"",monthdays:n.tparam.monthdays,mworkday:n.tparam.mworkday,until:n.tparam.until,showCalendar:!1,dateMoment:n.tparam.dateMoment,weekStart:n.tparam.weekStart,weekdays:n.tparam.weekdays,kind:n.tparam.kind,count:n.tparam.count,tt_skip:n.tparam.tt_skip,oldFreq:n.tparam.oldFreq,isSkipWeekendsDisabled:n.initIsSkipWeekendsDisabled(n.tparam),isSkipHolidayDisabled:n.initIsSkipHolidayDisabled(n.tparam)},n.oldOpt=A.b(n.props.tparam),n.oldOpt.dateMoment=n.props.tparam.dateMoment.clone(),n.oldOpt.until=n.props.tparam.until,n.props.onSettingsUpdate(n.tparam),n.changeRepeatType=n.changeRepeatType.bind(Jd(n)),n.keyDownRepeatDigit=n.keyDownRepeatDigit.bind(Jd(n)),n.changeRepeatDigit=n.changeRepeatDigit.bind(Jd(n)),n.changeRepeatFreq=n.changeRepeatFreq.bind(Jd(n)),n.changeOnMonth=n.changeOnMonth.bind(Jd(n)),n.onCancel=n.onCancel.bind(Jd(n)),n.onConfirm=n.onConfirm.bind(Jd(n)),n.changeMonthWeekDigits=n.changeMonthWeekDigits.bind(Jd(n)),n.changeMonthWeekDays=n.changeMonthWeekDays.bind(Jd(n)),n.changeRepeatMonthWorkdays=n.changeRepeatMonthWorkdays.bind(Jd(n)),n.changeRepeatYearMonth=n.changeRepeatYearMonth.bind(Jd(n)),n.changeSkipWeekend=n.changeSkipWeekend.bind(Jd(n)),n.changeSkipHoliday=n.changeSkipHoliday.bind(Jd(n)),n.rootRef=Y.a.createRef(),n.escListenId=i.a.uniqueId(),n}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;this.fixRootPosition(),$("body").on("click.timecardRepeatAdvance",(function(t){$(t.target).closest(e.rootRef.current).length||$(t.target).closest(".timecard-repeat-element").length||e.onCancel()})),f.b.subscribe(this.escListenId,"timeRepeatFreqCustomView",this.onCancel)}},{key:"componentWillUnmount",value:function(){$("body").off("click.timecardRepeatAdvance"),f.b.unSubscribe(this.escListenId)}},{key:"componentDidUpdate",value:function(){this.fixRootPosition()}},{key:"render",value:function(){var e=this.props,t=e.intl,n=e.isSubscribeTask,r=this.getRepeatTypeMenuOptions(),a=this.getRepeatFreqMenuOptions(),i=R.k,o=this.isTTSkipChecked(),c=this.state.isSkipWeekendsDisabled,s=this.state.isSkipHolidayDisabled;return Y.a.createElement("div",{ref:this.rootRef,className:"tc-repeat-advance shadow pop-bg"},Y.a.createElement("div",{className:"repeat-advance-inner"},Y.a.createElement("div",{className:"repeat-first-section"},Y.a.createElement("div",{className:"repeat-type line"},Y.a.createElement("div",{className:"select-menu"},Y.a.createElement(dd,Gd({},r,{isReadOnly:n,menuClassName:"timecard-element timecard-repeat-element",onSelect:this.changeRepeatType})))),Y.a.createElement("div",{className:"repeat-freq line clearfix"},Y.a.createElement("div",{className:"half-menu repeat-interval left"},Y.a.createElement("span",{className:"title-every"},t.formatMessage({id:"every"})),Y.a.createElement("input",{ref:"freqInput",type:"text",id:"repeat-advance-input",className:"text-right repeat-digit input-sml",value:this.state.digit,onKeyDown:this.keyDownRepeatDigit,onChange:this.changeRepeatDigit})),Y.a.createElement("div",{className:"half-menu repeat-frequency right"},Y.a.createElement("div",{id:"repeat-frequency"},Y.a.createElement("div",{className:"select-menu"},Y.a.createElement(dd,Gd({},a,{menuClassName:"timecard-element timecard-repeat-element",onSelect:this.changeRepeatFreq}))))))),this.state.repeatFrom===ie.A.dueDate&&Y.a.createElement("div",{className:"repeat-second-section"},Y.a.createElement("div",{className:"set-details"},this.getCurrentFreqDetail())),!n&&i&&!s&&Y.a.createElement("div",{className:"repeat-skip repeat-skip-holiday"},Y.a.createElement("input",{type:"checkbox",id:"repeat-skip-holiday",checked:o.isHolidayChecked,onChange:this.changeSkipHoliday}),Y.a.createElement("label",{htmlFor:"repeat-skip-holiday"},t.formatMessage({id:"skip_public_holidays"}))),!n&&!c&&Y.a.createElement("div",{className:"repeat-skip weekend"},Y.a.createElement("input",{type:"checkbox",id:"repeat-skip-weekend",checked:o.isWeekendChecked,onChange:this.changeSkipWeekend,disabled:c}),Y.a.createElement("label",{htmlFor:"repeat-skip-weekend"},t.formatMessage({id:"skip_weekends"}))),Y.a.createElement("div",{className:"repeat-third-setion"},Y.a.createElement("div",{className:"confirm-container btns"},Y.a.createElement("button",{className:"cancel-card btn-tny btn-cancel",onClick:this.onCancel},t.formatMessage({id:"cancel"})),Y.a.createElement("button",{className:"confirm-advance-card btn-tny btn-primary",onClick:this.onConfirm},t.formatMessage({id:"ok"}))))))}},{key:"initIsSkipWeekendsDisabled",value:function(e){return!this.tparam.tt_skip.match(/WEEKEND/)&&this.judgeNeedDisabledSkipWeekends(e)}},{key:"initIsSkipHolidayDisabled",value:function(e){return!this.tparam.tt_skip.match(/HOLIDAY/)&&this.judgeNeedDisabledSkipHoliday(e)}},{key:"judgeNeedDisabledSkipWeekends",value:function(e){if(e.repeatFrom===ie.A.dueDate){if("weekly"===e.freq||"yearly"===e.freq)return!0;if("monthly"===e.freq){if("week"===e.onMonth||"workday"===e.onMonth)return!0}else if("daily"===e.freq&&e.digit%7==0)return!0}else if(e.repeatFrom===ie.A.completedTime){if("weekly"===e.freq)return!0;if("daily"===e.freq&&x.q(e.digit)%7==0)return!0}return!1}},{key:"judgeNeedDisabledSkipHoliday",value:function(e){return e.repeatFrom===ie.A.dueDate&&"monthly"===e.freq&&"workday"===e.onMonth}},{key:"defaultOptions",value:function(e){var t=e.dateMoment||this.context.getDateMoment(),n=["SU","MO","TU","WE","TH","FR","SA"][t.day()],r=t.date(),a=t.month()+1,o=e.count,c=e.until;return{dateMoment:t,weekStart:e.weekStart||x.s(),weekdays:i.a.isEmpty(e.weekdays)?[n]:e.weekdays,monthdays:i.a.isEmpty(e.monthdays)?[r]:e.monthdays,onMonth:e.onMonth||"date",freq:e.freq&&"lunar_yearly"!==e.freq?e.freq:"weekly",kind:"advanced",repeatFrom:e.repeatFrom===ie.A.dueDate||e.repeatFrom===ie.A.completedTime?e.repeatFrom:ie.A.dueDate,digit:e.digit||1,mweekdays:e.mweekdays||{},mworkday:e.mworkday||"1",whichMonth:e.whichMonth||a,count:o,until:c,oldFreq:e.freq,tt_skip:e.tt_skip||""}}},{key:"getRepeatTypeMenuOptions",value:function(){var e=this.props.intl,t=[],n={},r=[this.state.repeatFrom];return[{key:ie.A.dueDate,value:e.formatMessage({id:"repeat_advance_duedate"})},{key:ie.A.completedTime,value:e.formatMessage({id:"repeat_advance_completion_date"})}].forEach((function(e){t.push(Y.a.createElement(Ze,{key:e.key},Y.a.createElement("a",null,e.value))),n[e.key]=e.value})),{menu:t,map:n,selectedKeys:r}}},{key:"isTTSkipChecked",value:function(){var e=this.state.tt_skip;return{isHolidayChecked:e.match(/HOLIDAY/)||!1,isWeekendChecked:e.match(/WEEKEND/)||!1}}},{key:"changeRepeatType",value:function(e){var t=this,n=e.selectedKeys,r={};if(r.repeatFrom=n[0],r.weekdays=[],r.monthdays=[],r.onMonth="date",r.mweekdays={n:"1",weekday:"SU"},r.mworkday="1",n[0]===ie.A.completedTime){r.freq="weekly";var a=this.disabledSkipObj({isSkipWeekendsDisabled:!0,isSkipHolidayDisabled:!1});r.isSkipWeekendsDisabled=a.isSkipWeekendsDisabled,r.isSkipHolidayDisabled=a.isSkipHolidayDisabled,r.tt_skip=a.tt_skip}else{r.isSkipWeekendsDisabled=!0,r.isSkipHolidayDisabled=!1;var i=this.defaultOptions(this.oldOpt);r.weekdays=i.weekdays,r.monthdays=i.monthdays,r.mworkday=i.mworkday}this.setState(Wd({},r),(function(){t.props.onSettingsUpdate(t.state)}))}},{key:"getRepeatFreqMenuOptions",value:function(){var e=this.props.intl,t={D:"day",W:"week",M:"month",Y:"year"};if(this.tparam.digit>1)for(var n in t)t[n]=t[n]+"s";var r=[{key:"daily",value:e.formatMessage({id:t.D})},{key:"weekly",value:e.formatMessage({id:t.W})},{key:"monthly",value:e.formatMessage({id:t.M})}];this.state.repeatFrom===ie.A.dueDate&&r.push({key:"yearly",value:e.formatMessage({id:t.Y})});var a=[],i={},o=[this.state.freq];return r.forEach((function(e){a.push(Y.a.createElement(Ze,{key:e.key},Y.a.createElement("a",null,e.value))),i[e.key]=e.value})),{menu:a,map:i,selectedKeys:o}}},{key:"keyDownRepeatDigit",value:function(e){var t=e.keyCode;if(~[tc.a.backspace,tc.a.delete,tc.a.left_arrow,tc.a.right_arrow].indexOf(t))return!0;t>=tc.a[0]&&t<=tc.a[9]||t>=tc.a.numpad_0&&t<=tc.a.numpad_9||t===tc.a.up_arrow||t===tc.a.down_arrow||e.preventDefault()}},{key:"changeRepeatDigit",value:function(e){var t=this,n=e.currentTarget.value,r=i.a.clone(this.state);r.digit=n;var a=this.judgeNeedDisabledSkipWeekends(r),o=this.judgeNeedDisabledSkipHoliday(r),c=this.disabledSkipObj({isSkipWeekendsDisabled:a,isSkipHolidayDisabled:o});this.setState(Wd({},c,{digit:n}),(function(){t.props.onSettingsUpdate(t.state)}))}},{key:"changeRepeatFreq",value:function(e){var t=this,n=e.selectedKeys;this.tparam.freq=n[0];var r,a=i.a.clone(this.state);a.freq=n[0];var o=this.judgeNeedDisabledSkipWeekends(a),c=this.judgeNeedDisabledSkipHoliday(a);r=this.disabledSkipObj({isSkipWeekendsDisabled:o,isSkipHolidayDisabled:c}),this.setState(Wd({},r,{freq:n[0]}),(function(){t.props.onSettingsUpdate(t.state),t.forceUpdate()}))}},{key:"changeRepeatWeek",value:function(e){var t=this,n=this.state.weekdays.indexOf(e),r=this.state.weekdays;-1===n?r.push(e):r.splice(n,1);var a={},i=this.isSkipWeekendsDisabled(r);this.isSkipWeekendsDisabled!==i&&i&&(a=this.disabledSkipObj({isSkipWeekendsDisabled:!0})),this.setState(Wd({},a,{weekdays:r}),(function(){t.props.onSettingsUpdate(t.state),t.forceUpdate()}))}},{key:"isSkipWeekendsDisabled",value:function(e){var t=e.indexOf("SA")>-1,n=e.indexOf("SU")>-1,r=e.length;return!(!t||!n||2!==r)||!(!t&&!n||1!==r)}},{key:"getCurrentFreqDetail",value:function(){switch(this.state.freq){case"yearly":return this.getYearlySettings();case"weekly":return this.getWeeklySettings();case"monthly":return this.getMonthlySettings();case"daily":default:return null}}},{key:"getWeeklySettings",value:function(){var e=this,t=this.props.intl,n=this.state.weekStart,r=this.state.weekdays,a=[{key:"SU",value:t.formatMessage({id:"su_week"})},{key:"MO",value:t.formatMessage({id:"mo_week"})},{key:"TU",value:t.formatMessage({id:"tu_week"})},{key:"WE",value:t.formatMessage({id:"we_week"})},{key:"TH",value:t.formatMessage({id:"th_week"})},{key:"FR",value:t.formatMessage({id:"fr_week"})},{key:"SA",value:t.formatMessage({id:"sa_week"})}];return 1===n?a.push(a.shift()):6===n&&a.unshift(a.pop()),Y.a.createElement("div",{className:"set-week line"},Y.a.createElement("div",{className:"select-squares"},a.map((function(t){return Y.a.createElement("div",{className:K()("select-item",{"item-selected":~r.indexOf(t.key)}),key:t.key,onClick:function(){e.changeRepeatWeek(t.key)}},t.value)}))))}},{key:"getMonthlySettings",value:function(){var e=this,t=this.props,n=t.intl,r=t.isSubscribeTask,a=[{cn:K()("radio half-menu left",{active:"date"===this.state.onMonth}),text:n.formatMessage({id:"each"}),key:"date"},{cn:K()("radio half-menu right",{active:"week"===this.state.onMonth}),text:n.formatMessage({id:"on_the"}),key:"week"},{cn:K()("radio half-menu right",{active:"workday"===this.state.onMonth}),text:n.formatMessage({id:"workday"}),key:"workday"}];return r&&a.pop(),Y.a.createElement("div",{className:"set-month"},Y.a.createElement("div",{className:"line clearfix"},a.map((function(t){return Y.a.createElement("span",{className:t.cn,onClick:function(n){e.changeOnMonth(t.key)},key:t.key},t.text)}))),this.getMonthlyDetailSettings())}},{key:"changeOnMonth",value:function(e){var t,n=this,r=i.a.clone(this.state);r.onMonth=e;var a=this.judgeNeedDisabledSkipHoliday(r),o=this.judgeNeedDisabledSkipWeekends(r);t=this.disabledSkipObj({isSkipHolidayDisabled:a,isSkipWeekendsDisabled:o}),this.setState(Wd({},t,{onMonth:e}),(function(){n.props.onSettingsUpdate(n.state)}))}},{key:"getMonthlyDetailSettings",value:function(){switch(this.state.onMonth){case"workday":return this.getSetMonthWorkday();case"week":return this.getSetMonthWeek();case"date":default:return this.getSetMonthDate()}}},{key:"getSetMonthDate",value:function(){for(var e=this,t=this.props.intl,n=[],r=this.state.monthdays,a=1;a<32;a++){var i={key:a,value:a};n.push(i)}return n.push({key:-1,value:t.formatMessage({id:"last_day"})}),Y.a.createElement("div",{className:"repeat-month-type set-month-date line"},Y.a.createElement("div",{className:"select-squares"},n.map((function(t){return Y.a.createElement("div",{className:K()("select-item",{"item-selected":~r.indexOf(t.key)}),key:t.key,onClick:function(n){return e.changeRepeatMonthDays(t.key)}},t.value)}))))}},{key:"changeRepeatMonthDays",value:function(e){var t=this,n=[].concat(this.state.monthdays),r=n.indexOf(e);-1===r?n.push(e):n.splice(r,1),this.setState({monthdays:n},(function(){t.props.onSettingsUpdate(t.state),t.forceUpdate()}))}},{key:"getSetMonthWeek",value:function(){var e=this.getSetMonthWeekDigitOptions(),t=this.getSetMonthWeekDayOptions();return Y.a.createElement("div",{className:"repeat-month-type set-month-week line clearfix"},Y.a.createElement("div",{className:"half-menu month-week-left left"},Y.a.createElement(dd,Gd({},e,{onSelect:this.changeMonthWeekDigits,menuClassName:"timecard-element timecard-repeat-element"}))),Y.a.createElement("div",{className:"half-menu month-week-right right"},Y.a.createElement(dd,Gd({},t,{onSelect:this.changeMonthWeekDays,menuClassName:"timecard-element timecard-repeat-element"}))))}},{key:"changeMonthWeekDigits",value:function(e){var t=this,n=e.selectedKeys;this.setState((function(e){var t=e.mweekdays;return t.n=n[0],{mweekdays:t}}),(function(){t.props.onSettingsUpdate(t.state),t.forceUpdate()}))}},{key:"changeMonthWeekDays",value:function(e){var t=this,n=e.selectedKeys;this.setState((function(e){var t=e.mweekdays;return t.weekday=n[0],{mweekdays:t}}),(function(){t.props.onSettingsUpdate(t.state),t.forceUpdate()}))}},{key:"getSetMonthWeekDigitOptions",value:function(){var e=this.props.intl,t=[{key:"1",value:e.formatMessage({id:"first"})},{key:"2",value:e.formatMessage({id:"second"})},{key:"3",value:e.formatMessage({id:"third"})},{key:"4",value:e.formatMessage({id:"fourth"})},{key:"5",value:e.formatMessage({id:"fifth"})},{key:"-1",value:e.formatMessage({id:"last"})}],n=[],r={};this.tparam.mweekdays.n=this.state.mweekdays.n;var a=this.tparam.mweekdays.n?[this.tparam.mweekdays.n]:[];return t.forEach((function(e){n.push(Y.a.createElement(Ze,{key:e.key},Y.a.createElement("a",null,e.value))),r[e.key]=e.value})),{menu:n,map:r,selectedKeys:a}}},{key:"getSetMonthWeekDayOptions",value:function(){var e=this.props.intl,t=[{key:"SU",value:e.formatMessage({id:"sunday"})},{key:"MO",value:e.formatMessage({id:"monday"})},{key:"TU",value:e.formatMessage({id:"tuesday"})},{key:"WE",value:e.formatMessage({id:"wednesday"})},{key:"TH",value:e.formatMessage({id:"thursday"})},{key:"FR",value:e.formatMessage({id:"friday"})},{key:"SA",value:e.formatMessage({id:"saturday"})}],n=[],r={};this.tparam.mweekdays.weekday=this.state.mweekdays.weekday;var a=[this.tparam.mweekdays.weekday];return t.forEach((function(e){n.push(Y.a.createElement(Ze,{key:e.key},Y.a.createElement("a",null,e.value))),r[e.key]=e.value})),{menu:n,map:r,selectedKeys:a}}},{key:"disabledSkipObj",value:function(e){if(!e)return{};var t=this.isTTSkipChecked(),n=[];return!e.isSkipHolidayDisabled&&t.isHolidayChecked&&n.push("HOLIDAY"),!e.isSkipWeekendsDisabled&&t.isWeekendChecked&&n.push("WEEKEND"),{isSkipWeekendsDisabled:e.isSkipWeekendsDisabled||!1,isSkipHolidayDisabled:e.isSkipHolidayDisabled||!1,tt_skip:n.join(",")}}},{key:"getSetMonthWorkday",value:function(){var e=this.getSetMonthWorkdayOptions();return Y.a.createElement("div",{className:"repeat-month-type set-month-workday line"},Y.a.createElement(dd,Gd({},e,{onSelect:this.changeRepeatMonthWorkdays,menuClassName:"timecard-element timecard-repeat-element"})))}},{key:"changeRepeatMonthWorkdays",value:function(e){var t=this,n=e.selectedKeys;this.setState({mworkday:n[0]},(function(){t.props.onSettingsUpdate(t.state),t.forceUpdate()}))}},{key:"getSetMonthWorkdayOptions",value:function(){var e=this.props.intl,t=[{key:"1",value:e.formatMessage({id:"first_workday"})},{key:"-1",value:e.formatMessage({id:"last_workday"})}],n=[],r={};this.tparam.mworkday=this.state.mworkday;var a=[this.tparam.mworkday];return t.forEach((function(e){n.push(Y.a.createElement(Ze,{key:e.key},Y.a.createElement("a",null,e.value))),r[e.key]=e.value})),{menu:n,map:r,selectedKeys:a}}},{key:"getYearlySettings",value:function(){var e=this.getSetYearMonthOptions(),t=this.getSetYearWeekDigitOptions(),n=this.getSetYearWeekDayOptions();return Y.a.createElement("div",{className:"set-year"},Y.a.createElement("div",{className:"set-year-month line clearfix"},Y.a.createElement(dd,Gd({},e,{onSelect:this.changeRepeatYearMonth,menuClassName:"timecard-element timecard-repeat-element",withAntiscroll:!0}))),Y.a.createElement("div",{className:"set-year-week line clearfix"},Y.a.createElement("div",{className:"half-menu year-week-left left"},Y.a.createElement(dd,Gd({},t,{onSelect:this.changeMonthWeekDigits,menuClassName:"timecard-element timecard-repeat-element"}))),Y.a.createElement("div",{className:"half-menu year-week-right right"},Y.a.createElement(dd,Gd({},n,{onSelect:this.changeMonthWeekDays,menuClassName:"timecard-element timecard-repeat-element"})))))}},{key:"changeRepeatYearMonth",value:function(e){var t=this,n=e.selectedKeys;this.setState({whichMonth:n[0]},(function(){t.props.onSettingsUpdate(t.tparam),t.forceUpdate()}))}},{key:"getSetYearMonthOptions",value:function(){var e=this.context.getDateMoment().date(1),t=[],n={};this.tparam.whichMonth=this.state.whichMonth;for(var r=[this.tparam.whichMonth],a=1;a<13;a++){var i=e.month(a-1).format("MMM");t.push(Y.a.createElement(Ze,{key:a+""},Y.a.createElement("a",null,i))),n[a]=i}return{menu:t,map:n,selectedKeys:r}}},{key:"getSetYearWeekDigitOptions",value:function(){var e=this.props.intl,t=[{key:"1",value:e.formatMessage({id:"first"})},{key:"2",value:e.formatMessage({id:"second"})},{key:"3",value:e.formatMessage({id:"third"})},{key:"4",value:e.formatMessage({id:"fourth"})},{key:"5",value:e.formatMessage({id:"fifth"})},{key:"-1",value:e.formatMessage({id:"last"})}],n=[],r={};this.tparam.mweekdays.n=this.state.mweekdays.n;var a=[this.tparam.mweekdays.n];return t.forEach((function(e){n.push(Y.a.createElement(Ze,{key:e.key},Y.a.createElement("a",null,e.value))),r[e.key]=e.value})),{menu:n,map:r,selectedKeys:a}}},{key:"getSetYearWeekDayOptions",value:function(){var e=this.props.intl,t=[{key:"SU",value:e.formatMessage({id:"sunday"})},{key:"MO",value:e.formatMessage({id:"monday"})},{key:"TU",value:e.formatMessage({id:"tuesday"})},{key:"WE",value:e.formatMessage({id:"wednesday"})},{key:"TH",value:e.formatMessage({id:"thursday"})},{key:"FR",value:e.formatMessage({id:"friday"})},{key:"SA",value:e.formatMessage({id:"saturday"})}],n=[],r={};this.tparam.mweekdays.weekday=this.state.mweekdays.weekday;var a=[this.tparam.mweekdays.weekday];return t.forEach((function(e){n.push(Y.a.createElement(Ze,{key:e.key},Y.a.createElement("a",null,e.value))),r[e.key]=e.value})),{menu:n,map:r,selectedKeys:a}}},{key:"fixRootPosition",value:function(){var e=this.rootRef.current.getBoundingClientRect(),t=e.top+e.height-window.innerHeight;t>0&&(this.rootRef.current.style.top=this.rootRef.current.offsetTop-t+"px")}},{key:"changeSkipWeekend",value:function(){var e=this;if(!this.state.isSkipWeekendsDisabled){var t={},n=this.isTTSkipChecked();if(n.isWeekendChecked&&this.judgeNeedDisabledSkipWeekends(this.state))t=this.disabledSkipObj({isSkipWeekendsDisabled:!0});else{var r=[];n.isHolidayChecked&&r.push("HOLIDAY"),n.isWeekendChecked||r.push("WEEKEND"),t.tt_skip=r.join(",")}this.setState(Wd({},t),(function(){e.props.onSettingsUpdate(e.state)}))}}},{key:"changeSkipHoliday",value:function(){var e=this;if(!this.state.isSkipHolidayDisabled){var t={},n=this.isTTSkipChecked();if(n.isHolidayChecked&&this.judgeNeedDisabledSkipHoliday(this.state))t=this.disabledSkipObj({isSkipHolidayDisabled:!0});else{var r=[];n.isHolidayChecked||r.push("HOLIDAY"),n.isWeekendChecked&&r.push("WEEKEND"),t.tt_skip=r.join(",")}this.setState(Wd({},t),(function(){e.props.onSettingsUpdate(e.state)}))}}},{key:"onCancel",value:function(){this.props.onSettingsUpdate(this.oldOpt),this.props.onCancel()}},{key:"onConfirm",value:function(){this.props.onConfirm(this.state)}}])&&Vd(t.prototype,n),r&&Vd(t,r),o}(Y.a.Component);Xd.contextType=wu;var Qd=Object(me.c)(Xd),ef=n(463);function tf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tf(Object(n),!0).forEach((function(t){rf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function af(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function of(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return cf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sf=function(e){var t=e.dateMoment,n=e.repeatData,r=e.isSubscribeTask,a=e.updateRepeat,i=e.repeatPreviewText,o=of(Object(B.useState)(!1),2),c=o[0],s=o[1],u=Object(B.useContext)(wu),l=n.kind,d="no"!==l,f=function(e){var r=e.dateMoment,i=af(e,["dateMoment"]),o=Object(x.q)(e.digit);a({dateMoment:r||t,repeatFlag:Object(ef.a)({date:r||t,repeatData:nf({},n,{},i,{digit:o})}),repeatFrom:e.repeatFrom||n.repeatFrom})};return Y.a.createElement("div",{className:K()("multi-select-toggle",{"has-repeat":d})},Y.a.createElement(Hd,{isSubscribeTask:r,repeatKind:l,repeatPreviewText:i,setIsCustomSettingShown:s,submitChangedData:f}),c?Y.a.createElement(Qd,{isSubscribeTask:r,tparam:nf({dateMoment:t},n),onCancel:function(){s(!1)},onConfirm:function(e){var n=e.repeatFrom,r=Object(x.q)(e.digit);if(n===ie.A.dueDate){var a=Object(ef.a)({date:t,repeatData:nf({},e,{kind:"advanced",until:null,digit:r})}),i=new $u.a(a,n,t.utc().toDate()),o=$u.b.occurrenceDateOfRecurrentObject(i,!1);o&&f(nf({},e,{dateMoment:u.getStartOfDate(o),kind:"advanced",until:null}))}s(!1)},onSettingsUpdate:f}):null)};var uf=Object(me.c)((function(e){var t,n,r=e.intl,a=e.children,i=e.untilType,o=e.changeUntilType,c=Object(B.useMemo)((function(){return[i]}),[i]),s=(t=[],n={},[{key:"never",value:r.formatMessage({id:"repeat_end_never"})},{key:"date",value:r.formatMessage({id:"repeat_end_date"})},{key:"count",value:r.formatMessage({id:"repeat_end_count"})}].forEach((function(e){n[e.key]=e.value,t.push(Y.a.createElement(Ze,{key:e.key},Y.a.createElement("a",null,e.value)))})),{menu:t,map:n});return Y.a.createElement(Re,{menu:Y.a.createElement(Xe,{selectedKeys:c,onSelect:function(e){var t=e.selectedKeys;o(t[0])}},s.menu),menuClassName:"timecard-element",showArrow:!1,minMenuWidthMatchTrigger:!0},a)}));function lf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return df(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return df(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function df(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ff(e){var t=e.dateMoment,n=e.children,r=e.until,a=e.isSwitchToDate,o=e.submitChangedData,c=lf(Object(B.useState)(!1),2),s=c[0],u=c[1],p=Object(B.useContext)(wu),h=i.a.uniqueId();Object(B.useEffect)((function(){return $("body").on("click.repeatEndKalendae",(function(e){$(e.target).closest("#js-repeat-until-card").length||$(e.target).closest(".choose-repeat-until .select-title").length||u(!1)})),function(){$("body").off("click.repeatEndKalendae")}}),[]),Object(B.useEffect)((function(){return a&&u(!0),function(){}}),[a]),Object(B.useEffect)((function(){return s&&(En.b($("#js-repeat-until-card")),f.b.subscribe(h,"dateSettingKalendae",(function(){u(!1)}))),function(){f.b.unSubscribe(h)}}),[h,s]);var m=l()(d.a.convertUtcDate2Date(r)).format("YYYY-MM-DD");return Y.a.createElement(Y.a.Fragment,null,Y.a.cloneElement(n,{onClick:function(){u(!s)}}),s&&Y.a.createElement(cl,{selected:m,dateInstance:p,direction:"future",id:"js-repeat-until-card",extraClassName:"k-prev k-disable-previous-year-btn k-floating k-pop repeat-end-pop repeat-until-date-setting-pop",beforeDatesInvalid:p.formatYMD(t),onChange:function(e){o({until:p.getUTCMoment(p.formatYMD(e)).toDate()}),u(!1)}}))}function pf(e){return(pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hf(){return(hf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function mf(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function gf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vf(e,t){return(vf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Of(e);if(t){var a=Of(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return bf(this,n)}}function bf(e,t){return!t||"object"!==pf(t)&&"function"!=typeof t?kf(e):t}function kf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Of(e){return(Of=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Tf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vf(e,t)}(i,e);var t,n,r,a=yf(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).updateDigit=t.updateDigit.bind(kf(t)),t.correctDigit=t.correctDigit.bind(kf(t)),t.validValue=e.defaultValue,t}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.focus&&$(this.refs.el).select()}},{key:"render",value:function(){var e=this.props,t=(e.onChange,e.onBlur,e.defaultValue),n=mf(e,["onChange","onBlur","defaultValue"]);return Y.a.createElement("input",hf({ref:"el",onChange:this.updateDigit,onBlur:this.correctDigit,defaultValue:t},n))}},{key:"updateDigit",value:function(e){if(isNaN(Number(e.target.value)))return e.target.value=this.validValue,void $(e.target).select();this.validValue=e.target.value;var t=parseInt(this.props.min,10),n=parseInt(this.props.max,10),r=parseInt(e.target.value,10),a=parseInt(String(n)[0],10),i=parseInt(String(t)[0],10),o=parseInt(String(n-10*Math.floor((n-t)/10))[0],10),c=Math.min(i,a,o);!r||r<c?(e.target.value=t,$(e.target).select()):r>n&&(e.target.value=n,$(e.target).select());var s=parseInt(e.target.value,10);this.props.onChange&&this.props.onChange(s)}},{key:"correctDigit",value:function(e){var t=parseInt(this.props.min,10),n=parseInt(this.props.max,10),r=e.target.value;!r||r<t?e.target.value=t:r>n&&(e.target.value=n);var a=parseInt(e.target.value,10);this.props.onChange&&this.props.onChange(a)}}])&&gf(t.prototype,n),r&&gf(t,r),i}(Y.a.Component);function Sf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ef(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ef(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ef(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wf=Object(me.c)((function(e){var t=e.id,n=e.intl,r=e.count,a=e.onCancel,i=e.onConfirm,o=Sf(Object(B.useState)(r),2),c=o[0],s=o[1];return Y.a.createElement("div",{className:"tc-repeat-count shadow pop-bg",id:t},Y.a.createElement("div",{className:"row"},Y.a.createElement(Tf,{type:"text",min:2,max:60,focus:"true",className:"r-custom-num input-sml text-center",onChange:s,onClick:function(e){e.currentTarget.select()},defaultValue:c}),Y.a.createElement("span",null,n.formatMessage({id:"repeat_end_occurrences"}))),Y.a.createElement("div",{className:"confirm-container btns"},Y.a.createElement("button",{id:"custom-cancel",className:"btn-tny btn-cancel",onClick:a},n.formatMessage({id:"cancel"})),Y.a.createElement("button",{id:"custon-confirm",className:"btn-tny btn-primary",onClick:function(){i(c)}},n.formatMessage({id:"ok"}))))}));function Df(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _f(e){var t=e.children,n=e.count,r=e.isSwitchToCount,a=e.submitChangedData,o=Df(Object(B.useState)(!1),2),c=o[0],s=o[1],u=i.a.uniqueId();Object(B.useEffect)((function(){return $("body").on("click.repeatCount",(function(e){$(e.target).parents("#js-repeat-until-card").length||s(!1)})),function(){$("body").off("click.repeatEndKalendae")}}),[]),Object(B.useEffect)((function(){return c&&(En.b($("#js-repeat-until-card")),f.b.subscribe(u,"dateCountSetting",(function(){s(!1)}))),function(){f.b.unSubscribe(u)}}),[u,c]),Object(B.useEffect)((function(){return r&&s(!0),function(){}}),[r]);return Y.a.createElement(Y.a.Fragment,null,Y.a.cloneElement(t,{onClick:function(){s(!c)}}),c&&Y.a.createElement(wf,{id:"js-repeat-until-card",count:n,onCancel:function(){s(!1)},onConfirm:function(e){a({count:e}),s(!1)}}))}function Cf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function If(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cf(Object(n),!0).forEach((function(t){Mf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Af=Object(me.c)((function(e){var t=e.intl,n=e.dateMoment,r=e.repeatData,a=e.untilPreviewText,i=e.updateRepeat,o=r.count,c=r.until,s=r.freq,u=r.kind,l=Rl(o),d=Rl(c),f=Object(B.useContext)(wu);Object(B.useEffect)((function(){}),[c,n,h,p,s,u]);var p=Object(B.useCallback)((function(e,t){var r=f.getStartOfDate(),a=r.isAfter(n)?r:n.clone();if("ebbinghaus_curve"===t)a.add(30,"days");else switch(e){case"daily":a.add(7,"days");break;case"weekly":a.add(1,"months");break;case"monthly":a.add(1,"years");break;case"yearly":case"lunar_yearly":a.add(5,"years")}return f.getUTCMoment(f.formatYMD(a)).toDate()}),[f,n]),h=Object(B.useCallback)((function(e){i({repeatFlag:Object(ef.a)({date:n,repeatData:If({},r,{},e)}),repeatFrom:e.repeatFrom||r.repeatFrom})}),[n,r,i]),m=c?"date":o?"count":"never",g={never:uf,date:ff,count:_f}[m],v={never:{untilType:m,changeUntilType:function(e){"date"===e?h({until:p(s,u)}):"count"===e&&h({count:2})}},date:{dateMoment:n,until:c,isSwitchToDate:!d&&!!c,submitChangedData:h},count:{count:o,isSwitchToCount:!l&&!!o,submitChangedData:h}}[m];return Y.a.createElement("div",{className:K()("multi-select-toggle choose-repeat-until line",{"has-repeat-until":"never"!==m||a})},Y.a.createElement(g,v,Y.a.createElement("div",{className:"select-title need-highlight"},a||("never"===m?t.formatMessage({id:"repeat_end_never"}):""))),Y.a.createElement("span",{className:"delete fake-del",onClick:function(){h({until:null,count:void 0})}}))}));function xf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pf=Object(me.c)((function(e){var t=e.data,n=e.isDisabled,r=e.isSubscribeTask,a=e.onUpdateStateData,i=e.intl,o=t.get("repeatFlag"),c=t.get("repeatFrom"),s=t.get("date"),u=t.get("end"),l=t.get("isAllDay"),d=t.get("weekStart"),f=Object(B.useContext)(wu),p=Object(B.useMemo)((function(){return f.getDateMoment(s)}),[s,f]),h=Object(B.useMemo)((function(){return Object(Ml.b)({repeatFlag:o,repeatFrom:c,weekStart:d})}),[o,c,d]),m=Object(B.useMemo)((function(){return Object(ef.b)({date:p,repeatData:h})||i.formatMessage({id:"none"})}),[p,i,h]),g=function(e){var n=t.get("date"),r=e.dateMoment,i={repeatFlag:e.repeatFlag,exDate:[]};if(e.repeatFrom&&(i.repeatFrom=e.repeatFrom),r){var o=s,c=u&&u.get("date"),l=f.formatYMD(r);if(i.date=l,c){var d=f.getDateMoment(c).diff(o,"days");i.end=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xf(Object(n),!0).forEach((function(t){Rf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u.toJS(),{date:d?r.clone().add(d,"day").format("YYYY-MM-DD"):l})}}else!n&&i.repeatFlag&&(i.date=f.formatYMD());a(i)};if(n)return null;var v=m.split(";");return Y.a.createElement("div",{className:"repeat-container choose-repeat line"},Y.a.createElement(sf,{dateMoment:p,isAllDay:l,repeatData:h,repeatPreviewText:v[0],isSubscribeTask:r,updateRepeat:g}),o&&Y.a.createElement(Af,{dateMoment:p,repeatData:h,untilPreviewText:v[1],updateRepeat:g}))})),Nf=n(653),Lf=n(549);function Uf(e){return(Uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ff(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ff(Object(n),!0).forEach((function(t){Bf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ff(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wf(e,t){return(Wf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vf(e);if(t){var a=Vf(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Gf(this,n)}}function Gf(e,t){return!t||"object"!==Uf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vf(e){return(Vf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zf="date",Zf="across",qf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wf(e,t)}(c,e);var t,n,a,o=Kf(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).initSubTaskTimecardPosition=function(){var e,n,r=t.props.trigger,a=r.getBoundingClientRect(),i=a.top,o=a.left,c=r.offsetHeight,s=r.offsetWidth,u=t.timecardEl.current.offsetHeight,l=t.timecardEl.current.offsetWidth,d=i+u+c-window.innerHeight;e=o-l+s+16,d<=0?n=i+c:(n=i+c-d,t.timecardEl.current.classList.remove("boult")),t.timecardEl.current.style.top=n+"px",t.timecardEl.current.style.left=e+"px"},t.onClickBatchMode=function(e){(e=e||window.event).preventDefault(),e.stopPropagation(),t.setState({isBatchEdit:!1})},t.onUpdateAnalyticData=function(e){t.analyticData=Hf({},t.analyticData,{},e)},t.onUpdateStateData=function(e){var n=t.modes,r=n.isSubTask,a=n.isSubscribeTask,i=t.state.data;(r||a)&&(delete e.logicTimeZone,delete e.isFloating);var o=i.get("timeZone"),c=i.merge(e),s=Js({isAllDay:c.get("isAllDay"),isFloating:c.get("isFloating"),timeZone:c.get("logicTimeZone")}),u={data:c};o!==s&&Object.assign(u,{data:u.data.set("timeZone",s),dateInstance:Eu(s)});var l=i.get("date"),d=c.get("date");if(l!==d){var f=c.get("repeatFlag"),p=c.get("repeatFrom"),h=Object(zs.j)(d,s,"YYYY-MM-DD"),m=Object(Ml.c)(h.isValid()?h:null,f,p);Object.assign(u,{data:u.data.set("repeatFlag",m)})}t.setState(u,(function(){t.props.onSettingsUpdate&&t.props.onSettingsUpdate(t.buildOutputTaskData())}))},t.onConfirmStateData=function(e){t.setState({data:t.state.data.merge(e)},(function(){t.confirmTimecard()}))},t.closeTimecard=function(){t.props.onUnmountCard&&t.props.onUnmountCard()},t.confirmTimecard=function(){var e=t.state,n=e.data,r=e.dateInstance;if(n.get("date")){var a=t.buildOutputTaskData();t.props.onConfirmTime&&t.props.onConfirmTime(a),t.doDueAnalytics(a)}else t.setState({data:n.set("date",r.formatYMD())},(function(){var e=t.buildOutputTaskData();t.props.onConfirmTime&&t.props.onConfirmTime(e),t.doDueAnalytics(e)}));In.a("save")},t.clearTimecard=function(){t.modes.isScheduleTask?t.setState({isConfirmClearModalShown:!0}):t.confirmClearTime(),In.a("clear")},t.confirmClearTime=function(){var e=t.modes.isSubTask,n=e?t.originalStateData.get("logicTimeZone"):zs.h;t.setState({data:t.state.data.merge({reminders:[],repeatFlag:null,date:"",clock:"",repeatFrom:"2",isAllDay:null,isFloating:!1,timeZone:n,exDate:[]})},(function(){e?t.props.onClearTime&&t.props.onClearTime({timeZone:n}):t.props.onClearTime&&t.props.onClearTime({isFloating:!1,timeZone:n})}))},t.hideConfirmClearModal=function(){t.setState({isConfirmClearModalShown:!1})};var n=e.options,a=t.initTimecardMode(n),s=Zs(n),u=t.initViewMode(s,a);if(!a.isSubTask&&!s.date){var l={startDate:a.isNote?null:x.d(),isAllDay:s.isAllDay,reminders:x.a(s.isAllDay)};Object.assign(s,Zs(Hf({},n,{},l)))}return u!==Zf||!a.isNewTask&&s.date||(s.clock=null),t.modes=a,t.state={data:r.fromJS(s),viewMode:u,isBatchEdit:n.isBatchMoreEdit,isConfirmClearModalShown:!1,dateInstance:Eu(s.timeZone)},t.analyticData={isOpenMonthSection:!1,isUsePrevMonthBtn:!1,isUseNextMonthBtn:!1},t.originalStateData=t.state.data,t.timecardHeight=0,t._listenId=i.a.uniqueId(),t.escListenId=i.a.uniqueId(),t.timecardEl=Y.a.createRef(),t}return t=c,(n=[{key:"componentDidMount",value:function(){f.a.dispatch("closeTimecard"),this.installCloseListener(),this.timecardHeight=this.timecardEl.current.offsetHeight,this.initPosition(),this.props.onMountedCard&&this.props.onMountedCard(this.timecardEl.current)}},{key:"componentWillUnmount",value:function(){this.uninstallCloseListener()}},{key:"componentDidUpdate",value:function(e,t){var n=this.state,r=this.timecardEl.current.offsetHeight;r!==this.timecardHeight&&(this.timecardHeight=r,this.initPosition()),!this.modes.isSubTask||t.data.get("isAllDay")===n.data.get("isAllDay")&&t.data.get("startDate")^n.data.get("startDate")||this.initSubTaskTimecardPosition()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.container,r=this.modes,a=r.isSubTask,i=r.isWebExtensionTask,o=this.state,c=o.viewMode,s=o.dateInstance,u=c===zf,l=c===Zf,d=Y.a.createElement(wu.Provider,{value:s},Y.a.createElement("div",{id:"js-timecard",className:K()("timecard pop-shadow",t,{boult:!1,"crx-task-box-timecard":i,"sub-task-timecard":a,"type-date":u,"type-across":l}),ref:this.timecardEl,onClick:function(e){e.stopPropagation()}},this.renderCalendarHeader(),Y.a.createElement("div",{className:"tc-inner"},this.renderCalendarContent()),Y.a.createElement("div",{className:"tc-footer"},this.renderCalendarFooter()),this.renderConfirmClearModal()));return n?ve.a.createPortal(d,n):d}},{key:"initTimecardMode",value:function(e){var t=e.isNew,n=e.isDisableRepeat,r=e.isWebExtensionTask;return{isNewTask:t,isDisableRepeat:n,isSubscribeTask:e.isSubscribeTask,isScheduleTask:e.isScheduleTask,isSubTask:e.isSubtaskMode,isWebExtensionTask:r,isMultiSelect:e.isMultiSelect,isNote:e.isNote}}},{key:"initViewMode",value:function(e,t){var n=e.date,r=e.end,a=t.isNewTask,i=t.isSubscribeTask,o=t.isSubTask,c=t.isMultiSelect,s=t.isWebExtensionTask,u=t.isNote,l=zf,d=Zf;return s||u?l:i?d:o?l:c?r?d:l:r||(a||!n)&&Qe.d()&&"1"===x.b("defaultTimeMode")?d:l}},{key:"initPosition",value:function(){var e=this.modes.isSubTask,t=this.props,n=t.trigger,r=t.initTimecardPosition;n&&(e?this.initSubTaskTimecardPosition():r?r(this.timecardEl.current):this.initTaskTimecardPosition())}},{key:"initTaskTimecardPosition",value:function(){var e,t,n=this.props.trigger,r=n.getBoundingClientRect(),a=r.top,i=r.left,o=n.offsetHeight,c=n.offsetWidth,s=this.timecardEl.current.offsetHeight,u=this.timecardEl.current.offsetWidth,l=window.innerHeight,d=i+u/2-window.innerWidth,f=a+s+o+4-l;e=i-u/2<0?0:d<=0?i+c/2-u/2:i+c/2-u/2-d,f<=0?t=a+o+4:(t=a+o+4-f,this.timecardEl.current.classList.remove("boult")),this.timecardEl.current.style.top=t+"px",this.timecardEl.current.style.left=e+"px"}},{key:"installCloseListener",value:function(){var e=this,t=this.props.scroller;t&&$(t).on("scroll.timecard".concat(this._listenId),(function(){e.closeTimecard()})),$("body").on("mousedown.timecard".concat(this._listenId," contextmenu.timecard").concat(this._listenId),(function(t){$(t.target).closest("#js-timecard, .timecard-element, .timecard-trigger").length||e.closeTimecard()})),f.a.subscribe(this._listenId,"closeTimecard",this.closeTimecard),f.b.subscribe(this.escListenId,"timecard",this.closeTimecard)}},{key:"uninstallCloseListener",value:function(){var e=this.props.scroller;e&&$(e).off("scroll.timecard".concat(this._listenId)),$("body").off("mousedown.timecard".concat(this._listenId," contextmenu.timecard").concat(this._listenId)),f.a.unSubscribe(this._listenId,"closeTimecard"),f.b.unSubscribe(this.escListenId)}},{key:"renderCalendarHeader",value:function(){var e=this,t=Zf,n=zf,r=this.modes,a=r.isSubscribeTask,i=r.isSubTask,o=r.isWebExtensionTask,c=r.isNote;return o||a?null:c?Y.a.createElement("div",{className:"tc-header"},Y.a.createElement("div",{className:"select-title"},Y.a.createElement(Je.a,{id:"date_and_reminder",tagName:"span"}))):i?Y.a.createElement("div",{className:"tc-header"},Y.a.createElement("div",{className:"select-title"},Y.a.createElement(Je.a,{id:"date_label",tagName:"span"}))):Y.a.createElement("div",{className:"tc-header"},Y.a.createElement("div",{className:"type-wrapper"},Y.a.createElement("a",{className:"timecard-type","data-type":n,onClick:function(t){e.switchDateMode(n)}},Y.a.createElement(Je.a,{id:"date_label",tagName:"span"}))),Y.a.createElement("div",{className:"type-wrapper"},Y.a.createElement("a",{className:"timecard-type","data-type":t,onClick:function(n){e.switchDateMode(t)}},Y.a.createElement(Je.a,{id:"timecard_across",tagName:"span"}))),Y.a.createElement("div",{className:"slide"}))}},{key:"renderCalendarContent",value:function(){var e=this.modes,t=e.isSubTask,n=e.isDisableRepeat,r=e.isSubscribeTask,a=e.isWebExtensionTask,i=this.state,o=i.isBatchEdit,c=i.viewMode,s=i.data,u=this.props,l=u.isTimeZoneOptionEnabled,d=u.quickSetOptions,f=c===zf,p=!l||r||t&&!s.get("isFloating")&&zs.h===s.get("timeZone"),h=Y.a.createElement(Pl,{data:s,isTimezoneDisabled:p,isTimezoneReadOnly:t,isTimeDisabled:o,isSingleDateMode:f,isAcrossSameDate:r,onConfirmStateData:this.onConfirmStateData,onUpdateStateData:this.onUpdateStateData,onUpdateAnalyticData:this.onUpdateAnalyticData,quickSetOptions:d});return a?h:t?Y.a.createElement(Y.a.Fragment,null,h,this.renderSubTaskReminderInfo()):o?Y.a.createElement(Y.a.Fragment,null,h,Y.a.createElement("div",{className:"batch-more-edit input-sml text-center",onClick:this.onClickBatchMode},Y.a.createElement(Je.a,{id:"batch_edit_more",tagName:"div"}))):Y.a.createElement(Y.a.Fragment,null,h,Y.a.createElement(Fd,{data:s,onUpdateStateData:this.onUpdateStateData}),Y.a.createElement(Pf,{data:s,isDisabled:n,isSubscribeTask:r,onUpdateStateData:this.onUpdateStateData}))}},{key:"renderSubTaskReminderInfo",value:function(){var e=this.state.data,t=e.get("date"),n=e.get("clock"),r=e.get("meridiem");if(t&&n){var a=r?v.c()?"A hh:mm":"hh:mm A":"HH:mm",i=n?Object(zs.i)(t,n,r,e.get("timeZone")):Object(zs.j)(t,zs.h,"YYYY-MM-DD"),o=Object(Lf.a)(Object(zs.d)(i),e.get("isAllDay"),!0),c=ed.i(o,"TRIGGER:PT0S"),s=R.o?"MMDD, ".concat(a):"".concat(a," on ").concat(Object(oe.a)("MMMD"));return Y.a.createElement("p",{className:"text-tny"},Y.a.createElement(Je.a,{id:e.get("timeZone")===zs.h?"subtask_reminder_desc":"timezone_subtask_reminder_desc",values:{s1:Object(zs.j)(c).format(s)},tagName:"span"}))}return null}},{key:"renderCalendarFooter",value:function(){var e=this.modes.isSubscribeTask;return Y.a.createElement("div",{id:"js-timecard-btns",className:"confirm-container btns"},e?Y.a.createElement("button",{className:"clear-card btn-tny btn-cancel",onClick:this.closeTimecard},Y.a.createElement(Je.a,{id:"cancel",tagName:"span"})):Y.a.createElement("button",{className:"clear-card btn-tny btn-cancel",onClick:this.clearTimecard},Y.a.createElement(Je.a,{id:"clear",tagName:"span"})),Y.a.createElement("button",{className:"confirm-card btn-tny btn-primary",onClick:this.confirmTimecard},Y.a.createElement(Je.a,{id:"ok",tagName:"span"})))}},{key:"renderConfirmClearModal",value:function(){var e=this.state,t=e.id,n=e.projectId;return e.isConfirmClearModalShown?Y.a.createElement(Nf.a,{taskId:t,projectId:n,onClearTime:this.confirmClearTime,onClose:this.hideConfirmClearModal}):null}},{key:"switchDateMode",value:function(e){var t=Zf,n=zf,r=this.state.data,a=e===n,i=e===t;if(!i||Qe.d()){var o={exDate:[]};if(a)o.end=null;else if(i){var c=[];o.reminders=[],r.get("reminders").forEach((function(e){var t=e.get("trigger"),n=ed.a(t);c.includes(t)||(c.push(t),o.reminders.push({id:e.get("id"),trigger:n}))}))}this.setState({data:r.merge(o),viewMode:e||n,isBatchEdit:!1})}else nd.a({type:ie.c.timeDuration})}},{key:"doDueAnalytics",value:function(e){var t=this.modes.isNote,n=this.state.data,r=this.originalStateData;n.get("date")!==r.get("date")&&In.c(e.startDate),e.isAllDay!==r.get("isAllDay")&&(e.isAllDay?In.h("no_time"):In.h("has_time"));var a=r.get("reminders"),i=a?a.toJS():[],o=e.reminders||[],c=!1;if(i.length!==o.length)c=!0;else for(var s=i.map((function(e){return e.trigger})),u=0;u<o.length;u++)if(s.indexOf(o[u].trigger)<0){c=!0;break}c&&(t&&In.l("set_reminder"),In.f(o.length),o.length&&o.forEach((function(t){In.e(t.trigger.slice(8),e.isAllDay)}))),e.repeatFlag!==r.get("repeatFlag")&&(e.repeatFlag||r.get("repeatFlag"))&&In.g({repeatFrom:e.repeatFrom,repeatFlag:e.repeatFlag}),e.repeatFrom!==r.get("repeatFrom")&&e.repeatFrom&&In.b(e.repeatFrom),this.analyticData.isOpenMonthSection&&In.d("open_month"),this.analyticData.isUseNextMonthBtn&&In.d("next_month"),this.analyticData.isUsePrevMonthBtn&&In.d("prev_month")}},{key:"buildOutputTaskData",value:function(){var e=this.state.data,t=qs(e.toJS());this.modes.isSubTask&&(t.timeZone=this.originalStateData.get("logicTimeZone"));var n=this.state.isBatchEdit;return n&&(t.isBatchMode=n),t}}])&&Yf(t.prototype,n),a&&Yf(t,a),c}(Y.a.Component),Jf=Object(V.c)((function(e,t){return{isTimeZoneOptionEnabled:e.preference.get("isTimeZoneOptionEnabled")||!1}}))(qf);function $f(e){return($f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ep(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function tp(){return(tp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function np(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rp(e,t){return(rp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ap(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cp(e);if(t){var a=cp(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ip(this,n)}}function ip(e,t){return!t||"object"!==$f(t)&&"function"!=typeof t?op(e):t}function op(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cp(e){return(cp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rp(e,t)}(c,e);var t,n,a,o=ap(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).prevIsDragOver=!1,t.tempDisableUpdateTitle=!1,t.toggleComplete=t.toggleComplete.bind(op(t)),t.handlePasteTitle=t.handlePasteTitle.bind(op(t)),t.handleUpdateTitle=t.handleUpdateTitle.bind(op(t)),t.handleFocusTitle=t.handleFocusTitle.bind(op(t)),t.handleBlurTitle=t.handleBlurTitle.bind(op(t)),t.listenKeyDown=t.listenKeyDown.bind(op(t)),t.listenKeyPress=t.listenKeyPress.bind(op(t)),t.listenKeyUp=t.listenKeyUp.bind(op(t)),t.toggleTimecard=t.toggleTimecard.bind(op(t)),t.hideTimecard=t.hideTimecard.bind(op(t)),t.confirmTime=t.confirmTime.bind(op(t)),t.clearTime=t.clearTime.bind(op(t)),t.checkedDisabledSubTask=t.checkedDisabledSubTask.bind(op(t)),t.editDisabledSubTask=t.editDisabledSubTask.bind(op(t)),t.setDisabledSubTaskReminder=t.setDisabledSubTaskReminder.bind(op(t)),t.saveTaskWithoutToast=t.saveTaskWithoutToast.bind(op(t)),t.state={disabledSyntax:new Set([]),edited:!1,showTimecard:!1},t.debounceChangeTitle=i.a.debounce(t.__changeTitle,R.x),t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props.model.toObject().id;this.props.active&&this.domEditor&&this.domEditor.getEditor()&&this.domEditor.getEditor().focus(),this.initTypeahead(),f.a.subscribe("checklist_".concat(t),uy,(function(t){var n=t.disabledSyntax;e.setState({disabledSyntax:n})}))}},{key:"componentDidUpdate",value:function(e){var t=this.props.active;e.active!==t&&t&&this.domEditor&&this.domEditor.getEditor()&&this.domEditor.getEditor().focus()}},{key:"componentWillReceiveProps",value:function(e){i.a.isEqual(e.tagList,this.props.tagList)||this.domEditor&&this.domEditor.getEditor()&&$(this.domEditor.getEditor()).data("typeahead")&&$(this.domEditor.getEditor()).data("typeahead").updateSource(e.tagList),e.isDragOver!==this.props.isDragOver&&!1===e.isDragOver&&(En.c(),y.a.dragHoverTarget="")}},{key:"componentWillUnmount",value:function(){var e=this.props.model.toObject().id;f.a.unSubscribe("checklist_".concat(e),uy)}},{key:"render",value:function(){var e=this.props,t=e.isReadOnly,n=e.isDragOver;return this.prevIsDragOver!==n&&!1===n&&(ks(),y.a.dragHoverTarget=""),this.prevIsDragOver=n,t?this.renderDisableItem():this.renderItem()}},{key:"renderItem",value:function(){var e=this,t=this.props,n=t.connectDragSource,r=t.connectDragPreview,a=t.connectDropTarget,i=t.isReadOnly,o=this.props.model.toObject(),c=o.id,s=o.status,u=this.props.active,l=this.props.intl,d=this.state.disabledSyntax,f=l.formatMessage({id:"placeholder_task_subtask"}),p=this.getDateInfo(),h={subtaskid:c,taskid:this.props.taskId},m=this.getTimecardOptions(),g=document.getElementById("content-view");return a(Y.a.createElement("li",tp({ref:function(t){e.$el=t,e.$dnd=t},className:K()("sub-task",{checked:s>0,active:u})},h),n(Y.a.createElement("span",{className:"drag"},Y.a.createElement(Q.a,{name:"drag",className:"i-7 i-mic"}))),Y.a.createElement("span",{className:"checker st-checker check-toggle avoid-event cr-pointer",onClick:this.toggleComplete},Y.a.createElement(Q.a,{name:"completed",className:"i-o-12 i-tny"}),Y.a.createElement(Q.a,{name:"checkbox",className:"i-4 i-tny"})),Y.a.createElement("a",{className:"remove line-right",onClick:function(t){t.preventDefault(),In.u("delete_icon"),e.props.onDelete(e.props.model.get("id"))}},Y.a.createElement(Q.a,{name:"delete-subtask",className:"i-4"})),Y.a.createElement("div",{ref:"timecardTrigger",className:"tips line-right reminder-setting active timecard-trigger"},Y.a.createElement("a",{className:K()("tip reminder-hint",{hide:!p.hasReminder&&p.dateString,show:p.dateString}),onClick:this.toggleTimecard},Y.a.createElement(Q.a,{name:"item-reminder",className:K()({"i-4":!p.dateString,"fill-theme":p.dateString})})),Y.a.createElement("a",{className:K()("tip date-hint i-5",{"duedate-overdue":p.isOverdue}),onClick:this.toggleTimecard},p.dateString),this.state.showTimecard&&Y.a.createElement(Jf,{isBoult:!0,className:"task-detail-element",trigger:this.refs.timecardTrigger,scroller:g,container:document.body,options:m,onUnmountCard:this.hideTimecard,onSettingsUpdate:this.previewTime,onConfirmTime:this.confirmTime,onClearTime:this.clearTime,quickSetOptions:this.getQuickSetOptions()})),Y.a.createElement("div",{ref:"title",className:"editor-container"},Y.a.createElement(Ws,{id:c,className:"editor-with-link can-select title typeahead",ref:function(t){return e.domEditor=t},spellCheck:!1,readOnly:i,placeholder:f,hidePlaceholder:!1,value:this.props.model.get("title"),listenKeyDown:this.listenKeyDown,listenKeyPress:this.listenKeyPress,listenKeyUp:this.listenKeyUp,listenPaste:this.handlePasteTitle,onChange:this.handleUpdateTitle,onFocus:this.handleFocusTitle,onBlur:this.handleBlurTitle,onSave:this.saveTaskWithoutToast,lineWrapping:!0,disabledSyntax:d})),Y.a.createElement("div",{className:"line"}),r(this.getDragHelper())))}},{key:"getDragHelper",value:function(){var e=this;return Y.a.createElement("div",{className:"sub-task drag-help ui-sortable-helper hide",style:{position:"absolute",top:0,left:0,zIndex:-1},ref:function(t){e.$helper=t}})}},{key:"renderDisableItem",value:function(){var e=this.props.model.toObject(),t=e.id,n=e.title,r=e.status,a=this.getDateInfo(),i={subtaskid:t,taskid:this.props.taskId};return Y.a.createElement("li",tp({className:K()("sub-task",{checked:r>0})},i),Y.a.createElement("span",{className:"checker cr-disabled",disabled:!0,onClick:this.checkedDisabledSubTask},Y.a.createElement(Q.a,{name:"completed",className:"i-o-12 i-tny"}),Y.a.createElement(Q.a,{name:"checkbox",className:"i-4 i-tny"})),Y.a.createElement("div",{disabled:!0,className:"tips line-right reminder-setting cr-disabled",onClick:this.setDisabledSubTaskReminder},Y.a.createElement("a",{className:K()("tip date-hint avoid-event cr-disabled",{"duedate-overdue":a.isOverdue})},a.dateString)),Y.a.createElement("div",{className:"editor-container",onClick:this.editDisabledSubTask,disabled:!0},Y.a.createElement("div",{className:"editor-with-link can-select title typeahead"},n)))}},{key:"checkedDisabledSubTask",value:function(){this.props.isScheduleOwner||g.b({text:this.props.intl.formatMessage({id:"toggle_schedule_subtask_limit"})})}},{key:"editDisabledSubTask",value:function(){this.props.isScheduleOwner||g.b({text:this.props.intl.formatMessage({id:"edit_schedule_content_limit"})})}},{key:"setDisabledSubTaskReminder",value:function(){this.props.isScheduleOwner||g.b({text:this.props.intl.formatMessage({id:"edit_schedule_date_limit"})})}},{key:"getDateInfo",value:function(){var e=this.props.model,t=e.get("startDate"),n=!1,r="",a=!1;if(!rn.h(e))return{hasReminder:n,dateString:r,isOverdue:a};n=!!rn.e(e);var i=rn.c(e);if(i)r=i;else{e.get("startDate"),r=rn.b(e);var o=U.a.getDueDateLocalZoneDate(t),c=U.a.prefMoment();a=o.diff(c.startOf("day"),"days")<0}return{hasReminder:n,dateString:r,isOverdue:a}}},{key:"getTimecardOptions",value:function(){var e=this.props,t=e.model,n=e.isFloating,r=e.timeZone,a=rn.h(t)?t.get("startDate"):null;return{meridiem:x.b("showMeridiem"),weekStart:x.s(),format:ie.m.atomTime,startDate:a,isAllDay:t.get("isAllDay"),exDate:t.get("exDate"),isFloating:n,timeZone:r,isSubtaskMode:!0}}},{key:"getQuickSetOptions",value:function(){var e=this,t=this.props.model;return{willRepeat:!1,startDate:rn.h(t)?t.get("startDate"):null,onSkipThisPeriod:function(){},setTime:function(t){var n=e.props,r=n.model,a=n.task,i=t,o=!0,c=r.get("startDate");if(U.a.getDueDateText(c)!==i){rn.h(r)&&!1===r.get("isAllDay")&&(i+=" "+U.a.prefMoment(c).format("HH:mm"),o=!1);var s=U.a.formatToUtcString(i);a.get("isRepeatBody")&&(s=e.calDateDiff(U.a.formatToUtcString(i))),e.changeTime(r.get("id"),{startDate:s,isAllDay:o,snoozeReminderTime:"",timeZone:r.get("timeZone")||zs.h})}e.hideTimecard()}}}},{key:"toggleTimecard",value:function(e){if(!Qe.d())return e.preventDefault(),e.stopPropagation(),void nd.a({type:ie.c.subtaskReminder});this.setState({showTimecard:!this.state.showTimecard})}},{key:"hideTimecard",value:function(){this.setState({showTimecard:!1})}},{key:"calDateDiff",value:function(e){var t=this.props,n=t.taskId,r=t.task,a=T.n(n),i=r.get("startDate"),o=U.a.prefMoment(i).diff(a.get("startDate"),"days");return U.a.formatToUtc(U.a.prefMoment(e).subtract(o,"days"))}},{key:"confirmTime",value:function(e){var t=this.props,n=t.model,r=t.task,a=e.startDate;r.get("isRepeatBody")&&(a=this.calDateDiff(e.startDate)),this.changeTime(n.get("id"),{startDate:a,isAllDay:e.isAllDay,snoozeReminderTime:"",timeZone:e.timeZone}),this.setState({showTimecard:!1})}},{key:"clearTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.changeTime(this.props.model.get("id"),{startDate:-1,isAllDay:null,snoozeReminderTime:"",timeZone:e.timeZone}),this.setState({showTimecard:!1})}},{key:"changeTime",value:function(e,t){var n=this.props.taskId,r=[],a=t.timeZone,i=ep(t,["timeZone"]);r.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xf(Object(n),!0).forEach((function(t){Qf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e},i)),this.props.updateSubTasks(n,r),bt.u(n),bt.x(n,a)}},{key:"toggleComplete",value:function(){var e=this.props.model.get("id");this.props.model.get("status")?In.u("undo"):In.u("done"),this.props.onToggle(e)}},{key:"handlePasteTitle",value:function(e){var t,n=e.clipboardData||window.clipboardData||e.originalEvent.clipboardData;if(n.items&&n.items.length>1&&"string"!==n.items[1].kind)e.stopPropagation(),e.preventDefault();else if(e.preventDefault(),t=window.clipboardData&&window.clipboardData.setData?n.getData("text"):n.getData("text/plain"),(t=A.n(t)).match(/[\n\r]/)){var a=t.split(/[\n\r]/).filter((function(e){var t=O.c(e);return e&&$.trim(t).length}));if(Oo.f(a.length,this.props.taskId))this.domEditor.getValue().length+t.length<To.a.subtaskWordLimit&&document.execCommand("insertText",!1,_r(t.replace(/[\n\r]/g," ")));else{var i=Object(r.fromJS)(a.map((function(e){return{id:Object(Vs.a)(),title:e,status:0,sortOrder:0}})));this.props.onPasteMulti(i,this.props.model)}}else this.domEditor.getValue().length+t.length<=To.a.subtaskWordLimit?document.execCommand("insertText",!1,_r(t)):g.b({text:this.props.intl.formatMessage({id:"characters_upper_limit"})})}},{key:"handleUpdateTitle",value:function(e){e.length<To.a.taskTitleWordLimit&&this.debounceChangeTitle()}},{key:"__changeTitle",value:function(e){if(this.domEditor){if(this.tempDisableUpdateTitle)return;var t=this.domEditor.getValue(),n=this.props.model,r=this.props.taskId,a=n.get("id");(t!==n.get("title")||e)&&this.props.updateSubTasks(r,[{id:a,title:t}])}}},{key:"handleFocusTitle",value:function(){cy()}},{key:"handleBlurTitle",value:function(){var e=this.props.taskId;sy(),this.__changeTitle(),bt.u(e)}},{key:"listenKeyDown",value:function(e){e=e||window.event;var t=$(e.target).text();if(e.keyCode===tc.a.up_arrow)this.handleOnArrow("up",e);else if(e.keyCode===tc.a.down_arrow)this.handleOnArrow("down",e);else if(e.keyCode===tc.a.tab)y.a.keydownTab=!0,e.preventDefault();else if(e.keyCode===tc.a.backspace)e.metaKey?(this.handleDelete(e),In.u("delete_back")):this.handleBackspace(e);else if(e.keyCode===tc.a.delete&&(e.ctrlKey||e.metaKey))this.handleDelete(e),In.u("delete_back");else if(e.keyCode===tc.a.enter)this.handleReturn(e);else if(e.keyCode===tc.a.s&&(e.ctrlKey||e.metaKey))e.preventDefault(),this.saveTask();else if(Oo.e(e,t+"1"))return e.preventDefault(),e.stopPropagation(),g.b({text:this.props.intl.formatMessage({id:"characters_upper_limit"})}),!1}},{key:"listenKeyPress",value:function(e){switch(e.charCode){case tc.a[0]:case tc.a[1]:case tc.a[2]:case tc.a[3]:y.a.keydownTab&&e.preventDefault()}}},{key:"listenKeyUp",value:function(e){switch(e.keyCode){case tc.a.tab:y.a.stopTabUp?y.a.stopTabUp=!1:y.a.keydownTab&&(e.shiftKey?this.handleTab("back",e):this.handleTab("forward",e)),y.a.keydownTab&&(y.a.keydownTab=!1);break;case tc.a[0]:y.a.keydownTab&&this.handleShortcutTimeclear();break;case tc.a[1]:y.a.keydownTab&&this.handleShortcutTimeSet(0);break;case tc.a[2]:y.a.keydownTab&&this.handleShortcutTimeSet(1);break;case tc.a[3]:y.a.keydownTab&&this.handleShortcutTimeSet(7)}}},{key:"handleShortcutTimeclear",value:function(){if(Qe.d()){var e=this.props.model;this.changeTime(e.get("id"),{startDate:-1,isAllDay:null,snoozeReminderTime:"",timeZone:zs.h})}y.a.stopTabUp=!0}},{key:"handleShortcutTimeSet",value:function(e){if(Qe.d()){var t=this.props,n=t.model,r=t.task,a=U.a.getStartOfDay(e,"days","YYYY-MM-DD"),i=!0,o=n.get("startDate");if(U.a.getDueDateText(o)!==a){rn.h(n)&&!1===n.get("isAllDay")&&(a+=" "+U.a.prefMoment(o).format("HH:mm"),i=!1);var c=U.a.formatToUtcString(a);r.get("isRepeatBody")&&(c=this.calDateDiff(U.a.formatToUtcString(a))),this.changeTime(n.get("id"),{startDate:c,isAllDay:i,snoozeReminderTime:""})}}y.a.stopTabUp=!0}},{key:"handleOnArrow",value:function(e,t){if("up"===e&&this.isNeedActivePrevItem()){t.preventDefault();var n=this.props.model.get("id");this.props.onActivePrevItem(n)}if("down"===e&&this.isNeedActiveNextItem()){t.preventDefault();var r=this.props.model.get("id");this.props.onActiveNextItem(r)}}},{key:"handleTab",value:function(e,t){if(t.preventDefault(),"back"===e){var n=this.props.model.get("id");this.props.onActivePrevItem(n)}if("forward"===e){var r=this.props.model.get("id");this.props.onActiveNextItem(r)}}},{key:"handleReturn",value:function(e){var t=this;e.preventDefault();var n=this.props.model.get("id");if(Oo.f(1,this.props.taskId))$("body").focus(),nd.a({type:ie.c.subtask});else{var r,a=this.props.model.get("status")>0,i={id:Object(Vs.a)(),title:"",status:0};if(a);else{var o=this.domEditor.getValue(),c=Is(o),s=En.k(this.domEditor.getEditor()),u=c.length===s,l=o.length!==c.length&&!u,d=u?o:o.slice(0,s),f=u?"":o.slice(s);if(d)l?(i.title="",r={id:n,title:o}):(i.title=f,r={id:n,title:d});else{var p=this.props.model,h=p.get("isAllDay"),m=p.get("snoozeReminderTime"),g=p.get("startDate");i.isAllDay=h,i.snoozeReminderTime=m,i.startDate=g,i.title=f,r={id:n,title:"",isAllDay:!1,snoozeReminderTime:null,startDate:-1}}}this.tempDisableUpdateTitle=!0,this.props.onEnter(i,r,a,(function(){return t.tempDisableUpdateTitle=!1}))}}},{key:"handleDelete",value:function(e){e.preventDefault();var t=this.props.model.get("id");this.props.onActiveNextItem(t)||this.props.onActivePrevItem(t,isOnlyAtSubItem),this.props.onDelete(t)}},{key:"handleBackspace",value:function(e){var t=this.props.model.get("id"),n=$(this.$el).prevAll();if(this.domEditor){var r=this.isContinueInput(Date.now());this.domEditor.getValue().length<=1&&r||(r&&y.a.taskJustDeleted?e.preventDefault():n.length&&""===this.domEditor.getValue()&&0===En.i(this.domEditor.getEditor())&&(y.a.taskJustDeleted=!0,setTimeout((function(){y.a.taskJustDeleted=!1}),1e3),e.preventDefault(),this.props.onDelete(t,this.domEditor.getValue(),!0)))}}},{key:"isContinueInput",value:function(e){var t=e-y.a.taskLastDeletedTime<200;return y.a.taskLastDeletedTime=e,t}},{key:"isNeedActivePrevItem",value:function(){if(this.domEditor){var e=$(this.domEditor.getEditor()),t=En.j(),n=parseInt(e.css("padding-top"),10),r=e.offset().top+n;return Math.abs(t.top-r)<=2||!e.text()}}},{key:"isNeedActiveNextItem",value:function(){if(this.domEditor){var e=$(this.domEditor.getEditor()),t=En.j(),n=parseInt(e.css("padding-top"),10),r=e.offset().top+n,a=e.height();return Math.abs(t.bottom-(r+a))<=2||!e.text()}}},{key:"saveTask",value:function(){var e=this.props,t=e.taskId,n=e.intl;En.w(n.formatMessage({id:"saving"}),1e3),bt.u(t)}},{key:"saveTaskWithoutToast",value:function(){var e=this.props.taskId;bt.u(e)}},{key:"initTypeahead",value:function(){if(this.domEditor){var e=this,t=zt.k();t.select=function(){var t=this.getActiveItem(),n=t?t.value||t:this.Tick.matchStr;if(e.domEditor.removeTagNode(this.Tick,this.Tick.matchStr),this.hide(),t.create){var a=zt.a({name:n.toLowerCase(),label:n});if(!a)return;e.props.addTag(a)}var i=bt.a(Object(r.Map)({id:e.props.taskId}),n,{sync:!1});e.__changeTitle(),i.get("isDirty")&&b.a.doSync()},t.onShow=function(){e.domEditor.addHighlight(this.Tick)},t.onHide=function(){e.domEditor.removeHighlight()};var n=$(this.domEditor.getEditor());n.length&&n.typeahead(t)}}}])&&np(t.prototype,n),a&&np(t,a),c}(Y.a.Component),up=Object(vs.compose)(Object(V.c)((function(e){return{tagList:zt.e(e.tags)}}),(function(e){return{addTag:function(t){e(So.a(t))},updateSubTasks:function(t,n,r,a){return e(F.C(t,n,r,a))}}})),me.c,js,_s)(sp);function lp(e){return(lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fp(e,t){return(fp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gp(e);if(t){var a=gp(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return hp(this,n)}}function hp(e,t){return!t||"object"!==lp(t)&&"function"!=typeof t?mp(e):t}function mp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gp(e){return(gp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fp(e,t)}(o,e);var t,n,r,a=pp(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).state={activeSubTaskId:""},t.createOnEnter=t.createOnEnter.bind(mp(t)),t.toggleSubTask=t.toggleSubTask.bind(mp(t)),t.deleteSubTask=t.deleteSubTask.bind(mp(t)),t.deleteSubTaskFromList=t.deleteSubTaskFromList.bind(mp(t)),t.activePrevItem=t.activePrevItem.bind(mp(t)),t.activeNextItem=t.activeNextItem.bind(mp(t)),t.createOnPaste=t.createOnPaste.bind(mp(t)),t.listenId=i.a.uniqueId(),t.rootRef=Y.a.createRef(),t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;f.a.subscribe(this.listenId,"focusToFirstSubTask",(function(){var t=$(e.rootRef.current).find("li").first();if(t){var n=e.findContentEditable(t);e.focusItemAtEnd(n),e.activeItem(t.attr("subtaskid"))}})),f.a.subscribe(this.listenId,"deleteSubTask",this.deleteSubTaskFromList),this.props.activeTaskId===this.props.task.get("id")&&this.props.activeSubTaskId&&this.initOpenEffect()}},{key:"componentDidUpdate",value:function(e){this.props.activeTaskId===this.props.task.get("id")&&this.props.activeSubTaskId&&this.props.activeSubTaskId!==e.activeSubTaskId&&this.initOpenEffect()}},{key:"componentWillUnmount",value:function(){f.a.unSubscribe(this.listenId,"focusToFirstSubTask"),f.a.unSubscribe(this.listenId,"deleteSubTask")}},{key:"getContentView",value:function(){return this.rootRef.current?$(this.rootRef.current).closest("#content-view"):null}},{key:"initOpenEffect",value:function(){var e=this.props.activeSubTaskId,t=$(this.rootRef.current).find('[subtaskid="'+e+'"]'),n=this.getContentView();if(t.length&&n){var r=t.offset().top-n.offset().top,a=n.scrollTop(),i=n.outerHeight();if(a+i<r){var o=r-i/2,c=parseInt(o/10,10);n.scrollTo(o<0?0:o,Math.max(c,100))}setTimeout((function(){t.addClass("opened"),setTimeout((function(){t.removeClass("opened")}),1e3)}))}}},{key:"activeItem",value:function(e,t){this.setState({activeSubTaskId:e},(function(){t&&t()}))}},{key:"activePrevItem",value:function(e,t){var n=$(this.rootRef.current).find("[subtaskid="+e+"]"),r=n.prevAll("li").length?n.prevAll("li").eq(0):null;if(null!=r){var a=this.findContentEditable(r);return this.focusItemAtStart(a),this.activeItem(r.attr("subtaskid")),!0}return!t&&(this.props.task.get("desc")?(f.a.dispatch("focusToDetailDesc"),this.activeItem(),!0):(this.activeItem(),f.a.dispatch("focusToDetailTitle"),!0))}},{key:"activeNextItem",value:function(e){var t=$(this.rootRef.current).find("[subtaskid="+e+"]"),n=t.nextAll("li").length?t.nextAll("li").eq(0):null;if(null!=n){var r=this.findContentEditable(n);return this.focusItemAtEnd(r),this.activeItem(n.attr("subtaskid")),!0}return!1}},{key:"focusItemAtEnd",value:function(e){e.text()?En.p(e[0],!1):e.focus()}},{key:"focusItemAtStart",value:function(e){e.text()?En.o(e[0],0):e.focus()}},{key:"deleteSubTaskFromList",value:function(e){this.deleteSubTask(e,null,null,!0)}},{key:"deleteSubTask",value:function(e,t,n){var r,a,i=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=$(this.rootRef.current).find("[subtaskid="+e+"]"),s=c.prevAll("li:not(.ui-sortable-placeholder)"),u=c.nextAll("li:not(.ui-sortable-placeholder)"),l=!s.length&&!u.length,d=!s.length,f=this.props.task,p=f.get("id"),h=[],y=[],k=f.get("items").find((function(t){return t.get("id")===e}));if(l)h.push({id:e,title:"",completedTime:"",startDate:null,isAllDay:!0,snoozeReminderTime:"",status:0}),a=0,r=e;else if(d)y.push(e),a=0,r=$(u).attr("subtaskid");else{var O=s.first().attr("subtaskid");if(t){var T=f.get("items").find((function(e){return e.get("id")===O})),S=T.get("title");k.get("status")||!Object(rn.h)(k)||Object(rn.h)(T)?h.push({id:O,title:S+t}):h.push({id:O,isAllDay:k.get("isAllDay"),startDate:k.get("startDate"),snoozeReminderTime:k.get("snoozeReminderTime"),title:S+t}),y.push(e),a=S.length,r=O}else{y.push(e);var E=s.first().attr("subtaskid");a="end",r=E}}if(this.props.updateSubTasks(p,h,y),n){var w=$(this.rootRef.current).find('.sub-task[subtaskid="'+r+'"]');this.activeItem(r,(function(){var e=i.findContentEditable(w)[0];e&&("end"===a?En.p(e,!1,!0):En.o(e,a,!0))})),bt.u(p)}else{this.activeItem();var D=m.d({type:"deleteSubTask",data:{taskId:p,item:k.toJS(),deletedFromList:o}});g.b({text:v.a("subtask_deleted"),key:D,closable:!1,actionText:v.a("undo"),actionType:"undo",onAction:function(){m.b(D)},onRemove:function(){m.e(D),b.a.doSync()}})}}},{key:"toggleSubTask",value:function(e){var t=this.props,n=t.task;t.generateTask?f.a.dispatch("showHandleGenerateTaskModal",{type:"checklist",subtaskId:e}):bt.D(n,e)}},{key:"createOnEnter",value:function(e,t,n,r){var a=this.props.task,o=a.get("id"),c=[];if(n){var s=a.get("items"),u=s.filter((function(e){return 0===e.status})).sort(tt.a.order).last();if(u){var l=w.f(a,u.get("id"),e.id);i.a.forEach(l,(function(t,n){n===e.id?e.sortOrder=t:c.push({id:n,sortOrder:t})}))}else{var d=s.sort(tt.a.order).first();e.sortOrder=d?d.get("sortOrder")-R.t:0}c.push(e)}else{var f=w.f(a,t.id,e.id);i.a.forEach(f,(function(n,r){r===e.id?e.sortOrder=n:r===t.id?t.sortOrder=n:c.push({id:r,sortOrder:n})})),c.push(e),c.push(t)}this.props.updateSubTasks(o,c),bt.u(o),this.setState({activeSubTaskId:e.id},(function(){r&&r()}))}},{key:"createOnPaste",value:function(e,t){var n,r,a=this.props.task,i=a.get("id"),o=a.get("items").sort(tt.a.subtask);(n=(n=-1===(r=t.get("status")>0?o.findIndex((function(e){return e.get("status")>0}))-1:o.findIndex((function(e){return e.get("id")===t.get("id")})))?e.concat(o):o.slice(0,r+1).concat(e).concat(o.slice(r+1,o.size))).toJS()).forEach((function(e,t){e.sortOrder=t*R.t})),this.props.updateSubTasks(i,n),bt.u(i)}},{key:"findContentEditable",value:function(e){return e.find(".title>[contentEditable]")}},{key:"render",value:function(){var e=this,t=this.props,n=t.isScheduleOwner,r=t.isReadOnly,a=t.task,i=t.onAction,o=t.generateTask,c=o?o.get("items"):a.get("items"),s=a.get("id"),u=a.get("isFloating"),l=w.Q(a)?zs.h:a.get("timeZone");return Y.a.createElement("ul",{id:"sub-task-list",className:K()("subtasks b-h",{"more-one":c.size>1}),ref:this.rootRef},c.sort(tt.a.subtask).map((function(t){return Y.a.createElement(up,{showPlaceholder:1===c.size,key:t.get("id"),model:t,taskId:s,task:o||a,isFloating:u,timeZone:l,active:t.get("id")===e.state.activeSubTaskId,onToggle:e.toggleSubTask,onEnter:e.createOnEnter,onPasteMulti:e.createOnPaste,onDelete:e.deleteSubTask,isReadOnly:r,isScheduleOwner:n,onActivePrevItem:e.activePrevItem,onActiveNextItem:e.activeNextItem,onAction:i})})),Y.a.createElement("li",{id:"subtask-sortable-placeholder",className:"subtask ui-sortable-placeholder hide"}))}}])&&dp(t.prototype,n),r&&dp(t,r),o}(Y.a.Component),yp=Object(V.c)(null,(function(e){return{updateSubTasks:function(t,n,r){return e(F.C(t,n,r))}}}))(vp);n(588),n(215);function bp(){return Y.a.createElement("div",null,Y.a.createElement("ul",{className:"css-loading"},Y.a.createElement("li",null),Y.a.createElement("li",null),Y.a.createElement("li",null)))}function kp(e){return(kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Op(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tp(e,t){return(Tp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wp(e);if(t){var a=wp(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ep(this,n)}}function Ep(e,t){return!t||"object"!==kp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wp(e){return(wp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Dp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tp(e,t)}(o,e);var t,n,r,a=Sp(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e))._listenId=i.a.uniqueId(),t.rootRef=Object(B.createRef)(),t.fancyBoxRef=Object(B.createRef)(),t.imageThumbRef=Object(B.createRef)(),t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props.model;this.isMedia(t)&&(this.showColorBoxTid=setTimeout((function(){e.showColorBoxTid=null,e.showColorBox()}),500)),t.get("isLocal")&&this.rootRef.current&&$(this.rootRef.current).closest("#content-view").scrollTo($(this.rootRef.current),1e3),f.a.subscribe(this._listenId,"refreshAttachmentImage",this.refreshImage.bind(this))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.model;this.showColorBoxTid||this.isMedia(e.model)===this.isMedia(t)||this.isMedia(e.model)&&this.showColorBox()}},{key:"componentWillUnmount",value:function(){this.showColorBoxTid&&clearTimeout(this.showColorBoxTid),f.a.unSubscribe(this._listenId,"refreshAttachmentImage")}},{key:"getRenderData",value:function(){var e=this.props.model,t=i.a.extend(e.toObject(),{baseUrl:this._getBaseUrl(),fullUrl:this._getFullUrl(),downUrl:this._getDownUrl(),sizeMb:this._formatFileSize(e.get("size")),type:e.get("fileType").toLowerCase(),iconClass:this.getIconClass(),filePreviewUrl:this._getFilePreviewUrl()});return ie.g.image.test(e.get("fileType"))&&(t.thuUrl=this._getThuUrl()),t}},{key:"getIconClass",value:function(){var e=this.props.model.get("fileType").toLowerCase();return"voice"===e&&(e="audio"),"rar"!==e&&"zip"!==e||(e="package"),ie.g[e]||(e="other"),e}},{key:"_getBaseUrl",value:function(){var e=this.props;return e.projectId+"/"+e.taskId+"/"+e.model.get("id")}},{key:"_getFullUrl",value:function(){var e=this.props.model,t=this._substrFileName(e.get("fileName"));return R.j.API_HOST_V1+"/attachment/"+this._getBaseUrl()+t}},{key:"_getThuUrl",value:function(){return R.j.API_HOST_V1+"/attachment/thumbnail/"+this._getBaseUrl()+"?size=s"}},{key:"_getDownUrl",value:function(){return R.j.API_HOST_V1+"/attachment/"+this._getBaseUrl()+"?action=download"}},{key:"_getFilePreviewUrl",value:function(){var e=this.props.model.get("fileType").toLowerCase(),t=R.j.API_HOST_V1+"/attachment/"+this._getBaseUrl()+"?action=preview";return["pdf"].indexOf(e)>-1?t:null}},{key:"_substrFileName",value:function(e){return e.substr(e.lastIndexOf(".")).toLowerCase()}},{key:"_formatFileSize",value:function(e){var t=0;return e<1e3?t=e+" B":e<1e6?(t=(e/1e3).toFixed(2),t+=" K"):(t=(e/1e6).toFixed(2),t+=" M"),t}},{key:"_baseMatch",value:function(e,t){var n="\\.("+ie.k[t].join("|")+")((#|\\?).*)?$";return new RegExp(n).test(e)}},{key:"isVideo",value:function(e){return this._baseMatch(e,"VIDEO")}},{key:"isAudio",value:function(e){return this._baseMatch(e,"AUDIO")}},{key:"showColorBox",value:function(){var e=this;setTimeout((function(){$(e.fancyBoxRef.current).colorbox({rel:"group",opacity:1,maxHeight:"85%",html:function(){var t,n=$(this).attr("href");return e.isVideo(n)||e.isAudio(n)?(e.isAudio(n)?(t="<audio",t+=' width="460" height="180"',$("#cboxContent").css("background","#000")):(t='<video poster="/static/img/colorbox/video/',t+='video.png" width="640" height="360"',$("#cboxContent").css("background","#fff")),t+='controls="controls" preload="none"><source type="video/mp4" src="'+n+'" /><source type="video/webm" src="'+n+'" /><source type="video/ogg" src="'+n+'" /><object width="460" height="260" type="application/x-shockwave-flash" data="'+n+'"><param name="movie" value="'+n+'" /><param name="flashvars" value="controls=true&file='+n+'" /></object></video>'):null}})}))}},{key:"refreshImage",value:function(){this.imageThumbRef.current&&(this.imageThumbRef.current.src+="&t="+(new Date).getTime())}},{key:"isMedia",value:function(e){var t=e.get("fileType").toLowerCase();return["image","audio","video","voice"].indexOf(t)>-1}},{key:"render",value:function(){var e=this.props,t=e.isReadOnly,n=e.onDelete,r=e.model,a=this.getRenderData(),i=this.isMedia(r);return Y.a.createElement("li",{ref:this.rootRef},Y.a.createElement("div",{className:K()("attachment",a.type,{uploading:a.isLocal})},Y.a.createElement("a",{className:K()("fancybox",{hide:!i}),rel:"group",ref:this.fancyBoxRef,href:a.fullUrl}),"image"===a.type?Y.a.createElement("img",{ref:this.imageThumbRef,src:a.isLocal?a.previewUrl:a.thuUrl}):Y.a.createElement("div",{className:"hint"},Y.a.createElement(Q.a,{name:a.iconClass})),Y.a.createElement("div",{className:"info line-left"},Y.a.createElement("div",{className:"name"},a.fileName),Y.a.createElement("div",{className:"size text-tny text-info"},a.sizeMb)),a.filePreviewUrl&&Y.a.createElement("div",{className:"preview-url"},Y.a.createElement("a",{href:a.filePreviewUrl,target:"_blank"})),Y.a.createElement("div",{className:"action line-right"},Y.a.createElement("a",{className:"download",value:"download",href:a.downUrl,target:"_blank",accept:"image/gif, image/jpeg, application/pdf, cation/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword"},Y.a.createElement(Q.a,{name:"download",className:"i-2"})),Y.a.createElement("a",{className:{del:!t},disabled:t,onClick:t?void 0:function(e){n(a.id,a.baseUrl)}},Y.a.createElement(Q.a,{name:"delete-list",className:"i-2"}))),Y.a.createElement("div",{className:"loading"},Y.a.createElement(bp,null))))}}])&&Op(t.prototype,n),r&&Op(t,r),o}(Y.a.Component);function jp(e){return(jp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cp(e,t){return(Cp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ip(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xp(e);if(t){var a=xp(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Mp(this,n)}}function Mp(e,t){return!t||"object"!==jp(t)&&"function"!=typeof t?Ap(e):t}function Ap(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xp(e){return(xp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Rp=function(e,t){if("IMAGE"===e.get("fileType")&&"IMAGE"!==t.get("fileType"))return-1;if("IMAGE"===t.get("fileType")&&"IMAGE"!==e.get("fileType"))return 1;var n=e.get("createdTime"),r=t.get("createdTime");return n=n?U.a.prefMoment(n).getTime():(new Date).getTime(),(r=r?U.a.prefMoment(r).getTime():(new Date).getTime())-n},Pp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cp(e,t)}(c,e);var t,n,a,o=Ip(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),t=o.call(this,e);var n=e.task.get("attachments");return t.state={attachmentList:n?n.sort(Rp):Object(r.List)()},t.deleteFile=t.deleteFile.bind(Ap(t)),t.afterSelectFile=t.afterSelectFile.bind(Ap(t)),t.listenId=i.a.uniqueId(),t.rootRef=Y.a.createRef(),t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this.props.adjustDetailContentHeight;e&&e(),f.a.subscribe(this.listenId,"selectFileBeforeUpload",this.afterSelectFile),this.initDropImage(),this.initPasteImage()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=e.task,a=e.isScheduleOwner,i=this.props,o=i.task,c=i.isScheduleOwner;Object(r.is)(n.get("attachments"),o.get("attachments"))||(n.get("attachments")?this.setState({attachmentList:n.get("attachments").sort(Rp)}):this.setState({attachmentList:Object(r.List)()}));var s=n.get("items")?n.get("items").size:0,u=o.get("items")?o.get("items").size:0;c!==a?a?(this.initDropImage(),this.initPasteImage()):(this.removePasteImage(),this.removeDropImage()):s!==u&&(this.removePasteImage(),setTimeout((function(){t.initPasteImage()})))}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.adjustDetailContentHeight,a=this.state.attachmentList;Object(r.is)(t.attachmentList,a)||n&&n()}},{key:"componentWillUnmount",value:function(){this.removeDropImage(),this.removePasteImage(),f.a.unSubscribe(this.listenId,"selectFileBeforeUpload")}},{key:"getContentView",value:function(){return this.rootRef.current?$(this.rootRef.current).closest("#content-view"):null}},{key:"getTaskTitleView",value:function(){var e=this.getContentView();return e?e.find(".td-caption .title textarea"):null}},{key:"getTaskContentView",value:function(){var e=this.getContentView();return e?e.find(".td-task-text textarea"):null}},{key:"getTaskDescView",value:function(){var e=this.getContentView();return e?e.find(".td-sub-desc textarea"):null}},{key:"getSubTaskTitleView",value:function(){var e=this.getContentView();return e?e.find(".sub-task .title [contenteditable]"):null}},{key:"getDropImageContainer",value:function(){return this.context===Rn?$("#task-detail-modal"):$("body")}},{key:"removeDropImage",value:function(){this.getDropImageContainer().off("dragover.".concat(this.listenId)).off("drop.".concat(this.listenId))}},{key:"initDropImage",value:function(){var e=this,t=this.props,n=t.isReadOnly,r=t.intl;this.getDropImageContainer().on("dragover.".concat(this.listenId),(function(e){e.preventDefault()})).on("drop.".concat(this.listenId),(function(t){if(t.preventDefault(),n)f.a.dispatch("showTeamProjectPermissionToast");else{var a=t.originalEvent&&t.originalEvent.dataTransfer;if(a&&a.files&&a.files.length){var i=a.items;if(i&&i.length&&i[0].webkitGetAsEntry&&i[0].webkitGetAsEntry().isDirectory)return void En.w(r.formatMessage({id:"over_type"}),1e3);e.afterSelectFile({file:a.files[0]})}}}))}},{key:"deleteFile",value:function(e,t){var n=this.props,r=n.isScheduleOwner,a=n.task,i=n.updateTaskAttachment,o=this.state.attachmentList;r&&(i(a.get("id"),o.filter((function(t){return t.get("id")!==e}))),M.p(t).then((function(e){b.a.doSync()})))}},{key:"showOverNumberToast",value:function(){var e=this.props.intl.formatMessage({id:"over_attachment_number_limit"},{s:To.a.taskAttachmentNumber});En.w(e,1e3)}},{key:"verifyUploadPermission",value:function(e){if(e&&this.context!==e)return!1;var t=this.state.attachmentList;return y.a.canUploadAttachment?!(t.size>=To.a.taskAttachmentNumber&&(this.showOverNumberToast(),1)):(nd.a({type:ie.c.attachment}),!1)}},{key:"afterSelectFile",value:function(e){var t=e.file,n=e.taskDetailType;n&&this.context!==n||this.verifyUploadPermission(n)&&(this.uploadOneFile(t),$("#task-file-button").val(""))}},{key:"uploadOneFile",value:function(e){var t=this,n=this.props.task,r=this.state.attachmentList;if(this.extToFileType(e),this.verifyFile(e)){var a=this.createModel(e);this.setState({attachmentList:r.push(a).sort(Rp)});var i=n.get("id"),o=n.get("projectId"),c=a.get("id"),s=R.j.API_HOST_V1+"/attachment/upload/"+o+"/"+i+"/"+c;M.rb(e,s,(function(e){t.afterUploadFile(e,c)}))}}},{key:"afterUploadFile",value:function(e,t){var n=this.props,r=n.task,a=n.updateTaskAttachment,i=this.state.attachmentList;a(r.get("id"),i.map((function(n){return n.get("id")===t?n.merge(e).set("isLocal",!1):n}))),b.a.doSync(),M.y().then((function(e){y.a.canUploadAttachment=e.data}))}},{key:"createModel",value:function(e){var t=this.props.task,n=Object(Vs.a)();return Object(r.Map)({id:n,projectId:t.get("projectId"),taskId:t.get("id"),fileName:e.name,fileType:e.fileType,size:e.size,isLocal:!0,previewUrl:URL.createObjectURL(e)})}},{key:"extToFileType",value:function(e){for(var t=e.name,n=t.substring(t.lastIndexOf(".")+1),r=Object.keys(ie.k),a=function(t){var a=r[t];Object.prototype.hasOwnProperty.call(ie.k,a)&&ie.k[a].forEach((function(t){Object.prototype.hasOwnProperty.call(ie.k[a],t)&&ie.k[a][t]===n.toLowerCase()&&(e.fileType=a)}))},i=0;i<r.length;i+=1)a(i);e.fileType||(e.fileType=e.type||"unknown")}},{key:"verifyFile",value:function(e){return!this.verifyFileLimit(e)}},{key:"verifyFileLimit",value:function(e){return!!this.overFileSize(e)}},{key:"overFileSize",value:function(e){var t=this.props.intl;return e.size>To.a.attachmentSize&&(En.w(t.formatMessage({id:"over_size"}),1e3),!0)}},{key:"overFileType",value:function(e){var t=null!=Object.keys(ie.g).find((function(t){return ie.g[t].test(e.fileType)})),n=this.props.intl;return!t&&(En.w(n.formatMessage({id:"over_type"}),1e3),!0)}},{key:"initPasteImage",value:function(){this.initTitlePasteImage(),this.initContentPasteImage(),this.initDescPasteImage(),this.initSubTaskPasteImage()}},{key:"removePasteImage",value:function(){var e=this.getTaskTitleView(),t=this.getTaskContentView(),n=this.getTaskDescView(),r=this.getSubTaskTitleView();e&&e.off("pasteImage.".concat(this.listenId)),t&&t.off("pasteImage.".concat(this.listenId)),n&&n.off("pasteImage.".concat(this.listenId)),r&&r.off("pasteImage.".concat(this.listenId))}},{key:"initTitlePasteImage",value:function(){var e=this,t=this.getTaskTitleView();t&&(t.pastableTextarea(),t.on("pasteImage.".concat(this.listenId),(function(t,n){e.doPasteImage(t,n)})))}},{key:"initContentPasteImage",value:function(){var e=this,t=this.getTaskContentView();t&&(t.pastableTextarea(),t.on("pasteImage.".concat(this.listenId),(function(t,n){e.doPasteImage(t,n)})))}},{key:"initDescPasteImage",value:function(){var e=this,t=this.getTaskDescView();t&&(t.pastableTextarea(),t.on("pasteImage.".concat(this.listenId),(function(t,n){e.doPasteImage(t,n)})))}},{key:"initSubTaskPasteImage",value:function(){var e=this,t=this.getSubTaskTitleView();t&&(t.pastableContenteditable(),t.on("pasteImage.".concat(this.listenId),(function(t,n){e.doPasteImage(t,n)})))}},{key:"doPasteImage",value:function(e,t){if(this.props.isReadOnly)return e.stopPropagation(),e.preventDefault(),void f.a.dispatch("showTeamProjectPermissionToast");var n=t.blob,r=URL.createObjectURL(n).split("/").pop()+"."+n.type.slice(n.type.indexOf("/")+1),a=new File([n],r,{type:n.type});a.fileType="IMAGE",this.afterSelectFile({file:a}),e.stopPropagation(),e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.props,n=t.isScheduleOwner,r=t.isReadOnly,a=t.task,i=this.state.attachmentList,o=a.get("id"),c=a.get("projectId");return Y.a.createElement("div",{className:"attachment-file",ref:this.rootRef},Y.a.createElement("ul",{className:"attachment-list"},i.map((function(t){return Y.a.createElement(Dp,{model:t,taskId:o,projectId:c,key:t.get("id"),onDelete:e.deleteFile,isScheduleOwner:n,isReadOnly:r})}))))}}])&&_p(t.prototype,n),a&&_p(t,a),c}(Y.a.Component);Pp.contextType=Pn;var Np=Object(V.c)(null,(function(e){return{updateTaskAttachment:function(t,n){e(Object(F.F)(t,n))}}}))(Object(me.c)(Pp));function Lp(e){return(Lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Up(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fp(e,t){return(Fp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wp(e);if(t){var a=Wp(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Bp(this,n)}}function Bp(e,t){return!t||"object"!==Lp(t)&&"function"!=typeof t?Yp(e):t}function Yp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wp(e){return(Wp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fp(e,t)}(o,e);var t,n,a,i=Hp(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).state={isMapShow:!1},t.toggleMap=t.toggleMap.bind(Yp(t)),t.rootRef=Y.a.createRef(),t}return t=o,(n=[{key:"componentDidMount",value:function(){(0,this.props.adjustDetailContentHeight)()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.location;t.adjustDetailContentHeight,Object(r.is)(n,e.location)}},{key:"render",value:function(){var e=this.props.location;if(e&&r.Map.isMap(e)&&e.get("loc")){var t=this.pretreatmentLocation();return Y.a.createElement("div",{className:"location",ref:this.rootRef},Y.a.createElement("div",{className:"m-content",onClick:this.toggleMap.bind(this)},Y.a.createElement("div",{className:"hint"},Y.a.createElement(Q.a,{name:"location-at"})),Y.a.createElement("div",{className:"info line-left"},Y.a.createElement("div",{className:"name"},t.transitionMethod&&t.transitionMethod+": ",t.locationAddressName),Y.a.createElement("div",{className:"address text-tny"},t.locationAddress))),Y.a.createElement("div",{className:K()("map",{hide:!this.state.isMapShow})},Y.a.createElement("div",{id:"map_canvas",style:{width:"100%",height:"100%"}})))}return null}},{key:"pretreatmentLocation",value:function(){var e={},t=this.props,n=t.intl,r=t.location;1===r.get("transitionType")?e.transitionMethod=n.formatMessage({id:"transition_enter"}):2===r.get("transitionType")?e.transitionMethod=n.formatMessage({id:"transition_leave"}):e.transitionMethod="";var a=r.get("alias")||null,i=null;return r.get("address")&&(a?i=r.get("address"):a=r.get("address")),a?i||(i=this.getCoordinat(r.get("loc"))):a=this.getCoordinat(r.get("loc")),e.locationAddressName=a,e.locationAddress=i,e}},{key:"getCoordinat",value:function(e){return Object(ed.e)(e.get("latitude"))+"N, "+Object(ed.e)(e.get("longitude"))+"E"}},{key:"toggleMap",value:function(){R.k||(this.state.isMapShow?(this.setState({isMapShow:!1}),this.showGoogleMap(),$(this.rootRef.current).closest("#content-view").scrollTo($(this.rootRef.current),1e3)):this.setState({isMapShow:!0}))}},{key:"showGoogleMap",value:function(){var e,t=null,n=4,r=this.props.location;if(r&&r.get("loc")&&(t=new window.google.maps.LatLng(r.get("loc").get("latitude"),r.get("loc").get("longitude")),n=this.getZoomLevel(r.get("radius"))),e=new window.google.maps.Map(document.getElementById("map_canvas"),{zoom:n,streetViewControl:!1,panControl:!1,mapTypeControl:!1,center:t,mapTypeId:window.google.maps.MapTypeId.ROADMAP,zoomControlOptions:{style:window.google.maps.ZoomControlStyle.SMALL}}),r){var a={strokeColor:"#5f7fb0",strokeOpacity:.8,strokeWeight:3,fillColor:"transparent",fillOpacity:1,clickable:!1,draggable:!1,editable:!1,zIndex:1,center:t,map:e,radius:r.get("radius")};new window.google.maps.Circle(a),new window.google.maps.Marker({position:t,map:e})}}}])&&Up(t.prototype,n),a&&Up(t,a),o}(Y.a.Component),Gp=Object(me.c)(Kp);n(160);function Vp(e){return(Vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zp(e,t){return(Zp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xp(e);if(t){var a=Xp(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Jp(this,n)}}function Jp(e,t){return!t||"object"!==Vp(t)&&"function"!=typeof t?$p(e):t}function $p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xp(e){return(Xp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zp(e,t)}(o,e);var t,n,r,a=qp(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).state={canCollapse:!1,detailMaxHeight:""},t.expandComment=t.expandComment.bind($p(t)),t.collapseComment=t.collapseComment.bind($p(t)),t.deleteComment=t.deleteComment.bind($p(t)),t.replyComment=t.replyComment.bind($p(t)),t.rootRef=Y.a.createRef(),t.detailRef=Y.a.createRef(),t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.adjustDetailHeight,r=t.adjustDetailContentHeight;this._isMounted=!0,setTimeout((function(){if(e._isMounted){var t=e.props.model.get("isExpand"),a=$(e.detailRef.current),i=parseFloat(a.css("line-height"));a.height()/i>3&&e.setState({canCollapse:!0}),e.setState({detailMaxHeight:t?"":3*i}),n?n():r&&r();var o=e.getContentView();e.props.model.get("isNew")&&!e.props.isHint&&o&&o.scrollTo(e.rootRef.current,0)}}))}},{key:"getContentView",value:function(){return this.rootRef.current?$(this.rootRef.current).closest("#content-view"):null}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentWillReceiveProps",value:function(e){var t=e.model.get("isExpand");if(t!==this.props.model.get("isExpand")){var n=parseFloat($(this.detailRef.current).css("line-height"));this.setState({detailMaxHeight:t?"":3*n})}}},{key:"render",value:function(){var e=this.props,t=e.model,n=e.intl,r=e.renderAction,a=e.isDisableEdit,i=this.state.canCollapse,o=this.getUserProfile(),c=t.get("isExpand"),s=o.isMyself,u=this.isUserInShared(),l=this._getDisplayName(o),d=this._getDisplayTime(),f=this.getReplyTip(t.get("replyUserProfile"),{escape:!0}),p=Cs(t.get("title"),{lineWrapping:!0,editable:!1,disabledSyntax:new Set([])}),h=s?Qe.a("picture"):o.avatarUrl;return Y.a.createElement("li",{ref:this.rootRef},Y.a.createElement("div",{className:"comment"},Y.a.createElement("div",{className:"comment-photo avatar"},Y.a.createElement(gt,{url:h,defaultUrl:vt})),Y.a.createElement("div",{className:"comment-content"},Y.a.createElement("div",{className:"timeline"},r||!a&&Y.a.createElement("div",{className:"action-btns"},s?Y.a.createElement("a",{className:"del-btn",onClick:this.deleteComment},Y.a.createElement(Q.a,{name:"comment-delete",className:"i-13"})):u&&Y.a.createElement("a",{className:"reply-btn",onClick:this.replyComment},Y.a.createElement(Q.a,{name:"comment",className:"i-2"}))),Y.a.createElement("div",{className:"timeline-text"},l?Y.a.createElement("span",{className:"comment-creator"},l):null,Y.a.createElement("span",{className:"comment-time text-info text-sml"},d))),Y.a.createElement("div",{id:"comment-text",className:"comment-text"},Y.a.createElement("p",{className:"detail",ref:this.detailRef,style:{maxHeight:this.state.detailMaxHeight}},Y.a.createElement("span",{className:"reply-tip text-sml",dangerouslySetInnerHTML:{__html:f}}),Y.a.createElement("span",{className:"c-text",dangerouslySetInnerHTML:{__html:p}})),i&&Y.a.createElement("span",{className:K()("cr-pointer expand collapse-toggle",{hide:c}),onClick:this.expandComment},Y.a.createElement("span",null,n.formatMessage({id:"expand"})),Y.a.createElement(Q.a,{name:"chevron-dropdown-open"})),i&&Y.a.createElement("span",{className:K()("cr-pointer collapse collapse-toggle",{hide:!c}),onClick:this.collapseComment},Y.a.createElement("span",null,n.formatMessage({id:"collapse"})),Y.a.createElement(Q.a,{name:"chevron-dropdown-open"}))))))}},{key:"isUserInShared",value:function(){var e=this.props.sharedUsers.filter((function(e){return e.get("isAccept")})),t=this.getUserProfile();if(t.isMyself)return!0;var n=t.userCode;return!!e.find((function(e){return e.get("userCode")===n}))}},{key:"_getDisplayName",value:function(e){return e.isMyself?Qe.b():e.name?e.name:e.username}},{key:"_getDisplayTime",value:function(){var e=this.props.model.get("createdTime");return U.a.formatActivityTime(e)}},{key:"getReplyTip",value:function(e,t){var n="";if(!i.a.isEmpty(e)){var r=this._getDisplayName(e);t&&t.escape&&(r=O.f(r)),n=this.props.intl.formatMessage({id:"comment_reply"},{s1:r})}return n}},{key:"expandComment",value:function(){this.props.onToggleExpand&&this.props.onToggleExpand({id:this.props.model.get("id"),isExpand:!0})}},{key:"collapseComment",value:function(){this.props.onToggleExpand&&this.props.onToggleExpand({id:this.props.model.get("id"),isExpand:!1})}},{key:"deleteComment",value:function(){this.props.onDelete&&this.props.onDelete(this.props.model.get("id"))}},{key:"replyComment",value:function(){var e=this.getUserProfile(),t=this.getReplyTip(e).replace("<span>","").replace("</span>","");this.props.onReply&&this.props.onReply({tip:t,commentId:this.props.model.get("id"),userProfile:this.getUserProfile()})}},{key:"getUserProfile",value:function(){var e=this.props.model.get("userProfile");return e||{avatarUrl:R.h}}}])&&zp(t.prototype,n),r&&zp(t,r),o}(Y.a.Component),eh=Object(V.c)((function(e,t){return{sharedUsers:ct(t.projectId)}}),null,null)(Object(me.c)(Qp));function th(e){return(th="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rh(e,t){return(rh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ah(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ch(e);if(t){var a=ch(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ih(this,n)}}function ih(e,t){return!t||"object"!==th(t)&&"function"!=typeof t?oh(e):t}function oh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ch(e){return(ch=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rh(e,t)}(o,e);var t,n,r,a=ah(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).state={remainWordLength:To.a.commentWordLimit},t.typeahead=null,t.replyInfo={},t.creatNewComment=t.creatNewComment.bind(oh(t)),t.edittingComment=t.edittingComment.bind(oh(t)),t.setDraft=t.setDraft.bind(oh(t)),t.autoFocus=t.autoFocus.bind(oh(t)),t.onFocus=t.onFocus.bind(oh(t)),t.onBlur=t.onBlur.bind(oh(t)),t.resizeTaskView=t.resizeTaskView.bind(oh(t)),t.textareaRef=Y.a.createRef(),t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this,t=$(this.textareaRef.current);t.autosize({callback:this.resizeTaskView}),this.props.isCommentShow&&t.focus().caretToEnd(),this.textareaHeight=t.outerHeight(),setTimeout((function(){e.props.adjustDetailHeight&&e.props.adjustDetailHeight()})),this.renderAutoComplete()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(!i.a.isEqual(this.props.mUsers,e.mUsers)){if(!this.typeahead)return;var n=this.typeahead.data("typeahead");if(!n)return;n.updateSource&&n.updateSource(e.mUsers)}this.props.isScheduleTask!==e.isScheduleTask&&setTimeout((function(){t.props.adjustDetailHeight&&t.props.adjustDetailHeight()}))}},{key:"componentWillUnmount",value:function(){var e=this.props.adjustDetailContentHeight,t=this.getTaskDetailView();t&&(t.find(".td-body").removeAttr("style"),e&&e())}},{key:"onFocus",value:function(){this.onFocusChange(!0)}},{key:"onBlur",value:function(){this.onFocusChange(!1),this.setDraft()}},{key:"onFocusChange",value:function(e){this.props.onFocusChange&&this.props.onFocusChange(e)}},{key:"getTaskDetailView",value:function(){return this.textareaRef.current?$(this.textareaRef.current).closest("#task-detail-inner"):null}},{key:"setDraft",value:function(){$(this.textareaRef.current).val()?this.buildCommentData().reply=this.replyInfo:this.clearDraft()}},{key:"edittingComment",value:function(){var e=this,t=$(this.textareaRef.current),n=this.isReplyComment(),r=(t.length?t.val().length:0)-(n?this.replyInfo.tip.length:0),a=To.a.commentWordLimit-r;this.setState({remainWordLength:a},(function(){e.props.adjustDetailHeight&&e.props.adjustDetailHeight()}))}},{key:"submitComment",value:function(){this.createComment(),this.clearDraft(),this.reRenderTextarea(),In.t("add")}},{key:"createComment",value:function(){var e=this.buildCommentData();this.props.onCreate(e)}},{key:"clearDraft",value:function(){this.replyInfo={}}},{key:"reRenderTextarea",value:function(){$(this.textareaRef.current).val("").css({height:this.textareaHeight,overflow:"hidden"}),this.setState({remainWordLength:To.a.commentWordLimit})}},{key:"buildCommentData",value:function(){var e=$(this.textareaRef.current).val(),t={title:e};return this.replyInfo.isReply&&(t.replyCommentId=this.replyInfo.commentId,t.replyUserProfile=this.replyInfo.userProfile,e=e.replace(this.replyInfo.tip,""),t.title=e),t}},{key:"resizeTaskView",value:function(){var e=this.props.adjustDetailContentHeight;setTimeout((function(){e&&e()}))}},{key:"autoFocus",value:function(){this.textareaRef.current&&this.textareaRef.current.focus()}},{key:"creatNewComment",value:function(e){var t=this;(e=e||window.event).stopPropagation();var n=$(this.textareaRef.current),r=this.state.remainWordLength<0;if(e.keyCode===tc.a.enter&&e.shiftKey);else if(e.keyCode===tc.a.enter&&(e.ctrlKey||e.metaKey)){var a=$.caretPos(e.target),i=e.target.value.slice(0,a),o=e.target.value.slice(a);e.target.value=i.concat("\n",o),this.edittingComment()}else if(e.keyCode===tc.a.enter){e.preventDefault();var c=n.val();!r&&c.length&&this.submitComment(),setTimeout((function(){t.props.adjustDetailHeight&&t.props.adjustDetailHeight()}))}else e.keyCode===tc.a.tab&&n.focus()}},{key:"isReplyComment",value:function(){var e=$(this.textareaRef.current).val();if(this.replyInfo.tip){var t=this.replyInfo.tip,n=new RegExp("^("+t+")");this.replyInfo.isReply=n.test(e)}return this.replyInfo.isReply}},{key:"renderCommentReply",value:function(e){var t=$(this.textareaRef.current),n=e.tip;t.val(n),En.u(t[0],n.length),this.replyInfo=e,this.replyInfo.isReply=!0}},{key:"renderAutoComplete",value:function(){var e=this;this.typeahead=$(this.textareaRef.current).typeahead({source:e.props.mUsers||[],limit:To.a.shareUserNumber,placement:"n",symbol:["@"],holder:/[\s]/i,matcher:function(e){return e.original.toLowerCase().indexOf(this.Tick.matchStr.toLowerCase())>-1},sorter:function(e){return e},highlighter:function(e){return e.original},select:function(t){if(!t||t.keyCode!==tc.a.tab){var n=this.getActiveItem(),r=n.original||n;this.TickInsert(r),$(e.textareaRef.current).val(this.Tick.newText),this.hide()}}})}},{key:"render",value:function(){var e=this.props.intl;return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("textarea",{ref:this.textareaRef,id:"add-new-comment",className:"new-comment typeahead input-fake",type:"text",placeholder:e.formatMessage({id:"add_comment"}),onKeyDown:this.creatNewComment,onInput:this.edittingComment,onBlur:this.onBlur,onFocus:this.onFocus}),Y.a.createElement("span",{id:"word-count",className:K()("c-count text-info text-sml",{"count-warning":this.state.remainWordLength<0})},this.state.remainWordLength))}}])&&nh(t.prototype,n),r&&nh(t,r),o}(Y.a.Component),uh=Object(me.c)(sh,{forwardRef:!0});function lh(e){return(lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fh(e,t){return(fh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ph(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gh(e);if(t){var a=gh(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return hh(this,n)}}function hh(e,t){return!t||"object"!==lh(t)&&"function"!=typeof t?mh(e):t}function mh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gh(e){return(gh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fh(e,t)}(s,e);var t,n,a,o=ph(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).mUsers=[],t.limit=5,t.state={comments:Object(r.List)(),showAll:!1,showEditor:t.isShowCommentEditor(e),showLastComment:!1},t.matchMedia=null,t.toggleAllComments=t.toggleAllComments.bind(mh(t)),t.deleteComment=t.deleteComment.bind(mh(t)),t.createComment=t.createComment.bind(mh(t)),t.replyComment=t.replyComment.bind(mh(t)),t.toggleCommentExpand=t.toggleCommentExpand.bind(mh(t)),t.adjustDetailHeight=t.adjustDetailHeight.bind(mh(t)),t.toggleCommentEditor=t.toggleCommentEditor.bind(mh(t)),t.matchMediaCB=t.matchMediaCB.bind(mh(t)),t.commentFooterRef=Y.a.createRef(),t.antiscrollWrapRef=Y.a.createRef(),t.commentsListRef=Y.a.createRef(),t.commentTitleRef=Y.a.createRef(),t.commentHintRef=Y.a.createRef(),t.rootRef=Y.a.createRef(),t.uniqueId=i.a.uniqueId(),t.clickCoAction=t.clickCoAction.bind(mh(t)),t}return t=s,(n=[{key:"componentDidMount",value:function(){var e=this;this.fetchComments(this.props),this.adjustDetailHeight(),this.setMentionUsers();var t=this.getContentView();t&&t.on("scroll.".concat(this.uniqueId),(function(){e.toggleLastComment()})),En.l($(this.antiscrollWrapRef.current)),this._isMounted=!0;var n=this.getTaskDetailView();this.state.showEditor&&n&&n.addClass("has-comments"),this.matchMedia=window.matchMedia&&window.matchMedia("(min-width: 921px)"),this.matchMedia&&this.matchMedia.addListener(this.matchMediaCB),f.a.subscribe(this.uniqueId,"toggleComments",this.toggleCommentEditor)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.model.get("id")!==this.props.model.get("id")||e.model.get("commentCount")&&!this.props.model.get("commentCount")?(this.initState(e),this.fetchComments(e),this.setMentionUsers()):Object(r.is)(e.sharedUsers,this.props.sharedUsers)||this.setMentionUsers()}},{key:"componentDidUpdate",value:function(e,t){var n=this,r=this.props.adjustDetailContentHeight;t.comments.size!==this.state.comments.size?r&&r():t.showEditor!==this.state.showEditor&&setTimeout((function(){r&&r(),n.toggleLastComment()}))}},{key:"componentWillUnmount",value:function(){var e=this.getContentView();e&&e.off("scroll.".concat(this.uniqueId)),En.r($(this.antiscrollWrapRef.current)),this.matchMedia&&this.matchMedia.removeListener(this.matchMediaCB),f.a.unSubscribe(this.uniqueId,"toggleComments"),this._isMounted=!1}},{key:"getContentView",value:function(){return this.rootRef.current?$(this.rootRef.current).closest("#content-view"):null}},{key:"getTaskDetailView",value:function(){return this.rootRef.current?$(this.rootRef.current).closest("#task-detail-inner"):null}},{key:"getShownComments",value:function(){var e=this.state,t=e.comments,n=e.showAll,a=Object(r.List)();if(n)return t;for(var i=0,o=t.size-1;o>=0;o--){var c=t.get(o);c.get("isNew")?a=a.unshift(c):i<this.limit&&(i++,a=a.unshift(c))}return a}},{key:"renderCommentList",value:function(){var e=this,t=this.props,n=t.intl,r=t.model,a=t.isDisableComment,i=t.adjustDetailContentHeight,o=this.state,c=o.comments,s=o.showAll,u=c.size||0,l=c.size>this.limit;return u?Y.a.createElement("div",{className:"comments"},Y.a.createElement("div",{className:"comments-header",ref:this.commentTitleRef},Y.a.createElement("span",{className:"title"},n.formatMessage({id:"comments"})),u&&Y.a.createElement("span",{className:"count",id:"comments_count"},u)),Y.a.createElement("ul",{ref:this.commentsListRef},this.getShownComments().map((function(t){return Y.a.createElement(eh,{model:t,projectId:r.get("projectId"),key:t.get("id"),isDisableEdit:a,onDelete:e.deleteComment,onReply:e.replyComment,onToggleExpand:e.toggleCommentExpand,adjustDetailContentHeight:i})}))),Y.a.createElement("div",{className:K()("toggle-btn",{open:s,toggle:l}),id:"toggle_comment",onClick:this.toggleAllComments},s?Y.a.createElement("span",null,n.formatMessage({id:"comments_hide"})):Y.a.createElement("span",null,n.formatMessage({id:"comments_show"})),Y.a.createElement(Q.a,{name:"chevron-dropdown-open"}))):null}},{key:"renderCommentHint",value:function(){var e=this.props,t=e.model,n=e.isScheduleTask,r=e.isDisableComment,a=e.onCommentEditorFocus,i=e.adjustDetailContentHeight,o=this.state,c=o.showEditor,s=o.showLastComment,u=o.comments,l=t.get("commmentCount"),d=u.last(),f=Y.a.createElement("a",{className:"co-action",onClick:this.clickCoAction},Y.a.createElement(Q.a,{name:"comment",className:"i-2"}),l&&Y.a.createElement("span",{className:"comments-count text-info text-sml"},l));return Y.a.createElement("div",{className:K()("comments-hint",{"show-holder":s,"show-editor":c})},Y.a.createElement("div",{className:"comments-footer med-fast animated",ref:this.commentFooterRef},Y.a.createElement("div",{className:K()("comment-holder",{hide:!s})},Y.a.createElement("div",{className:"last-comment antiscroll-wrap",ref:this.antiscrollWrapRef},Y.a.createElement("div",{className:K()("antiscroll-inner",{hide:!s})},s&&d&&Y.a.createElement(eh,{isHint:!0,model:d,renderAction:f,projectId:t.get("projectId"),key:d.get("id"),isDisableEdit:r,adjustDetailHeight:this.adjustDetailHeight,onToggleExpand:this.toggleCommentExpand,adjustDetailContentHeight:i})))),this.state.showEditor&&!r&&Y.a.createElement("div",{className:"n-bottom"},Y.a.createElement(uh,{onFocusChange:a,mUsers:this.mUsers,onCreate:this.createComment,isScheduleTask:n,adjustDetailHeight:this.adjustDetailHeight,ref:this.commentHintRef,adjustDetailContentHeight:i}))))}},{key:"render",value:function(){return Y.a.createElement("div",{ref:this.rootRef},this.renderCommentList(),this.renderCommentHint())}},{key:"matchMediaCB",value:function(e){var t=this,n=this.props.adjustDetailContentHeight;e.matches&&setTimeout((function(){n&&n(),t.toggleLastComment()}))}},{key:"toggleLastComment",value:function(){var e=this;if(this.commentsListRef.current){var t=$(this.commentsListRef.current);(t.find("li:last-child").length?t.find("li:last-child").offset().top:t.offset().top)<=$(this.commentFooterRef.current).offset().top+21?this.setState({showLastComment:!1},(function(){e.adjustDetailHeight()})):this.setState({showLastComment:!0},(function(){e.adjustDetailHeight()}))}}},{key:"initState",value:function(e){var t=this;this.setState({comments:Object(r.List)(),showLastComment:!1,showAll:!1,showEditor:this.isShowCommentEditor(e)},(function(){if(t.adjustDetailHeight(),t.state.showEditor){var e=t.getTaskDetailView();e&&e.addClass("has-comments")}}))}},{key:"isShowCommentEditor",value:function(e){var t=e.model;return!P.G()&&0===t.get("deleted")&&!!t.get("commentCount")}},{key:"toggleCommentExpand",value:function(e){var t=this,n=this.state.comments.map((function(t){return t.get("id")===e.id?t.set("isExpand",e.isExpand):t}));this.setState({comments:n},(function(){t.adjustDetailHeight()}))}},{key:"adjustDetailHeight",value:function(){var e=this.props.adjustDetailHeight;e&&e()}},{key:"fetchComments",value:function(e){var t=this,n=this.props.adjustDetailContentHeight;if(e.model.get("commentCount")){var a=e.model.get("id"),i=e.model.get("projectId"),o=e.model.get("deleted");!P.G()&&0===o&&j.B(i)&&it(i),Object(M.C)(a,i).then((function(e){var a=e.data||[];t._isMounted&&t.setState({comments:Object(r.List)(a.map((function(e){return e.isExpand=!1,Object(r.Map)(e)}))),showAll:a.length<=t.limit},(function(){f.a.dispatch("refreshOutSinglePosition"),setTimeout((function(){n&&n(),t.toggleLastComment()}))}))}))}else{var c=this.getTaskDetailView();c&&c.removeClass("has-comments")}}},{key:"clickCoAction",value:function(){var e=this.getContentView();e&&e.scrollTo($(this.commentsListRef.current).find("li:last-child"),100)}},{key:"toggleAllComments",value:function(){var e=this,t=this.props.adjustDetailContentHeight,n=!this.state.showAll;this.setState({showAll:n,comments:this.state.comments.map((function(e){return e.set("isNew",!1)}))}),setTimeout((function(){t&&t();var r=e.getContentView();r&&(n?r.scrollTo($(e.commentsListRef.current).find("li:first-child"),100):r.scrollTo($(e.commentTitleRef.current),100))}))}},{key:"setMentionUsers",value:function(){var e=this.props.model,t=e.get("projectId"),n=e.get("deleted");if(!(P.G()||n>0)&&j.B(t)){var r=ot(t),a=[];r.forEach((function(e){var t=e.get("displayName"),n=e.get("userId");if(n!==Qe.a("userId")){var r={original:t,value:O.f(t),key:n,atLabel:"@"+t,userId:n};a.push(r)}})),this.mUsers=a}}},{key:"createMentionReg",value:function(){var e=this.mUsers;if(!e.length)return null;var t=i.a.map(e,(function(e){return e.value.replace(td.a.escapeReg,"\\$1")+" "}));return new RegExp("@("+t.join("|")+")","ig")}},{key:"getMentions",value:function(e){var t=this.mUsers;if(t.length){var n=e.get("title"),r=[],a=this.createMentionReg(),o=i.a.union(n.match(a));try{r=i.a.map(o,(function(e){e=e.replace(/\s*$/,"");var n=i.a.findIndex(t,{atLabel:e}),r=t[n];return{userId:r.userId,atLabel:r.atLabel}}))}catch(e){c.a.error(e)}return r}}},{key:"toggleCommentEditor",value:function(e){var t=this;if(e===this.context){var n=!this.state.showEditor,r=this.getTaskDetailView();r&&(n?(r.addClass("has-comments"),In.t("open")):(r.removeClass("has-comments"),In.t("close"))),this.setState({showEditor:n},(function(){t.adjustDetailHeight(),t.commentHintRef.current&&t.commentHintRef.current.autoFocus()}))}}},{key:"createComment",value:function(e){var t=this;e=(e=Object(r.Map)(i.a.extend(e,{id:Object(Vs.a)(),createdTime:U.a.prefMoment().utc().format(ie.m.atomTime),taskId:this.props.model.get("id"),projectId:this.props.model.get("projectId"),userProfile:{isMyself:!0}}))).set("mentions",this.getMentions(e)).set("isNew",!0);var n=this.props.model.get("id"),a=this.props.model.get("projectId");Object(M.cb)(n,a,e.toJSON()).then((function(){if(t._isMounted){e=e.set("isExpand",!1);var r=t.state.comments.push(e);t.setState({comments:r}),t.props.updateTaskCommentCount(n,r.size)}}))}},{key:"deleteComment",value:function(e){var t=this,n=this.props.model.get("id"),r=this.props.model.get("projectId");In.t("add"),Object(M.r)(n,r,e).then((function(){if(t._isMounted){var r=t.state.comments.filter((function(t){return t.get("id")!==e}));t.setState({comments:r}),t.props.updateTaskCommentCount(n,r.size)}}))}},{key:"replyComment",value:function(e){var t=this;this.setState({showEditor:!0},(function(){t.commentHintRef.current.renderCommentReply(e)}))}}])&&dh(t.prototype,n),a&&dh(t,a),s}(Y.a.Component);vh.contextType=Pn;var yh,bh=Object(V.c)((function(e,t){return{sharedUsers:ct(t.model.get("projectId"))}}),(function(e){return{updateTaskCommentCount:function(t,n){e(Object(F.H)(t,n))}}}))(Object(me.c)(vh)),kh={expand:"",collapse:"",activity_empty:"",activity_empty_desc:"",activities:"",project_activity:"",owner:"",task_activity:"",activity_created_task:"",activity_saved_task:"",activity_completed_task:"",activity_deleted_task:"",activity_undone_task:"",activity_changed_task_duedate:"",activity_task_duedate:" %s1  %s2",activity_task_duedate_clear:"",activity_task_add_file:"",activity_task_del_file:"",activity_assigned_task:" <strong>%s1</strong>",activity_canceled_assignment:"",activity_edited_task_title:"",activity_edited_task_content:"",activity_undeleted_task:"",activity_created_list:"",activity_edited_list_title:"",activity_deleted_list:"",activity_joined_list:"",activity_quitted_list:"",activity_moved_task_in:"",activity_moved_task_out:"",activity_changed_task_progress:" %s1",activity_switch_task_kind_to_checklist:"",activity_switch_task_kind_to_text:"",activity_create_subtask:"",activity_delete_subtask:"",activity_done_subtask:"",activity_undone_subtask:"",activity_change_subtask_reminder:"",activity_change_subtask_content:"",activity_subtask_no_reminder:"",closed_project_list:"",unknow_task:"",what_is_unknow_task:"",notitle_task:"",activity_repeated_task:"",activity_repeated_task_next:" %s1  %s2",activity_repeated_task_end:"",activity_add_parent:"",activity_add_parent_detail:": %s",activity_add_parent_cancel:"",activity_delete_parent:"",activity_change_completed_time:" %s1",show_more_tasks:"",just_now:"",today:"",tomorrow:"",yesterday:"",next:"",weekday:"______",weekday_short:"______",month_short:"1_2_3_4_5_6_7_8_9_10_11_12",months:"___________",_relativeTime:{past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d "}},Oh={expand:"Expand",collapse:"Collapse",activity_empty:"No Activities.",activity_empty_desc:"You can track the activities in this list.",activities:"Activities",project_activity:"List Activities",owner:"Owner",task_activity:"Task Activities",activity_created_task:"created the task",activity_saved_task:"saved the task",activity_completed_task:"completed the task",activity_deleted_task:"deleted the task",activity_undone_task:"undone the task",activity_changed_task_duedate:"changed the time ",activity_task_duedate:"The time is %s1  %s2",activity_task_duedate_clear:"The time has been removed.",activity_task_add_file:"added a attachment",activity_task_del_file:"deleted a attachment",activity_assigned_task:"assigned to <strong>%s1</strong>",activity_canceled_assignment:"canceled an assignment",activity_edited_task_title:"edited the title ",activity_edited_task_content:"edited the content ",activity_undeleted_task:"restored the task",activity_created_list:"created the list",activity_edited_list_title:"edited the list title",activity_deleted_list:"deleted the list",activity_joined_list:"joined the shared list",activity_quitted_list:"quitted the shared list",activity_moved_task_in:"moved in the task",activity_moved_task_out:"moved out the task",activity_changed_task_progress:"changed the progress to %s1",activity_switch_task_kind_to_checklist:"switched the task to check item mode",activity_switch_task_kind_to_text:"switched the task to text mode",activity_create_subtask:"created a check item",activity_delete_subtask:"deleted a check item",activity_done_subtask:"completed a check item",activity_undone_subtask:"marked a check item as undone",activity_change_subtask_reminder:"changed the reminder for check item",activity_change_subtask_content:"edited the content of check item",activity_subtask_no_reminder:"No Reminder",closed_project_list:"Closed Lists",unknow_task:"Unknown task",what_is_unknow_task:"What is unknown task? A task will be shown as Unknown task when being deleted completely in Trash.",notitle_task:"Notitle task",activity_repeated_task:"completed the previous recurring cycle",activity_repeated_task_next:"repeat cycle %s1  %s2",activity_repeated_task_end:"The repeat cycles has been finished.",activity_add_parent:"added a parent task",activity_add_parent_detail:"Added a parent task: %s",activity_add_parent_cancel:"canceled",activity_delete_parent:"removed a parent task",activity_change_completed_time:"change the completed date to %s1",show_more_tasks:"View more",just_now:"just now",today:"Today",tomorrow:"Tomorrow",yesterday:"Yesterday",next:"Next",weekday:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday",weekday_short:"Su_Mo_Tu_We_Th_Fr_Sa",month_short:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec",months:"January_February_March_April_May_June_July_August_September_October_November_December",_relativeTime:{past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours"}},Th="en",Sh=!1,Eh=function(){return Sh},wh=function(){return/^(zh|ko|ja|tw)/i.test(Th)},Dh=function(e,t){var n=Sh?kh[e]:Oh[e];if(n)for(var r in t)n=n.split("%"+r).join(t[r]);return n};(yh=n(972)).keys().forEach(yh);var jh,_h,Ch=function(e){var t=e.style||{fill:e.fill||"",marginTop:e.marginTop||""};return Y.a.createElement("svg",{className:K()("icon-".concat(e.name),e.className),style:t},Y.a.createElement("use",{xlinkHref:"#".concat(e.name)}))},Ih=Y.a.createContext({username:"",preference:{showMeridiem:!1,language:"en"}}),Mh=n(475);function Ah(e){return(Ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xh(e,t,n){return(xh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Uh(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function Rh(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ph(e,t)}function Ph(e,t){return(Ph=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Uh(e);if(t){var a=Uh(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Lh(this,n)}}function Lh(e,t){return!t||"object"!==Ah(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Uh(e){return(Uh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bh(e,t,n){return t&&Hh(e.prototype,t),n&&Hh(e,n),e}!function(e){e.T_CREATE="T_CREATE",e.T_DELETE="T_DELETE",e.T_DONE="T_DONE",e.T_UNDONE="T_UNDONE",e.T_ASSIGN="T_ASSIGN",e.T_REPEAT="T_REPEAT",e.T_DUE="T_DUE",e.T_TITLE="T_TITLE",e.T_CONTENT="T_CONTENT",e.T_TRASH_BACK="T_TRASH_BACK",e.T_ADD_FILE="T_ADD_FILE",e.T_DEL_FILE="T_DEL_FILE",e.T_PROGRESS="T_PROGRESS",e.T_KIND="T_KIND",e.T_PARENT="T_PARENT",e.T_DELETE_PARENT="T_DELETE_PARENT",e.T_COMPLETED_TIME="T_COMPLETED_TIME",e.C_CREATE="C_CREATE",e.C_DELETE="C_DELETE",e.C_DONE="C_DONE",e.C_UNDONE="C_UNDONE",e.C_REMINDER="C_REMINDER",e.C_CONTENT="C_CONTENT"}(jh||(jh={})),function(e){e.CHECKLIST="CHECKLIST",e.TEXT="TEXT"}(_h||(_h={}));var Yh={isMyself:!0},Wh=function(e,t,n,r){return e&&zs.h!==n?Object(wn.d)(e,{timeZone:n,isAllDay:t,isFloating:r}):e},Kh=function(e,t,n){return e||n||!t||t===zs.h?zs.h:t},Gh=function(e,t){var n=[];return e&&n.push(e),t&&t.length&&t.forEach((function(e){n.push("- "+e)})),n.join("\n")||""},Vh=function(){function e(t,n,r){var a=this;Fh(this,e),this.id="",this.iconName="",this.actionText="",this.action=jh.C_CREATE,this.when=new Date,this.whoProfile=Yh,this.userInfo={username:"",preference:{showMeridiem:!1,language:"en"}},this.getDisplayName=function(e){return e?e.isMyself?a.userInfo.username:e.name||e.username||"":""},this.iconName=t,this.actionText=n}return Bh(e,[{key:"setDetailText",value:function(e){}},{key:"fromJson",value:function(e){var t,n=e.id,r=e.action,a=e.when,i=e.whoProfile;this.id=n,this.action=null!=r?r:this.action,this.when=null!==(t=d.a.parseUTCString(a))&&void 0!==t?t:this.when,this.whoProfile=null!=i?i:this.whoProfile}},{key:"setUserInfo",value:function(e){this.userInfo=e}},{key:"getIconName",value:function(){return this.iconName}},{key:"getActionText",value:function(){return Dh(this.actionText)}},{key:"getCreator",value:function(){return this.getDisplayName(this.whoProfile)}},{key:"getRecordTime",value:function(){return this.when}},{key:"getDetail",value:function(){return""}}]),e}(),zh=function(e){Rh(n,e);var t=Nh(n);function n(){var e;Fh(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).title="",e.content="",e}return Bh(n,[{key:"fromJson",value:function(e){xh(Uh(n.prototype),"fromJson",this).call(this,e);var t=e.title,r=e.content;this.title=null!=t?t:this.title,this.content=null!=r?r:this.content}},{key:"getDetail",value:function(){var e=this.title,t=this.content;return(e&&t?e+"\n"+t:t?"\n"+t:e)||""}}]),n}(Vh),Zh=function(e){Rh(n,e);var t=Nh(n);function n(){var e;Fh(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).assigneeProfile=void 0,e}return Bh(n,[{key:"fromJson",value:function(e){xh(Uh(n.prototype),"fromJson",this).call(this,e);var t=e.assigneeProfile;this.assigneeProfile=null!=t?t:this.assigneeProfile}},{key:"getActionText",value:function(){var e=xh(Uh(n.prototype),"getActionText",this).call(this);return this.assigneeProfile?e.replace("%s1",this.getDisplayName(this.assigneeProfile)):Dh("activity_canceled_assignment")}}]),n}(Vh),qh=function(e){Rh(n,e);var t=Nh(n);function n(){var e;Fh(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).detailText="",e.parentText="",e}return Bh(n,[{key:"setDetailText",value:function(e){this.detailText=e}},{key:"fromJson",value:function(e){xh(Uh(n.prototype),"fromJson",this).call(this,e);var t=e.parent;this.parentText=null!=t?t:this.parentText}},{key:"getDetail",value:function(){var e=this.detailText;return Dh(e).replace("%s",this.parentText)}}]),n}(Vh),Jh=function(e){Rh(n,e);var t=Nh(n);function n(){var e;Fh(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).isAllDay=!0,e.isAllDayBefore=!0,e.startDate=null,e.startDateBefore=null,e.dueDate=null,e.dueDateBefore=null,e.timezone=zs.h,e.timezoneBefore=zs.h,e.isFloating=!1,e.isFloatingBefore=!1,e.detailText=["",""],e}return Bh(n,[{key:"setDetailText",value:function(e){this.detailText=e}},{key:"fromJson",value:function(e){xh(Uh(n.prototype),"fromJson",this).call(this,e);var t=e.isAllDay,r=e.isAllDayBefore,a=e.startDateBefore,i=e.startDate,o=e.dueDate,c=e.dueDateBefore,s=e.timezone,u=e.timezoneBefore,l=e.isFloating,d=e.isFloatingBefore;this.isAllDay=null!=t?t:this.isAllDay,this.startDate=null!=i?i:this.startDate,this.dueDate=null!=o?o:this.dueDate,this.timezone=null!=s?s:this.timezone,this.isFloating=null!=l?l:this.isFloating,this.isAllDayBefore=null!=r?r:this.isAllDayBefore,this.startDateBefore=null!=a?a:this.startDateBefore,this.dueDateBefore=null!=c?c:this.dueDateBefore,this.timezoneBefore=null!=u?u:this.timezoneBefore,this.isFloatingBefore=null!=d?d:this.isFloatingBefore}},{key:"getDetail",value:function(){var e=this.startDateBefore,t=this.startDate,n=this.dueDateBefore,r=this.dueDate,a=this.isAllDayBefore,i=this.isAllDay,o=this.timezone,c=this.timezoneBefore,s=this.isFloating,u=this.isFloatingBefore,l=this.detailText,d=this.userInfo.preference;e===n&&(n=null),t===r&&(r=null);var f=Kh(a,c,u),p=Kh(i,o,s);return e=Wh(e,a,c,u),n=Wh(n,a,c,u),t=Wh(t,i,o,s),r=Wh(r,i,o,s),(t?Dh(l[0],{s1:Object(Mh.a)(e,n,a,f,d.showMeridiem,wh()),s2:Object(Mh.a)(t,r,i,p,d.showMeridiem,wh())}):Dh(l[1]))||""}}]),n}(Vh),$h=function(e){Rh(n,e);var t=Nh(n);function n(){var e;Fh(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).title="",e}return Bh(n,[{key:"fromJson",value:function(e){xh(Uh(n.prototype),"fromJson",this).call(this,e);var t=e.title;this.title=t}},{key:"getDetail",value:function(){return this.title||""}}]),n}(Vh),Xh=function(e){Rh(n,e);var t=Nh(n);function n(){var e;Fh(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).content="",e}return Bh(n,[{key:"fromJson",value:function(e){xh(Uh(n.prototype),"fromJson",this).call(this,e);var t=e.content;this.content=t}},{key:"getDetail",value:function(){return this.content||""}}]),n}(Vh),Qh=function(e){Rh(n,e);var t=Nh(n);function n(){var e;Fh(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).attachments=[],e}return Bh(n,[{key:"fromJson",value:function(e){xh(Uh(n.prototype),"fromJson",this).call(this,e);var t=e.attachments;this.attachments=t}},{key:"getDetail",value:function(){return(this.attachments||[]).map((function(e){return e.fileName})).join(",")||""}}]),n}(Vh),em=function(e){Rh(n,e);var t=Nh(n);function n(){var e;Fh(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).progress=0,e}return Bh(n,[{key:"fromJson",value:function(e){xh(Uh(n.prototype),"fromJson",this).call(this,e);var t=e.progress;this.progress=t}},{key:"getActionText",value:function(){var e=xh(Uh(n.prototype),"getActionText",this).call(this),t=this.progress;return t||0===t?e.replace("%s1",t+"%"):""}}]),n}(Vh),tm=function(e){Rh(n,e);var t=Nh(n);function n(){var e;Fh(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).kind=_h.TEXT,e.desc="",e.itemTitles=[""],e.content="",e}return Bh(n,[{key:"fromJson",value:function(e){xh(Uh(n.prototype),"fromJson",this).call(this,e);var t=e.kind,r=e.content,a=e.desc,i=e.itemTitles;this.kind=t,this.content=r,this.desc=a,this.itemTitles=i}},{key:"getIconName",value:function(){return"CHECKLIST"===this.kind?"switched-subtask":"switched-text"}},{key:"getActionText",value:function(){return this.kind===_h.CHECKLIST?Dh("activity_switch_task_kind_to_checklist"):Dh("activity_switch_task_kind_to_text")}},{key:"getDetail",value:function(){return this.kind===_h.CHECKLIST?Gh(this.desc,this.itemTitles):this.content||""}}]),n}(Vh),nm=function(e){Rh(n,e);var t=Nh(n);function n(){var e;Fh(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).description="",e}return Bh(n,[{key:"fromJson",value:function(e){xh(Uh(n.prototype),"fromJson",this).call(this,e);var t=e.description;this.description=t}},{key:"getDetail",value:function(){return this.description||""}}]),n}(Vh),rm=function(e){Rh(n,e);var t=Nh(n);function n(){var e;Fh(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).desc="",e.itemTitles=[""],e}return Bh(n,[{key:"fromJson",value:function(e){xh(Uh(n.prototype),"fromJson",this).call(this,e);var t=e.desc,r=e.itemTitles;this.desc=t,this.itemTitles=r}},{key:"getDetail",value:function(){return Gh(this.desc,this.itemTitles)||""}}]),n}(Vh),am=function(e){Rh(n,e);var t=Nh(n);function n(e,r,a){var i;return Fh(this,n),(i=t.call(this,e,r,a)).description="",i.isAllDayBefore=!1,i.isAllDay=!1,i.itemReminderDate=null,i.itemReminderDateBefore=null,i.itemTimeZone=zs.h,i.isFloating=!1,i.isFloating=a.isFloating,i}return Bh(n,[{key:"fromJson",value:function(e){xh(Uh(n.prototype),"fromJson",this).call(this,e);var t=e.description,r=e.isAllDayBefore,a=e.isAllDay,i=e.itemReminderDateBefore,o=e.itemReminderDate,c=e.itemTimeZone;this.description=t,this.isAllDayBefore=r,this.isAllDay=a,this.itemReminderDateBefore=i,this.itemReminderDate=o,this.itemTimeZone=c}},{key:"getDetail",value:function(){var e=Dh("activity_subtask_no_reminder"),t=Dh("activity_subtask_no_reminder"),n=this.userInfo.preference;if(this.itemReminderDateBefore){var r=Kh(this.isAllDayBefore,this.itemTimeZone,this.isFloating),a=Wh(this.itemReminderDateBefore,this.isAllDayBefore,this.itemTimeZone,this.isFloating);e=Object(Mh.a)(a,null,this.isAllDayBefore,r,n.showMeridiem,wh())}if(this.itemReminderDate){var i=Kh(this.isAllDay,this.itemTimeZone,this.isFloating),o=Wh(this.itemReminderDate,this.isAllDay,this.itemTimeZone,this.isFloating);t=Object(Mh.a)(o,null,this.isAllDay,i,n.showMeridiem,wh())}return["".concat(e,"  ").concat(t),this.description].join("\n")||""}}]),n}(Vh),im=function(e){Rh(n,e);var t=Nh(n);function n(){var e;Fh(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).completedTime=void 0,e}return Bh(n,[{key:"fromJson",value:function(e){xh(Uh(n.prototype),"fromJson",this).call(this,e);var t=e.completedTime;this.completedTime=null!=t?t:this.completedTime}},{key:"getActionText",value:function(){var e=Object(zs.j)().startOf("day"),t=Object(zs.j)(this.completedTime).startOf("day"),r="";return r=e.year()===t.clone().year()?Object(oe.a)("MMMD"):Object(oe.a)("ll"),xh(Uh(n.prototype),"getActionText",this).call(this).replace("%s1",t.format(r))}}]),n}(Vh);function om(e){var t=e.creator,n=e.actionDesc,r=e.recordTime,a=e.isWeb,i=Object(B.useContext)(Ih).preference;return Y.a.createElement("div",{className:"ta-summary"},Y.a.createElement("span",{className:"creator"},t),Y.a.createElement("span",{className:"action text-secondary",dangerouslySetInnerHTML:{__html:n}}),Y.a.createElement("span",{className:"time text-info text-sml"},Object(Mh.b)(r,i.showMeridiem,a?wh():Eh(),Dh("just_now"))))}function cm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function um(e){var t=e.detail,n=Object(B.useRef)(null),r=cm(Object(B.useState)(0),2),a=r[0],i=r[1],o=cm(Object(B.useState)(!1),2),c=o[0],s=o[1];Object(B.useEffect)((function(){var e,t,r=n.current;if(r){var a=parseFloat((null==r?void 0:r.style.lineHeight)||window.getComputedStyle&&(null===(e=document.defaultView)||void 0===e||null===(t=e.getComputedStyle(r,null))||void 0===t?void 0:t.getPropertyValue("line-height"))||"0");r.clientHeight/a>3&&i(3*a)}}),[]);var u=Object(B.useCallback)((function(){a>0&&s(!1)}),[a]),l=Object(B.useCallback)((function(){a>0&&s(!0)}),[a]);return t?Y.a.createElement("div",null,Y.a.createElement("p",{className:"ta-detail text-secondary",ref:n,style:{maxHeight:0===a||c?"unset":a}},t),0!==a&&(c?Y.a.createElement("span",{className:"action-btn collapse text-link",onClick:u},Dh("collapse")):Y.a.createElement("span",{className:"action-btn expand text-link",onClick:l},Dh("expand")))):null}function lm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dm(e){var t=e.data,n=e.task,r=e.isWeb,a=Object(B.useMemo)((function(){var e,r=(lm(e={},jh.T_CREATE,{iconName:"create",actionText:n.isCopiedAgenda?"activity_saved_task":"activity_created_task",class:zh}),lm(e,jh.T_DELETE,{iconName:"delete",actionText:"activity_deleted_task"}),lm(e,jh.T_DONE,{iconName:"done",actionText:"activity_completed_task"}),lm(e,jh.T_UNDONE,{iconName:"undone",actionText:"activity_undone_task"}),lm(e,jh.T_ASSIGN,{iconName:"assign",actionText:"activity_assigned_task",class:Zh}),lm(e,jh.T_REPEAT,{iconName:"done",actionText:"activity_repeated_task",detailText:["activity_repeated_task_next","activity_repeated_task_end"],class:Jh}),lm(e,jh.T_DUE,{iconName:"edit",actionText:"activity_changed_task_duedate",detailText:["activity_task_duedate","activity_task_duedate_clear"],class:Jh}),lm(e,jh.T_TITLE,{iconName:"edit",actionText:"activity_edited_task_title",class:$h}),lm(e,jh.T_CONTENT,{iconName:"edit",actionText:"activity_edited_task_content",class:Xh}),lm(e,jh.T_TRASH_BACK,{iconName:"undone",actionText:"activity_undeleted_task"}),lm(e,jh.T_ADD_FILE,{iconName:"add-file",actionText:"activity_task_add_file",class:Qh}),lm(e,jh.T_DEL_FILE,{iconName:"del-file",actionText:"activity_task_del_file",class:Qh}),lm(e,jh.T_COMPLETED_TIME,{iconName:"edit",actionText:"activity_change_completed_time",class:im}),lm(e,jh.T_PARENT,{iconName:"edit",actionText:"activity_add_parent",detailText:"activity_add_parent_detail",class:qh}),lm(e,jh.T_DELETE_PARENT,{iconName:"edit",actionText:"activity_delete_parent"}),lm(e,jh.T_PROGRESS,{iconName:"edit",actionText:"activity_changed_task_progress",class:em}),lm(e,jh.T_KIND,{class:tm}),lm(e,jh.C_CREATE,{iconName:"created-subtask",actionText:"activity_create_subtask",class:nm}),lm(e,jh.C_DELETE,{iconName:"deleted-subtask",actionText:"activity_delete_subtask",class:nm}),lm(e,jh.C_DONE,{iconName:"completed-subtask",actionText:"activity_done_subtask",class:nm}),lm(e,jh.C_UNDONE,{iconName:"undone-subtask",actionText:"activity_undone_subtask",class:nm}),lm(e,jh.C_REMINDER,{iconName:"changed-subtask",actionText:"activity_change_subtask_reminder",class:am}),lm(e,jh.C_CONTENT,{iconName:"edited-subtask",actionText:"activity_change_subtask_content",class:rm}),e);return function(e,t){var n=e.action,a=r[n];if(a){var i=Vh;a.class&&(i=a.class);var o=new i(a.iconName,a.actionText,t);return o.fromJson(e),o.setDetailText&&a.detailText&&o.setDetailText(a.detailText),o}}(t,n)}),[t,n]),i=Object(B.useContext)(Ih);if(a&&a.setUserInfo(i),a){var o=a.getIconName();return Y.a.createElement("li",{className:o},Y.a.createElement(Ch,{name:"ac-".concat(o),className:"ta-icon"}),Y.a.createElement("div",{className:"ta-info"},Y.a.createElement(om,{creator:a.getCreator(),actionDesc:a.getActionText(),recordTime:a.getRecordTime(),isWeb:r}),Y.a.createElement(um,{detail:a.getDetail()})))}return null}var fm=n(591);n(995);function pm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mm=function(e){var t=e.data,n=e.task,r=e.user,a=e.displayHeader,i=e.closeOptions,o=e.onUpdateRecordCount,c=e.isWeb,s=void 0===c||c,u=n.isCopiedAgenda,l=r.preference.language;!function(e){Sh=/^(zh)/i.test(Th=e)}(l),s?Object(oe.b)(wh()):Object(oe.b)(Eh());var f=l.replace("_","-").toLowerCase().replace(/\s*/g,""),p=Object(fm.a)();f.includes(p)||(s?Object(fm.c)(wh()?"zh-cn":"en"):Object(fm.c)(Eh()?"zh-cn":"en"));var h=Object(B.useMemo)((function(){var e=["T_PROGRESS","T_DUE","T_TITLE","T_CONTENT","T_ADD_FILE","T_DEL_FILE"],n=["T_DONE","T_UNDONE","T_REPEAT"],r=t.sort((function(e,t){var n=d.a.parseUTCString(e.when),r=d.a.parseUTCString(t.when);if(n){if(r){if(n>r)return-1;if(n<r)return 1;var a=e.id,i=t.id;return null==a&&null==a?0:a?i?a?-1:0:a.localeCompare(i):i?1:0}return n?-1:0}return r?1:0})).filter((function(e){return!(e.action.indexOf("AT_")>=0)&&!(u&&n.indexOf(e.action)>-1)}));return u&&(r=t.map((function(t){return e.indexOf(t.action)<0?t:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pm(Object(n),!0).forEach((function(t){hm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{whoProfile:{username:Dh("owner")}})}))),r}),[t,u]),m=h.length;return o&&o(m),Object(B.useEffect)((function(){o&&o(m)}),[m,o]),Y.a.createElement(Ih.Provider,{value:r},Y.a.createElement("div",{className:"t-activity"},a?Y.a.createElement("div",{className:"ta-header"},Y.a.createElement("span",{className:"title"},Dh("task_activity")),Y.a.createElement("span",{className:"count"},h.length),i.isEnable?Y.a.createElement("a",{className:"close",onClick:i.doClose},Y.a.createElement(Ch,{name:"mini-delete",className:"i-13 i-mic"})):null):null,Y.a.createElement("ul",{className:"can-select"},h.map((function(e){return Y.a.createElement(dm,{key:e.id,data:e,task:n,isWeb:s})})))))};function gm(e){return(gm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ym(e,t){return(ym=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tm(e);if(t){var a=Tm(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return km(this,n)}}function km(e,t){return!t||"object"!==gm(t)&&"function"!=typeof t?Om(e):t}function Om(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tm(e){return(Tm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ym(e,t)}(o,e);var t,n,r,a=bm(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).state={data:null},t.hideActivity=t.hideActivity.bind(Om(t)),t.getActivity=t.getActivity.bind(Om(t)),t.rootRef=Y.a.createRef(),t.listenId=i.a.uniqueId(),t}return t=o,(n=[{key:"componentDidMount",value:function(){f.a.subscribe(this.listenId,"showTaskActivity",this.getActivity)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.task.get("id")!==e.task.get("id")&&this.hideActivity()}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.data,r=this.props.adjustDetailContentHeight;t.data!==n&&r&&r()}},{key:"componentWillUnmount",value:function(){f.a.unSubscribe(this.listenId,"showTaskActivity")}},{key:"getActivity",value:function(e){var t=this;if(e===this.context){var n=this.props.task;Object(M.U)(n.get("projectId"),n.get("id")).then((function(e){t.setState({data:e.data||[]},(function(){var e=$(t.rootRef.current);e.closest("#content-view").scrollTo(e,1e3)}))}))}}},{key:"hideActivity",value:function(){this.setState({data:null})}},{key:"renderTaskActivity",value:function(){var e=this.props,t=e.task,n=e.isScheduleTask,r=e.isScheduleOwner,a=this.state.data;if(!a)return null;var i={isCopiedAgenda:n&&!r,timeZone:t.get("timeZone"),isFloating:t.get("isFloating")},o={username:Qe.b(),preference:{showMeridiem:x.b("showMeridiem"),language:v.d()}},c={isEnable:!0,doClose:this.hideActivity};return Y.a.createElement(mm,{data:a,task:i,displayHeader:!0,user:o,closeOptions:c})}},{key:"render",value:function(){return Y.a.createElement("div",{ref:this.rootRef,className:"section center-section"},this.renderTaskActivity())}}])&&vm(t.prototype,n),r&&vm(t,r),o}(Y.a.Component);Sm.contextType=Pn;var Em=Sm;function wm(e){return(wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jm(e,t){return(jm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mm(e);if(t){var a=Mm(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Cm(this,n)}}function Cm(e,t){return!t||"object"!==wm(t)&&"function"!=typeof t?Im(e):t}function Im(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mm(e){return(Mm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Am=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jm(e,t)}(i,e);var t,n,r,a=_m(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={isEdit:!1},t.isInChineses=!1,t.onBlur=t.onBlur.bind(Im(t)),t.onChange=t.onChange.bind(Im(t)),t.onKeyDown=t.onKeyDown.bind(Im(t)),t.onFocus=t.onFocus.bind(Im(t)),t.selectHint=t.selectHint.bind(Im(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props.adjustDetailContentHeight;t&&t(),$("body").on("click.detailBodyTag",(function(t){$(t.target).closest(".tag-item.new, .CodeMirror-hints").length||e.onBlur()})),this._isMounted=!0}},{key:"componentWillUnmount",value:function(){$("body").off("click.detailBodyTag"),this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state.isEdit,n=this.props.intl;return t?Y.a.createElement("div",{ref:"wrapper",className:"tag-item new"},Y.a.createElement(ko,{className:"new-title",ref:function(t){return e.domEditor=t},placeholder:n.formatMessage({id:"tag_placeholder"}),options:{autofocus:!0},onChange:this.onChange,onKeyDown:this.onKeyDown}),Y.a.createElement("div",{ref:"warn",className:"warning-tooltip pop-shadow hide"},n.formatMessage({id:"warn_tag_name"}))):Y.a.createElement("button",{className:"add-tag fill-theme",onClick:function(t){e.setState({isEdit:!0},(function(){e.domEditor&&e.showHint()}))}},Y.a.createElement(Q.a,{name:"add"}))}},{key:"onBlur",value:function(){var e=this;this._isMounted&&this.setState({isEdit:!1},(function(){e.toggleWarnning(!1)}))}},{key:"onChange",value:function(){this.domEditor&&this.showHint()}},{key:"onFocus",value:function(){this.domEditor&&this.showHint()}},{key:"onKeyDown",value:function(e,t){229===t.keyCode?this.isInChineses=!0:this.isInChineses=!1}},{key:"showHint",value:function(){var e=this.domEditor.getCodeMirror(),t=e.getCursor().ch,n=e.getLine(e.getCursor().line),r=[];!this.isInChineses&&n.match(td.a.tagNameFilter)?(this.toggleWarnning(!0),e.showHint({})):(this.toggleWarnning(!1),r=Object(zt.e)().map((function(e){return{match:e,hint:e+" "}})),e.showHint({hint:Un.a.hint.tag,completeSingle:!1,alignWithWord:!0,start:0,end:t,text:n,callback:this.selectHint,source:r}))}},{key:"toggleWarnning",value:function(e){this.refs.warn&&$(this.refs.warn).toggleClass("hide",!e),this.refs.wrapper&&$(this.refs.wrapper).toggleClass("warning",e)}},{key:"selectHint",value:function(e,t){var n=this,r=t.text.slice(0,-1);if(Object(zt.h)().indexOf(r.toLowerCase())<0){var a=Object(zt.a)({label:r,name:r.toLowerCase()});setTimeout((function(){n.props.addTag(a)}),0)}setTimeout((function(){n.props.onUpdate(r)}),0),this.onBlur()}}])&&Dm(t.prototype,n),r&&Dm(t,r),i}(Y.a.Component),xm=Object(V.c)(null,(function(e){return{addTag:function(t){e(So.a(t))}}}))(Object(me.c)(Am));function Rm(e){return(Rm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nm(e,t){return(Nm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Hm(e);if(t){var a=Hm(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Um(this,n)}}function Um(e,t){return!t||"object"!==Rm(t)&&"function"!=typeof t?Fm(e):t}function Fm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hm(e){return(Hm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nm(e,t)}(i,e);var t,n,r,a=Lm(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).deleteTag=t.deleteTag.bind(Fm(t)),t.updateTag=t.updateTag.bind(Fm(t)),t}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.tags,r=t.readOnly,a=t.deleteTag,i=t.isPureTags,o=t.adjustDetailContentHeight,c=!1;return Y.a.createElement("div",{className:"tag-list"},n.map((function(t){if(i)return Y.a.createElement(nn,{tagName:t,key:t,readOnly:r,onDelete:null});var n=zt.f(t);if(n){var o=Object(Vt.a)(n);return c=!0,Y.a.createElement(nn,{tagName:o,tagColor:n.get("color"),key:o.toLowerCase(),readOnly:r,onDelete:a?e.deleteTag:null})}return null})),!c||r||i?null:Y.a.createElement(xm,{onUpdate:this.updateTag,adjustDetailContentHeight:o}))}},{key:"deleteTag",value:function(e){var t=this.props.deleteTag;t&&t(e)}},{key:"updateTag",value:function(e){this.props.updateTag(e)}}])&&Pm(t.prototype,n),r&&Pm(t,r),i}(Y.a.Component);Bm.defaultProps={tags:[],isPureTags:!1,readOnly:!1,deleteTag:null,updateTag:function(){}};var Ym=Bm;function Wm(e){return(Wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Km(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gm(e,t){return(Gm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qm(e);if(t){var a=qm(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return zm(this,n)}}function zm(e,t){return!t||"object"!==Wm(t)&&"function"!=typeof t?Zm(e):t}function Zm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qm(e){return(qm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gm(e,t)}(c,e);var t,n,a,o=Vm(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).state={tagList:t.handleTags(e)},t.deleteTag=t.deleteTag.bind(Zm(t)),t.updateTag=t.updateTag.bind(Zm(t)),t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this.props.adjustDetailContentHeight;e&&e()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){Object(r.is)(e.tags,this.props.tags)&&Object(r.is)(e.task.get("tags"),this.props.task.get("tags"))||this.setState({tagList:this.handleTags(e)})}},{key:"componentDidUpdate",value:function(){var e=this.props.adjustDetailContentHeight;e&&e()}},{key:"handleTags",value:function(e){var t=e.tags,n=e.task,a=e.isReadOnly,o=n.get("tags");if(!r.List.isList(o))return[];o=o.toArray(),o=i.a.uniq(o.map((function(e){return e.toLowerCase()})));var c=t.map((function(e){return e.get("name")})).toArray();return a&&(o=i.a.intersection(o,c)),o.sort((function(e,t){var n=c.indexOf(e),r=c.indexOf(t);return n===r?0:n>r?1:-1})),o}},{key:"deleteTag",value:function(e){this.props.onAction("deleteTag",{tagName:e})}},{key:"updateTag",value:function(e){this.props.onAction("addTag",{tagName:e})}},{key:"render",value:function(){var e=this.props.adjustDetailContentHeight,t=this.props.isReadOnly,n=this.state.tagList;return Y.a.createElement(Ym,{tags:n,readOnly:t,deleteTag:this.deleteTag,updateTag:this.updateTag,adjustDetailContentHeight:e})}}])&&Km(t.prototype,n),a&&Km(t,a),c}(Y.a.Component);Jm.defaultProps={task:{}};var $m,Xm,Qm,eg=Object(V.c)((function(e){return{tags:e.tags}}),(function(e){return{updateTaskTags:function(t,n){e(F.S(t,n))}}}))(Jm),tg=n(393);function ng(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rg(){return(rg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ag(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ig(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return og(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return og(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function og(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var cg="heading_1",sg="heading_2",ug="heading_3",lg="fullscreen",dg="exit_fullscreen",fg="bold",pg="italic",hg="underline",mg="strikethrough",gg="highlight",vg="bulleted_list",yg="numbered_list",bg="link",kg="quote",Og="check_item_list",Tg="separator_line",Sg="code_inline",Eg=[{name:"heading",desc:"heading_options"},{name:fg},{name:gg},{name:"divider-2"},{name:Og,iconName:"md-tl-list-3"},{name:vg,iconName:"md-tl-list-1"},{name:yg,iconName:"md-tl-list-2"},{name:"divider-3"},{name:pg},{name:hg},{name:mg},{name:Tg,iconName:"md-tl-separator-line"},{name:"divider-4"},{name:bg},{name:Sg,iconName:"md-tl-code-inline"},{name:kg}],wg=Y.a.forwardRef((function(e,t){var n=e.isInPopup,r=e.onSelect,a=e.displayFullScreen,i=e.className,o=void 0===i?"md-tl":i,c=e.headingPlacement,s=[].concat(Eg);return n||(s.unshift({name:"divider-1"}),a?s.unshift({name:lg,desc:"immersive_writing"}):s.unshift({name:dg,desc:"exit",iconName:"md-tl-fullscreen-exit"})),Y.a.createElement("div",{className:o,ref:t},Y.a.createElement("div",{className:"md-tl-container"},s.map((function(e){var t=e.name;return e.name.startsWith("divider")?Y.a.createElement("div",{key:t,className:"md-tl-".concat(e.name)}):"heading"===e.name?Y.a.createElement(Cg,{key:t,item:e,onSelect:r,placement:c}):Y.a.createElement(_g,{key:t,item:e,onItemClick:function(e){r(e)}})}))))}));wg.displayName="EditorToolbar";var Dg=Object(me.c)(wg,{forwardRef:!0}),jg=Y.a.forwardRef((function(e,t){var n=e.item,r=e.onItemClick,a=e.intl,i=n.name,o=n.iconName;o||(o="md-tl-".concat(i));var c=n.className;c||(c="md-tl-btn-".concat(i));var s=n.desc;s||(s=i),s=a.formatMessage({id:s});var u=Ag[i];u&&(s=u.replace("%@",s));var l=(tg.g?xg.mac:xg.windows)[i];return l&&(s="".concat(s," (").concat(l,")")),Y.a.createElement("a",{ref:t,title:s,className:"md-tl-btn ".concat(c),onClick:function(e){e.preventDefault(),r(i)}},Y.a.createElement(Q.a,{name:o,className:"i-o-36"}))})),_g=Object(me.c)(jg,{forwardRef:!0});function Cg(e){var t=e.item,n=e.onSelect,r=e.placement,a=void 0===r?"topLeft":r,i=ig(Object(B.useState)(!1),2),o=i[0],c=i[1],s=tg.g?xg.mac:xg.windows,u=Y.a.createElement(Xe,{onSelect:function(e){c(!1),n&&n(e.key)}},Y.a.createElement(Ig,{key:cg,iconName:"md-tl-h1",formattingName:["# ","heading_1"],shortcut:s.h1}),Y.a.createElement(Ig,{key:sg,iconName:"md-tl-h2",formattingName:["## ","heading_2"],shortcut:s.h2}),Y.a.createElement(Ig,{key:ug,iconName:"md-tl-h3",formattingName:["### ","heading_3"],shortcut:s.h3}));return Y.a.createElement(Re,{menuClassName:"dropdown-menu-md-heading",menu:u,placement:a,visible:o,onVisibleChange:function(e){o!==e&&c(e)}},Y.a.createElement(_g,{item:t,onItemClick:function(){c(!o)}}))}var Ig=function(e){var t=e.key,n=e.iconName,r=e.formattingName,a=e.shortcut,i=ag(e,["key","iconName","formattingName","shortcut"]);return Y.a.createElement(Ze,rg({key:t},i),Y.a.createElement("a",null,Y.a.createElement(Q.a,{name:n,className:"i-o-54"}),Y.a.createElement("div",{className:"md-tl-name"},Y.a.createElement(Mg,{name:r})),Y.a.createElement("span",{className:"md-tl-shortcut"},a)))},Mg=function(e){var t=e.name;return t?"string"==typeof t?Y.a.createElement(Je.a,{id:t,tagName:"span"}):t instanceof Array?t.map((function(e,t){if(t%2==0)return Y.a.createElement("span",{key:t,className:"md-tl-formatting"},e);var n="URL"===e?"URL":intl.formatMessage({id:e});return Y.a.createElement("span",{key:t},n)})):void 0:Y.a.createElement("span",null)},Ag=(ng($m={},fg,"**%@**"),ng($m,pg,"*%@*"),ng($m,hg,"~%@~"),ng($m,mg,"~~%@~~"),ng($m,gg,"::%@::"),ng($m,bg,"[%@](URL)"),ng($m,vg,"* %@"),ng($m,yg,"1. %@"),ng($m,kg,"> %@"),ng($m,Og,"- [ ] %@"),ng($m,Sg,"`%@`"),ng($m,Tg,"--- %@"),$m),xg={mac:(Xm={h1:"1",h2:"2",h3:"3"},ng(Xm,lg,"0"),ng(Xm,dg,"0"),ng(Xm,fg,"B"),ng(Xm,pg,"I"),ng(Xm,hg,"U"),ng(Xm,mg,"X"),ng(Xm,gg,"Y"),ng(Xm,bg,"K"),ng(Xm,vg,"8"),ng(Xm,yg,"7"),ng(Xm,kg,"U"),ng(Xm,Og,"S"),ng(Xm,Sg,"C"),Xm),windows:(Qm={h1:"Alt+Ctrl+1",h2:"Alt+Ctrl+2",h3:"Alt+Ctrl+3"},ng(Qm,lg,"Ctrl+Alt+0"),ng(Qm,dg,"Ctrl+Alt+0"),ng(Qm,fg,"Ctrl+B"),ng(Qm,pg,"Ctrl+I"),ng(Qm,hg,"Ctrl+U"),ng(Qm,mg,"Shift+Ctrl+X"),ng(Qm,gg,"Shift+Ctrl+Y"),ng(Qm,bg,"Ctrl+K"),ng(Qm,vg,"Shift+Ctrl+8"),ng(Qm,yg,"Shift+Ctrl+7"),ng(Qm,kg,"Shift+Ctrl+U"),ng(Qm,Og,"Shift+Ctrl+S"),ng(Qm,Sg,"Alt+Ctrl+C"),Qm)},Rg=n(654),Pg=n(421),Ng=function(){var e=Object(B.useContext)(It).env,t=Object(B.useContext)(Pn);return"detail"===e?"".concat(e,".").concat(t):e},Lg=function(){var e=Ng();return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t&&f.a.dispatch("focusToTaskItem.".concat(e,".").concat(t),n),"kanban"===e&&setTimeout((function(){f.a.dispatch("focusToDetailTitle")}))}},Ug=function(){var e=Object(V.d)(),t=Object(V.e)((function(e){return e.globalState.get("taskCollapse")})),n=Object(B.useContext)(It).env;return Object(B.useCallback)((function(r){t.get(Object(wn.e)(n,r,T.W()))&&e(Object(Pg.g)(Object(wn.e)(n,r,T.W())))}),[e,n,t])};var Fg=function(e){var t=e.projectId,n=e.parentId,r=e.status,a=e.columnId,i=Object(G.a)(),o=Lg();return Y.a.createElement("button",{type:"button",className:"add-descendant-task",onClick:function(e){var i=Object(j.n)(t),c=Object(ut.a)(i);if(Object(ut.q)(i))g.b({text:v.a("project_permission_status",{s1:v.a("project_".concat(c))})});else{e.stopPropagation(),e.preventDefault();var s=Object(T.a)({projectId:t,parentId:n,position:"bottom",status:r,columnId:a});null!=s&&setTimeout((function(){o(s.get("id"))}))}}},Y.a.createElement(Q.a,{name:"subtask-add"}),i.formatMessage({id:"add_subtask"}))},Hg=n(996),Bg=n.n(Hg);function Yg(e){return(Yg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wg(){return(Wg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Kg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kg(Object(n),!0).forEach((function(t){Vg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zg(e,t,n){return t&&zg(e.prototype,t),n&&zg(e,n),e}function qg(e,t){return(qg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qg(e);if(t){var a=Qg(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $g(this,n)}}function $g(e,t){return!t||"object"!==Yg(t)&&"function"!=typeof t?Xg(e):t}function Xg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qg(e){return(Qg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ev=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qg(e,t)}(n,e);var t=Jg(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).context=void 0,r._listenId=void 0,r.taskWrapperRef=void 0,r._listenId=i.a.uniqueId(),r.taskWrapperRef=Y.a.createRef(),r.hideOnView=r.hideOnView.bind(Xg(r)),r}return Zg(n,null,[{key:"contextType",get:function(){return It}}]),Zg(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onTaskMounted,n=e.displayListModel;t&&t(n.id),f.a.subscribe(this._listenId,"hideOnListOnce.".concat(n.id),this.hideOnView)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.onTaskUnmount,n=e.displayListModel;t&&t(n.id),f.a.unSubscribe(this._listenId,"hideOnListOnce.".concat(n.id))}},{key:"hideOnView",value:function(){var e,t,n=this;null===(e=this.taskWrapperRef.current)||void 0===e||e.scrollTop,null===(t=this.taskWrapperRef.current)||void 0===t||t.classList.add("hide-opacity"),setTimeout((function(){var e,t;null===(e=n.taskWrapperRef.current)||void 0===e||e.scrollTop,null===(t=n.taskWrapperRef.current)||void 0===t||t.classList.remove("hide-opacity")}),200)}},{key:"render",value:function(){var e=this.context,t=e.rootLevel,n=e.env;return function(e,t,n,r){var a,i=e.displayListModel,o=e.projectColor,c=e.style,s=e.columnId,u=null===(a=i.model)||void 0===a?void 0:a.originModel,l={};l.boxShadow="detail"===r||"kanban"===r?"":"inset 3px 0 0 "+(o||"transparent");return Y.a.createElement(X,{type:"li",ref:t,key:u.get("id"),className:tv(e,r),order:u.get("sortOrder"),taskid:u.get("id"),"section-id":"".concat(null!=s?s:"").concat(i.section.id),style:Gg({},c,{},l)},function(e,t,n){var r=e.displayListModel,a=e.renderQuick,i=r.level,o=Cn(i,t,n);return Y.a.createElement(pT,Wg({},e,{offsetLeft:o,isScrolling:a}))}(e,n,r))}(this.props,this.taskWrapperRef,t,n)}}]),n}(Y.a.PureComponent);function tv(e,t){var n,r=e.displayListModel,a=e.active,i=e.selected,o=e.taskItemClassName,c=null===(n=r.model)||void 0===n?void 0:n.originModel,s=w.ab(c),u=w.kb(c),l=!s&&!u;return K()("task",w.A(c),w.t(c),{active:a,selected:l&&i,"in-detail":"detail"===t},o)}function nv(e){var t=Object(j.n)(e.displayListModel.model.projectId);return t?ut.a(t):Mn.c.read}var rv=Object(V.c)((function(e,t){var n;return{selected:-1!==("detail"===t.env?e.tasks.detailActiveSelectedTaskIds.get("selected"):e.tasks.activeSelectedTaskIds.get("selected")).indexOf(t.displayListModel.id),active:("detail"===t.env?e.tasks.detailActiveSelectedTaskIds.get("active"):e.tasks.activeSelectedTaskIds.get("active"))===t.displayListModel.id,projectColor:dn(e)[null!==(n=t.displayListModel.model.projectId)&&void 0!==n?n:""],projectPermission:nv(t)}}))(ev),av=n(997),iv=n.n(av),ov=function(e){var t=e.size,n=e.className;return B.createElement("div",{className:K()(n,iv.a["sk-circle"]),style:{width:t,height:t}},B.createElement("div",{className:K()(iv.a["sk-child"])}),B.createElement("div",{className:K()(iv.a["sk-circle2"],iv.a["sk-child"])}),B.createElement("div",{className:K()(iv.a["sk-circle3"],iv.a["sk-child"])}),B.createElement("div",{className:K()(iv.a["sk-circle4"],iv.a["sk-child"])}),B.createElement("div",{className:K()(iv.a["sk-circle5"],iv.a["sk-child"])}),B.createElement("div",{className:K()(iv.a["sk-circle6"],iv.a["sk-child"])}),B.createElement("div",{className:K()(iv.a["sk-circle7"],iv.a["sk-child"])}),B.createElement("div",{className:K()(iv.a["sk-circle8"],iv.a["sk-child"])}),B.createElement("div",{className:K()(iv.a["sk-circle9"],iv.a["sk-child"])}),B.createElement("div",{className:K()(iv.a["sk-circle10"],iv.a["sk-child"])}),B.createElement("div",{className:K()(iv.a["sk-circle11"],iv.a["sk-child"])}),B.createElement("div",{className:K()(iv.a["sk-circle12"],iv.a["sk-child"])}))};function cv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var uv=Object(Mt.createSelector)([function(e){return e.env},function(e){return e.rootLevel},function(e){return e.rootId}],(function(e,t,n){return{env:e,rootLevel:t,rootId:n}})),lv=Object(At.b)([function(e){return e.tasks},function(e){return e.task},function(e){return e.taskCollapseStatus},function(e){return e.showCompleted}],(function(e,t,n,r){var a=-1,i=[];return Object(I.c)(Object(I.b)(e,r,(function(e){e.model&&(e.collapsed=n.get(Object(wn.e)("detail",e.id))||!1)}))).every((function(e){if(-1===a)e.id===t.get("id")&&(a=e.level);else if(-1!==a){if(!(e.level>a))return!1;i.push(e)}return!0})),i})),dv=function(e){var t=e.task,n=e.adjustDetailContentHeight,r=Object(V.e)((function(e){return e.router})).location.pathname,a=Object(V.d)(),o=Object(B.useCallback)((function(){a(Object(F.h)()),a(Object(F.z)(""))}),[a]);Object(z.e)(r)!==r&&(o(),Object(bt.g)("detail")),Object(B.useEffect)((function(){return function(){o(),Object(bt.g)("detail")}}),[o]);var s=Object(B.useRef)(!1),u=(Object(G.a)(),cv(Object(B.useState)(!1),2)),l=u[0],d=u[1],f=t.get("id"),p=Object(V.e)((function(e){return e.globalState.get("taskCollapse")})),h=Object(V.e)((function(e){return e.preference.get("showCompleted")})),m=Object(V.e)((function(){var e=Object(T.O)(t,h);return lv({tasks:e,task:t,taskCollapseStatus:p,showCompleted:h})})),g=Object(Rg.a)((function(){return m}),[m],(function(e,t){var n=e[0],r=t[0];return ee.b.isArrayEqual(n,r)})),v=Object(B.useCallback)((function(){d(!0);var e=Object(T.n)(f);e&&Object(T.g)(e).then((function(){s.current&&d(!1)})).catch((function(e){c.a.error(e),s.current&&d(!1)}))}),[f]);Object(B.useEffect)((function(){return s.current=!0,function(){s.current=!1}}),[]),Object(B.useEffect)((function(){h&&v()}),[v,h]);var y=Object(B.useMemo)((function(){var e;return null===(e=i.a.maxBy(g,(function(e){return-e.level})))||void 0===e?void 0:e.level}),[g]),b=Object(B.useRef)(g);Object(B.useEffect)((function(){b.current=g}),[g]);var k=g.length;if(Object(B.useEffect)((function(){n()}),[n,k]),0===k)return null;var O=uv({rootLevel:y,env:"detail",rootId:t.get("id")});return Y.a.createElement(It.Provider,{value:O},Y.a.createElement("div",{id:"descendant-task-view",className:Bg.a.listWrapper},Y.a.createElement("ul",{className:"descendant-task-list"},g.map((function(e,n){return e.section instanceof pn.i?Y.a.createElement(pv,{key:e.section.id,onClick:function(){l||v()},isLoading:l,level:e.level,section:e.section}):Y.a.createElement(fv,{key:e.id,index:n,displayListModel:e,displayListModelsRef:b,columnId:t.get("columnId")})})),function(){var e=t.get("projectId");if(null==e)return null;var n=Object(j.n)(e);return null==n||Object(ut.f)(n)||y>ie.a?null:Y.a.createElement(Fg,{key:"add",projectId:e,parentId:f,status:t.get("status"),columnId:t.get("columnId")})}())))},fv=function(e){var t,n=e.index,r=e.displayListModel,a=e.displayListModelsRef,i=e.columnId,o=Object(Rg.a)((function(){return r}),[r],(function(e,t){var n=e[0],r=t[0];return n&&n.equals(r)})),c=o.section,s=Object(B.useContext)(It).env;return Y.a.createElement(rv,{env:s,key:o.id,columnId:i,animate:!1,canSort:c.isSortFree,disabled:!1,index:n,isDateSort:c.isSortFree,isCompletedSection:c instanceof pn.b,task:null===(t=o.model)||void 0===t?void 0:t.originModel,displayListModel:o,displayListModelsRef:a,renderQuick:!1})},pv=function(e){var t=Object(B.useContext)(It).rootLevel,n=e.section,r=e.level,a=e.isLoading,i=e.onClick,o=Object(G.a)(),c=Cn(r,t);return Y.a.createElement("li",{className:"more-children",onClick:i},Y.a.createElement("div",{className:K()("more-children-inner",{loading:a}),style:{paddingLeft:c}},a&&Y.a.createElement(ov,{size:14,className:"more-children-spinner"}),!a&&Y.a.createElement(Q.a,{name:"more-children",className:"i-o-12 i-black"}),Y.a.createElement("span",null,a?o.formatMessage({id:"loading"}):o.formatMessage({id:n.name},{d:n.count}))))},hv=n(998),mv=n.n(hv),gv=function(){$("body").removeClass((function(e,t){return(t.match(/print-\S+/g)||[]).join(" ")}))},vv=n(510),yv=n(999),bv=n.n(yv);var kv=function(e){var t=e.options,n=e.maskClassName,r=e.className,a=e.hideMenu,i=e.children,o=e.relativeRef,c=Object(B.useRef)(null),s=Object(B.useRef)(null);return Object(z.c)(c,s,a),Object(z.a)("simple-menu",a),Object(B.useEffect)((function(){!function(){var e=function(){if(o&&o.current){var e=o.current.getBoundingClientRect(),n=e.top,r=e.left,a=e.height,i=e.width;if(null==t?void 0:t.center){var s,u=(((null===(s=c.current)||void 0===s?void 0:s.clientWidth)||i)-i)/2;return"top"===(null==t?void 0:t.position)?{top:n-a-10,left:r-u}:{top:n+a,left:r-u}}return"top"===(null==t?void 0:t.position)?{top:n-a-10,left:r}:{top:n+a,left:r}}return{top:0,left:0}}(),n=e.top,r=e.left;if(c.current){var a=c.current,i=a.offsetHeight,s=a.offsetWidth;n+i>window.innerHeight&&(n-=i),r+s>window.innerWidth&&(r-=s),$(c.current).css({top:n+"px",left:Math.max(r,0)+"px"})}}()}),[o,t]),Y.a.createElement(An.a,null,Y.a.createElement("div",{className:"menu-mask ".concat(n||""),ref:s},Y.a.createElement("div",{className:K()(r,"dropdown-menu"),ref:c},i)))},Ov=n(655),Tv=n.n(Ov),Sv=function(e,t){var n=t.top,r=t.left;if(e){var a=e.offsetHeight,i=e.offsetWidth;n+a>window.innerHeight&&(n-=a),r+i>window.innerWidth&&(r-=i),$(e).css({top:n+"px",left:Math.max(r,0)+"px"})}};function Ev(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Dv=new Set(["left-top","left-bottom","right-top","right-bottom"]),jv=Y.a.forwardRef((function(e,t){var n=e.relativeRef,r=e.hideMenu,a=e.menu,i=e.placement,o=void 0===i?"bottom-left":i,c=e.className,s=e.gap,u=void 0===s?0:s,l=Object(B.useRef)(null),d=Ev(Object(B.useState)({top:0,left:0}),2),f=d[0],p=d[1],h=Object(B.useCallback)((function(e){if(e)if(n&&n.current){var t=n.current.getBoundingClientRect(),r=t.top,a=t.left,i=t.height,c=t.width,s=e.offsetHeight,l=e.offsetWidth,d=Ev(o.split("-"),2),f=d[0],h=d[1];Dv.has(o)?p({top:"top"===h?r:r+i-s,left:"left"===f?a-l-u:a+c+u}):p({top:"top"===f?r-s-u:r+i+u,left:"left"===h?a:a+c-l})}else p({top:0,left:0})}),[u,o,n]),m=Ev(Object(z.b)(h),2),g=m[0],y=m[1],b=Object(B.useCallback)((function(e){y(e),t&&(t.current=e)}),[t,y]),k=f.top,O=f.left;return Object(z.c)(g,l,r),Object(z.d)(g,l,r),Object(z.a)("select-menu",r),Object(B.useEffect)((function(){g.current&&Sv(g.current,f)}),[g,f]),Y.a.createElement(An.a,null,a.length>0&&Y.a.createElement("div",{className:K()("menu-mask",c),ref:l},Y.a.createElement("div",{ref:b,className:K()("can-not-select",Tv.a.container),style:{top:k+"px",left:O+"px"}},a.map((function(e){var t=e.langId,n=e.className,i=void 0===n?"":n;return Y.a.createElement("div",{key:t,className:K()(Tv.a.actionBlock,i),onClick:function(e){return function(e,t){e.stopPropagation();var n=a.find((function(e){return e.langId===t})),i=(null!=n?n:{}).action;(void 0===i?function(){}:i)(),r()}(e,t)}},e.icon&&Y.a.createElement(Q.a,{name:e.icon.name,className:K()(Tv.a.icon,"i-o-36")}),Y.a.createElement("span",{className:Tv.a.text},Object(v.a)(t)))})))))})),_v=n(1e3),Cv=n.n(_v);function Iv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Av=Y.a.forwardRef((function(e,t){var n=e.value,r=e.onClick,a=e.isActive,i=e.className,o=void 0===i?"":i,c=e.height,s=void 0===c?32:c,u=e.disabled,l=void 0!==u&&u,d=Object(z.f)(),f={lineHeight:"".concat(s,"px")};return a&&(f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Iv(Object(n),!0).forEach((function(t){Mv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},f,{border:"1px solid ".concat(d)})),Y.a.createElement("div",{ref:t,className:K()(Cv.a.selectorContainer,o,"can-not-select",Mv({},Cv.a.disabled,l)),onClick:function(e){!l&&r(e)},style:{height:s}},Y.a.createElement("div",{className:K()(Cv.a.selector,"eclipse-text"),style:f},n),Y.a.createElement(Q.a,{name:"multi-select-expand-triangle",className:Cv.a.arrow}))}));Av.displayName="Selector";var xv=Av;function Rv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Nv=/^\d+?$/,Lv=function(e){var t=e.taskId,n=e.visible,r=e.setVisible,a=e.relativeRef,i=e.afterSubmit,o=void 0===i?function(){}:i,c=Object(G.a)(),s=Object(B.useRef)(null),u=Object(B.useMemo)((function(){return Object(T.n)(t)}),[t]),l=Object(B.useMemo)((function(){var e=u&&Object(w.x)(u);if(null==e)return{type:y.a.defaultSelectEstimationType,pomoValue:0,durationValue:{hours:0,mins:0}};if(0!==e.get("estimatedDuration")){var t=Object(vv.a)(e.get("estimatedDuration"),60),n=t%60;return{type:"estimated_duration",pomoValue:0,durationValue:{hours:Object(vv.a)(t-n,60),mins:n}}}return{type:0!==e.get("estimatedPomo")?"estimated_pomo":y.a.defaultSelectEstimationType,pomoValue:e.get("estimatedPomo"),durationValue:{hours:0,mins:0}}}),[u]),d=Rv(Object(B.useState)(l.type),2),f=d[0],p=d[1],h=Object(B.useRef)(f),m=Rv(Object(B.useState)(l.pomoValue),2),g=m[0],v=m[1],b=Rv(Object(B.useState)(l.durationValue),2),k=b[0],O=b[1],S=Rv(Object(B.useState)(!1),2),E=S[0],D=S[1],j=Object(z.e)(n);Object(B.useEffect)((function(){j!==n&&n&&(p(l.type),v(l.pomoValue),O(l.durationValue))}),[l.durationValue,l.pomoValue,l.type,n,j]);var _=Object(B.useCallback)((function(e,t){null!=u&&Object(T.hb)(u,{estimatedPomo:e,estimatedDuration:t})}),[u]),C=function(e,t,n){return Y.a.createElement("div",{className:bv.a.inputGroup},Y.a.createElement("input",{type:"text",value:e,onChange:n}),Y.a.createElement("p",null,t))},I=function(e){var t=e.target.value;if(""===t&&v(""),Nv.test(t)){var n=+t;n>=0&&v(Math.min(n,60))}},M=function(e){var t=e.target.value;if(""===t&&O({hours:"",mins:k.mins}),Nv.test(t)){var n=+t;n>=0&&O({hours:Math.min(n,99999),mins:k.mins})}},A=function(e){var t=e.target.value;if(""===t&&O({hours:k.hours,mins:""}),Nv.test(t)){var n=+t;n>=0&&O({hours:k.hours,mins:Math.min(n,99999)})}},x=function(){if("estimated_duration"===f){var e=""===k.hours?0:60*k.hours*60,t=""===k.mins?0:60*k.mins;_(0,Math.min(359999940,e+t))}else{_(""!==g?g:0,0)}h.current!==f&&(y.a.defaultSelectEstimationType=f),r(!1),o()};return Y.a.createElement(Y.a.Fragment,null,n&&Y.a.createElement(kv,{relativeRef:a,hideMenu:function(){return r(!1)},className:K()("valid-task-menu-click-area calendar-click-ignore kanban-click-ignore",bv.a.estimationMenu)},Y.a.createElement(xv,{ref:s,value:c.formatMessage({id:f}),onClick:function(e){e.stopPropagation(),D(!0)},isActive:E}),"estimated_duration"===f?Y.a.createElement("div",{className:bv.a.content},C(k.hours,c.formatMessage({id:+k.hours>1?"hrs":"hr"}),M),C(k.mins,c.formatMessage({id:+k.mins>1?"mins":"min"}),A)):Y.a.createElement("div",{className:bv.a.content},C(g,c.formatMessage({id:+g>1?"_pomos":"_pomo"}),I)),Y.a.createElement("div",{className:bv.a.footer},Y.a.createElement(Ya.a,{onClick:function(){return r(!1)},type:"cancel"},c.formatMessage({id:"cancel"})),Y.a.createElement(Ya.a,{onClick:x,className:"btn-primary"},c.formatMessage({id:"ok"})))),E&&Y.a.createElement(jv,{className:"valid-task-menu-click-area calendar-click-ignore kanban-click-ignore",relativeRef:s,placement:"bottom-left",menu:[{langId:"estimated_pomo",action:function(){p("estimated_pomo")}},{langId:"estimated_duration",action:function(){p("estimated_duration")}}],hideMenu:function(){D(!1)},gap:4}))};function Uv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hv=function(e){var t=e.placement,n=void 0===t?"right-top":t,r=e.taskId,a=e.relativeRef,i=e.pomodoroSubMenuVisible,o=e.setPomodoroSubMenuVisible,c=e.hideTaskMenu,s=void 0===c?function(){}:c,u=e.startPomo,l=e.isPomoInProgress,d=Uv(Object(B.useState)(!1),2),f=d[0],p=d[1],h=Object(B.useRef)(null),m=Object(B.useRef)(!1);return Y.a.createElement(Y.a.Fragment,null,i&&Y.a.createElement(jv,{ref:h,className:"valid-task-menu-click-area calendar-click-ignore kanban-click-ignore",relativeRef:a,placement:n,menu:[{langId:l?"add_to_pomo":"pomo_start_focus",action:function(){u(),o(!1),s()}},{langId:"estimation_duration",action:function(){m.current=!0,p(!0)},className:f?"dropdown-menu-menu-submenu-open":""}],hideMenu:function(){m.current?m.current=!1:o(!1)},gap:4}),Y.a.createElement(Lv,{key:f.toString(),taskId:r,visible:f,setVisible:p,relativeRef:h,afterSubmit:s}))},Bv=function(e){return{type:et.Pb,id:e}};function Yv(e){return(Yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kv(e,t){return(Kv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zv(e);if(t){var a=Zv(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Vv(this,n)}}function Vv(e,t){return!t||"object"!==Yv(t)&&"function"!=typeof t?zv(e):t}function zv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zv(e){return(Zv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qv=Object(V.c)((function(e,t){return{pathname:e.router.location.pathname,activeTaskIdFromUrl:e.router.location.pathname.split("/")[4],activeSubTaskIdFromUrl:e.router.location.pathname.split("/")[5],pomoTaskId:e.pomodoro.pomoTaskId,pomoStatus:e.pomodoro.pomoStatus}}),(function(e){return{setPomoTaskId:function(t){e(Bv(t))}}})),Jv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kv(e,t)}(c,e);var t,n,a,o=Gv(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).contentEditorRef=void 0,t.antiScrollInnerRef=void 0,t.setCodeMirrorRef=void 0,t.setCodeMirrorRefNull=void 0,t.setMDToolbarRef=void 0,t.codeMirror=void 0,t._listenId=void 0,t.bodyRef=void 0,t.pomoEstimatedInfoRef=void 0,t.mdToolbarRef=void 0,t.editorSelection=void 0,t.triggerHighlightAndNavigate=i.a.debounce((function(e){var n;t.setState({isScrollAnimate:!0});var r=y.a.highlightKeyWordsRegExp,a=t.antiScrollInnerRef.current;if(null!=a&&0===a.scrollTop&&null!=r){var i,o,c=void 0;if(w.S(e))if(r.test(null!==(o=e.get("desc"))&&void 0!==o?o:""))i="desc";else{var s,u=null===(s=w.y(e))||void 0===s?void 0:s.toArray();u&&u.some((function(e){return!!r.test(e.get("title"))&&(i="checklist",c=e.get("id"),!0)}))}else r.test(null!==(n=e.get("content"))&&void 0!==n?n:"")&&(i="content");if(i&&(f.a.dispatch(ty,{match:i}),c)){var l=$(".sub-task[subtaskid='".concat(c,"']")).get(0);l&&l.scrollIntoView()}setTimeout((function(){t.setState({isScrollAnimate:!1})}))}}),600),t.refreshCodeMirror=function(){var e,n;if(t.getTaskDetailView()){setTimeout((function(){En.q($(t.refs.wrapper))}));var r=null===(e=t.codeMirror)||void 0===e?void 0:e.getCursor(),a=null===(n=t.codeMirror)||void 0===n?void 0:n.hasFocus();t.setState({isFullScreen:Date.now()},(function(){t.codeMirror&&(t.codeMirror.setCursor(r),a&&t.codeMirror.focus())}))}},t.renderParentLink=function(){var e=t.props.task;if(P.G())return null;var n,r=e.get("projectId"),a=e.get("parentId"),i=T.n(a);return i&&i.get("projectId")===e.get("projectId")?Y.a.createElement("div",{className:mv.a.parentTaskLink,onClick:function(){P.B()||P.t()||y.a.showDetailModal?f.a.dispatch("onTaskModalChange",{taskId:a,projectId:r}):(Object(y.b)(),bt.p(a))}},Y.a.createElement("a",{className:"eclipse-text"},null!==(n=null==i?void 0:i.get("title"))&&void 0!==n?n:""),Y.a.createElement(Q.a,{name:"chevron-right",className:"i-o-36"})):null},t.startPomo=function(){var e=t.props;(0,e.setPomoTaskId)(e.task.get("id")),f.a.dispatch("startTaskPomo")},t.setCodeMirrorRef=function(e){null!=e&&(t.codeMirror=e.getCodeMirror())},t.setCodeMirrorRefNull=function(){t.codeMirror=null},t.bodyRef=Y.a.createRef(),t.pomoEstimatedInfoRef=Y.a.createRef(),t.setMDToolbarRef=function(e){null!=e&&(t.mdToolbarRef=e,t.updateMdToolbarBottom())},t._listenId=i.a.uniqueId(),t.contentEditorRef=Y.a.createRef(),t.antiScrollInnerRef=Y.a.createRef(),t.editorSelection=null,t.state={isFullScreen:!1,isScrollAnimate:!1,pomoEstimatedVisible:!1,isHighlightVisible:!0},t.adjustDetailHeight=t.adjustDetailHeight.bind(zv(t)),t.onFullscreenKeyDown=t.onFullscreenKeyDown.bind(zv(t)),t.onFullScreenChange=t.onFullScreenChange.bind(zv(t)),t.insertSummary=t.insertSummary.bind(zv(t)),t.saveLastEditorSelections=t.saveLastEditorSelections.bind(zv(t)),t.onTitleAction=t.onTitleAction.bind(zv(t)),t.onDescAction=t.onDescAction.bind(zv(t)),t.onContentAction=t.onContentAction.bind(zv(t)),t.onTagViewAction=t.onTagViewAction.bind(zv(t)),t.onSwitchModeAction=t.onSwitchModeAction.bind(zv(t)),t.onEditorToolbarSelect=t.onEditorToolbarSelect.bind(zv(t)),t.codeMirror=null,t.mdToolbarRef=null,t.adjustDetailContentHeight=t.adjustDetailContentHeight.bind(zv(t)),t.getDetailRootRef=t.getDetailRootRef.bind(zv(t)),t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props.task;$(window).on("resize.detail",(function(){!P.B()&&setTimeout((function(){this.adjustDetailContentHeight&&this.adjustDetailContentHeight()}))})),$(this.contentEditorRef.current).on("keydown.fullscreen",this.onFullscreenKeyDown),En.l($(this.refs.wrapper)),f.a.subscribe(this._listenId,"toggleFullScreen",this.onFullScreenChange),f.a.subscribe(this._listenId,Qv,this.insertSummary),f.a.subscribe(this._listenId,ny,this.refreshCodeMirror),f.a.subscribe(this._listenId,ey,this.saveLastEditorSelections),f.a.subscribe(this._listenId,ry,(function(){e.setState({isHighlightVisible:!1})})),f.a.subscribe(this._listenId,ay,(function(){e.setState({isHighlightVisible:!0})})),this.scrollToTop(),this.triggerHighlightAndNavigate(t)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.pathname,r=t.task,a=e.pathname,i=e.task;a!==n&&(y.a.keepFullScreen||this.codeMirror&&this.state.isFullScreen&&this.exitFullscreen(this.codeMirror)),r.get("id")!==i.get("id")&&(this.scrollToTop(),this.triggerHighlightAndNavigate(i))}},{key:"componentDidUpdate",value:function(e){var t=e.task,n=e.isShowStylesBar;w.G(t)^w.G(this.props.task)&&this.adjustDetailContentHeight(),n!==this.props.isShowStylesBar&&this.updateMdToolbarBottom()}},{key:"componentWillUnmount",value:function(){$(window).off("resize.detail"),$(this.contentEditorRef.current).off("keydown.fullscreen"),En.r($(this.refs.wrapper)),f.a.unSubscribe(this._listenId,"toggleFullScreen"),f.a.unSubscribe(this._listenId,Qv),f.a.unSubscribe(this._listenId,ey),f.a.unSubscribe(this._listenId,ry),f.a.unSubscribe(this._listenId,ay);var e=this.getTaskDetailView();e&&e.removeClass("detail-fullscreen")}},{key:"onFullscreenKeyDown",value:function(e){if(this.state.isFullScreen){var t=e.keyCode,n=e.metaKey,r=e.ctrlKey,a=27===t,i=tg.g?n:r,o=80===t&&i;if(a)this.exitFullscreen(this.codeMirror);else{if(!o)return!0;gv(),$("body").addClass("print-detail"),window.print(),$("body").removeClass("print-detail"),In.j("print")}return e.stopPropagation(),!1}return!0}},{key:"scrollToTop",value:function(){var e=this;this.setState({isScrollAnimate:!1},(function(){var t=e.antiScrollInnerRef.current;t&&(t.scrollTop=0)}))}},{key:"onFullScreenChange",value:function(e){if(this.context!==Rn&&this.codeMirror===e){var t=this.state.isFullScreen,n=this.props,r=n.onActionDone,a=n.isShowStylesBar;t?this.exitFullscreen(e):(this.enterFullscreen(e),a||r("styleBarVisibleChange"))}}},{key:"onTitleAction",value:function(e,t){"update"===e?this.props.onActionDone("updateTitle",t.text):"save"===e?this.props.onActionDone("saveTask"):"addTag"===e?this.props.onActionDone("addTag",t.tagName):"setPriority"===e?this.props.onActionDone("setPriority",t.priority):"setAssignee"===e?this.props.onActionDone("setAssignee",t.userId):"changeStartDate"===e&&this.props.onActionDone("changeStartDate",t.newDate)}},{key:"onDescAction",value:function(e,t){"addTag"===e?this.props.onActionDone("addTag",t.tagName):"setPriority"===e?this.props.onActionDone("setPriority",t.priority):"setAssignee"===e?this.props.onActionDone("setAssignee",t.userId):"changeStartDate"===e&&this.props.onActionDone("changeStartDate",t.newDate)}},{key:"onContentAction",value:function(e,t){"update"===e?this.props.onActionDone("updateContent",t.text):"save"===e?this.props.onActionDone("saveTask"):"addTag"===e?this.props.onActionDone("addTag",t.tagName):"setPriority"===e?this.props.onActionDone("setPriority",t.priority):"setAssignee"===e?this.props.onActionDone("setAssignee",t.userId):"changeStartDate"===e&&this.props.onActionDone("changeStartDate",t.newDate)}},{key:"onTagViewAction",value:function(e,t){"addTag"===e?this.props.onActionDone("addTag",t.tagName):"deleteTag"===e&&this.props.onActionDone("deleteTag",t.tagName)}},{key:"onSwitchModeAction",value:function(e,t){var n=this.props.task;"update"===e&&bt.C(n,t)}},{key:"onEditorToolbarSelect",value:function(e){this.codeMirror&&this.onEditorAction(e,this.codeMirror)}},{key:"onEditorAction",value:function(e,t){var n=null;switch(e){case lg:this.enterFullscreen(t);break;case dg:this.exitFullscreen(t);break;case cg:n="TickTickHeading1";break;case sg:n="TickTickHeading2";break;case ug:n="TickTickHeading3";break;case fg:n="TickTickBold";break;case pg:n="TickTickItalic";break;case hg:n="TickTickUnderline";break;case mg:n="TickTickStrikethrough";break;case bg:n="TickTickShowLink";break;case kg:n="TickTickBlockquote";break;case Og:n="TickTickItemList";break;case gg:n="TickTickHighlight";break;case vg:n="TickTickUnorderedList";break;case yg:n="TickTickOrderedList";break;case Tg:n="TickTickSeparatorLine";break;case Sg:n="TickTickInlineCode"}n&&(t.hadFocused||(Nr(t),0!==t.getLine(t.lastLine()).length&&t.execCommand("TickTickNewline")),t.execCommand(n))}},{key:"getDetailRootRef",value:function(){var e=this.props.getDetailRootRef,t=document.body;return e&&e()||t}},{key:"getEditors",value:function(e){var t=this.props,n=t.task,r=t.generateTask,a=t.isScheduleOwner,i=t.activeTaskId,o=t.activeSubTaskId,c=t.activeTaskIdFromUrl,s=t.activeSubTaskIdFromUrl,u=t.isReadOnly,l=t.isNew,d=t.listenId,f=this.state.isFullScreen,p=n.get("id"),h=n.get("desc"),m=n.get("content");return e?Y.a.createElement(Y.a.Fragment,null,Y.a.createElement(gs,{ref:this.setCodeMirrorRefNull,id:p,desc:h,model:n,isReadOnly:u||!a,isScheduleOwner:a,onAction:this.onDescAction}),Y.a.createElement(yp,{task:n,generateTask:r,activeTaskId:i||c,activeSubTaskId:o||s,isReadOnly:u||!a,isScheduleOwner:a,onAction:this.onDescAction})):Y.a.createElement(cs,{key:"".concat(f),taskId:p,model:n,setCodeMirrorRef:this.setCodeMirrorRef,content:m,isReadOnly:u||!a,isScheduleOwner:a,isNewOutSingle:l,onAction:this.onContentAction,listenId:d})}},{key:"getTaskDetailView",value:function(){return this.contentEditorRef.current?$(this.contentEditorRef.current).closest("#task-detail-inner"):null}},{key:"insertSummary",value:function(e){var t=e.value,n=this.codeMirror;if(n){var r=n.lastLine();if(n.getOption("disableInput"))return;var a=!n.curOp;if(a&&n.startOperation(),null==this.editorSelection)Nr(n);else{var i=this.editorSelection[0],o=i.anchor,c=i.head;r=o.line,n.setSelection(o,c)}0!==n.getLine(r).length?n.replaceSelection("\n".concat(t),void 0):n.replaceSelection("".concat(t),void 0),n.replaceSelection("\n",void 0,"manualMarkText"),a&&n.endOperation(),Object(In.m)("insert_sum_succeed")}}},{key:"saveLastEditorSelections",value:function(){this.codeMirror&&this.codeMirror.hadFocused?this.editorSelection=this.codeMirror.listSelections():this.editorSelection=null}},{key:"isInPopup",value:function(){return"#task-detail-modal"===this.getDetailRootRef()}},{key:"enterFullscreen",value:function(e){var t=this,n=this.getTaskDetailView();if(n){$(".left-menu-t").addClass("hide"),n.addClass("detail-fullscreen"),setTimeout((function(){En.q($(t.refs.wrapper))}));var r=e.getCursor(),a=e.hasFocus();this.setState({isFullScreen:!0},(function(){t.codeMirror&&(t.codeMirror.setOption("fullScreen",!0),t.codeMirror.setCursor(r),a&&t.codeMirror.focus())})),f.a.dispatch("onDetailFullscreenChange",!0)}}},{key:"exitFullscreen",value:function(e){var t=this,n=this.getTaskDetailView();if(n){$(".left-menu-t").removeClass("hide"),n.removeClass("detail-fullscreen"),setTimeout((function(){En.q($(t.refs.wrapper))}));var r=e.getCursor(),a=e.hasFocus();this.setState({isFullScreen:!1},(function(){t.codeMirror&&(t.codeMirror.setOption("fullScreen",!1),t.codeMirror.setCursor(r),a&&t.codeMirror.focus())})),this.adjustDetailHeight(),f.a.dispatch("onDetailFullscreenChange",!1)}}},{key:"adjustDetailHeight",value:function(){if(this.bodyRef.current){var e=$(this.bodyRef.current).closest("#task-detail-inner"),t=parseFloat(e.find(".td-footer").outerHeight()||0),n=parseFloat(e.find(".comments-footer").outerHeight()||0),r=t+n;$(this.bodyRef.current).css({"padding-bottom":n+"px"}),this.mdToolbarMarginBottom=r+10,this.updateMdToolbarBottom(),this.adjustDetailContentHeight()}}},{key:"adjustDetailContentHeight",value:function(){En.a(this.getDetailRootRef())}},{key:"updateMdToolbarBottom",value:function(){this.mdToolbarRef&&$(this.mdToolbarRef).css({bottom:this.mdToolbarMarginBottom+"px"})}},{key:"renderSectionView",value:function(){var e=this.props,t=e.task,n=e.isScheduleTask,r=e.isScheduleOwner,a=e.isReadOnly,i=e.isDisableComment,o=e.onCommentEditorFocus;return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("div",{id:"attachment-view",className:"section center-section"},Y.a.createElement(Np,{task:t,isScheduleOwner:r,isReadOnly:a||!r,adjustDetailContentHeight:this.adjustDetailContentHeight})),Y.a.createElement("div",{id:"location-view",className:"section center-section"},Y.a.createElement(Gp,{location:t.get("location"),adjustDetailContentHeight:this.adjustDetailContentHeight})),Y.a.createElement("div",{id:"comments-view",className:"section center-section"},Y.a.createElement("p",{className:"cm-handle"}),Y.a.createElement(bh,{model:t,onCommentEditorFocus:o,isDisableComment:i,isScheduleTask:n,adjustDetailHeight:this.adjustDetailHeight,adjustDetailContentHeight:this.adjustDetailContentHeight})),Y.a.createElement(Em,{task:t,isScheduleTask:n,isScheduleOwner:r,adjustDetailContentHeight:this.adjustDetailContentHeight}))}},{key:"renderEstimatedPomo",value:function(){var e=this.props.task,t=w.x(e),n=w.fb(e);if(null==t)return null;if(n)return null;var r=t.get("stopwatchDuration")+t.get("pomoDuration"),a=0!==t.get("pomoDuration"),i=t.get("stopwatchDuration")===r&&0!==t.get("stopwatchDuration"),o=0===r;if(0!==t.get("estimatedPomo")){if(a)return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("span",null,v.a("focused_for")),this.renderPomoCountIcon(t.get("pomoCount"),t.get("estimatedPomo")),this.renderPomoDurationIcon(r,0));if(i)return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("span",null,v.a("focused_for")),this.renderPomoCountIcon(0,t.get("estimatedPomo")),this.renderPomoDurationIcon(r,0));if(o)return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("span",null,v.a("focused_for")),this.renderPomoCountIcon(0,t.get("estimatedPomo")))}else if(0!==t.get("estimatedDuration")){if(a)return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("span",null,v.a("focused_for")),this.renderPomoCountIcon(t.get("pomoCount"),0),this.renderPomoDurationIcon(r,t.get("estimatedDuration")));if(i)return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("span",null,v.a("focused_for")),this.renderPomoDurationIcon(r,t.get("estimatedDuration")));if(o)return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("span",null,v.a("focused_for")),this.renderPomoDurationIcon(0,t.get("estimatedDuration")))}else{if(a){var c=this.renderPomoCountIcon(t.get("pomoCount"),0),s=this.renderPomoDurationIcon(r,0);return null==c&&null==s?null:Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("span",null,v.a("focused_for")),c,s)}if(i){var u=this.renderPomoDurationIcon(r,0);return null==u?null:Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("span",null,v.a("focused_for")),u)}if(o)return null}return null}},{key:"renderPomoCountIcon",value:function(e,t){return 0===e&&0===t?null:Y.a.createElement("div",{id:"estimated-pomo",className:K()("estimated-pomo",mv.a.estimatedBlock,mv.a.pomo)},Y.a.createElement(Q.a,{name:"tomato",className:K()("i-1-1",mv.a.icon)}),Y.a.createElement("span",{className:mv.a.count},e),0!==t&&Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("span",null,"/"),Y.a.createElement("span",{className:mv.a.estimated},t)))}},{key:"renderPomoDurationIcon",value:function(e,t){var n=Object(Mh.c)(Object(vv.a)(e,60,"floor"));return 0===t&&"0m"===n?null:Y.a.createElement("div",{id:"estimated-duration",className:K()("estimated-pomo",mv.a.estimatedBlock,mv.a.duration)},Y.a.createElement(Q.a,{name:"stopwatch",className:K()("i-1-1",mv.a.icon)}),Y.a.createElement("span",{className:mv.a.count},n),0!==t&&Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("span",null,"/"),Y.a.createElement("span",{className:mv.a.estimated},Object(Mh.c)(Object(vv.a)(t,60,"floor")))))}},{key:"renderSwitchModeButton",value:function(e){var t=this.props,n=t.isNew,r=t.task,a=t.isReadOnly,i=t.isScheduleOwner,o=a||w.ab(r)||!i;return n?null:Y.a.createElement(Nn,{task:r,isDisable:o,isChecklistMode:e})}},{key:"render",value:function(){var e,t,n,a=this,i=this.props,o=i.task,c=i.isScheduleTask,s=i.isScheduleOwner,u=i.isReadOnly,l=i.isShowStylesBar,d=i.isNew,f=i.pomoTaskId,p=i.pomoStatus,h=i.intl,m=i.onActionDone,g=this.state,v=g.isFullScreen,y=g.isScrollAnimate,b=g.pomoEstimatedVisible,k=g.isHighlightVisible,O=w.S(o),S=w.fb(o),E=K()("caption-section section td-caption",w.A(o)),D=this.renderEstimatedPomo();return Y.a.createElement("div",{ref:this.bodyRef,className:K()("body td-body b-h",{"schedule-body":c},{"clear-searching-marker":!k},mv.a.singleWrapper)},Y.a.createElement("div",{className:"content-editor",ref:this.contentEditorRef,tabIndex:-1},Y.a.createElement("div",{className:"content td-content antiscroll-wrap",ref:"wrapper"},Y.a.createElement("div",{className:K()("antiscroll-inner",{"show-style-bar":l}),id:"content-view",ref:this.antiScrollInnerRef,style:{scrollBehavior:y?"smooth":"auto"}},Y.a.createElement("div",{id:"td-caption",className:E},this.renderParentLink(),D&&Y.a.createElement("div",{ref:this.pomoEstimatedInfoRef,className:K()(mv.a.estimatedWrapper,(e={},t=mv.a.disabled,n=u||!s,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)),onClick:function(){!u&&s&&a.setState({pomoEstimatedVisible:!0})}},Y.a.createElement("div",{className:K()(mv.a.hoverBackground,"dropdown-menu-menu-submenu-open")}),D),Y.a.createElement(Hv,{placement:"bottom-left",taskId:o.get("id"),relativeRef:this.pomoEstimatedInfoRef,pomodoroSubMenuVisible:b,setPomodoroSubMenuVisible:function(e){return a.setState({pomoEstimatedVisible:e})},startPomo:this.startPomo,isPomoInProgress:!(!f||"pomo"!==p),hideTaskMenu:function(){a.setState({pomoEstimatedVisible:!1})}}),Y.a.createElement("div",null,!S&&this.renderSwitchModeButton(O),Y.a.createElement(Co,{key:"".concat(v),model:o,id:o.get("id"),isNoteTask:S,isScheduleOwner:s,title:o.get("title"),desc:o.get("desc"),isReadOnly:u||!s,subtaskNotText:O,isNewOutSingle:d,onAction:this.onTitleAction}))),Y.a.createElement("div",{id:"td-container",className:"container-section"},Y.a.createElement("div",{id:"td-editor",className:"td-editor center-section",tabIndex:-1,onClick:function(e){T.l(r.List([o])).size>0||w.kb(o)||a.codeMirror&&function(e,t){var n=t.clientX,r=t.clientY,a=e.getTextArea().parentNode.getBoundingClientRect();if(!(n>=a.left&&n<=a.right&&r>=a.top&&r<=a.bottom)){t.preventDefault();var i=Math.min(Math.max(a.left,n),a.right),o=Math.min(Math.max(a.top,r),a.bottom),c=e.coordsChar({left:i,top:o});0===c.ch&&(c=Lr(e,{line:c.line,ch:99999999999})),e.setSelection(c),e.focus()}}(a.codeMirror,e)},onKeyDown:function(e){(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),En.w(h.formatMessage({id:"saving"}),1e3),m("saveTask"))}},this.getEditors(O),Y.a.createElement("div",{id:"detail-tag-view",className:"section center-section clearfix detail-tag-view"},Y.a.createElement(eg,{task:o,isReadOnly:u,onAction:this.onTagViewAction,adjustDetailContentHeight:this.adjustDetailContentHeight})),!P.G()&&Y.a.createElement(dv,{task:o,adjustDetailContentHeight:this.adjustDetailContentHeight})),d?null:this.renderSectionView()))),l&&!O&&Y.a.createElement(Dg,{ref:this.setMDToolbarRef,isInPopup:this.isInPopup(),displayFullScreen:!v,onSelect:this.onEditorToolbarSelect})))}}])&&Wv(t.prototype,n),a&&Wv(t,a),c}(Y.a.Component);Jv.contextType=Pn;qv(Object(me.c)(Jv));var $v,Xv,Qv="insertSummary",ey="saveLastEditorSelections",ty="HIGHLIGHT_EDITOR",ny="detailWidthChange",ry="CLEAR_DETAIL_HIGHLIGHT",ay="RESTORE_DETAIL_HIGHLIGHT",iy=function(){$v&&clearTimeout($v);var e=setTimeout((function(){f.a.dispatch("UIDropHintAction",{action:"hide",payload:{}})}),100);$v=e},oy=function(e,t){$v&&clearTimeout($v);var n=t.left,r=t.top,a=t.right;f.a.dispatch("UIDropHintAction",{action:"show",payload:{type:e,style:{left:n,top:r,right:a}}})},cy=function(){Xv&&clearTimeout(Xv),Xv=setTimeout((function(){f.a.dispatch(ry),f.a.dispatch(uy,{disabledSyntax:new Set(["highlight"])})}),50)},sy=function(){Xv&&clearTimeout(Xv),Xv=setTimeout((function(){f.a.dispatch(ay),f.a.dispatch(uy,{disabledSyntax:new Set([])})}),50)},uy="SET_DETAIL_EDITOR_DISABLED_SYNTAX",ly=n(497);var dy=function(e){var t=e.sectionId,n=e.prevSectionId,r=e.nextSectionId,a=e.projectId,i=e.setColumnOrders,o=t,c=N.e({projectId:a,prevColumnId:n,nextColumnId:r}),s=c.prevSortOrder,u=c.nextSortOrder,l=Object(A.a)(s,u),d={};l.needReset?d=N.f({projectId:a,prevColumnId:r,thisColumnId:o,nextColumnId:r}):d[o]=l.newSortOrder,i(d),b.a.doSync()};var fy=function(e,t,n){var r,a=e;return(null===(r=a.displayListModel.model)||void 0===r?void 0:r.isNote)?t instanceof pn.m:!(t instanceof pn.m&&t.disabled||!t.canDrop||n&&a.columnId!==n||n&&a.fromMultiColumns)},py={};function hy(){return py}var my,gy=n(1001),vy=n.n(gy),yy=function(e){var t,n;if(w.L(e)&&((null===(t=e.get("content"))||void 0===t?void 0:t.trim())||w.G(e)&&!e.get("desc")||w.G(e)&&(null===(n=e.get("desc"))||void 0===n?void 0:n.trim())))return!0;return!1},by=function(e){var t=x.b("showDetail");if(w.fb(e)&&t){if(y.a.currentSortType.get("sortType")===ie.J.modifiedTime&&e.get("modifiedTime"))return!0;if(e.get("createdTime"))return!0}return!1},ky=function(e){var t=y.a.highlightKeyWordsRegExp,n=t&&new RegExp(t,t.flags.replace("g","")).exec(e),r=null==n?-1:n.index;if(r>0){var a=e.slice(Math.max(0,r-1),e.length);if(a.startsWith("\n"))return a.slice(1,a.length);var i=e.slice(Math.max(0,r-10),r),o=i.split("\n"),c=o[o.length-1];return"".concat(i===c&&r-10<=0?"":"...").concat(c+e.slice(r,e.length))}return e},Oy=function(e){var t=40,n=w.K(e),r=yy(e),a=by(e);return(n||r||a)&&(t+=0),n&&(t+=21),r&&(t+=21),a&&(t+=19),t},Ty=function(e,t,n,r){var a=e.task,i=Ey(e,t,n)+18,o=w.K(a),c=w.M(a),s=yy(a),u=0;return u=n>0&&r&&!r.isSection&&r.level>0?i:0===n&&r&&!r.isSection&&r.level>0||n>0&&(0===(null==r?void 0:r.level)||(null==r?void 0:r.isSection)||!r)?i+3:i+6,(o||c||s)&&(u+=7),o&&(u+=21),c&&(u+=21),s&&(u+=21),{taskHeight:u,taskTitleHeight:i}},Sy=function(e,t){return parseInt(vy.a.column_width,10)-2*parseInt(vy.a.column_spacing,10)-2*parseInt(vy.a.column_task_spacing,10)-parseInt(vy.a.task_title_margin_left,10)-parseInt(vy.a.task_title_margin_right,10)-18*t-(e?32:0)},Ey=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.id,a=Is(e.title).replace(/\s$/,"&nbsp;"),i=e.hasAssign(),o=0,c=document.getElementById("taskHeightDiv");if(c){var s=t[r]&&t[r].model.title||"",u=t[r]&&t[r].model.hasAssign(),l=t[r]&&t[r].level;if(s!==a||u!==i||l!==n){c.innerHTML=a;var d=Sy(i,n);c.style.width="".concat(d,"px");var f=c.offsetHeight;o=0===f?22:f}else o=t[r]?t[r].taskTitleHeight-18:22}else{var p=$('<div id="taskHeightDiv">'.concat(a,"</div>")),h=Sy(i,n);p.css({width:h,fontSize:14,lineHeight:"22px",position:"absolute",top:0,left:0,zIndex:-999,overflowWrap:"break-word",visibility:"hidden",whiteSpace:"pre-wrap"}),$("body").append(p),o=0===p.height()?22:p.height()}return o};!function(e){e.rootHasSubtask="root-has-subtask",e.root="root-level",e.lastSubtask="is-last-subtask",e.subtask="is-subtask"}(my||(my={}));var wy=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!=e.model){var r=hy()[e.model.id];if(r&&!n)return r.taskHeight;var a=e.model;if(P.t()){var i=Ty(a,hy(),e.level,t),o=i.taskHeight,c=i.taskTitleHeight;return hy()[a.id]={taskTitleHeight:c,model:a,level:e.level,taskHeight:o},o||ie.F.taskItem.height}if(x.b("showDetail")){var s=Oy(e.model.originModel);return hy()[e.model.id]={taskTitleHeight:0,model:a,level:e.level,taskHeight:s},s}return ie.F.taskItem.height}return e.section instanceof pn.h?ie.F.loadMore.height:e.section instanceof pn.d||e.section instanceof pn.c&&N.d(e.section.id)?ie.F.customSectionInput.height:e.isSection&&e.section.noHeader?0:ie.F.sectionHeader.height};function Dy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Iy=["top","bottom"],My=["top","bottom"],Ay=+Sn.a.taskLevelOffset,xy=function(){Object(En.c)(),$('#task-list-content [class*="task-drag-hovered"]').removeClass("task-drag-hovered"),iy()},Ry=function(e,t){var n=e[t],r=e.slice(t+1),a=!0;return r.every((function(e){return null!=e.model&&(e.parentId===n.parentId&&(a=!1),!0)})),a},Py=function(e){return T.A("detail"===e?ie.D.Detail:ie.D.Main)},Ny=function(e,t,n,r,a,i){var o,c="kanban"===r,s=c?18:36,u=c?40:80,l=Cn(e,t,r)+s,d=y.a.judgeMoveStop.lastX<u?n-l:n-y.a.judgeMoveStop.lastX;return d>=(o=y.a.judgeMoveStop.lastX>u?15:c?+Sn.a.taskLevelKanbanOffset:+Sn.a.taskLevelOffset)?Math.min((Math.floor(Math.abs(d/o)),1)):d<=-o&&a?-1*Math.min(Math.floor(Math.abs(d/o)),e-t):i?1:0};function Ly(e,t,n){for(var r=e.displayListModelsRef,a=e.index,i=e.displayListModel.section.id,o=r.current,c=T.y(o,i),s=c.sectionTaskCount,u=c.sectionIndex,l="none",d=(n.bottom-n.top)/2,f=t.getClientOffset().y-n.top,p=36,h=36+f,m=u+1;m<u+s+1;m++){var g,v=null!==(g=wy(r.current[m],r.current[m+1]))&&void 0!==g?g:0;p+=v,m<a&&(h+=v)}return{position:l=1===s?f<d?"top":"bottom":h>p/2?"bottom":"top",sectionTaskCount:s,count:s,offsetY:"top"===l?h-f:p-(h-f),sectionIndex:u}}function Uy(e,t,n){var r,a,i,o,c=e.displayListModel,s=e.displayListModelsRef,u=e.rootLevel,l=e.env,d=e.index,f=c.section,p=t.getItem(),h=(n.bottom-n.top)/2,m=t.getClientOffset(),g=m.y-n.top,v=m.x-n.left,b="detail"===l,k="list"===l&&T.X(),O=function(e,t){var n=e-1;return n<0||null==t[n].model}(d,s.current),S=T.A(b?ie.D.Detail:ie.D.Main),E=S.includes(p.id)&&S.length>1,w=p.id===c.id&&p.type===ie.h.TASK,D=p.type===ie.h.LIST_CHECKLIST,j=g<h?"top":"bottom";w&&(j="top");var _,C="top"===j?Math.max(d-1,0):d,I=s.current[C],M=I.level,A=(null===(r=s.current[C+1])||void 0===r?void 0:r.level)>M,x=null!==(a=null===(i=p.displayListModel.model)||void 0===i?void 0:i.isNote)&&void 0!==a&&a;if(x&&f instanceof pn.a)return{type:"BLOCK",position:c.section.id,left:0,indentLevel:0};m&&(_=function(e){if(Date.now()-y.a.judgeMoveStop.lastTime<200)return y.a.judgeMoveStop.lastResult;var t=Math.abs(y.a.judgeMoveStop.lastY-e)/(Date.now()-y.a.judgeMoveStop.lastTime)<.3;return y.a.judgeMoveStop.lastTime=Date.now(),y.a.judgeMoveStop.lastY=e,y.a.judgeMoveStop.lastResult=t,t}(m.y));var R=Ny(M,u,v,l,("bottom"===j||"top"===j)&&Ry(s.current,C)&&!A,A);if(!w||(R=Ny(M,u,v,l,s.current[d].level===u||Ry(s.current,d),!1),function(e,t){var n=e[t],r=e[t-1];return null==r||null==r.model||!!(r&&r.model&&n.level>r.level)}(s.current,d)&&!Ry(s.current,d)&&(R=1),!E)){if(k||(null===(o=I.model)||void 0===o?void 0:o.isNote)||I.model instanceof ee.a){var N;if(M>0||A)if(0!==(null===(N=s.current[C+1])||void 0===N?void 0:N.level))return;R=-M}_||(y.a.judgeMoveStop.lastX=v,A||(R=0));var L=R+M>ie.a?0:R,U=L*Ay+Cn(M,u);if(D||x){if(b)return;if(x&&f instanceof pn.b)return;return function(e,t,n,r){for(var a,i,o,c=e.displayListModelsRef,s=e.index,u=function(e,t){var n=t,r=1;for(;n>=0&&0!==e[n].level;)n--;for(var a=n+1;a<e.length&&0!==e[a].level;a++)r++;return{taskCount:r,taskIndex:n}}(c.current,s),l=u.taskCount,d=u.taskIndex,f=0,p=r,h=d;h<d+l;h++){var m,g=null!==(m=wy(c.current[h],c.current[h+1]))&&void 0!==m?m:0;f+=g,h<s&&(p+=g)}o=1===l?r<n?"top":"bottom":p>f/2?"bottom":"top";return{type:"TREE",position:o,indentLevel:"top"===o?-(null!==(a=null===(i=c.current[d-1])||void 0===i?void 0:i.level)&&void 0!==a?a:0):0,left:t.left,count:l,taskIndex:d,offsetY:"top"===o?p-r:f-(p-r)}}(e,n,h,g)}if(w&&!O&&!k&&!(f instanceof pn.b))return{type:"BLOCK",position:"top",indentLevel:L,left:U+n.left};if(!f.isSortFree||P.m()&&f.canDrop)return 1!==L||f instanceof pn.b||p.id2node[I.id]||O&&"top"===j?{type:"BLOCK",position:c.section.id,left:0,indentLevel:0}:{type:"BLOCK",position:j,indentLevel:L,left:U+n.left};if("top"===j&&!w&&!k||"bottom"===j){var F=s.current[C];if(p.type===ie.h.TASK&&p.id2node&&p.id2node[null==F?void 0:F.id])return}return O&&"top"===j?{type:"BLOCK",position:j,indentLevel:0,left:n.left}:{type:"BLOCK",position:j,indentLevel:L,left:U+n.left}}}function Fy(e,t,n){var r=Uy(e,t,n);return r?"TREE"===r.type?r:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_y(Object(n),!0).forEach((function(t){Cy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r,{count:0,taskIndex:0,offsetY:0}):r}var Hy=function(e){var t=e.projectPermission,n=e.previewRef,r=e.taskRef,a=e.selected,i=e.columnId,o=e.disabled,c=e.displayListModel,s=e.displayListModelsRef,u=e.env,l=e.index,d=e.isDisableDragForEdit,p=e.taskItemClassName,h=c.model,m=h.originModel,b=c.section,k=b.name,O="kanban"===u,S=Object(V.d)(),E=Object(B.useCallback)((function(e){S(Object(Pg.g)(Object(wn.e)(u,e,T.W())))}),[S,u]),D=Object(B.useCallback)((function(e){S(ly.b(e))}),[S]),j=Dy(Object(kn.a)({item:{type:h.dragItemType,id:h.id,sectionName:k,orderType:h.sortOrderType,isSubTask:!1,isSubscribeTask:!1,isScheduleTask:!1,isScheduleCopy:!1,taskId:h.taskId,columnId:h.columnId,fromMultiColumns:!1,displayListModel:c,insertList:[],id2node:{}},begin:function(e){var t,i=n.current,o=r.current,l=T.t(u);if(i&&o){if(!(l>1&&a)){var d=i.childNodes[0],p=o.cloneNode(!0);if(d){var g=p.querySelector(".t-inner"),v=g.querySelector(".ui-sortable-helper");g.removeChild(v),i.replaceChild(p,d)}else i.appendChild(p)}i.style.zIndex="10",i.classList.remove("hide"),setTimeout((function(){i.style.zIndex="-1",i.classList.add("hide")}))}f.a.dispatch("renderDragScroller");var b=function(e){var t=Py(e);if(!t.length)return!1;var n=T.o(t);if(!n.size)return!1;for(var r=!1,a=n.get(0).get("columnId"),i=1;i<n.size;i++)if(n.get(i).get("columnId")!==a){r=!0;break}return r}(u);O&&(l<=1&&f.a.dispatch("dismissColumnOutSingle"),f.a.dispatch("hideColumnTaskMenu"));var S=w.kb(m),D=w.ab(m),j=Py(u),_={type:(null===(t=c.model)||void 0===t?void 0:t.dragItemType)||ie.h.TASK,id:h.id,sectionName:k,orderType:h.sortOrderType,isSubTask:S,isSubscribeTask:D,isScheduleTask:w.jb(m),isScheduleCopy:w.hb(m),taskId:m.get("taskId"),columnId:m.get("columnId"),fromMultiColumns:b,displayListModel:c,insertList:[],id2node:{}},C=[],I=j.length>1&&-1!==j.indexOf(_.id);if(I){var M=new Map(s.current.map((function(e){return[e.id,e]})));C=j.map((function(e){return M.get(e)})).filter((function(e){return null!=e}))}else C=[_.displayListModel];return _.insertList=C.filter((function(e){return null!=e.model})),_.id2node=T.k(C.map((function(e){return e.id}))).toArray().reduce((function(e,t){return e[t.get("id")]=t,e}),{}),y.a.tempToggleCollapseTaskIds=Array.from(new Set(_.insertList.map((function(e){return e.id})).concat(I?j:[]))).map((function(e){return{id:e,collapsed:!!Object(xt.b)(Object(wn.e)(u,e,T.W()))}})).filter((function(e){return!e.collapsed})).map((function(e){return e.id})),y.a.tempToggleCollapseTaskIds.forEach((function(e){E(e)})),_},end:function(){xy(),y.a.dragHoverTarget="",f.a.dispatch("hideDragScroller"),y.a.tempToggleCollapseTaskIds.forEach((function(e){E(e)})),y.a.tempToggleCollapseTaskIds=[],In.q("drag")},canDrag:function(){return!P.r()&&(!d&&(t===Mn.c.write||(P.G()||0!==m.get("deleted")||P.v()||P.u()||g.b({text:v.a("project_action_abort_toast",{s9:v.a("project_".concat(t))})}),!1)))}}),3),_=j[0],C=j[1],I=j[2],M=Dy(Object(On.a)({accept:[ie.h.TASK,ie.h.LIST_CHECKLIST,ie.h.CUSTOM_SECTION],hover:function(t,n){var a=n.getItemType(),o=n.getItem();switch(a){case ie.h.TASK:case ie.h.LIST_CHECKLIST:var c;if(O&&i!==(null===(c=o.displayListModel.model)||void 0===c?void 0:c.columnId))return;var s=r.current;if(s){var u=s.getBoundingClientRect(),d=Fy(e,n,u);if(!d||!n.canDrop())return;var f=d.position,h=d.left,g=d.indentLevel,v=d.offsetY,k=d.count,T=d.taskIndex,S=Iy.includes(f),E=S?"task-drop ".concat(m.get("id")+f+g):"section-drop ".concat(i," ").concat(f);if(y.a.dragHoverTarget===E)return;if(y.a.dragHoverTarget=E,xy(),S){var w,D,j,_=o.type===ie.h.LIST_CHECKLIST,C=null!==(w=null===(D=o.displayListModel.model)||void 0===D?void 0:D.isNote)&&void 0!==w&&w;if(_||C)if("top"===f){var I=0;if(T===l&&(I=0),(j=u.top-v-I)<112)return}else{var M=0;T+k-1===l&&1===k&&(M=0),j=u.top+v-M}else j=O?p===my.rootHasSubtask?"top"===f?u.top-3:u.bottom:p===my.root?"top"===f?u.top-3:u.bottom+3:p===my.lastSubtask?"top"===f?u.top:u.bottom+3:"top"===f?u.top:u.bottom:"top"===f?u.top:u.bottom;oy(O?ie.i.Kanban:ie.i.ListTask,{top:j,left:h,right:u.right})}else $("#task-list-content [section-id='".concat(null!=i?i:"").concat(f,"']")).addClass(ie.p.section)}break;case ie.h.CUSTOM_SECTION:var A=r.current;if(A){if(!n.canDrop())return;var x=A.getBoundingClientRect(),R=$(A).hasClass("section-header"),P=Ly(e,n,x),N=P.position,L=P.offsetY,U=My.includes(N),F="custom-section-drop ".concat(R," ").concat(N," ").concat(b.id);if(y.a.dragHoverTarget===F)return;y.a.dragHoverTarget=F,xy();var H=0;if("top"===N&&(H=x.top-L)<112)return;U&&oy(ie.i.Section,{top:"top"===N?H:x.top+L,left:x.left,right:x.right})}}},canDrop:function(e,t){var n=t.getItem();switch(t.getItemType()){case ie.h.TASK:case ie.h.LIST_CHECKLIST:var r,a;return null!==(r=null===(a=n.displayListModel.model)||void 0===a?void 0:a.isNote)&&void 0!==r&&r?!!T.V(b):b.isSortFree?(!n.isSubscribeTask||k===n.sectionName)&&!o:!!fy(n,b,i);case ie.h.CUSTOM_SECTION:return"detail"!==u;default:return!1}},drop:function(t,n){if(n.canDrop()){var a=r.current,i=n.getItem();if(a){var o=a.getBoundingClientRect(),c=n.getItemType();switch(c){case ie.h.TASK:case ie.h.LIST_CHECKLIST:var u=Fy(e,n,o);if(null==u)return;var d=u.position;if(Iy.includes(d))switch(c){case ie.h.TASK:case ie.h.LIST_CHECKLIST:!function(e,t,n){var r,a,i,o,c=e.displayListModelsRef,s=e.displayListModel,u=e.index,l=e.rootId,d=e.env,f=e.columnId,p=s.section,h=p.name,m=t.getItem();if(m.isSubTask&&h!==m.sectionName){if("completed"===m.sectionName)return void g.b({text:v.a("toast_text_drag_completed_subtask")});if(p instanceof pn.m)return void g.b({text:v.a("toast_text_subtask_to_other_project")});if(p instanceof pn.l)return void g.b({text:v.a("toast_text_subtask_to_other_priority")})}var y=Fy(e,t,n);if(y){var b,k=y.position,O=y.indentLevel,S=y.count,E=y.taskIndex,w=m.insertList,D=m.type===ie.h.LIST_CHECKLIST,j=null!==(r=null===(a=m.displayListModel.model)||void 0===a?void 0:a.isNote)&&void 0!==r&&r;b=D||j?1===S?"top"===k?u-1:u:"top"===k?E-1:E:"top"===k?u-1:u;var _=null===(i=T.h(c.current,b,O))||void 0===i||null===(o=i.model)||void 0===o?void 0:o.projectId,C=c.current[b],I=C?C.level+O:0,M=s.section,A=w.every((function(e){var t,n;return null!==(t=null===(n=e.model)||void 0===n?void 0:n.isNote)&&void 0!==t&&t}));(!T.V(p)||!A&&!j&&I>0)&&(w=w.filter((function(e){return!e.model.isNote}))),M instanceof pn.g&&M.insertTasks(w,b,c.current,O,"detail"!==d,_,f,l)}}(e,n,o)}else b instanceof pn.m||b instanceof pn.a?b.dropTasks(i.insertList):b.dropTasks(i.insertList.filter((function(e){return!e.model.isNote})));break;case ie.h.CUSTOM_SECTION:var f=Ly(e,n,o),p=f.position,h=f.sectionIndex,k=f.sectionTaskCount,O=s.current;if("none"===p)return;var S=My.includes(p),E=l-h;if(S){var w,j,_,C;if("top"===p)w=null===(_=O[l-E-1])||void 0===_?void 0:_.section,j=O[l].section;else w=O[l].section,j=null===(C=O[l+k-E+1])||void 0===C?void 0:C.section;var I=w instanceof pn.c?w.id:void 0,M=j instanceof pn.c?j.id:void 0,A=m.get("projectId");dy({sectionId:i.sectionId,prevSectionId:I,nextSectionId:M,projectId:A,setColumnOrders:D})}}}y.a.judgeMoveStop.lastY=99999,y.a.judgeMoveStop.lastX=0,y.a.judgeMoveStop.lastResult=!1}},collect:function(e){return{isOver:e.isOver()}}}),2);return{draggerCollectProps:_,dragger:C,preview:I,dropperCollectProps:M[0],dropper:M[1]}},By=function(e){var t,n=window.getSelection();"Range"===(null==n?void 0:n.type)&&(null===(t=n.focusNode)||void 0===t?void 0:t.parentNode)===e.currentTarget&&e.stopPropagation()},Yy=function(e){var t=e.listenId,n=e.domEditorRef,r=e.isReadOnlyTask,a=e.navigateTo,i=e.timerNavigate,o=e.taskItemRef,c=e.displayListModel,s=e.isEditableSubCal,u=e.handleOnArrow,l=e.handleReturn,d=e.handleBackspace,p=e.saveTask,h=e.deleteTask,m=e.focusTitle,g=e.initialValue,v=e.onSelectTasks,b=c.model,k=b.originModel,O=Object(V.d)(),S=Object(B.useContext)(It).env,w=Ng(),D="detail"===S,j=Object(B.useCallback)((function(e,t){O(F.U(e,t))}),[O]),_=Object(B.useCallback)((function(e,t,n){O(F.C(e,t,n))}),[O]);Object(B.useEffect)((function(){var e=t.current;return f.a.subscribe(e,"focusToTaskItem.".concat(w,".").concat(b.id),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableSelect,r=void 0!==t&&t;n.current&&m(n.current,!1),!r&&v(b.id,[b.id])})),function(){f.a.unSubscribe(e,"focusToTaskItem.".concat(w,".").concat(b.id)+b.id)}}),[n,S,w,m,t,b.id,v,k]),Object(B.useEffect)((function(){var e=g.current,t=e.active,r=e.isCompletedSection,a=e.task.get("id");t&&!r&&(y.a.newAddedTaskId===a?y.a.newAddedTaskId="":m(n.current,!0))}),[n,m,g]);var C=Object(B.useCallback)((function(){var e=n.current;if(e){var t=e.getValue();if(b instanceof ee.c&&s){var r=b.event;t!==b.title&&E.g(r.get("accountId"),b.id,{title:t})}else if(b instanceof ee.a){if(null==b.taskId)return;_(b.taskId,[{id:b.id,title:t}],[])}else t!==b.title&&j(b.id,t)}}),[n,s,b,_,j]);return{listenKeyUp:Object(B.useCallback)((function(e){if((e=e||window.event).keyCode===tc.a.tab&&y.a.keydownTab&&(y.a.keydownTab=!1),b instanceof ee.c||r)switch(e.keyCode){case tc.a.up_arrow:case tc.a.down_arrow:i.current=setTimeout((function(){var e=o.current;if(null!=e){var t=$(e).closest(".task-ul-list").find("li.task.active").find("a").attr("taskid");a(t)}}),300)}else switch(e.keyCode){case tc.a.up_arrow:case tc.a.down_arrow:i.current=setTimeout((function(){var e=o.current;if(null!=e){var t,n,r=$(e).closest(".task-ul-list").find("li.task.active.selected"),i=r.find("a").attr("parentid"),c=r.find("a").attr("taskid");i?(t=i,n=c):t=c,a(t,n)}}),300);break;case tc.a.tab:y.a.stopTabUp?y.a.stopTabUp=!1:f.a.dispatch("focusToDetailTitle");break;case tc.a[0]:y.a.keydownTab&&T.R(k);break;case tc.a[1]:y.a.keydownTab&&T.Q(k,0);break;case tc.a[2]:y.a.keydownTab&&T.Q(k,1);break;case tc.a[3]:y.a.keydownTab&&T.Q(k,7);break;case tc.a.d:y.a.keydownTab&&(D||f.a.dispatch("forceOpenDetailTimecard"),y.a.stopTabUp=!0);break;case tc.a.m:y.a.keydownTab&&(f.a.dispatchOne(hT,b.id),y.a.stopTabUp=!0)}}),[D,r,b,a,k,o,i]),changeTitle:C,listenKeyDown:Object(B.useCallback)((function(e){e=e||window.event;var t=b.originModel;if(!(t.get("deleted")>0||P.G())){e.keyCode!==tc.a.up_arrow&&e.keyCode!==tc.a.down_arrow||i.current&&clearTimeout(i.current);var n=$(e.target).text();if(Oo.g(e,n))return e.preventDefault(),void e.stopPropagation();if(r)e.keyCode===tc.a.up_arrow?u("up"):e.keyCode===tc.a.down_arrow&&u("down");else if(b instanceof ee.c){if(s)if(e.keyCode===tc.a.enter)e.preventDefault(),l(e);else if(e.keyCode===tc.a.s&&(e.ctrlKey||e.metaKey))e.preventDefault(),p();else if(e.keyCode===tc.a.delete){if(e.ctrlKey||e.metaKey)return e.preventDefault(),e.stopPropagation(),void h({canUndo:!0})}else if(e.keyCode===tc.a.backspace){if(e.metaKey)return e.preventDefault(),e.stopPropagation(),void h({canUndo:!0});if(e.ctrlKey)return}else e.keyCode===tc.a.up_arrow?u("up"):e.keyCode===tc.a.down_arrow&&u("down")}else if(e.keyCode===tc.a.up_arrow){if(e.ctrlKey||e.metaKey)return;e.preventDefault(),e.shiftKey?u("shift-up"):u("up")}else if(e.keyCode===tc.a.down_arrow){if(e.ctrlKey||e.metaKey)return;e.preventDefault(),e.shiftKey?u("shift-down"):u("down")}else if(e.keyCode===tc.a.left_arrow);else if(e.keyCode===tc.a.right_arrow);else if(e.keyCode===tc.a.enter)e.preventDefault(),l(e);else if(e.keyCode===tc.a.backspace)e.metaKey?(e.preventDefault(),e.stopPropagation(),h({canUndo:!0,showRepeat:!0})):e.ctrlKey||d(e);else if(e.keyCode===tc.a.delete)(e.ctrlKey||e.metaKey)&&(e.preventDefault(),e.stopPropagation(),h({canUndo:!0,showRepeat:!0}));else if(e.keyCode===tc.a.tab)y.a.keydownTab=!0,e.preventDefault();else if(e.altKey)switch(e.keyCode){case tc.a[0]:T.P(t,0);break;case tc.a[1]:T.P(t,1);break;case tc.a[2]:T.P(t,3);break;case tc.a[3]:T.P(t,5)}else e.keyCode===tc.a.s&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),p())}}),[h,d,u,l,s,r,b,p,i]),listenKeyPress:function(e){switch(e.charCode){case"".charCodeAt(0):case"".charCodeAt(0):case"".charCodeAt(0):case"".charCodeAt(0):e.preventDefault();break;case tc.a[0]:case tc.a[1]:case tc.a[2]:case tc.a[3]:case"m".charCodeAt(0):case"d".charCodeAt(0):y.a.keydownTab&&e.preventDefault()}}}},Wy=n(454);function Ky(e){return function(e){if(Array.isArray(e))return Gy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Gy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gy(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vy=function(){var e=[],t=v.c()?U.a.toMoment():U.a.toMoment().locale("en"),n=v.c()?v.a("today"):"Today",r=v.c()?v.a("tomorrow"):"Tomorrow",a=Object(oe.a)("MMMD"),i=v.c()?"":" ",o=x.s();e.push({match:t.format(a),key:t.startOf("day").format("YYYY-MM-DD"),calendar:n});for(var c=U.a.getCurrentInWhichDayOfWeek(),s=U.a.toMoment(),u=[],l=0;l<7;l++)u.push(s.day(o+l).format("dddd"));for(var d=U.a.toMoment(),f=1;f<=6-c;f++){var p=void 0;d.add(1,"days"),p=1===f?r:u[c+f],e.push({match:d.format(a),key:d.startOf("day").format("YYYY-MM-DD"),calendar:p})}for(var h=0;h<7;h++)d.add(1,"days"),e.push({match:d.format(a),key:d.startOf("day").format("YYYY-MM-DD"),calendar:v.a("next")+i+u[h]});var m=U.a.toMoment().startOf("month").add(1,"month");e.push({match:m.format(a),key:m.format("YYYY-MM-DD"),calendar:v.a("next_month")});var g=U.a.toMoment();for(var y in[2,3,4,5,6,7,8,9,10,11,12])g.add(1,"month"),e.push({match:"",key:g.startOf("month").format("YYYY-MM-DD"),calendar:g.startOf("month").format(a)});return e},zy=function(e){var t=e.taskRef,n=e.isSubscribeCalendar,r=t.current,a={projectId:r.get("projectId"),isSubscribeCalendar:n},i=Object(w.fb)(r)?[]:Ky(qy(a)["!"].source),o=U.a.getCurrentInWhichDayOfWeek(),c=qy(a)["*"].source,s=[c[0],c[1],c[7],c[14-o]];return[].concat(Ky(qy(a)["#"].source),Ky(i),s,Ky(qy(a)["@"].source),Ky(qy(a)["~"].source))},Zy={"#":["","#"],"!":["!",""],"*":["*",""],"@":["@",""],"~":["~","","","^"]},qy=function(e){return{"#":{source:zt.e().map((function(e){return{key:"#",value:e,match:"",avatarUrl:""}}))},"!":{source:T.w().map((function(e){return{key:"!",value:e.match,match:e.key,avatarUrl:""}}))},"~":{source:(t=e,t.isSubscribeCalendar?hn.d():Wy.b()).map((function(e){return{key:"~",value:e.match,match:e.key,avatarUrl:""}}))},"@":{source:st(e).map((function(e){return{key:"@",value:e.match,match:e.key,avatarUrl:e.avatarUrl}}))},"*":{source:Vy().map((function(e){return{key:"*",value:"".concat(e.match," ").concat(e.calendar),match:e.key,avatarUrl:""}}))}};var t},Jy=n(426);function $y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qy=function(e,t){e&&e.focusAndPlaceCaretAtEnd(t)},eb=function(e){if(e){var t=e.getEditor();t&&$(t).blur()}},tb=function(e){var t=e.domEditorRef,n=e.addTag,r=e.previousActive,a=e.active,o=e.previousTagNames,c=e.tagNames,s=e.displayListModel,u=s.model.originModel,l=Yy(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$y(Object(n),!0).forEach((function(t){Xy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{focusTitle:Qy})),d=l.listenKeyUp,f=l.changeTitle,p=l.listenKeyDown,h=l.listenKeyPress,m=Object(B.useRef)(null);return Object(B.useEffect)((function(){if(null!=u){var e=t.current;if(null!=e){m.current=u;var r=function(e){var t=e.taskRef.current.get("isSubTaskModel");return{source:function(){return zy(e)},holder:t?/[\\\/\*\"\'\:\?\<\>\|#||\s]/i:/[\\\/\*\"\'\:\?\<\>\|#||!||@||~||*||\s]/i,symbol:t?["","#"]:["","#","!","","@","","~","","\\^","","\\*",""],isMultiType:!0,enableMixCase:!1,unableNotChanged:!0,matcher:function(e){var t=this.Tick.fullText[this.Tick.symbolIndex];return!!(e.value.toLowerCase().indexOf(this.Tick.matchStr.toLowerCase())>-1&&Zy[e.key].includes(t))},highlighter:function(e){if(e.create)return e.text;if("@"===e.key){var t=document.createElement("a"),n=document.createElement("img");n.className="avatar med icon-avatar avatar-bd-divider",n.src=e.avatarUrl;var r=document.createElement("span");return r.innerText=e.value,t.appendChild(n),t.appendChild(r),t}return e.value},createTip:function(e){return v.a("create_tag",{s:e})},sorter:function(e){if(e.length&&Zy[e[0].key].includes("#")){var t=this.Tick.matchStr,n=zt.e();return e.sort((function(e,r){var a=e.value,i=r.value,o=n.indexOf(a),c=n.indexOf(i);return t===a?-1:t===i||o>c?1:-1}))}return e},addEvent:function(){this.$menu.on("mousedown",$.proxy((function(e){if(e.stopPropagation(),this.mousedover)return e.preventDefault(),this.select(),!1}),this)).on("mouseup",$.proxy((function(e){e.stopPropagation(),e.preventDefault()}),this)),$("body").on("click.typeahead",$.proxy((function(e){$(e.target).closest(".tag-item").length||this.hide()}),this))},detachEvent:function(){$("body").off("click.typeahead")},click:function(e){e.stopPropagation(),e.preventDefault()},selectContent:function(){var e=this.$element.find(".tag-item").get(0);e?En.s(e):En.s(this.$element[0])},select:function(){},onShow:function(){},onHide:function(){}}}({taskRef:m});r.select=function(){var t=m.current,r=this.getActiveItem(),a=r?r.value||r:this.Tick.matchStr;if(e.removeTagNode(this.Tick,this.Tick.matchStr),this.hide(),r.create){var i=zt.a({name:a.toLowerCase(),label:a});if(!i)return;n(i)}if(f(),"#"===r.key){var o=bt.a(t,a,{sync:!1});(null==o?void 0:o.get("isDirty"))&&b.a.doSync()}else if("!"===r.key)bt.z(t,r.match);else if("*"===r.key)bt.f(t,r.match);else if("~"===r.key){var c=$(".task-ul-list ul>li.selected").not(".ui-sortable-placeholder, .checked");if(Oo.d({projectId:r.match,newCounts:c.length}))nd.a({type:ie.c.task});else{var s=r.match;CT(t,s,(function(e){Jy.e(e);var t=j.n(s);g.b({text:v.a("add_to_other_list",{s1:t.get("name")})})}))}}else"@"===r.key&&bt.y(t,r.match)},r.onShow=function(){e.addHighlight(this.Tick)},r.onHide=function(){e.removeHighlight()};var a=$(e.getEditor());a.length&&a.typeahead(r)}}}),[n,f,t,s,u]),Object(B.useEffect)((function(){r&&!a&&eb(t.current)}),[a,t,r]),Object(B.useEffect)((function(){if(m.current=u,!i.a.isEqual(o,c)){var e=t.current;if(e){var n=e.getEditor();if(n){var r,a=zy({taskRef:m,isSubscribeCalendar:void 0});null===(r=$(n).data("typeahead"))||void 0===r||r.updateSource(a)}}}}),[t,o,c,u]),{listenKeyUp:d,changeTitle:f,listenKeyDown:p,listenKeyPress:h}},nb=n(453);function rb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ab(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rb(Object(n),!0).forEach((function(t){ib(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ib(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ob=function(e,t){var n=t.section;return T.f(e,ab({},n.createOnEnterProperties))},cb=function(e){var t,n,r=null===(t=j.o())||void 0===t?void 0:t.get("id");return(null===(n=e.model)||void 0===n?void 0:n.projectId)&&(r=e.model.projectId),r},sb=i.a.debounce((function(e,t,n,r,a){var i,o=n[e],c=null===(i=o.model)||void 0===i?void 0:i.originModel;if(null!=c){var s=o.section;if(o instanceof ee.c){var u=P.g(),l=hn.b();if(l&&u){var d=function(e,t,n){var r=n.section;return T.e(e,t,ab({},r.createOnEnterProperties))}(u,l.get("id"),o);E.b(d),r(d.get("id")),S.a.doSync()}}else{var f,p,h=c.get("columnId"),m=0,g=Object(nb.f)(n,e,t),v=Object(nb.e)(n,e,t),b=cb(o);if(t>0)p=o.id,Object(w.T)(o.model.originModel)&&(m=o.model.originModel.get("status")),a(o.id);else{if(!Object(w.mb)(o.id))return;if(p=o.parentId){var k=T.n(p);k&&(m=k.get("status"))}}if(null==(null==v?void 0:v.model)&&null==(null==g?void 0:g.model))f=R.t;else if(null==(null==v?void 0:v.model))f=g.model.sortOrder+R.t;else if(null==(null==g?void 0:g.model))f=v.model.sortOrder-R.t;else{var O=g.model.sortOrder,D=v.model.sortOrder,j=D-O;(Number.isNaN(j)||1===j)&&setTimeout((function(){bt.r(b)})),f=(O+D)/2}var _=ob({projectId:b,sortOrder:f,parentId:p,status:m,columnId:h,kind:ie.L.Text},o),C=new ee.b(s,new ee.e(_));s.createOnEnterInSection(C,e,n,t),y.a.newAddedTaskId=_.get("id"),bt.b(_),r(_.get("id"))}}}),80,!0),ub=n(397);function lb(e){return(lb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function db(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fb(e,t){return(fb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gb(e);if(t){var a=gb(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return hb(this,n)}}function hb(e,t){return!t||"object"!==lb(t)&&"function"!=typeof t?mb(e):t}function mb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gb(e){return(gb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fb(e,t)}(i,e);var t,n,r,a=pb(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).onConfirm=t.onConfirm.bind(mb(t)),t.onClose=t.onClose.bind(mb(t)),t}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.intl,n=e.isRenderBatchAddNote;return Y.a.createElement(Fo.a,{maskClosable:!1,className:"batch-add-tasks-modal",visible:!0,title:n?t.formatMessage({id:"batch_add_notes"}):t.formatMessage({id:"batch_add_tasks"}),okText:t.formatMessage({id:"add"}),cancelText:t.formatMessage({id:"cancel"}),onOk:this.onConfirm,onCancel:this.onClose},Y.a.createElement("p",null,n?t.formatMessage({id:"batch_add_notes_desc"}):t.formatMessage({id:"batch_add_tasks_desc"})))}},{key:"onConfirm",value:function(){this.props.onConfirm()}},{key:"onClose",value:function(){this.props.onClose()}}])&&db(t.prototype,n),r&&db(t,r),i}(Y.a.Component),yb=Object(me.c)(vb);function bb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ob=function(e){var t=e.pasteData,n=e.taskItemRef,r=e.setShowBatchAddModal,a=e.debounceChangeTitle,i=e.onCreateByPaste;return Y.a.createElement(yb,{onConfirm:function(){var e,a,o=(null!==(e=t.current)&&void 0!==e?e:{text:""}).text,c=n.current;i(o,null!==(a=null==c?void 0:c.parentNode)&&void 0!==a?a:void 0),r(!1)},onClose:function(){var e;r(!1);var n=(null!==(e=t.current)&&void 0!==e?e:{plainText:""}).plainText;document.execCommand("insertHTML",!1,n),a()}})},Tb=function(e){var t=e.index,n=e.isDisabledEdit,r=e.isCompletedSection,a=e.isEditableSubCal,o=e.addTag,c=e.previousActive,s=e.active,u=e.previousTagNames,l=e.tagNames,d=e.listenId,p=e.initialValue,h=e.handleBackspace,m=e.handleOnArrow,g=e.deleteTask,v=e.saveTask,y=e.isReadOnlyTask,k=e.navigateTo,E=e.timerNavigate,w=e.taskItemRef,D=e.displayListModel,j=e.displayListModelsRef,_=e.onSelectAction,C=e.onSelectTasks,I=e.setDomEditorRef,M=e.domEditorRef,x=e.onEditMouseDown,N=e.onEditMouseUp,L=D.model,U=L.originModel,F=L instanceof ee.c,H=L instanceof ee.a,W=Object(G.a)(),K=Object(B.useRef)(null),V=bb(Object(B.useState)(!1),2),z=V[0],Z=V[1],q=Object(B.useContext)(It).env,J=bb(Object(B.useState)(new Set([])),2),X=J[0],Q=J[1];Object(B.useEffect)((function(){return"detail"===q&&f.a.subscribe("".concat(q,"_").concat(D.id),uy,(function(e){var t=e.disabledSyntax;Q(t)})),function(){"detail"===q&&f.a.unSubscribe("".concat(q,"_").concat(D.id),uy)}}),[D.id,q]);var te=function(e,t,n){var r=Object(B.useCallback)((function(t,n,r,a){var i;if(n){if(a-r===t){var o=cb(e);setTimeout((function(){bt.r(o)}))}i=Math.floor((Number(a)-Number(r))/(t+1))}else i=R.t;return new Array(t).fill(void 0).map((function(e,t){return Number(r)+i*(t+1)}))}),[e]),a=Object(B.useCallback)((function(e){var a,i,o,c,s,u=t[n],l=null===(a=u.model)||void 0===a?void 0:a.originModel;if(null!=l){var d=l.get("columnId"),f=Object(nb.f)(t,n,0),p=Object(nb.e)(t,n,0),h=cb(u),m=null!==(i=null===(o=f.model)||void 0===o?void 0:o.sortOrder)&&void 0!==i?i:0,g=null!==(c=null==p||null===(s=p.model)||void 0===s?void 0:s.sortOrder)&&void 0!==c?c:0,v=r(e.length,null!=p,m,g),y=[],k=0,O=u.parentId;if(O){var S=T.n(O);S&&(k=S.get("status"))}for(var E=0;E<e.length;E++){var w=ob({title:e[E],projectId:h,kind:ie.L.Text,columnId:d,sortOrder:v[E],parentId:O,status:k},u);y.push(w),bt.b(w,{sync:!1})}b.a.doSync()}}),[t,n,r]);return Object(B.useCallback)((function(t,n){if(null!=n){var r=t.split(/[\n\r]/).filter((function(e){var t=O.e(e).replace(/[\n\r\s]/g," ");return e&&$.trim(t).length})),i=cb(e);Oo.d({projectId:i,newCounts:r.length})?nd.a({type:ie.c.task}):a(r)}}),[a,e])}(D,j.current,t),ne=function(e,t,n){var r=Ug(),a=Lg();return Object(B.useCallback)((function(i,o){var c=n.current,s=t.model;if(null!=s&&!s.isNote){var u=o+T.s(s.originModel)>ie.a?0:o,l=function(t){e(t),setTimeout((function(){a(t)}))};if(P.z())sb(i,u,c,l,r),u>0&&r(t.id);else{if(t.section.name===ie.C.subscribe)return;var d=cb(t);Oo.d({projectId:d})?nd.a({type:ie.c.task}):sb(i,u,c,l,r)}}}),[n,t,r,a,e])}(_,D,j),re=Object(B.useCallback)((function(e){if(("detail"===q||!(P.m()||P.w()||P.t()))&&null!=w.current){var n;if(e.shiftKey)D.section instanceof pn.b||(null===(n=D.model)||void 0===n?void 0:n.isNote)?ne(t,0):ne(t,1);else ne(t,0);In.r()}}),[D.model,D.section,q,t,ne,w]),ae=tb({addTag:o,domEditorRef:M,previousActive:c,active:s,previousTagNames:u,tagNames:l,listenId:d,initialValue:p,isReadOnlyTask:y,taskItemRef:w,timerNavigate:E,navigateTo:k,displayListModel:D,isEditableSubCal:a,handleOnArrow:m,handleReturn:re,handleBackspace:h,saveTask:v,deleteTask:g,onSelectTasks:C}),oe=ae.listenKeyUp,ce=ae.changeTitle,se=ae.listenKeyDown,ue=ae.listenKeyPress,le=Object(B.useCallback)((function(){"detail"===q&&cy(),Object(Eo.a)(L.id)}),[q,L.id]),de=Object(B.useCallback)((function(){L instanceof ee.e&&Object(Eo.b)(L.id,L.title),F&&a?ub.h(U)&&S.a.doSync():H?bt.u(U.get("taskId")):bt.u(U.get("id"))}),[H,a,F,L,U]),fe=Object(B.useCallback)((function(){"detail"===q&&sy(),ce(),de()}),[ce,q,de]),pe=i.a.debounce(ce,R.x);return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement(Ws,{id:L.id,className:"title transition text-def typeahead line-left",spellCheck:!1,ref:I,readOnly:n,readOnlyFocusable:!0,value:L.title,hidePlaceholder:!1,placeholder:W.formatMessage({id:"no_title"}),placeholderClassName:"list-input-placeholder",listenKeyUp:oe,listenKeyDown:se,listenKeyPress:ue,listenContextMenu:By,listenPaste:function(e){var t,n;e.preventDefault(),n=window.clipboardData&&window.clipboardData.setData?window.clipboardData.getData("text"):(e.originalEvent||e).clipboardData.getData("text/plain"),n=A.n(n);var a=O.c(n);K.current={text:n,plainText:a,cursor:En.i(e.currentTarget)},P.m()||r||F||!n.match(/[\n\r]/)||(null===(t=D.model)||void 0===t?void 0:t.isNote)?document.execCommand("insertText",!1,_r(a)):Z(!0)},onChange:pe,onFocus:le,onBlur:fe,convertOptions:{noAutoLink:!!F},lineWrapping:!1,onEditMouseDown:x,onEditMouseUp:N,onSave:de,disabledSyntax:X}),z&&Y.a.createElement(Ob,{onCreateByPaste:te,pasteData:K,taskItemRef:w,setShowBatchAddModal:Z,debounceChangeTitle:pe}))},Sb=n(1002),Eb=n.n(Sb),wb=function(e){var t=e.previewRef,n=e.selected,r=Object(G.a)(),a=Object(B.useContext)(It).env,i=Object(V.e)((function(e){return Object(T.t)(a)}));if(i>1&&n)return Y.a.createElement("div",{ref:t,className:K()("t-multi drag-help task ui-sortable-helper hide",Eb.a.wrapper),style:{position:"absolute",top:0,zIndex:-1}},r.formatMessage({id:"d_items"},{d:i}));var o="kanban"===a;return Y.a.createElement("div",{ref:t,className:K()("drag-help task ui-sortable-helper hide",{inkanban:o},Eb.a.wrapper),style:{position:"absolute",top:0,zIndex:-1}})},Db=n(1003),jb=n.n(Db),_b={addSkipHabit:n(599).c};var Cb=Object(V.c)((function(e){return{}}),_b)((function(e){var t=e.model,n=e.position,r=e.hideMenu,a=e.addSkipHabit,i=Object(B.useRef)(null);function o(){a(t.get("habitId")),Object(En.w)(Object(v.a)("habit_skipped")),r()}return Object(B.useEffect)((function(){!function(){var e=n.top,t=n.left;if(!i.current)return;var r=i.current,a=r.offsetHeight,o=r.offsetWidth;e+a>window.innerHeight&&(e-=a);t+o>window.innerWidth&&(t-=o);$(i.current).css({top:e+"px",left:Math.max(t,0)+"px"})}()})),Object(B.useEffect)((function(){function e(e){!(e.target instanceof Node&&document.body.contains(e.target))||i.current&&i.current.contains(e.target)||r()}return document.addEventListener("click",e),document.addEventListener("contextmenu",r),function(){document.removeEventListener("click",e),document.removeEventListener("contextmenu",r)}}),[r]),Y.a.createElement(An.a,null,Y.a.createElement("div",{ref:i,className:K()("can-not-select",jb.a.container)},Y.a.createElement("div",{className:jb.a.skipActionBlock,onClick:o},Y.a.createElement("span",{className:jb.a.text},Object(v.a)("habit_skip")))))})),Ib=n(1004),Mb=n.n(Ib),Ab=n(368),xb=n(519),Rb={addArchivedEvent:function(e){return{archivedEvent:e,type:Ab.a}},removeArchivedEvent:function(e){return{archivedEvent:e,type:Ab.b}}};var Pb=Object(V.c)((function(e){return{}}),Rb)((function(e){var t,n=e.model,r=e.position,a=e.addArchivedEvent,i=e.removeArchivedEvent,o=e.hideMenu,c=Object(B.useRef)(null),s=Object(B.useMemo)((function(){return d()}),[d]),u=Object(B.useMemo)((function(){return l()}),[l]);function l(){var e=new xb.a(n);return{key:Object(xb.c)(e),startDate:e.startDate,endDate:e.endDate}}function d(){return Object(xb.e)(n)}function f(e){!document.body.contains(e.target)||c.current&&c.current.contains(e.target)||o()}function p(e){switch(e){case"archive":a(u);break;case"unarchive":i(u)}o()}return Object(B.useEffect)((function(){return y.a.hasArchiveMenu=!0,function(){y.a.hasArchiveMenu=!1}}),[]),Object(B.useEffect)((function(){!function(){var e=r.top,t=r.left,n=c.current,a=n.offsetHeight,i=n.offsetWidth;e+a>window.innerHeight&&(e-=a);t+i>window.innerWidth&&(t-=i);$(c.current).css({top:e+"px",left:Math.max(t,0)+"px"})}()})),Object(B.useEffect)((function(){return document.addEventListener("click",f),document.addEventListener("contextmenu",o),function(){document.removeEventListener("click",f),document.removeEventListener("contextmenu",o)}}),[f,o]),Y.a.createElement(An.a,null,Y.a.createElement("div",{ref:c,id:"archive-menu-view",className:K()("can-not-select",Mb.a.calendarArchiveMenuContainer)},(t=s?"unarchive":"archive",Y.a.createElement("div",{className:Mb.a.calendarArchiveMenuItem,onClick:function(){return p(t)}},Y.a.createElement(Q.a,{name:t,className:Mb.a.icon}),Y.a.createElement("span",{className:Mb.a.text},Object(v.a)("".concat(t)))))))})),Nb=function(e){var t=e.position,n=e.isShow,r=e.displayModel,a=e.hideMenu,i=r.model;return n?i instanceof ee.c?Y.a.createElement(Pb,{model:i.event,position:t,hideMenu:a}):i instanceof ee.d&&!i.isCompleted?Y.a.createElement(Cb,{model:i.habit,position:t,hideMenu:a}):null:null},Lb=function(e){var t=e.priority,n=e.selectPriority,r=Ub(t),a=n||function(){};return Y.a.createElement("div",{className:"set-priority menu-section"},Y.a.createElement("p",null,Y.a.createElement(Je.a,{id:"priority",tagName:"span"})),Y.a.createElement("div",{className:"quick-set"},r.map((function(e){return Y.a.createElement("a",{className:K()("item",{active:e.isActive}),key:e.value,onClick:function(){a(e.value)}},Y.a.createElement(Q.a,{name:e.iconName,className:e.iconClass}))}))))},Ub=function(e){return[{value:"5",iconName:"priority-3",iconClass:"priority-high",isActive:5===e},{value:"3",iconName:"priority-2",iconClass:"priority-medium",isActive:3===e},{value:"1",iconName:"priority-1",iconClass:"priority-low",isActive:1===e},{value:"0",iconName:"priority-3",iconClass:"i-4-1 priority-none",isActive:0===e}]},Fb=Y.a.forwardRef((function(e,t){var n,r=e.iconName,a=e.textId,i=e.children,o=e.onClick;return n=a?Y.a.createElement(Je.a,{id:a,tagName:"span"}):i,Y.a.createElement("a",{ref:t,className:"dropdown-toggle","data-toggle":"dropdown",onClick:function(e){o?o(e):e.stopPropagation()}},Y.a.createElement(Q.a,{name:r,className:"i-o-36"}),Y.a.createElement("p",null,n))}));Fb.displayName="ContextMenuItem";var Hb=Fb,Bb=function(e){var t=i.a.uniq(e.map((function(e){return e.get("status")})).toArray());return 1===t.length||"1,2"===t.sort().toString()?t.shift():null},Yb=function(e){var t=i.a.uniq(e.map((function(e){return e.get("kind")})).toArray());return 1===t.length?t.shift():null},Wb=function(e){var t=i.a.uniq(e.map((function(e){return e.get("priority")})).toArray());return 1===t.length?t[0]:-1},Kb=function(e){var t=i.a.uniq(e.map((function(e){return e.get("projectId")})).toArray());return 1===t.length?t.shift():null},Gb=function(e){var t=e.map((function(e){var t=e.get("tags");return(r.List.isList(t)?t.toArray():t)||[]})).toArray(),n=i.a.intersection.apply(null,t);return{selected:n,singleSelected:i.a.difference(i.a.flattenDeep(t),n)}},Vb=function(e){var t=e.map((function(e){return U.a.formatToUtc(e.get("startDate"))})).toArray(),n=i.a.uniq(t);return 1===n.length&&(i.a.isUndefined(n[0])?null:n[0])},zb=function(e){try{for(var t,n,a=e.map((function(e){return e.get("reminders")||[]})).toJS(),o={},s=0;s<a.length;s++){if(n=a[s]||[],s){if(t!==n.length)return!1}else t=n.length;for(var u,l=0;l<n.length;l++)if(u=n[l],s){if(!o[u.trigger])return!1}else o[u.trigger]=!0}return 0===i.a.flattenDeep(a).length?null:Object(r.fromJS)(a[0])}catch(e){return c.a.error(e),null}},Zb=function(e){var t=e.map((function(e){return e.get("isAllDay")})).toArray();return 1===(t=i.a.uniq(t)).length?!!i.a.isUndefined(t[0])||t[0]:"false"},qb=function(e){var t=e.map((function(e){return e.get("isFloating")})).toArray();return 1===(t=i.a.uniq(t)).length&&t[0]},Jb=function(e){var t=e.map((function(e){return e.get("timeZone")})).toArray();return 1===(t=i.a.uniq(t)).length?t[0]:zs.h},$b=function(e){var t=e.map((function(e){return e.get("repeatFlag")})).toArray();return 1===(t=i.a.uniq(t)).length&&(i.a.isUndefined(t[0])?null:t[0])},Xb=function(e){var t=e.map((function(e){return e.get("startDate")?e.get("isAllDay")?null:U.a.prefMoment(e.get("startDate")).format("HH:mm:ss"):e.get("startDate")})).toArray(),n=e.map((function(e){return e.get("timeZone")||zs.h})).toArray(),r=i.a.uniq(n),a=i.a.uniq(t);return 1===a.length&&1===r.length&&(i.a.isUndefined(a[0])?null:a[0])},Qb=function(e){var t=e.map((function(e){return e.get("startDate")?U.a.prefMoment(e.get("startDate")).format("YYYY-MM-DD"):null})).toArray(),n=i.a.uniq(t);return 1===n.length&&n[0]},ek=function(e){var t=e.map((function(e){return i.a.isUndefined(e.get("repeatFrom"))?"2":e.get("repeatFrom")})).toArray();return 1===(t=i.a.uniq(t)).length&&(i.a.isUndefined(t[0])?null:t[0])},tk=function(e){var t=e.map((function(e){return e.get("assignee")})).toArray();return 1===(t=i.a.uniq(t)).length&&(i.a.isUndefined(t[0])?null:t[0])},nk=n(443),rk=n(444),ak=n(606),ik=n(401),ok=n(449);function ck(e){return(ck="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lk(e){return function(e){if(Array.isArray(e))return dk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return dk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dk(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fk(){return(fk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pk(e,t){return(pk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vk(e);if(t){var a=vk(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return mk(this,n)}}function mk(e,t){return!t||"object"!==ck(t)&&"function"!=typeof t?gk(e):t}function gk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vk(e){return(vk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kk(e,t,n){return t&&bk(e.prototype,t),n&&bk(e,n),e}var Ok=function(){function e(){yk(this,e),this.scrollerElement=null,this.mouseInSubmenuKey="",this.snapshot=null}return kk(e,[{key:"setScrollElement",value:function(e){this.scrollerElement=e}},{key:"snapScrollTop",value:function(){return this.snapshot=this.scrollerElement?this.scrollerElement.scrollTop:null}},{key:"recoverScrollTop",value:function(){null!==this.snapshot&&this.scrollerElement&&(this.scrollerElement.scrollTop=this.snapshot)}}]),e}(),Tk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pk(e,t)}(n,e);var t=hk(n);function n(e){var r;yk(this,n),(r=t.call(this,e)).onOpenChange=function(e){r.setState({openKey:e[0]})},r.isKeydownHandle=r.props.isKeydownHandle,r.onSelect=r.onSelect.bind(gk(r)),r.onClick=r.onClick.bind(gk(r)),r.onShow=r.onShow.bind(gk(r)),r.onVisibleChange=r.onVisibleChange.bind(gk(r)),r.onTriggerClick=r.onTriggerClick.bind(gk(r));var a=r.props.customPrevList?r.props.customPrevList:[],o=r.props.customLastList?r.props.customLastList:[];return a=i.a.isArray(a)?a:[],o=i.a.isArray(o)?o:[],r.customPrevList=a,r.customLastList=o,r.customPrevList.forEach((function(e){e.custom=!0})),r.customLastList.forEach((function(e){e.custom=!0})),r.getMenuContainer=r.getMenuContainer.bind(gk(r)),r.state={visible:!1,activeIndex:"",openKey:null},r.scrollPositionPatch=new Ok,r}return kk(n,[{key:"getSnapshotBeforeUpdate",value:function(){return this.scrollPositionPatch.snapScrollTop()}},{key:"componentWillUnmount",value:function(){En.r($(this.refs.wrapper)),this.scrollPositionPatch=null}},{key:"componentDidUpdate",value:function(e,t){t.visible===this.state.visible||this.state.visible||this.setState({activeIndex:"",openKey:null}),this.isKeydownHandle&&this.scrollPositionPatch.recoverScrollTop()}},{key:"render",value:function(){var e=this.getProjectMenu(),t=this.getTrigger(),n=this.props.bodyContainer?{}:{getMenuContainer:this.getMenuContainer};return Y.a.createElement(Re,fk({boult:!1,ref:"dropdown",visible:this.state.visible,menu:e,menuClassName:this.props.menuClassName,autoAdjustOverflow:this.props.autoAdjustOverflow,placement:this.props.placement,align:this.props.align,boultOffset:this.props.boultOffset},n,{onVisibleChange:this.onVisibleChange,onShow:this.onShow,onHide:this.onHide}),t)}},{key:"getMenuContainer",value:function(){return ve.a.findDOMNode(this.refs.dropdown.trigger)}},{key:"getTrigger",value:function(){return this.props.trigger?this.props.trigger:Y.a.createElement("a",{onClick:this.onTriggerClick},Y.a.createElement(Q.a,{name:"move-list",className:"i-2-1 fast-transition"}))}},{key:"getProjectList",value:function(){var e,t=this,n=this.props,a=n.includesReadOnlyProject,i=n.notIncludesNoteProject,o=this.props.projectList.filter((function(e){return a?!ut.h(e):!ut.g(e)})).filter((function(e){return!i||!ut.n(e)})),c=this.props.groupList.filter((function(e){return!ik.b(e)&&!e.get("isDeleted")})),s=o.filter((function(e){return!ut.d(e)})).map((function(e){return e.set("teamId",null)})),u=ok.a(this.props.teams).map((function(e){return o.filter((function(t){return t.get("teamId")===e.get("id")}))})).filter((function(e){return e.size>0}));c.forEach((function(e){var t=o.filter((function(t){return t.get("groupId")===e.get("id")})).sort(tt.a.order);e.subList=t,e.isGroup=!0}));var l=this.getOnePartSectionList(s,c,null),d=u.map((function(e){return t.getOnePartSectionList(e,c,e.get(0).get("teamId"))}));return(e=Object(r.List)()).concat.apply(e,lk(d)).concat(l).unshift(this.props.projectInbox)}},{key:"getOnePartSectionList",value:function(e,t,n){var r=e.filter((function(e){return!ut.c(e)}));return t=t.filter((function(e){var t=null;return t=e.subList&&e.subList.size?e.subList.get(0).get("teamId"):e.get("teamId"),n?t===n:!t})),r.concat(t).sort(tt.a.sortOrder)}},{key:"getProjectMenu",value:function(){var e=this,t=this.projectMenuList=this.getProjectList(),n=this.props.selected,r=this.state.openKey,a=n?[n.get("id")]:[],i=r?[r]:[],o=null,c=this.isKeydownHandle?{openKeys:i,onOpenChange:this.onOpenChange}:{},s=this.props.bodyContainer?{getPopupContainer:function(){return $("#global-quick-add-wrapper")[0]}}:{getPopupContainer:this.getMenuContainer};return Y.a.createElement("div",{className:"antiscroll-wrap",ref:"projectMenuWrapper"},Y.a.createElement(Xe,fk({},c,{onSelect:this.onSelect,onClick:this.onClick,selectedKeys:a,triggerSubMenuAction:"hover"},s,{className:"antiscroll-inner",prefixCls:"dropdown-menu-menu"}),this.customPrevList.map((function(t){return e.getCustomMenuItem(t)})),t.map((function(t,n){var r=null;return(r=t.subList&&t.subList.size?t.subList.get(0).get("teamId"):t.get("teamId")||null)!==o?(o=r,[e.renderTeamSectionTitle(r),e.getMenuItem(t,n)]):e.getMenuItem(t,n)})),this.customLastList.map((function(t){return e.getCustomMenuItem(t)}))))}},{key:"renderTeamSectionTitle",value:function(e){var t=e&&ok.b(e),n=e?t?t.get("name"):e:v.a("team_personal"),r=e?"st-"+e:"personal-section";return Y.a.createElement(Ze,{disabled:!0,className:"dropdown-section-title text-secondary",key:r},n)}},{key:"getMenuItem",value:function(e,t){var n=this,a=this.props.selected?this.props.selected:Object(r.Map)(),i=this.state.activeIndex.split("-"),o=parseInt(i[0],10),c=parseInt(i[1],10);if(e.isGroup){var s=a.get("groupId"),u=e.get("name"),l=Y.a.createElement("a",null,e.get("name")),d={name:"folder",className:"i-3"};if(A.l(u)){var f=A.g(u);l=Y.a.createElement("a",null,f.title),d={name:f.emoji,isEmoji:!0}}return Y.a.createElement(Ue,{key:e.get("id"),isActive:s===e.get("id"),title:l,icon:d},e.subList.map((function(e,t){return Y.a.createElement(Ze,{key:e.get("id"),className:K()("project-submenu-item",{"dropdown-menu-menu-item-active":t===c,"global-quick-add-click-ignore":n.props.bodyContainer})},Y.a.createElement("a",{className:K()({active:e.get("id")===a.get("id")})},n.getProjectIconAndName(e)))})))}return Y.a.createElement(Ze,{key:e.get("id"),className:{"dropdown-menu-menu-item-active":t===o},onMouseEnter:function(e){e.key;n.state.openKey&&n.setState({openKey:null})}},Y.a.createElement("a",{className:K()({active:e.get("id")===a.get("id")})},this.getProjectIconAndName(e)))}},{key:"getCustomMenuItem",value:function(e){var t=this,n=this.props.selected?this.props.selected:"",r="list-divider"===e.className;return e.isGroup?Y.a.createElement(Ue,{key:e.id,title:e.name,icon:e.name?{name:e.name,className:"i-3"}:""},e.subList.map((function(e){return Y.a.createElement(Ze,{key:e.id,className:t.props.bodyContainer?"global-quick-add-click-ignore":""},Y.a.createElement("a",{className:e.className},e.icon&&Y.a.createElement(Q.a,{name:e.icon,className:"i-3"}),Y.a.createElement("span",null,e.name)))}))):Y.a.createElement(Ze,{key:e.id,className:r?e.className:""},!r&&Y.a.createElement("a",{className:K()({active:e.id===n.id},e.className)},e.icon&&Y.a.createElement(Q.a,{name:e.icon,className:"i-3"}),Y.a.createElement("span",null,e.name)))}},{key:"getProjectIconAndName",value:function(e){var t=e.get("name");if(A.l(t)){var n=A.g(t);return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("span",{className:"emoji"},n.emoji),Y.a.createElement("span",null,n.title))}var r=ut.b(e);return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement(Q.a,{name:r,className:"i-3"}),Y.a.createElement("span",null,e.get("name")))}},{key:"getProjectById",value:function(e){return this.props.projectList.concat([this.props.projectInbox]).concat(this.customPrevList).concat(this.customLastList).find((function(t){return t.custom?t.id===e:t.get("id")===e}))}},{key:"onSelect",value:function(e){var t=e.selectedKeys[0],n=this.getProjectById(t);this.close(),this.props.onSelect(n)}},{key:"onClick",value:function(e){this.props.selected&&e.key===this.props.selected.get("id")?Object(P.G)()?this.onSelect({selectedKeys:[e.key]}):this.close():this.props.onClick&&this.props.onClick(e)}},{key:"onHide",value:function(e){var t=$(e).find(".antiscroll-wrap");En.r(t)}},{key:"onShow",value:function(e){var t=$(e).find(".antiscroll-wrap");En.l(t),this.scrollPositionPatch.setScrollElement($(e).find(".antiscroll-inner")[0])}},{key:"onVisibleChange",value:function(e){this.setState({visible:e}),this.props.onVisibleChange&&this.props.onVisibleChange(e)}},{key:"onTriggerClick",value:function(){this.props.onTriggerClick&&this.props.onTriggerClick()}},{key:"close",value:function(){this.setState({visible:!1})}},{key:"toggle",value:function(){this.setState({visible:this.state.visible})}},{key:"getActiveProjectByIndex",value:function(e){return e>-1?this.projectMenuList.get(e):null}},{key:"scrollListMenuToActiveItem",value:function(e,t){var n=t.find("li"),r=t.height(),a=n.eq(0).height(),i=e+1-r/a;i=i<0?0:i,t.scrollTop(i*a)}},{key:"calcNextIndex",value:function(e,t,n){return"down"===e?t+1>=n?0:t+1:"up"===e?t-1<0?n-1:t-1:void 0}},{key:"onKeyDown",value:function(e){var t=this.projectMenuList.size,n=this.state.activeIndex.split("-"),r=parseInt(n[0]||-1,10),a=parseInt(n[1]||-1,10);if(e.keyCode===tc.a.space)this.setState({visible:!this.state.visible});else if(e.keyCode===tc.a.enter){if(e.preventDefault(),this.state.visible&&r>-1){var i,o=this.getActiveProjectByIndex(r);if(o.isGroup){var c=o.subList.get(Math.max(a,0));i=c?c.get("id"):""}else i=o?o.get("id"):"";this.onSelect({selectedKeys:[i]})}this.setState({visible:!this.state.visible})}else if(e.keyCode===tc.a.tab)this.setState({visible:!1});else if(e.keyCode===tc.a.escape)this.state.visible&&(this.setState({visible:!1}),e.stopPropagation()),e.preventDefault();else if(e.keyCode===tc.a.down_arrow||e.keyCode===tc.a.up_arrow){if(!this.state.visible)return;e.preventDefault();var s=e.keyCode===tc.a.down_arrow?"down":"up";if(a>-1){var u=$("#global-add-task .preset-list .dropdown-menu-menu-sub .dropdown-menu-menu-item").length,l=this.calcNextIndex(s,a,u);this.setState({activeIndex:r+"-"+l}),this.scrollListMenuToActiveItem(l,$("#global-add-task .preset-list .dropdown-menu-menu-sub"))}else{var d=this.calcNextIndex(s,r,t);this.setState({activeIndex:d+""}),this.scrollListMenuToActiveItem(d,$(this.refs.projectMenuWrapper).find(".antiscroll-inner"));var f=this.getActiveProjectByIndex(d);f&&f.isGroup?this.setState({openKey:f.get("id")}):this.state.openKey&&this.setState({openKey:null})}}else e.keyCode===tc.a.right_arrow&&this.state.visible?this.state.openKey&&this.setState({activeIndex:r+"-0"}):e.keyCode===tc.a.left_arrow&&this.state.visible&&this.state.openKey&&this.setState({activeIndex:r+""})}}]),n}(Y.a.Component),Sk=Object(V.c)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sk(Object(n),!0).forEach((function(t){uk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.projects,{},e.groups,{teams:e.teams.teams})}),null,null,{forwardRef:!0})(Tk);function Ek(e){return(Ek="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dk(e,t){return(Dk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ik(e);if(t){var a=Ik(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _k(this,n)}}function _k(e,t){return!t||"object"!==Ek(t)&&"function"!=typeof t?Ck(e):t}function Ck(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ik(e){return(Ik=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dk(e,t)}(i,e);var t,n,r,a=jk(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={loading:!1},t.onConfirm=t.onConfirm.bind(Ck(t)),t.onClose=t.onClose.bind(Ck(t)),t}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.intl,n=e.isScheduleOwner;return Y.a.createElement(Fo.a,{className:"timecard-element",maskClosable:!1,visible:!0,loading:this.state.loading,title:t.formatMessage({id:"delete_agenda"}),okText:t.formatMessage({id:"delete"}),cancelText:t.formatMessage({id:"cancel"}),onOk:this.onConfirm,onCancel:this.onClose},Y.a.createElement("p",null,n?t.formatMessage({id:"schedule_owner_delete_confirm"}):t.formatMessage({id:"schedule_participant_delete_confirm"})))}},{key:"onClose",value:function(){this.props.onClose()}},{key:"onConfirm",value:function(){var e=this;this.setState({loading:!0},(function(){var t=e.props,n=t.projectId,r=t.taskId;n&&r?Object(M.s)(n,r).then((function(){e.props.onDelete&&e.props.onDelete(),e.resetLoading()}),(function(){e.resetLoading()})):e.onClose()}))}},{key:"resetLoading",value:function(){this.setState({loading:!1})}}])&&wk(t.prototype,n),r&&wk(t,r),i}(Y.a.Component),Ak=Object(me.c)(Mk);function xk(e){return(xk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rk(e){return function(e){if(Array.isArray(e))return Pk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Pk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pk(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nk(Object(n),!0).forEach((function(t){Uk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hk(e,t){return(Hk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kk(e);if(t){var a=Kk(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Yk(this,n)}}function Yk(e,t){return!t||"object"!==xk(t)&&"function"!=typeof t?Wk(e):t}function Wk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kk(e){return(Kk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Gk,Vk,zk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hk(e,t)}(c,e);var t,n,a,o=Bk(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).completedTime="",t._listenId=i.a.uniqueId("taskmenu-"),t.escListenId=i.a.uniqueId(),t.rootRef=Y.a.createRef(),t.pomodoroSectionRef=Y.a.createRef(),t.scrollDownListenId="",t.model=void 0,t.tasks=r.List(),t.mountedSelectTaskIds=[],t.isMulti=!1,t.isScheduleOwner=!0,t.isScheduleTask=!1,t.state={showTimecard:!1,showConfirmDeleteSchedule:!1,isShowDatePicker:!1,pomodoroSubMenuVisible:!1},t.mountedSelectTaskIds=e.taskIds,t.setupData(e),t.deleteTask=t.deleteTask.bind(Wk(t)),t.deleteSchedule=t.deleteSchedule.bind(Wk(t)),t.hideConfirmDeleteSchedule=t.hideConfirmDeleteSchedule.bind(Wk(t)),t.showConfirmDeleteSchedule=t.showConfirmDeleteSchedule.bind(Wk(t)),t.saveTimeByTimecard=t.saveTimeByTimecard.bind(Wk(t)),t.setAssignee=t.setAssignee.bind(Wk(t)),t.selectProject=t.selectProject.bind(Wk(t)),t.hideTimecard=t.hideTimecard.bind(Wk(t)),t.modifyCompletedTime=t.modifyCompletedTime.bind(Wk(t)),t.showOrHideDatePicker=t.showOrHideDatePicker.bind(Wk(t)),t.hideDatePicker=t.hideDatePicker.bind(Wk(t)),t.confirmCompletedTime=t.confirmCompletedTime.bind(Wk(t)),t.getAddSubtask=t.getAddSubtask.bind(Wk(t)),t.handleAddSubtask=t.handleAddSubtask.bind(Wk(t)),t.convertTasks=t.convertTasks.bind(Wk(t)),t.changeStartDate=t.changeStartDate.bind(Wk(t)),t.duplicateTask&&(t.duplicateTask=t.duplicateTask.bind(Wk(t))),t.copyTaskLink&&(t.copyTaskLink=t.copyTaskLink.bind(Wk(t))),t.mergeTasks&&(t.mergeTasks=t.mergeTasks.bind(Wk(t))),t.startPomo&&(t.startPomo=t.startPomo.bind(Wk(t))),t.checkHideMenu=t.checkHideMenu.bind(Wk(t)),t.initTimecardPosition=t.initTimecardPosition.bind(Wk(t)),t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.hideMenu,n=e.scrollerEl,r=e.taskIds,a=e.fromKanban;y.a.hasTaskContextMenu=!0,this.initPosition(),document.addEventListener("click",this.checkHideMenu),document.addEventListener("contextmenu",t),f.b.subscribe(this.escListenId,"taskMenu",t),n&&(this.scrollDownListenId=JSON.stringify(r),$(n).on("scroll.dropdown".concat(this.scrollDownListenId),(function(e){t()}))),f.a.subscribe(this._listenId,"hideColumnTaskMenu",(function(){t()})),a&&f.a.dispatch("changeColumnOutSingleVisibility",!1),y.a.currentColumnTaskMenu=this._listenId}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.taskIds;JSON.stringify(e.taskIds)!==JSON.stringify(t)&&this.setupData(e)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.hideMenu,n=e.scrollerEl,r=e.fromKanban,a=e.taskIds;if(y.a.hasTaskContextMenu=!1,document.removeEventListener("click",this.checkHideMenu),document.removeEventListener("contextmenu",t),f.b.unSubscribe(this.escListenId),n&&$(n).off("scroll.dropdown".concat(this.scrollDownListenId)),f.a.unSubscribe(this._listenId,"hideColumnTaskMenu"),r){y.a.currentColumnTaskMenu&&y.a.currentColumnTaskMenu!==this._listenId||f.a.dispatch("changeColumnOutSingleVisibility",!0);var o=!a||0===a.length,c=i.a.isEqual(this.mountedSelectTaskIds,a);(o||c)&&f.a.dispatch("dismissColumnOutSingle")}}},{key:"setupData",value:function(e){var t=e.taskIds;this.tasks=T.o(t),this.isMulti=t.length>1,this.model=this.getTaskModel(this.isMulti),!this.isMulti&&this.tasks.get(0)?(this.isScheduleOwner=w.ib(this.tasks.get(0)),this.isScheduleTask=w.jb(this.tasks.get(0))):(this.isScheduleOwner=!0,this.isScheduleTask=!1)}},{key:"getTaskModel",value:function(e){if(e){var t=this.tasks,n=function(e){var t=e.map((function(e){return U.a.formatToUtc(w.n(e))})).toArray(),n=i.a.uniq(t);return 1===n.length&&(i.a.isUndefined(n[0])?null:n[0])}(t),a=!1===n;return r.fromJS({status:Bb(t),projectId:Kb(t),priority:Wb(t),startDate:a?null:Vb(t),dueDate:a?null:n,commonDate:Qb(t),startTime:Xb(t),reminders:zb(t),repeatFlag:$b(t),repeatFrom:ek(t),isAllDay:Zb(t),isFloating:qb(t),timeZone:Jb(t),assignee:tk(t),tags:Gb(t),taskCount:t.size,isMulti:!0,kind:Yb(t)})}return this.tasks.get(0)||r.Map()}},{key:"getMenu",value:function(){return this.isMulti?this.getMultiMenu():this.getSingleMenu()}},{key:"getSingleMenu",value:function(){var e=this,t=this.getSetDueDateSection(),n=this.model.get("priority"),r=this.getSetProjectSection(),a=this.getSetAssigneeSection(),i=this.getManageTagSection(),o=this.getDeleteTaskSection(),c=this.getStartPomoSection(),s=this.getConfigCompletedTimeSection(),u=this.isScheduleOwner,l=this.props,d=l.position,f=l.taskIds,p=T.z(f),h=p.hasNote,m=p.hasNestedTask,g=p.hasCompleted,v=p.hasTask,y=p.hasSchedule,b=T.D(this.model),k=this.getCopyLinkSection(this.model),O=this.getDuplicateTaskSection(),S=this.getConvertMenu({hasNote:h,hasTask:v,hasCompleted:g,hasNestedTask:m,hasSchedule:y}),E=this.getAddSubtask(b);return Y.a.createElement("div",{ref:this.rootRef,id:"task-menu-view",className:"task-menu pop-shadow context-menu dropdown-menu calendar-click-ignore",style:{left:d.left,top:d.top}},u&&t,!h&&Y.a.createElement(Lb,{priority:n,selectPriority:function(t){e.selectPriority(t)}}),Y.a.createElement("div",{className:"menu-section pure-text"},!h&&E,r,u&&a,i),c&&Y.a.createElement("div",{className:"menu-section pure-text"},c),Y.a.createElement("div",{className:"menu-section pure-text"},O,k,s,S,o))}},{key:"getMultiMenu",value:function(){var e=this,t=this.getSetDueDateSection(),n=this.model.get("priority"),r=this.getSetProjectSection(),a=this.getSetAssigneeSection(),i=this.getDeleteTaskSection(),o=this.getManageTagSection(),c=this.props,s=c.position,u=c.taskIds,l=T.z(u),d=l.hasNestedTask,f=l.hasNote,p=l.hasTask,h=l.hasCompleted,m=l.hasSchedule,g=this.getDuplicateTaskSection(),v=this.getMergeSection({hasNote:f}),y=this.getConvertMenu({hasNestedTask:d,hasNote:f,hasTask:p,hasCompleted:h,hasSchedule:m});return Y.a.createElement("div",{ref:this.rootRef,className:"task-menu pop-shadow context-menu dropdown-menu calendar-click-ignore",style:{left:s.left,top:s.top}},t,!f&&Y.a.createElement(Lb,{priority:n,selectPriority:function(t){e.selectPriority(t)}}),Y.a.createElement("div",{className:"menu-section pure-text"},r,a,o),Y.a.createElement("div",{className:"menu-section pure-text"},g,v,y,i))}},{key:"getTags",value:function(){return this.isMulti?this.model.get("tags").toJS():{selected:this.model.get("tags").toJS()}}},{key:"getSetDueDateSection",value:function(){var e=this,t=this.state.showTimecard,n=this.getTimeSet(),r=w.k(this.model);return Y.a.createElement("div",{className:"set-duedate menu-section"},Y.a.createElement("p",null,Y.a.createElement(Je.a,{id:"date_label",tagName:"span"})),Y.a.createElement("div",{className:"quick-set"},n.map((function(t){var n=K()("item avoid-event",{active:t.isActive});return Y.a.createElement("a",{className:n,key:t.iconName,onClick:function(n){e.selectDate(n,t.time)}},Y.a.createElement(Q.a,{name:t.iconName,className:t.extraIconClass}),Y.a.createElement("div",{className:"tooltip tip-transition line tip-center"},Y.a.createElement(Je.a,{id:t.text,tagName:"span"})))})),t&&Y.a.createElement(Jf,{options:r,onMountedCard:this.initTimecardPosition,onUnmountCard:this.hideTimecard,onConfirmTime:this.saveTimeByTimecard,onClearTime:this.saveTimeByTimecard})))}},{key:"getAddSubtask",value:function(e){return this.props.canAddSubtask?e>=ie.a?null:Y.a.createElement("div",{className:"add-subtask",onClick:this.handleAddSubtask},Y.a.createElement("a",null,Y.a.createElement(Q.a,{name:"subtask-bold",className:"i-o-36"}),Y.a.createElement("p",null,v.a("add_subtask")))):null}},{key:"getSetProjectSection",value:function(){var e=this.getProjectMenuTrigger();return Y.a.createElement("div",{className:"move-to"},Y.a.createElement(Sk,{menuClassName:"task-menu-element i-text-i project-dropdown-menu",trigger:e,placement:"bottomCenter",onSelect:this.selectProject,selected:j.n(this.model.get("projectId"))}))}},{key:"getSetAssigneeSection",value:function(){var e=this.model,t=j.n(e.get("projectId"))||r.Map();return ut.p(t)&&Y.a.createElement("div",{className:"assign-to"},Y.a.createElement(yt,{menuClassName:"task-menu-assignee",projectId:t.get("id"),selected:e.get("assignee"),onSelect:this.setAssignee},Y.a.createElement(Hb,{iconName:"task-menu-assign",textId:"assign_to"})))}},{key:"getManageTagSection",value:function(){var e=this,t=this.props,n=t.onMenuAction,r=t.taskIds;return Y.a.createElement("div",{className:"manage-tags"},Y.a.createElement(Hb,{iconName:"task-menu-tag",textId:"tags",onClick:function(t){n({command:"tags",taskIds:r,data:e.getTags()},t)}}))}},{key:"getDeleteTaskSection",value:function(){var e=this.state.showConfirmDeleteSchedule,t=this.model;return Y.a.createElement(Y.a.Fragment,null,Y.a.createElement("div",{className:"delete-task"},Y.a.createElement(Hb,{iconName:"task-menu-delete",textId:"delete",onClick:this.deleteTask})),e&&Y.a.createElement(Ak,{projectId:t.get("projectId"),taskId:t.get("id"),isScheduleOwner:this.isScheduleOwner,onDelete:this.deleteSchedule,onClose:this.hideConfirmDeleteSchedule}))}},{key:"getConfigCompletedTimeSection",value:function(){var e=P.o(),t=this.state.isShowDatePicker,n=U.a.formatToDateString(this.model.get("completedTime"));this.completedTime=n;var r=U.a.formatToDateString();return Y.a.createElement(Y.a.Fragment,null,e&&Y.a.createElement("div",{className:"modify-completed-time"},Y.a.createElement("a",{onClick:this.showOrHideDatePicker},Y.a.createElement(Q.a,{name:"modify-completed-time",className:"i-o-36"}),Y.a.createElement("p",null,Y.a.createElement(Je.a,{id:"modify_completed_time",tagName:"span"}))),t&&Y.a.createElement("div",{className:"timecard pop-shadow",ref:this.calculateCalendarPostion},Y.a.createElement(cl,{afterDatesInvalid:r,selected:n,onChange:this.modifyCompletedTime}),Y.a.createElement("div",{className:"confirm-container btns"},Y.a.createElement("button",{className:"btn-tny btn-cancel",onClick:this.hideDatePicker},Y.a.createElement(Je.a,{id:"cancel",tagName:"span"})),Y.a.createElement("button",{className:"btn-tny btn-primary",onClick:this.confirmCompletedTime},Y.a.createElement(Je.a,{id:"ok",tagName:"span"}))))))}},{key:"getStartPomoSection",value:function(){var e=this,t=this.props,n=t.pomodoroEnabled,r=t.pomoTaskId,a=t.pomoStatus,i=t.hideMenu,o=t.taskIds,c=this.state.pomodoroSubMenuVisible,s=!(!r||"pomo"!==a);return!w.fb(this.model)&&0===this.model.get("status")&&n?Y.a.createElement("div",{className:K()("start-task-pomo",{"dropdown-menu-menu-submenu-open":c}),ref:this.pomodoroSectionRef,onClick:function(t){$(t.target).closest(".start-task-pomo").length>0&&e.setState((function(e,t){return{pomodoroSubMenuVisible:!e.pomodoroSubMenuVisible}}))}},Y.a.createElement("a",null,Y.a.createElement(Q.a,{name:"start-pomo",className:"i-o-36"}),Y.a.createElement("p",null,Y.a.createElement(Je.a,{id:"start_focus",tagName:"span"})),Y.a.createElement(Q.a,{name:"chevron-right",className:"direct i-3"})),Y.a.createElement(Hv,{taskId:o[0],relativeRef:this.pomodoroSectionRef,isPomoInProgress:s,pomodoroSubMenuVisible:c,setPomodoroSubMenuVisible:function(t){e.setState({pomodoroSubMenuVisible:t})},startPomo:this.startPomo,hideTaskMenu:i})):null}},{key:"getDuplicateTaskSection",value:function(){var e=this.props.enableDuplicate,t=P.o(),n=P.m();return!t&&!n&&e&&Y.a.createElement("div",{className:"duplicate-task"},Y.a.createElement("a",{onClick:this.duplicateTask},Y.a.createElement(Q.a,{name:"copy",className:"i-o-36"}),Y.a.createElement("p",null,Y.a.createElement(Je.a,{id:"create_copy",tagName:"span"}))))}},{key:"getCopyLinkSection",value:function(e){return Y.a.createElement("div",{className:"copy_task_link"},Y.a.createElement("a",{onClick:this.copyTaskLink},Y.a.createElement(Q.a,{name:"copy-task-link",className:"i-o-36"}),Y.a.createElement("p",null,Y.a.createElement(Je.a,{id:"copy_link",tagName:"span"}))))}},{key:"getMergeSection",value:function(e){return e.hasNote?null:Y.a.createElement("div",{className:"merge-tasks"},Y.a.createElement("a",{onClick:this.mergeTasks},Y.a.createElement(Q.a,{name:"combine-task",className:"i-o-36"}),Y.a.createElement("p",null,Y.a.createElement(Je.a,{id:"merge",tagName:"span"}))))}},{key:"getTimeSet",value:function(){var e=this.model,t=this.tasks.every((function(e){return w.tb(e)})),n=["quick-today","quick-tomorrow","quick-nextweek","contextmenu-custom"],r=[U.a.getStartOfDay(0,"days","YYYY-MM-DD"),U.a.getStartOfDay(1,"days","YYYY-MM-DD"),U.a.getStartOfDay(7,"days","YYYY-MM-DD"),"custom"],a=["today","tomorrow","next_week","custom"],i=e.get("startDate")&&U.a.formatUtcToDateString(e.get("startDate"));return t&&(n.splice(3,0,"quick-nextperiod"),a.splice(3,0,"skip_this_period"),r.splice(3,0,"skip_this_period")),n.map((function(e,t){return{time:r[t],text:a[t],isActive:i===r[t],iconName:e,extraIconClass:"i-mid i-o-36 i-h-o-54"}}))}},{key:"getProjectMenuTrigger",value:function(){return Y.a.createElement(Hb,{iconName:"task-menu-move",textId:"move_to"})}},{key:"getConvertMenu",value:function(e){var t=this,n=e.hasNote,r=e.hasTask,a=e.hasNestedTask,i=e.hasCompleted,o=e.hasSchedule;return Object(xt.a)()?i||n&&r||a||o?null:Y.a.createElement("div",{className:"convert-tasks menu-item"},Y.a.createElement("a",{onClick:function(e){return t.convertTasks(e,n?ie.L.Text:ie.L.Note)}},Y.a.createElement(Q.a,{name:"convert-task",className:"i-o-36"}),Y.a.createElement("p",null,Y.a.createElement(Je.a,{id:n?"convert_to_task":"convert_to_note",tagName:"span"})))):null}},{key:"setPriority",value:function(e){if(this.isMulti){var t=this.tasks,n=k.o(t,e);rk.e(n)}else{var r=this.model,a=bt.z(r,e);rk.d(a)}}},{key:"setAssignee",value:function(e){if(this.isMulti){var t=this.tasks;k.k(t,e)}else{var n=this.model;bt.y(n,e)}(0,this.props.hideMenu)()}},{key:"handleAddSubtask",value:function(){var e=this.model,t=this.props,n=t.hideMenu;(0,t.onMenuAction)({command:"addSubtask",taskIds:[e.get("id")],data:{id:e.get("id"),projectId:e.get("projectId"),columnId:e.get("columnId")}}),n()}},{key:"saveTimeByTimecard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.isMulti,n=this.props.hideMenu;if(t){var r=this.tasks,a=e.isBatchMode?k.a(r,e):k.j(r,e);nk.e(a)}else{var i=this.model;if(w.ub(i)&&P.B()&&!w.V(i)){var o=bt.l(i,e);o?"require"===o?(f.a.dispatch("updateFakeTask",{fakeTask:bt.i(e.startDate,e.dueDate,e.isAllDay,i)}),f.a.dispatch(se.a,{onConfirm:function(t){var n=t.repeatChangeKey;bt.v(i,Lk({},e,{repeatChangeKey:n,isRepeatSelf:!0})),f.a.dispatch("updateFakeTask",{fakeTask:null})},onCancel:function(){f.a.dispatch("updateFakeTask",{fakeTask:null})},type:"edit",isRepeatSelf:!0})):bt.v(i,Lk({},e,{repeatChangeKey:o,isRepeatSelf:!0})):bt.w(i,e)}else bt.w(i,e)}n()}},{key:"changeStartDate",value:function(e,t,n){var r=this.isMulti,a=this.props.hideMenu;if(r){var i=this.tasks,o=k.a(i,{startDate:e,dueDate:t,isAllDay:n});nk.e(o),a()}else{var c=this.model;bt.q(c,e,a)}}},{key:"skipThisPeriod",value:function(){if(this.isMulti)k.q(this.tasks);else{var e=this.model;bt.A(e)}}},{key:"moveToProject",value:function(e){var t=this.isMulti,n=j.n(e);if(t)IT(this.tasks,e,void 0,(function(t){Jy.e(t),g.b({text:v.a("task_move_to_project",{s:n.get("name")}),onClickAction:function(){P.I(e)}})}));else{var r=this.model;CT(r,e,(function(t){Jy.e(t),g.b({text:v.a("this_task_move_to_project",{s1:O.d(r.get("title")),s2:n.get("name")}),onClickAction:function(){P.I(e)}})}))}}},{key:"selectPriority",value:function(e){var t=this.props.hideMenu;this.setPriority(parseInt(e,10)),t()}},{key:"deleteTask",value:function(e){e.stopPropagation();var t=this.props.hideMenu;if(this.isMulti)ET(this.tasks),t();else{if(this.isScheduleTask)return void this.showConfirmDeleteSchedule();var n=this.model;w.ub(n)&&P.B()&&!w.V(n)?f.a.dispatch(se.a,{onConfirmDelete:function(e){var a=e.repeatChangeKey;wT(r.List([n]),a),t()},onCancel:t,type:"delete",isRepeatSelf:!0}):(ET(r.List([n])),t())}}},{key:"deleteSchedule",value:function(){var e=this.props.hideMenu,t=this.model;ET(r.List([t]),!1,!1),e()}},{key:"mergeTasks",value:function(e){var t=this.props;(0,t.onMenuAction)({command:"merge",taskIds:t.taskIds},e)}},{key:"convertTasks",value:function(e,t){var n=this.props,r=n.onMenuAction,a=n.taskIds,i=n.hideMenu;r({command:"convert",taskIds:a,data:{convertTo:t}},e),En.w(v.a("converted")),i()}},{key:"duplicateTask",value:function(e){var t=this.props,n=t.hideMenu,r=t.onMenuAction,a=t.taskIds,i=T.o(a).toArray();if(Rk(new Set(i.map((function(e){return e.get("projectId")})))).some((function(e){return!!Oo.d({projectId:e})})))nd.a({type:ie.c.task});else{var o=WT(i);0!==o.length&&r({command:"duplicate",taskIds:a,data:o[0].get("id")},e)}n()}},{key:"copyTaskLink",value:function(){var e=this.model,t=Object(T.E)(e.get("id"));t&&(Object(ak.a)(t),g.b({text:v.a("copied")}),(0,this.props.hideMenu)())}},{key:"modifyCompletedTime",value:function(e){this.completedTime=e}},{key:"confirmCompletedTime",value:function(){var e=this.props,t=e.updateTaskCompletedTime,n=e.hideMenu,r=this.model.get("id"),a=d.a.parseUTCString(this.model.get("completedTime"))||new Date,i=d.a.dayOfDawn(a),o=d.a.dayOfDawn(this.completedTime),c=l()(i).diff(o,"days"),s=l()(a).add(-c,"days");t(r,U.a.formatToUtcString(s)),this.hideDatePicker(),n()}},{key:"hideDatePicker",value:function(){this.setState({isShowDatePicker:!1})}},{key:"showOrHideDatePicker",value:function(){var e=this.state.isShowDatePicker;this.setState({isShowDatePicker:!e})}},{key:"showConfirmDeleteSchedule",value:function(){this.setState({showConfirmDeleteSchedule:!0})}},{key:"initPosition",value:function(){var e=this.rootRef.current;if(e){var t=this.props.position,n=t.top,r=e.offsetHeight;n+r-window.innerHeight>0&&(e.style.top=Math.max(n-r,0)+"px",e.classList.add("dropup"),e.classList.add("open"));var a=t.left,i=e.offsetWidth;a+i-window.innerWidth>0&&(e.style.left=a-i+"px")}}},{key:"checkHideMenu",value:function(e){!document.body.contains(e.target)||this.rootRef.current&&this.rootRef.current.contains(e.target)||$(e.target).closest(".timecard-element").length||$(e.target).closest(".valid-task-menu-click-area").length||(0,this.props.hideMenu)()}},{key:"calculateCalendarPostion",value:function(e){if(e){var t=e,n=t.getBoundingClientRect(),r=n.y,a=n.x,i=n.height,o=n.width,c=r+i-window.innerHeight,s=a+o-window.innerWidth;c>0&&(t.style.top="-".concat(c,"px")),s>0&&(t.style.left="-".concat(o,"px"))}}},{key:"hideConfirmDeleteSchedule",value:function(){this.setState({showConfirmDeleteSchedule:!1})}},{key:"selectDate",value:function(e,t){var n=this.props.hideMenu;"custom"===t?(e.stopPropagation(),this.setState({showTimecard:!0})):"skip_this_period"===t?(this.skipThisPeriod(),n()):this.changeStartDate(t)}},{key:"selectProject",value:function(e){var t=e.get("id"),n=this.model.get("taskCount")||1;Oo.d({projectId:t,newCounts:n})?nd.a({type:ie.c.task}):this.moveToProject(t),(0,this.props.hideMenu)()}},{key:"startPomo",value:function(){(0,this.props.setPomoTaskId)(this.model.get("id")),f.a.dispatch("startTaskPomo"),(0,this.props.hideMenu)()}},{key:"hideTimecard",value:function(e){e||this.setState({showTimecard:!1})}},{key:"initTimecardPosition",value:function(e){var t=e.getBoundingClientRect(),n=t.top+t.height-window.innerHeight;n>0?e.style.top="calc(50% - ".concat(n,"px)"):t.top<0&&(e.style.top="calc(50% - ".concat(t.top,"px)"))}},{key:"render",value:function(){return ve.a.createPortal(this.getMenu(),document.body)}}])&&Fk(t.prototype,n),a&&Fk(t,a),c}(Y.a.Component);function Zk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e[e.SINGLE=0]="SINGLE",e[e.MULTI=1]="MULTI",e[e.GROUP=2]="GROUP",e[e.TITLE=3]="TITLE"}(Gk||(Gk={})),function(e){e.LIST="list",e.GROUP="group",e.CSL="csl",e.TAG="tag"}(Vk||(Vk={}));var qk=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id="",this.name="",this.icon="",this.children=[],this.parent=null,this.type=Gk.MULTI,this.order=0,this.symbol=Vk.LIST}var t,n,r;return t=e,(n=[{key:"fromJson",value:function(e){var t=e.id,n=e.name,r=e.icon,a=e.type,i=e.children,o=e.parent,c=e.order,s=e.symbol;return this.id=null!=t?t:this.id,this.name=null!=n?n:this.name,this.icon=null!=r?r:this.icon,this.children=null!=i?i:this.children,this.parent=null!=o?o:this.parent,this.type=null!=a?a:this.type,this.order=null!=c?c:this.order,this.symbol=null!=s?s:this.symbol,this}}])&&Zk(t.prototype,n),r&&Zk(t,r),e}();function Jk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id="",this.name="",this.itemIds=[],this.icon=void 0}var t,n,r;return t=e,(n=[{key:"fromJson",value:function(e){var t=e.id,n=e.name,r=e.icon,a=e.itemIds;return this.id=null!=t?t:this.id,this.name=null!=n?n:this.name,this.icon=null!=r?r:this.icon,this.itemIds=null!=a?a:this.itemIds,this}}])&&Jk(t.prototype,n),r&&Jk(t,r),e}(),Xk=n(1005);function Qk(e){var t=e.entity,n=e.groupLevel,r=e.isGroupExpand,a=e.isGroupPartialSelect,i=e.isSingleSelected,o=e.toggleFoldGroup,c=t.id,s=t.name,u=t.icon,l=t.type,d={paddingLeft:+Sn.a.filterMenuItemLeftPadding+ +Sn.a.filterMenuItemLevelPadding*n};if(l===Gk.SINGLE||l===Gk.MULTI){var f={icon:"",emoji:null,name:""};if(Object(A.l)(s)){var p=Object(A.g)(s);f.emoji=p.emoji,f.name=p.title}else f.icon=u,f.name=s;if("tag"===u){var h=zt.b(s);return Y.a.createElement(Ze,{multi:!0,key:c,style:d,className:{"single-selected-item":i}},Y.a.createElement(Q.a,{name:"tag",className:"i-3"}),Y.a.createElement("span",null,h),Y.a.createElement(Q.a,{name:"single-select",className:"i-3"}))}return Y.a.createElement(Ze,{multi:!0,key:c,style:d,className:{"single-selected-item":i}},f.emoji?Y.a.createElement("span",{className:"emoji"},f.emoji):Y.a.createElement(Q.a,{name:f.icon,className:"i-3"}),Y.a.createElement("span",null,f.name),Y.a.createElement(Q.a,{name:"single-select",className:"i-3"}))}if(l===Gk.GROUP||l===Gk.TITLE){var m=l===Gk.TITLE,g="tag"===u,v=m?{disabled:!0}:{multi:!0,className:{"single-selected-item":i||a&&!r}},y=function(e){e.stopPropagation(),o(c)},b=s;g&&(b=zt.b(s));var k={icon:"",emoji:null,name:""};if(Object(A.l)(b)){var O=Object(A.g)(b);k.emoji=O.emoji,k.name=O.title}else k.icon=u,k.name=b;return Y.a.createElement(Ze,{key:c,disabled:v.disabled,multi:v.multi,className:v.className,style:d},Y.a.createElement("span",{style:{display:"block"},onClick:m?y:function(){}},Y.a.createElement("span",{className:Xk.handleBar},Y.a.createElement("span",{className:K()("i-o-36",Xk.foldHandler),onClick:m?function(){}:y},Y.a.createElement(Q.a,{name:"multi-select-expand-triangle",style:{transform:"rotate(".concat(r?0:-90,"deg)")}})),g?Y.a.createElement(Q.a,{name:u,className:"i-3"}):k.emoji?Y.a.createElement("span",{className:"emoji"},k.emoji):Y.a.createElement(Q.a,{name:k.icon,className:"i-3"})),g?Y.a.createElement("span",null,b):Y.a.createElement("span",null,k.name),Y.a.createElement(Q.a,{name:"single-select",className:"i-3"})))}return null}var eO=n(1006);function tO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rO(e){var t=e.defaultExpand,n=void 0===t||t,r=e.onToggle,a=e.entity,i=tO(Object(B.useState)(n),2),o=i[0],c=i[1],s=Object(B.useCallback)((function(){c((function(e){var t=!e;return r(t,a.itemIds),t}))}),[a.itemIds,r]),u=a.name;return Y.a.createElement("div",{className:"section-title",onClick:s,style:{paddingLeft:+Sn.a.filterMenuItemLeftPadding}},Y.a.createElement("span",{className:eO.handleBar},Y.a.createElement("span",{className:K()("i-o-36",eO.foldHandler),onClick:function(e){e.stopPropagation(),s()}},Y.a.createElement(Q.a,{name:"multi-select-expand-triangle",style:{transform:"rotate(".concat(o?0:-90,"deg)")}}))),Y.a.createElement("span",{className:K()("i-o-54",eO.text)},u))}var aO=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id="",this.id="divider-"+t},iO=n(1007);function oO(e){var t=e.entity;return Y.a.createElement(qe,{className:iO.divider,key:t.id})}function cO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dO(e){var t,n=e.openStatus,r=e.dataStructure,a=e.selectedKeys,o=e.singleSelectedKeys,c=uO(Object(B.useState)([]),2),s=c[0],u=c[1],l=uO(Object(B.useState)(n),2),d=l[0],f=l[1],p=Object(B.useCallback)((function(e){f((function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cO(Object(n),!0).forEach((function(t){sO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,sO({},e,!t[e]))}))}),[]),h=Object(B.useCallback)((function(e){return 0===i.a.intersection(e.itemIds,s).length}),[s]),m=Object(B.useCallback)((function(e,t){u((function(n){return e?i.a.difference(n,t):i.a.union(n,t)}))}),[]),g=function(e,t){var n=a.includes(e),r=!!t.find((function(e){return a.includes(e.id)}));return!n&&r};return t=[],r.forEach((function(e,n){if(e instanceof qk){var a=e.id;if(s.includes(a))return;t=t.concat(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],a=t.id,i=t.children,c=Qk({entity:t,groupLevel:n,isGroupExpand:d[a],isGroupPartialSelect:g(a,i),toggleFoldGroup:p,isSingleSelected:(null==o?void 0:o.includes(a))||!1});return c&&r.push(c),d[a]&&i.forEach((function(t){r=r.concat(e(t,n+1))})),r}(e))}else if(e instanceof $k){var i=e.id;t.push(Y.a.createElement(rO,{defaultExpand:h(e),key:i,entity:e,onToggle:m}))}else if(e instanceof aO){if(n===r.length-1)return;var c=e.id;t.push(Y.a.createElement(oO,{key:c,entity:e}))}})),t}var fO=n(547);function pO(e){return function(e){if(Array.isArray(e))return hO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return hO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hO(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mO=function(e,t){return"!all"===e&&t?t:new Map([["!all",v.a("all_tag")],["*withtags",v.a("with_tags")],["!tag",v.a("no_tags")]]).get(e)||e};var gO=n(598);function vO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vO(Object(n),!0).forEach((function(t){bO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kO(e){return function(e){if(Array.isArray(e))return SO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||TO(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||TO(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TO(e,t){if(e){if("string"==typeof e)return SO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SO(e,t):void 0}}function SO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var EO=Object(V.c)((function(e){return yO({},function(e){return{tagStructureList:Object(fO.b)(e)}}(e),{},function(e){return{allTags:e.tags}}(e))}))(Object(me.c)((function(e){var t=e.intl,n=e.allTags,a=e.tags,i=e.tagStructureList,o=e.fromCal,c=e.onCancel,s=e.onConfirm,u=e.onMounted,l=e.getContainer,d=e.className,f=Object(B.useMemo)((function(){return a.selected||[]}),[]),p=Object(B.useMemo)((function(){return a.singleSelected||[]}),[]),h=Object(B.useRef)(null),m=Object(B.useRef)(null),g=OO(Object(B.useState)(""),2),v=g[0],b=g[1],k=OO(Object(B.useState)(f),2),O=k[0],T=k[1],S=OO(Object(B.useState)(p),2),E=S[0],w=S[1],D=function(e){var t=e.isItemAllShown,n=e.isItemWithTagShown,r=e.isItemNoTagShown,a=e.customAllText,i=e.tagStructureList,o=function(e){return"!all"===e?"parent-tag":"!tag"===e?"no-tag":"*withtags"===e?"with-tags":"tag"};return{dataStructure:Object(B.useMemo)((function(){var e=0,c=pO(t?["!all"]:[]).map((function(t){return(new qk).fromJson({id:t,name:mO(t,a),icon:o(t),type:Gk.SINGLE,order:e++,symbol:Vk.TAG})})),s=[].concat(pO(n?["*withtags"]:[]),pO(r?["!tag"]:[])).map((function(t){return(new qk).fromJson({id:t,name:mO(t),icon:o(t),type:Gk.MULTI,order:e++,symbol:Vk.TAG})})),u=i.map((function(t){var n=e++,r=t.get("name"),a=o(r),i=t.get("children").map((function(t){var n=t.get("name"),a=o(r);return(new qk).fromJson({id:n,name:mO(n),icon:a,type:Gk.MULTI,parent:r,order:e++,symbol:Vk.TAG})})).toArray();return(new qk).fromJson({id:r,name:mO(r),icon:a,type:i.length?Gk.GROUP:Gk.MULTI,children:i,order:n,symbol:Vk.TAG})})).toArray();return[].concat(pO(c),pO(s),pO(u))}),[a,t,r,n,i]),handleSelectedNameAndKeys:Object(B.useCallback)((function(e){var t=e.map((function(e){return e.id})),n=[],r=[],a=new Map;return e.forEach((function(e){e.symbol===Vk.TAG?(n.push(e.name),(e.children.length||e.parent&&!t.includes(e.parent)||!e.parent)&&(r.push(e.id),a.set(e.id,e.symbol))):(n.push(e.name),r.push(e.id),a.set(e.id,e.symbol))})),{names:n,keys:r,symbolMap:a}}),[])}}({isItemAllShown:!1,isItemWithTagShown:!1,tagStructureList:i}).dataStructure,j=Object(gO.a)(v),_=Object(B.useRef)(O);Object(B.useEffect)((function(){0===j.length&&v.length>0&&(_.current=O)}),[j,v,O,_]),Object(B.useEffect)((function(){return $("body").on("click.tag-manage",(function(e){$(e.target).parents(".tag-multi-select").length||c()})),h.current&&En.l($(h.current)),m.current&&(u&&u(m.current),$(m.current).show()),o&&(y.a.hasManageTags=!0),function(){$("body").off("click.tag-manage"),h.current&&En.r($(h.current)),o&&(y.a.hasManageTags=!1)}}),[]);var C=Object(B.useCallback)((function(e){var t=e.target.value;b(t)}),[]),I=Object(B.useCallback)((function(e){var t=e.selectedKeys;T(t),w(E.filter((function(e){return!t.includes(e)})))}),[E]),M=Object(B.useCallback)((function(){v.length>0?(b(""),T(_.current)):c()}),[v,c]);Object(z.a)("tag-manager",M);var A=Object(B.useCallback)((function(){v.length>0?b(""):s&&s({selected:O,singleSelected:E})}),[s,O,E,v]),x=Object(B.useCallback)((function(e){var t=e.selectedKeys[0];Object(zt.j)({name:t}),T((function(e){return[].concat(kO(e),[t.toLowerCase()])})),b("")}),[]),R=Object(B.useMemo)((function(){var e="",t={};if(v&&(e=v.toLocaleLowerCase(),v.match(td.a.tagNameFilter)))return{isValid:!1,selectedMatched:Object(r.List)(),selectionMatched:Object(r.List)(),allParentTagOpenStatus:t};var a=!1,i=n.groupBy((function(e){var t=e.get("name"),n=f.includes(t),r=p.includes(t);return n?"selected":r?"singleSelected":"selection"})),o=(i.get("selected")||Object(r.List)()).sort(tt.a.tagOrder).concat((i.get("singleSelected")||Object(r.List)()).sort(tt.a.tagOrder)),c=i.get("selection")||Object(r.List)(),s=function(t){return!e||(t===e&&(a=!0),t.includes(e))},u=o.filter((function(e){return s(e.get("name"))})),l=e?D.reduce((function(e,t){if(t instanceof qk){var n=t.name,r=t.children&&t.children.length,a=t.children;if(r){var i,o=(new qk).fromJson(yO({},t,{children:[],type:Gk.MULTI}));e=(i=e).push.apply(i,kO(a.concat([o]).filter((function(e){return s(e.name)}))))}else{var u=c.find((function(e){return e.get("name")===n}));u&&s(u.get("name"))&&(e=e.push(t))}}return e}),Object(r.List)()):D.filter((function(e){if(e instanceof qk){var n=e.name,r=e.children&&e.children.length,a=e.children;if(r)return t[e.id]=!0,a.concat([e]).some((function(e){return s(e.name)}));var i=c.find((function(e){return e.get("name")===n}));return i&&s(i.get("name"))}return!1}));return{isValid:!0,isCreate:!!v&&!a,selectedMatched:u,selectionMatched:l,allParentTagOpenStatus:t}}),[n,D,v,f,p]),P=Object(B.useCallback)((function(e,t){var n=zt.b(e);return Y.a.createElement(Ze,{key:e,multi:!0,className:K()(t,{"single-selected-item":E.includes(e)})},Y.a.createElement(Q.a,{name:"tag",className:"i-3"}),Y.a.createElement("span",null,n),Y.a.createElement(Q.a,{name:"single-select",className:"i-3"}))}),[E]),N=Y.a.createElement(Xe,{key:"selected",defaultSelectedKeys:f,selectedKeys:O,multiple:!0,onSelect:I,onDeselect:I,prefixCls:"option"},R.selectedMatched.map((function(e){return P(e.get("name"))})),R.selectedMatched.size>0?Y.a.createElement(qe,{className:"list-divider",key:"divider"}):null),L=Y.a.createElement(Xe,{key:"selection",defaultSelectedKeys:f,selectedKeys:O,multiple:!0,onSelect:I,onDeselect:I,prefixCls:"option"},dO({openStatus:R.allParentTagOpenStatus,dataStructure:R.selectionMatched,selectedKeys:O,singleSelectedKeys:E})),U=R.isCreate?Y.a.createElement(Xe,{key:"create",prefixCls:"option",onSelect:x},Y.a.createElement(Ze,{key:v,className:"create"},Y.a.createElement(Q.a,{name:"tag-create",className:"i-3"}),Y.a.createElement("span",null,t.formatMessage({id:"create_tag"},{s:v})))):null,F=Object(B.useRef)(null);Object(B.useEffect)((function(){setTimeout((function(){F.current&&$(F.current).focus()}))}),[]);var H,W,G,V,Z,q=Object(B.useCallback)((function(e){e.keyCode===tc.a.enter&&R.isCreate&&v.length>0&&x({selectedKeys:[v]})}),[v,x,R]),J=Object(B.useMemo)((function(){if(v.length>0){var e=[];return R.selectedMatched.size>0&&R.selectedMatched.forEach((function(t){e.push(t.get("name"))})),R.selectionMatched.size>0&&R.selectionMatched.forEach((function(t){t instanceof qk&&e.push(t.name)})),JSON.stringify(O.sort())===JSON.stringify(_.current.sort())}return!1}),[v,R,O,_]);return ve.a.createPortal((H=R.isCreate,W=R.isValid,G=R.selectedMatched,V=R.selectionMatched,Z=0===G.size&&0===V.size&&!H,Y.a.createElement("div",{ref:m,className:K()("tag-multi-select-container",d),id:"task-menu-tag-view"},Y.a.createElement("div",{className:K()("multi-select-menu tag-multi-select",{"no-tag":Z})},Y.a.createElement("div",{className:"menu"},Y.a.createElement("div",{className:"header"},Y.a.createElement("input",{ref:F,type:"text",placeholder:t.formatMessage({id:"tag_select_placeholder"}),value:v,onChange:C,className:"select-input",onKeyDown:q}),Y.a.createElement("p",{className:K()("warning warn text-alert text-sml",{hide:W}),dangerouslySetInnerHTML:{__html:t.formatMessage({id:"warn_tag_name"})}})),Y.a.createElement("div",{className:"list-wrapper antiscroll-wrap",ref:h},Y.a.createElement("div",{className:"select-list antiscroll-inner"},N,L,U)),Y.a.createElement("div",{className:"control"},Y.a.createElement("div",{className:"btns"},Y.a.createElement(Ya.a,{type:"cancel",size:"tiny",onClick:M},t.formatMessage({id:"cancel"})),Y.a.createElement(Ya.a,{size:"tiny",onClick:A,disabled:J},t.formatMessage({id:"ok"})))))))),l?l():document.body)}))),wO=(n(586),function(e){var t=e.selectedIds,n=e.firstId,r=DO(n),a=e.onClose,o=Object(G.a)(),u=Object(V.d)(),l=Object(B.useCallback)((function(e){u(Object(s.d)("/".concat(P.l(),"/").concat(e))),u(F.w(e,[e]))}),[u]),d=Object(B.useCallback)((function(){BT(T.o(t),r).then((function(e){P.t()||P.B()||l(e.get("id"))})).catch((function(e){c.a.error(e)})).finally((function(){a()}))}),[r,l,a,t]),f=Object(Rg.a)((function(){var e=T.k(t).size;return o.formatMessage({id:"merge_info_normal_list"},{d:e})}),[t],(function(e,t){return i.a.isEqual(e[0],t[0])}));return Y.a.createElement(Fo.a,{maskClosable:!1,visible:!0,title:o.formatMessage({id:"merge"}),okText:o.formatMessage({id:"merge"}),cancelText:o.formatMessage({id:"cancel"}),onOk:d,onCancel:a},Y.a.createElement("p",null,f))}),DO=function(e){return e?T.n(e):null},jO=function(e,t){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D.a.getState();return e.plugins}(e).find((function(e){return e.get("id")===t})),r=!1;return n&&(r=!0===n.get("enabled")||"show"===n.get("enabled")||"show"===n.get("status")||"auto"===n.get("status")),r};function _O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var IO=function(e){var t=e.displayListModel,n=e.relativeRef,r=e.hideMenu,a=e.menuVisible,i=e.position,o=e.getTaskIds,c=e.fromCal,s=e.canAddSubtask,u=e.onTaskMenuAction,l=e.isManageTagsModalShow,d=e.setIsManageTagsModalShow,f=e.isMergeTasksModalShow,p=e.setIsMergeTasksModalShow,h=e.fromKanban,m=e.getFirstTaskId,g=Object(B.useRef)([]),v=Object(B.useRef)([]),y=Lg(),b=Ug();Object(B.useEffect)((function(){(f||l)&&r()}),[f,l,r]);var O=Object(B.useCallback)((function(e){var t,n,r=$(e),a=null!==(t=r.outerHeight())&&void 0!==t?t:0,o=null!==(n=r.outerWidth())&&void 0!==n?n:0,c=i.top,s=i.left-o/2,u=c+a-document.body.clientHeight,l=s+o-document.body.clientWidth;c=u>0?c-u:c,s=s<0?0:l>0?s-l:s,r.css({top:c+"px",left:s+"px"})}),[i.left,i.top]),S=Object(B.useCallback)((function(){d&&d(!1)}),[d]),E=Object(B.useCallback)((function(e){if(d&&d(!1),v.current){var t=v.current;if(t.length>1){var n=T.o(t);k.i(n,e)}else if(t.length>0){var r=T.n(t[0]);bt.m(r,e)}}}),[d]),w=Object(V.d)(),D=Object(B.useCallback)((function(e){w(Bv(e))}),[w]),j=Object(B.useCallback)((function(e,t){w(F.I(e,t))}),[w]),_=Object(V.e)((function(e){return e.pomodoro})),C=Object(V.e)((function(e){return jO(e,ie.w.duplicate)})),I=Object(V.e)((function(e){return e.preference.get("pomodoroEnabled")}));return n&&null!=n.current&&$(n.current).closest("#task-list-scroll")[0],Y.a.createElement(Y.a.Fragment,null,a&&Y.a.createElement(zk,{scrollerEl:null,position:i,onMenuAction:function(e,n){var r=e.command,a=e.taskIds,i=e.data;switch(u&&u(r,a,i),n&&n.stopPropagation(),r){case"merge":p&&p(!0);break;case"tags":g.current=i,v.current=a,d&&d(!0);break;case"addSubtask":var o=t.section.createOnEnterProperties,c=i.id,s={projectId:i.projectId,parentId:c,position:"bottom",status:0,columnId:i.columnId},l=t.model;l instanceof ee.e&&(s.status=l.status),b(c);var f=T.a(s,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_O(Object(n),!0).forEach((function(t){CO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o));null!=f&&setTimeout((function(){y(f.get("id"))}));break;case"convert":var h=i.convertTo;T.d(a,h,"list")}},hideMenu:r,setPomoTaskId:D,updateTaskCompletedTime:j,taskIds:o(),pomoStatus:_.pomoStatus,pomoTaskId:_.pomoTaskId,enableDuplicate:C,pomodoroEnabled:I,canAddSubtask:s,fromKanban:h}),f&&Y.a.createElement(wO,{firstId:m&&m(),selectedIds:o(),onClose:function(){return p&&p(!1)}}),l&&Y.a.createElement(EO,{fromCal:c,onMounted:O,onCancel:S,onConfirm:E,tags:g.current}))};var MO=function(e){var t=e.action,n=e.dismiss,r=e.timeStamp;return Y.a.createElement(Fo.a,{visible:!0,maskClosable:!1,className:"calendar-click-ignore",title:v.a("habit_task_redo_modal_title"),okText:v.a("reset"),onCancel:function(){n()},onOk:function(){t(),n()}},Y.a.createElement("span",{className:"line-sml break-word"},v.a("habit_task_redo_modal_desc",{s:l()(d.a.parseTimeStamp(r)).format(v.c()?"MMMDo":"M/D")})))},AO=n(1008),xO=n.n(AO);function RO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return PO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var NO=Object(me.c)((function(e){var t=e.intl,n=e.label,r=e.task,a=e.dismiss,i=e.action,o=e.header,c=e.defaultValue,s=void 0===c?"":c,u=RO(Object(B.useState)(s),2),l=u[0],d=u[1],f=Object(B.useRef)(null);return Object(B.useEffect)((function(){setTimeout((function(){f.current&&(f.current.focus(),f.current.select())}))}),[]),Object(z.a)("habit-manual-checkin-modal",h),Y.a.createElement("div",{className:xO.a.container,id:"habit-manual-checkin-modal",tabIndex:-1,onKeyDown:function(e){f.current&&f.current!==document.activeElement&&e.keyCode===tc.a.enter&&p()}},o,Y.a.createElement("div",{className:xO.a.inputWrapper},Y.a.createElement("span",{className:xO.a.label},n||t.formatMessage({id:"habit_manual_checkin_modal_increase"})),Y.a.createElement("input",{ref:f,className:xO.a.input,value:l,onChange:function(e){var t=e.target.value;if(/^\d+(?:.\d{0,2})?$/.test(t)){var n=+t;n>=0&&n<=99999&&d(t)}else 0===t.length&&d("")},onKeyDown:function(e){(e.metaKey||e.ctrlKey)&&e.keyCode===tc.a.enter&&p()}}),Y.a.createElement("span",{className:xO.a.unit},Object(an.c)(r))),Y.a.createElement("div",{className:xO.a.actionArea},Y.a.createElement("button",{type:"button",className:xO.a.cancel,onClick:h},Object(v.a)("close")),Y.a.createElement("button",{type:"button",className:K()("btn-primary",xO.a.primary),onClick:p},Object(v.a)("confirm"))));function p(){i(+l),a()}function h(){a()}})),LO=n(1009),UO=n.n(LO);var FO=function(e){var t=e.task,n=e.dismiss,r=e.action,a=e.relativeEl,i=e.showDate,o=Object(B.useRef)(null);return Object(B.useEffect)((function(){if(null!=a){var e=a.getBoundingClientRect(),t=o.current.offsetHeight;$(o.current).css({left:e.left+36,top:e.top+e.height/2-t/2})}return function(){}}),[a]),Y.a.createElement(An.a,null,Y.a.createElement("div",{className:UO.a.container,ref:o},Y.a.createElement(NO,{header:function(){var e=d.a.parseTimeStamp(+t.get("checkinStamp"));return i?Y.a.createElement("h1",{className:K()(UO.a.date,"text-primary")},U.a.formatToDate(e)):null}(),task:t,dismiss:n,action:function(e){var n=t.get("value");0!==e&&r(n+e)}})))},HO=n(379),BO=n(1550),YO=n(1010),WO=n.n(YO),KO=n(1011),GO=n.n(KO);var VO=Object(V.c)((function(e){return{theme:e.preference.get("theme").toLowerCase()}}),{})((function(e){var t,n=e.theme,r=e.relativeEl,a=e.value,i=e.relativeElPaddingRight,o=void 0===i?0:i,c=e.relativeElPaddingTop,s=void 0===c?0:c,u=Object(B.useRef)(null);return Object(B.useEffect)((function(){if(null!=r){var e=r.getBoundingClientRect(),t=u.current.offsetWidth,n=u.current.offsetHeight;$(u.current).css({left:e.left+(e.width-o)/2-t/2,top:e.top-3-n-s})}return function(){}}),[r,o,s]),Y.a.createElement(An.a,null,Y.a.createElement("div",{className:GO.a.body,style:{backgroundColor:l()},ref:u},Y.a.createElement("p",{className:GO.a.content},a),Y.a.createElement("div",{className:GO.a.arrow,style:{borderColor:(t=l(),"".concat(t," transparent ").concat(t," transparent"))}})));function l(){return Sn.a["".concat(n,"ThemeColor")]}})),zO=n(430);var ZO=function(e){var t,n=e.relativeRef,r=e.showTooltip,a=e.habitTask,i=e.updateValueRef,o=e.checkTypeRef,c=e.paddingRight,s=void 0!==c&&c;if("number"===o.current)if(a instanceof zO.g){var u=a.unit,l=a.step;Object(HO.e)(a)===zO.i.autoTarget&&(t="+".concat(l.toString()," ").concat(Object(HO.o)(u))),Object(HO.e)(a)===zO.i.manualTarget&&(t="+".concat(i.current.toString()," ").concat(Object(HO.o)(u)))}else{var d=a.habit,f=Object(HO.f)(d.get("type"),d.get("step"));f===zO.i.autoTarget&&(t="+".concat(d.get("step")," ").concat(Object(HO.o)(d.get("unit")))),f===zO.i.manualTarget&&(t="+".concat(i.current.toString()," ").concat(Object(HO.o)(d.get("unit"))))}return"complete"===o.current&&(t=v.a("done")),"uncomplete"===o.current&&(t=v.a("undone_habit")),Y.a.createElement(BO.a,{timeout:500,in:r,appear:!0,mountOnEnter:!0,unmountOnExit:!0,classNames:{enter:WO.a.tooltipEnter,enterActive:WO.a.tooltipEnterActive,exit:WO.a.tooltipExit,exitActive:WO.a.tooltipExitActive}},Y.a.createElement(VO,{key:t,relativeEl:n.current,value:t,relativeElPaddingTop:s?0:10,relativeElPaddingRight:s?10:0}))};function qO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return JO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $O=function(e){var t=e.displayModel,n=e.relativeRef,r=e.setShowTooltip,a=e.setPendingCompleted,i=e.isMounted,o=t.model,c=qO(Object(B.useState)(!1),2),s=c[0],u=c[1],l=qO(Object(B.useState)(!1),2),d=l[0],f=l[1],p=Object(B.useRef)(0),h=Object(B.useRef)("number");return{renderHabitStuff:function(){if(o instanceof ee.d){var e=o.habit;return Y.a.createElement(Y.a.Fragment,null,function(e){var t=n.current;return d?Y.a.createElement(FO,{showDate:!1,task:e,action:function(t){a(!0),r(!0),p.current=Math.round(100*(t-e.get("value")))/100,setTimeout((function(){i.current&&a(!1),Object(HO.L)(e,t)}),600)},dismiss:function(){f(!1)},relativeEl:t}):null}(e),function(e){return o.isCompleted&&s?Y.a.createElement(MO,{timeStamp:+e.get("checkinStamp"),action:function(){Object(HO.L)(e,0)},dismiss:function(){u(!1)}}):null}(e))}return null},renderCheckHint:function(e,t){return o instanceof ee.d?Y.a.createElement(ZO,{relativeRef:t,showTooltip:e,habitTask:o,updateValueRef:p,checkTypeRef:h,paddingRight:!0}):null},showResetModal:function(){u(!0)},hideResetModal:function(){u(!1)},showManualCheckinModal:function(){f(!0)},hideManualCheckinModal:function(){f(!1)}}};function XO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eT=function(e,t){if(e){var n=e.getEditor();Object(En.p)(n,t)}},tT=function(e){var t=e.previousActive,n=e.active,r=e.domEditorRef,a=Yy(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XO(Object(n),!0).forEach((function(t){QO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{focusTitle:eT,handleReturn:function(){}})),i=a.listenKeyUp,o=a.listenKeyDown,c=a.listenKeyPress;return Object(B.useEffect)((function(){!t&&n&&eT(r.current,!1)}),[n,r,t]),{listenKeyUp:i,listenKeyDown:o,listenKeyPress:c}};function nT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aT=function(e){var t=e.displayListModel,n=e.isExactReadOnly,r=e.setDomEditorRef,a=e.domEditorRef,i=e.titleWidth,o=t.model,c=tT(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nT(Object(n),!0).forEach((function(t){rT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{domEditorRef:a})),s=c.listenKeyUp,u=c.listenKeyDown,l=c.listenKeyPress,d=Object(G.a)();return Y.a.createElement(Ws,{id:o.id,tabIndex:n?void 0:"".concat(-1),className:"title text-def line-left can-not-select",spellCheck:!1,ref:r,readOnly:!0,value:o.title,hidePlaceholder:!1,placeholder:d.formatMessage({id:"no_title"}),placeholderClassName:"list-input-placeholder",listenKeyUp:s,listenKeyDown:u,listenKeyPress:l,listenContextMenu:By,lineWrapping:!0,titleWidth:i,canAutoLinkOpen:!1})},iT=n(600);function oT(){return(oT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function cT(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function sT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sT(Object(n),!0).forEach((function(t){lT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pT=function(e){var t,n,a=e.index,o=e.active,c=e.projectPermission,u=e.columnId,l=e.selected,d=e.displayListModel,p=e.offsetLeft,h=e.displayListModelsRef,m=e.titleWidth,b=e.isScrolling,k=d.model,S=d.section,E=k.originModel,D=S instanceof pn.b,_=Object(B.useContext)(It),C=_.rootLevel,I=_.env,M=_.rootId,A="kanban"===I,R="detail"===I,N="list"===I,L=P.B(),H=Object(V.e)((function(e){return Object(zt.e)(e.tags)}),i.a.isEqual),W=Object(V.e)((function(e){return e.preference.get("showDetail")})),Z=Object(V.d)(),q=Object(B.useCallback)((function(e){Z(Object(Pg.g)(Object(wn.e)(I,e,T.W())))}),[Z,I]),J=Object(B.useCallback)((function(e,t){Z(F.w(e,t))}),[Z]),ne=Object(B.useCallback)((function(e,t){Z(F.y(e,t))}),[Z]),re=Object(B.useCallback)((function(e,t){R?ne(e,t):J(e,t)}),[R,ne,J]),oe=Object(B.useCallback)((function(e){Z(R?F.q(e):F.s(e))}),[Z,R]),ue=Object(B.useCallback)((function(e){Z(R?F.A(e):F.B(e))}),[Z,R]),le=Object(B.useCallback)((function(e){Z(F.x(e))}),[Z]),de=Object(B.useCallback)((function(e){Z(F.z(e))}),[Z]),fe=Object(B.useCallback)((function(e){R?de(e):le(e)}),[R,de,le]),pe=Object(B.useCallback)((function(){Z(R?F.h():F.i()),fe("")}),[Z,R,fe]),he=Object(B.useCallback)((function(e){Z(So.a(e))}),[Z]),me=Object(z.e)(o),ge=Object(z.e)(H),ve=Object(B.useCallback)((function(e,t){var n;R||(n=e?"/".concat(P.l(),"/").concat(e)+(t?"/".concat(t):""):"/".concat(P.l()),Z(Object(s.d)(n)))}),[Z,R]),ye=Object(G.a)(),be=Object(B.useRef)({task:E,active:o,isCompletedSection:D}),ke=Object(B.useRef)(!1),Oe=Object(B.useRef)(i.a.uniqueId()),Te=Object(B.useRef)(null),Se=Object(B.useRef)(null),Ee=Object(B.useRef)({top:0,left:0}),we=Object(B.useRef)(!1),De=Object(B.useRef)(null),je=Object(B.useRef)(null),_e=Object(B.useRef)(null),Ce=dT(Object(z.b)(),2),Ie=Ce[0],Me=Ce[1],Ae=Object(B.useRef)(null),xe=Object(B.useRef)(null),Re=Object(B.useRef)(null),Pe=dT(Object(B.useState)(!1),2),Ne=Pe[0],Le=Pe[1],Ue=dT(Object(B.useState)(!1),2),Fe=Ue[0],He=Ue[1],Be=dT(Object(B.useState)(!1),2),Ye=Be[0],We=Be[1],Ke=dT(Object(B.useState)(!1),2),Ge=Ke[0],Ve=Ke[1],ze=dT(Object(B.useState)(!1),2),Ze=ze[0],qe=ze[1],Je=dT(Object(B.useState)(!1),2),$e=Je[0],Xe=Je[1],Qe=dT(Object(B.useState)(!1),2),et=Qe[0],nt=Qe[1],rt=dT(Object(B.useState)(!1),2),at=rt[0],it=rt[1],ot=dT(Object(B.useState)(!1),2),ct=ot[0],st=ot[1],lt=Object(z.e)(Ge),dt=Object(B.useRef)(null);Object(B.useEffect)((function(){lt!==Ge&&Ge&&(dt.current&&clearTimeout(dt.current),dt.current=setTimeout((function(){ke.current&&Ve(!1)}),600))}),[lt,Ge]);var ft=Hy(uT({},e,{taskRef:je,previewRef:Ae,rootLevel:C,env:I,rootId:M,isDisableDragForEdit:at})),pt=ft.dragger,ht=ft.dropper,mt=ft.preview,gt=ft.dropperCollectProps.isOver;Object(B.useEffect)((function(){we.current!==gt&&!1===gt&&y.a.dragHoverTarget&&/-drop/.test(y.a.dragHoverTarget)&&(xy(),y.a.dragHoverTarget=""),we.current=gt}),[gt]);var vt=$O({displayModel:d,relativeRef:je,setShowTooltip:Ve,setPendingCompleted:qe,isMounted:ke}),yt=vt.renderHabitStuff,kt=vt.renderCheckHint,Ot=vt.showResetModal,Tt=vt.showManualCheckinModal;mt(Ae);var St=k.id,Et=k.projectId,wt=w.ib(E),Dt=k instanceof ee.c,jt=k instanceof ee.a,_t=k instanceof ee.d,Ct=k instanceof ee.e,Mt=!Object(hn.g)(E),At=ut.q(j.n(E.get("projectId"))),xt=T.Y(E),Rt=T.Y(E,{withPermission:!1}),Pt=xt||Dt,Nt=xt||!wt||Dt&&!Mt||_t,Lt=Dt||_t,Ut=Pt||jt||Lt,Ft=Object(B.useCallback)((function(){Le(!1)}),[]);Object(B.useEffect)((function(){return ke.current=!0,function(){ke.current=!1}}),[]),Object(B.useEffect)((function(){var e,t=k.originModel;cn[t.get("id")]||(cn[t.get("id")]={});var n=cn[t.get("id")];n.hash=t.hashCode(),n.desc=null===(e=Re.current)||void 0===e?void 0:e.outerHTML}),[k.originModel]);var Ht=Object(B.useCallback)((function(){var e=R?ie.D.Detail:ie.D.Main;return T.A(e)}),[R]),Bt=Object(B.useCallback)((function(){T.eb(k)}),[k]),Yt=Object(B.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{canUndo:!0,showRepeat:!1};if(!_t)if(k instanceof ee.c)_T(k.event);else if(k instanceof ee.a)eb(Ie.current),f.a.dispatch("deleteSubTask",k.id);else{var t=Ht();if(t.length>1)ST(t,e.canUndo),pe();else if(w.jb(k.originModel))Se.current=k.originModel,Xe(!0);else{var n=w.ub(k.originModel);n&&e.showRepeat&&P.B()&&!w.V(E)?f.a.dispatch(se.a,{onConfirmDelete:function(t){var n=t.repeatChangeKey;wT(Object(r.List)([k.originModel]),n,e.canUndo)},type:"delete",isRepeatSelf:!0}):ET(Object(r.List)([k.originModel]),e.canUndo)}}}),[_t,k,Ie,Ht,pe]),Wt=Lg(),Kt=Object(B.useCallback)((function(){var e=je.current;if(null!=e){var t=$(e).parents(".task"),n=t.prevAll("li").first().find("a[taskId]"),r=t.next("li").find("a"),a=n.attr("taskId"),i=r.attr("taskId"),o=n.attr("subtaskId"),c=r.attr("subtaskId");if(void 0!==(a&&T.n(a)))o?(re(o,[o]),ve(a,o)):(re(a,[a]),ve(a)),Wt(a);else if(void 0!==(i&&T.n(i)))c?(re(c,[c]),ve(i,c)):(re(i,[i]),ve(i)),Wt(i);else{re();var s=$(e).closest(".task-ul-list").parents(".column").find("#add-task").data("id");f.a.dispatchOne("focusQuickAdd",s)}}}),[Wt,ve,re]),Gt=Object(B.useCallback)((function(e){var t=R?"#descendant-task-view":".task-ul-list",n=Ht();!function(e,t,n,r,a,i,o,c,s,u){var l=t.current;if(null!=l){var d=$(l).closest(e),p=d.find("li.task.active");if(p.length)if("up"===n){var h=Object(En.e)(p).previous;if(h&&h.length>0){var m=h.find("a[taskid]").attr("taskId");c(m,[m]),u(m)}else{c();var g=a?d.parents(".column").find("#add-task").data("id"):$("#add-task").data("id");f.a.dispatchOne("focusQuickAdd",g)}}else if("down"===n){var v=d.find("li.task.active"),y=Object(En.e)(v).next;if(y&&y.length>0){var b=y.find("a[taskid]").attr("taskId");c(b,[b]),u(b)}}else if("shift-up"===n){var k=d.find("li.task.active"),O=Object(En.e)(k).previous,S=k.find("a[taskid]").attr("taskid");if(O&&O.length>0&&Object(wn.a)(O)){var E=O.find("a[taskid]").attr("taskId");if(null==S)return;var D=T.n(S);if((w.jb(D)||w.ab(D))&&S&&o(S),null==E)return;r.includes(E)?(S&&o(S),E&&i(E)):(E&&s(E),E&&i(E)),u(E,{disableSelect:!0})}}else if("shift-down"===n){var j=d.find("li.task.active"),_=Object(En.e)(j).next,C=j.find("a[taskid]").attr("taskid");if(_&&_.length>0&&Object(wn.a)(_)&&C){var I=T.n(C);(w.jb(I)||w.ab(I))&&C&&o(C);var M=_.find("a[taskid]").attr("taskId");if(null==M)return;r.includes(M)?(C&&o(C),M&&i(M)):(M&&s(M),M&&i(M)),u(M,{disableSelect:!0})}}}}(t,je,e,n,u,fe,oe,re,ue,Wt)}),[u,Wt,Ht,R,fe,oe,re,ue]),Vt=Object(B.useCallback)((function(e){var t=$(e.target).text(),n=Date.now();if(!t.length&&w.pb(E)){e.preventDefault(),e.stopPropagation();var r=y.a.lastTaskItemBackspaceTime;if(null!=r&&Math.abs(r-n)<=100)return void(y.a.lastTaskItemBackspaceTime=n);Yt({canUndo:!1}),Kt()}else y.a.lastTaskItemBackspaceTime=n}),[Yt,Kt,E]);Object(B.useEffect)((function(){$e||(Se.current=null)}),[$e]);var Zt=function(e,t){var n=t.activeTaskId,r=t.itemId,a=e.target;if(""===n&&function(e){var t;if(window.getSelection){var n=window.getSelection();null==n||n.removeAllRanges()}else document.selection&&document.selection.empty&&document.selection.empty();(null===(t=e.current)||void 0===t?void 0:t.querySelector(".title")).focus()}(je),jt){var i=E.get("taskId");ve(i,r)}else ve(r);$(a).closest(".t-menu-toggle").length||En.v()},qt=Object(B.useCallback)((function(){P.G()||0!==E.get("deleted")||P.v()||P.u()||g.b({text:ye.formatMessage({id:"project_action_abort_toast"},{s9:ye.formatMessage({id:"project_".concat(c)})})})}),[ye,c,E]),Jt=function(e){var t=e.model,n=t.id;if(N)if(t instanceof ee.d){var r=t.habit;iT.b.doSync(iT.a.singleSync,{habitId:r.get("habitId")})}else t instanceof ee.c||t instanceof ee.a||T.C(t.id,t.projectId);return{selectedTaskIds:[n],activeTaskId:n}},$t=Object(B.useCallback)((function(){var e=E.get("id");if(!l)if(re(e,[e]),jt&&!A){var t=E.get("taskId");ve(t,e)}else ve(e)}),[jt,A,ve,re,l,E]);Object(B.useEffect)((function(){Ne&&eb(Ie.current)}),[Ie,Ne]);var Xt=Object(B.useCallback)((function(e){At&&qt(),Ut&&!Lt||(e.preventDefault(),e.stopPropagation(),Ee.current={top:e.pageY,left:e.pageX},Le(!0),$t&&$t())}),[Ut,Lt,At,$t,qt]),Qt=Object(B.useCallback)((function(){if(jt){var e=E.get("taskId"),t=T.n(e),n=k.id;w.ib(t)?bt.D(t,n,!0):g.b({text:v.a("toggle_schedule_subtask_limit")})}else RT(E,"detail"!==I),A&&f.a.dispatch("dismissColumnOutSingle")}),[I,jt,A,k.id,E]),en=Object(B.useCallback)((function(e){var t=0===function(e){var t=i.a.uniq(e.map((function(e){return e.get("status")})).toArray());return 1===t.length?t[0]:0}(e)?2:0;PT(e,t,"detail"!==I),P.o()&&(ve(),pe())}),[pe,I,ve]);Object(B.useEffect)((function(){return(k instanceof ee.e||k instanceof ee.a)&&f.a.subscribe(k.id,hT,(function(){var e=Ht();e.length>1?en(T.o(e)):Qt()})),function(){f.a.unSubscribe(k.id,hT)}}),[Ht,k,Qt,en]),Object(B.useEffect)((function(){return f.a.subscribe(k.id,mT,(function(e){var t=e.idSet;t instanceof Set&&t.has(k.id)&&st(!0)})),function(){f.a.unSubscribe(k.id,mT)}}),[k.id]),Object(B.useEffect)((function(){ct&&setTimeout((function(){ke.current&&st(!1)}),2e3)}),[ct]);var tn,nn,sn,un=function(){Xe(!1)},ln=function(){var e=function(e){var t=e.get("content"),n=e.get("desc"),r=yy(e),a=w.y(e),i=a?a.get(0):null,o=y.a.highlightKeyWordsRegExp instanceof RegExp,c="";if(r){if(o){var s=y.a.highlightKeyWordsRegExp;s&&(t&&s.test(t)?c=ky(t):n&&s.test(n)?c=ky(n):a&&a.toArray().some((function(e){var t,n=null!==(t=e.get("title"))&&void 0!==t?t:"";if(s.test(n)){var r=ky(n);return c="- ".concat(r),!0}return!1})))}if(""===c)if(t)c=t;else if(n)c=n;else if(i){var u=i.get("title");c=u?"- ".concat(u):"- "}else c="- "}return{needRender:r,content:c=ga("detail",c,!1,new Set([]))}}(E),t=e.content;return e.needRender?Y.a.createElement("div",{className:K()("line-left desc-content text-info",{"hide-in-print hide-in-drag-preview":N},bn.a.moreTipsLine),ref:Re,dangerouslySetInnerHTML:{__html:t}}):null},dn=function(){var e=function(e){return by(e)?y.a.currentSortType.get("sortType")===ie.J.modifiedTime?e.get("modifiedTime"):e.get("createdTime"):null}(E);return e?Y.a.createElement(ce,{utc:e,className:K()(bn.a.noteTime,bn.a.moreTipsLine,"hide-in-print")}):null},fn=function(e){e.preventDefault(),e.stopPropagation(),q(k.id),A&&!d.collapsed&&y.a.hasOutDetail&&f.a.dispatch("dismissColumnOutSingle")},mn=Object(B.useCallback)((function(){var e=R?"#descendant-task-view":".task-ul-list",t=je.current;if(null!=t){var n=$(t).closest(e).find("li.task.selected");if(0!==n.length)return n.eq(0).attr("taskId")}}),[R]),gn=P.r()||P.G(),yn=Object(B.useCallback)((function(e,t){it(e===t)}),[it]),kn=Object(B.useCallback)((function(e,t){it(!1)}),[it]),On=Object(B.useCallback)((function(e){!jt&&!Ct||P.G()||Pt||Nt||(De.current=e.currentTarget,nt(!et))}),[jt,Pt,Nt,Ct,et]),Tn=Object(B.useCallback)((function(e){if(Ct){var t=De.current;if(t){var n,r,a=t.getBoundingClientRect(),i="kanban"===I?a.top+11:a.top,o=a.left,c=t.offsetHeight,s=t.offsetWidth,u=e.offsetHeight,l=e.offsetWidth,d=window.innerHeight,f=window.innerWidth,p=i+u+c-d;if("kanban"===I)n=o-16<0?0:-(o-16+l-f)<=0?f-l:o-16;else n=o+s+16-l<0?0:-(o+s+16-f)<=0?f-l:o-l+s+16;p<=0?r=i+c:(r=i+c-p,e.classList.remove("boult")),e.style.top=r+"px",e.style.left=n+"px"}}}),[I,Ct]),Sn=Object(B.useCallback)((function(){A&&f.a.dispatch("dismissColumnOutSingle")}),[A]),jn=Object(B.useCallback)((function(){nt(!1),De.current=null}),[]),_n=Object(B.useCallback)((function(e,t){Z(F.C(e,t))}),[Z]),Cn=Object(B.useCallback)((function(e){if(w.ub(E)&&P.B()&&!w.V(E)){var t=bt.l(E,e);t?"require"===t?(f.a.dispatch("updateFakeTask",{fakeTask:bt.i(e.startDate,e.dueDate,e.isAllDay,E)}),f.a.dispatch(se.a,{onConfirm:function(t){var n=t.repeatChangeKey;bt.v(E,uT({},e,{repeatChangeKey:n,isRepeatSelf:!0})),f.a.dispatch("updateFakeTask",{fakeTask:null})},onCancel:function(){f.a.dispatch("updateFakeTask",{fakeTask:null})},type:"edit",isRepeatSelf:!0})):bt.v(E,uT({},e,{repeatChangeKey:t,isRepeatSelf:!0})):bt.w(E,e)}else bt.w(E,e)}),[E]),Mn=Object(B.useCallback)((function(e){var t=E.get("taskId"),n=[],r=e.timeZone,a=cT(e,["timeZone"]);n.push(uT({id:E.get("id")},a)),_n(t,n),bt.u(t),bt.x(t,r)}),[E,_n]),An=Object(B.useCallback)((function(e){Ct?Cn(e):jt&&Mn({startDate:e.startDate,isAllDay:e.isAllDay,snoozeReminderTime:"",timeZone:e.timeZone}),nt(!1),De.current=null}),[Mn,jt,Ct,Cn]),xn=Object(B.useCallback)((function(e){Ct?Cn(e):jt&&Mn({startDate:-1,isAllDay:null,snoozeReminderTime:"",timeZone:e.timeZone}),nt(!1),De.current=null}),[Mn,jt,Ct,Cn]),Rn=b?{}:{ref:function(e){je.current=e,ht(e),gn||tg.c&&!A||(pt(e),xe.current=e)},onClick:function(e){(e=e||window.event).preventDefault(),e.stopPropagation();var t=Ht(),n=d.id,r=Dn(I,e,d,h.current,"",t,qt,Jt,u),a=r.activeTaskId,i=r.selectedTaskIds;re(a,i),Zt(e,{activeTaskId:a,itemId:n})},onContextMenu:Xt},Pn=b?{}:{onClick:function(e){e.stopPropagation();var t=T.Y(E)||w.ab(E);if(At&&qt(),t||Ze)e.preventDefault();else if(_t){var n=Object(an.b)(E);if(w.T(E))switch(n){case zO.i.nonTarget:case zO.i.allTarge:Object(HO.a)(E,n,(function(e){return Object(HO.J)(e,0)}));break;default:Ot()}else n===zO.i.autoTarget?(qe(!0),Ve(!0),setTimeout((function(){ke.current&&qe(!1),Object(HO.a)(E,n,HO.J)}),600)):n===zO.i.manualTarget?Tt():Object(HO.a)(E,n,HO.J)}else w.fb(E)||(E.get("status")?In.p("undone"):In.p("done"),Qt())},ref:_e},Nn=on[St]||{},Ln=cn[St]||{};return Y.a.createElement(Y.a.Fragment,null,!b&&Y.a.createElement(X,{taskid:St,projectid:Et,parentid:jt?E.get("taskId"):null}),Y.a.createElement("div",oT({className:K()("l-task",{"can-not-select":A}),style:A?{height:"100%",paddingLeft:p+18}:{paddingLeft:p+36}},Rn),b?Y.a.createElement("div",{className:"l-task-bg"}):Y.a.createElement("div",{className:K()("l-task-bg hide-in-drag-preview",lT({},A?bn.a.blinkKanban:bn.a.blink,ct)),style:{left:A?0:p+4}}),Y.a.createElement("div",{className:K()("t-line",A&&"t-line-in-kanban"),style:{left:A?18*d.level+32:p}}),!b&&!A&&!Ut&&!Dt&&Y.a.createElement("div",{className:"t-menu-toggle",onClick:function(e){e.preventDefault(),Ee.current={left:e.pageX-92,top:e.pageY+4},Le(!0)}},Y.a.createElement("a",null,Object(Q.a)({name:"more-for-task",className:"i-1"}))),Y.a.createElement("div",{className:K()("t-inner task-inner cr-pointer",lT({},bn.a.taskInnerDetailMode,!b&&N&&W))},!b&&Y.a.createElement(wb,{previewRef:Ae,selected:l}),!b&&!A&&(tn=y.a.currentSortType.get("sortType")===ie.J.dueDate,nn=y.a.currentSortType.get("sortType")===ie.J.priority,sn=y.a.currentSortType.get("sortType")===ie.J.project,!("list"===I&&T.X()&&d.level>0||xt&&!At||At&&(P.u()||P.v())||_t||(Dt?!(tn&&S instanceof pn.e||nn):jt&&!tn&&!nn&&!sn)))&&Y.a.createElement("span",{className:"drag",ref:function(e){tg.c&&(xe.current=e,pt(e))}},Object(Q.a)({name:"drag",className:"i-4 i-mic"})),d.children.length>0&&d.level<ie.a?Y.a.createElement(ae,{type:"thin",className:"kanban"===I?"collapsed-triangle-kanban":"collapsed-triangle",collapsed:d.collapsed,toggleCollapsed:fn}):null,Y.a.createElement("span",oT({className:K()("t-check check-toggle cr-pointer",{"cr-disabled":Pt})},Pn),b?Y.a.createElement(te,{model:d.model}):Y.a.createElement(Y.a.Fragment,null,kt(Ge,_e),Y.a.createElement(te,{model:k,pendingCompleted:Ze}))),!b&&Y.a.createElement(Q.a,{name:"navigate",className:K()("navigator",bn.a.iconNavigator,"i-o-24","hide-in-drag-preview"),onClick:function(){d.parentId&&(L||P.t()||y.a.showDetailModal?f.a.dispatch("onTaskModalChange",{taskId:k.id,projectId:k.projectId}):Z(Object(s.d)("/".concat(P.l(),"/").concat(d.id))))}}),b?Y.a.createElement("div",{dangerouslySetInnerHTML:{__html:A?Nn.layer3:Nn.layer1}}):Y.a.createElement(vn,{displayModel:d,className:"line-right",onClickDuedate:On,layer:R?ie.P.Detail:A?ie.P.KanbanRow1:ie.P.List}),Y.a.createElement("div",{className:"title-wrap"},b?Y.a.createElement(Ws,{id:St,className:"title transition text-def typeahead line-left",readOnly:!0,spellCheck:!1,lineWrapping:!1,value:E.get("title")}):A?Y.a.createElement(aT,{displayListModel:d,isExactReadOnly:Rt,previousActive:me,active:o,domEditorRef:Ie,setDomEditorRef:Me,listenId:Oe,initialValue:be,isReadOnlyTask:xt,navigateTo:ve,timerNavigate:Te,taskItemRef:je,isEditableSubCal:Mt,handleOnArrow:Gt,handleBackspace:Vt,saveTask:Bt,deleteTask:Yt,onSelectTasks:re,titleWidth:m}):Y.a.createElement(Tb,{index:a,onSelectAction:function(e){re(e,[e]),ve(e)},domEditorRef:Ie,setDomEditorRef:Me,displayListModel:d,displayListModelsRef:h,isDisabledEdit:Nt,isCompletedSection:D,isEditableSubCal:Mt,addTag:he,previousActive:me,active:o,previousTagNames:ge,tagNames:H,listenId:Oe,initialValue:be,handleBackspace:Vt,handleOnArrow:Gt,deleteTask:Yt,saveTask:Bt,isReadOnlyTask:xt,navigateTo:ve,timerNavigate:Te,taskItemRef:je,onSelectTasks:re,columnId:u,onEditMouseUp:kn,onEditMouseDown:yn})),!b&&function(){var e="",t="",n="";w.G(E)?(E.get("desc")&&(t=O.e(E.get("desc")).replace(/[\n\r]/g,"<br/>")),n=E.get("items").sort(tt.a.subtask).map((function(e){return Y.a.createElement("div",{className:K()({completed:1===e.get("status"),completed_task:w.T(E)}),key:"print-"+e.get("id")},Y.a.createElement("span",{className:"checker"},Y.a.createElement(Q.a,{name:"completed",className:"i-o-12 i-tny i-black"}),Y.a.createElement(Q.a,{name:"checkbox",className:"i-4 i-tny"})),e.get("title"))}))):E.get("content")&&(e=O.e(E.get("content")).replace(/[\n\r]/g,"<br/>"));return Y.a.createElement("div",{className:K()("content-print",{"has-text":w.L(E)})},Y.a.createElement("div",{className:"t-content",dangerouslySetInnerHTML:{__html:e}}),Y.a.createElement("div",{className:"t-desc",dangerouslySetInnerHTML:{__html:t}}),Y.a.createElement("div",{className:"t-subtask"},n))}()),b?Y.a.createElement(Y.a.Fragment,null,A&&Y.a.createElement("div",{dangerouslySetInnerHTML:{__html:Ln.desc},style:w.L(E)?{height:21}:{}}),A&&Y.a.createElement("div",{dangerouslySetInnerHTML:{__html:Nn.layer2},style:w.K(E)?{height:21}:{}}),A&&Y.a.createElement("div",{dangerouslySetInnerHTML:{__html:Nn.layer4},style:w.M(E)?{height:28}:{}})):A?Y.a.createElement(Y.a.Fragment,null,ln(),Y.a.createElement(vn,{displayModel:d,className:K()("t-more-tips",bn.a.moreTipsLine),layer:ie.P.KanbanRow2}),Y.a.createElement(vn,{displayModel:d,className:K()("t-more-tips",bn.a.moreTipsLine),layer:ie.P.KanbanRow3,onClickDuedate:On})):W&&N?Y.a.createElement(Y.a.Fragment,null,ln(),dn(),Y.a.createElement(vn,{displayModel:d,className:K()("t-more-tips hide-in-print",bn.a.moreTipsLine),layer:ie.P.ListDetailExtraRow1})):null),!b&&Y.a.createElement(Y.a.Fragment,null,!Ut&&Y.a.createElement(IO,{displayListModel:d,relativeRef:je,menuVisible:Ne,getTaskIds:Ht,position:Ee.current,hideMenu:Ft,isManageTagsModalShow:Fe,setIsManageTagsModalShow:He,isMergeTasksModalShow:Ye,setIsMergeTasksModalShow:We,canAddSubtask:!(N&&P.m()||N&&w.T(E)||null==E||T.s(E)>=ie.a),onTaskMenuAction:function(e,t,n){"duplicate"===e&&"list"===I&&bt.p(n)},fromKanban:"kanban"===I,getFirstTaskId:mn}),et&&Y.a.createElement(Jf,{isBoult:!0,className:"list"!==I?"task-detail-element":"",options:function(){if(Ct)return w.k(E);if(jt){var e=E.get("taskId"),t=T.n(e),n=rn.h(E)?E.get("startDate"):null,r=t.get("isFloating"),a=w.Q(t)?zs.h:t.get("timeZone");return{meridiem:x.b("showMeridiem"),weekStart:x.s(),format:ie.m.atomTime,startDate:n,isAllDay:E.get("isAllDay"),exDate:E.get("exDate"),isFloating:r,timeZone:a,isSubtaskMode:!0}}return{}}(),trigger:De.current,container:document.body,onMountedCard:Sn,onUnmountCard:jn,onConfirmTime:An,onClearTime:xn,quickSetOptions:Ct?{willRepeat:w.ub(E),startDate:E.get("startDate"),onSkipThisPeriod:function(){bt.A(E),jn()},setTime:function(e){jn(),bt.q(E,e)}}:jt?{willRepeat:!1,startDate:rn.h(E)?E.get("startDate"):null,onSkipThisPeriod:function(){},setTime:function(e){var t=e,n=!0,r=E.get("startDate");U.a.getDueDateText(r)!==t&&(rn.h(E)&&!1===E.get("isAllDay")&&(t+=" "+U.a.prefMoment(r).format("HH:mm"),n=!1),Mn({startDate:U.a.formatToUtcString(t),isAllDay:n,snoozeReminderTime:"",timeZone:E.get("timeZone")||zs.h})),jn()}}:{willRepeat:!1,startDate:null,onSkipThisPeriod:function(){},setTime:function(){}},initTimecardPosition:Tn}),$e&&Y.a.createElement(Ak,{projectId:null===(t=Se.current)||void 0===t?void 0:t.get("projectId"),taskId:null===(n=Se.current)||void 0===n?void 0:n.get("id"),isScheduleOwner:w.ib(Se.current),onDelete:function(){var e=Se.current;e&&ET(Object(r.List)([e]),!1,!1),un()},onClose:un}),Y.a.createElement(Nb,{displayModel:d,hideMenu:Ft,position:Ee.current,isShow:Ne}),yt()))},hT="toggleTaskItemComplete",mT="BLINK_TASK_ITEM";function gT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gT(Object(n),!0).forEach((function(t){yT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bT(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function kT(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){bT(i,r,a,o,c,"next",e)}function c(e){bT(i,r,a,o,c,"throw",e)}o(void 0)}))}}function OT(e){return function(e){if(Array.isArray(e))return TT(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return TT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TT(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ST(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=T.o(e);return ET(r,t,n)}function ET(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=T.l(e),a=r.toArray().map((function(e){return e.get("id")})),i=T.j().get("active"),o=new Set(T.j().get("selected")),c=new Set(a),u=(c.has(i)||0===Object(p.a)(o,c).size)&&!P.t()&&!P.B(),l=[];if(t&&u&&(l=e.toArray().map((function(e){return e.get("id")}))),jT(r,n,t,l),u){T.fb();var d="/"+P.l();D.a.dispatch(Object(s.d)(d))}return a}function wT(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;if("all"===t)return ET(e,n,a);var c=[],u=[],f={},h={};e.forEach((function(e){w.ub(e)?c.push(e):u.push(e)})),c.forEach((function(e){if("single"===t){var n,a=e.get("exDate"),i=e.get("repeatFlag"),c={},s=new L.a(i);if(s.forgettingCurveRule?(null!=s.forgettingCurveRule.count&&(s.forgettingCurveRule.count=Math.max(s.forgettingCurveRule.count-1,1)),o||null==s.forgettingCurveRule.cycle||(s.forgettingCurveRule.cycle+=1)):s.rruleOptions.count>0&&(s.rruleOptions.count=Math.max(s.rruleOptions.count-1,1)),c.repeatFlag=s.toString(),n=a?r.List.isList(a)?a.toJS():a:[],c.exDate=n,o){var u=o.get("startDate");if(u){var p,m=U.a.prefMoment(u).format("YYYYMMDD");c.exDate=null===(p=c.exDate)||void 0===p?void 0:p.concat([m])}}else{var g=w.r(e);if(g){var v=g.startDate,y=g.dueDate;c.startDate=v,c.dueDate=y}c.remindTime=null}c&&(f[e.get("id")]=c,h[e.get("id")]={exDate:n,repeatFlag:i,repeatFirstDate:e.get("repeatFirstDate"),startDate:e.get("startDate"),dueDate:e.get("dueDate"),remindTime:e.get("remindTime")})}else{var b,k=null==o?void 0:o.get("startDate"),O=e.get("repeatFlag"),T={},S=new L.a(O);k&&(b=l()(d.a.parseUTCString(k)).startOf("day").toDate()),S.forgettingCurveRule&&b?(S.forgettingCurveRule.count=null,S.forgettingCurveRule.until=Object(H.a)(l.a.utc(b))):S.rruleOptions&&(S.rruleOptions.count=null,S.rruleOptions.until=b),T.repeatFlag=S.toString(),T&&(f[e.get("id")]=T,h[e.get("id")]={repeatFlag:O})}})),D.a.dispatch(F.L(f)),k.r(i.a.keys(f));var m=T.l(Object(r.List)(u)),g=m.toArray().map((function(e){return e.get("id")})),v=T.j().get("active"),y=new Set(T.j().get("selected")),b=new Set(g),O=(b.has(v)||0===Object(p.a)(y,b).size)&&!P.t()&&!P.B(),S=[];if(n&&O&&(S=e.toArray().map((function(e){return e.get("id")}))),DT(m,i.a.keys(f),e,h,a,n,S),O){T.fb();var E="/"+P.l();D.a.dispatch(Object(s.d)(E))}return i.a.keys(f).concat(g)}function DT(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];if(0!==e.size||0!==t.length)if(i){var c={},s=e.toArray().map((function(e){return e.get("id")}));e.forEach((function(e){if(e){var t=e.get("assignee");t&&(c[e.get("id")]=t)}}));var u=m.d({type:"deleteTaskIncludeRepeat",data:{taskIds:e.toArray().map((function(e){return e.get("id")})),repeatTaskIds:t,undoTaskIds:o,assignee:c,oldPropertyMap:r}}),l=e.size+t.length>1?v.a("task_deleted_success",{s:""}):v.a("task_deleted_success",{s:O.d(n.size>0?n.get(0).get("title"):"")+" "});g.b({text:l,key:u,closable:!1,actionText:v.a("undo"),actionType:"undo",onAction:function(){m.b(u)},onRemove:function(){m.e(u),y.a.toBeDeletedTaskIds=new Set(OT(y.a.toBeDeletedTaskIds).filter((function(e){return!s.includes(e)}))),b.a.doSync()}}),y.a.toBeDeletedTaskIds=new Set([].concat(OT(y.a.toBeDeletedTaskIds),OT(s))),k.d(e,{onServer:!1})}else{var d=a;k.d(e,{onServer:d})}}function jT(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(0!==e.size)if(n){var a={},i=e.toArray().map((function(e){return e.get("id")}));e.forEach((function(e){if(e){var t=e.get("assignee");t&&(a[e.get("id")]=t)}}));var o=m.d({type:"deleteTask",data:{taskIds:e.toArray().map((function(e){return e.get("id")})),undoTaskIds:r,assignee:a}}),c=e.size>1?v.a("task_deleted_success",{s:""}):v.a("task_deleted_success",{s:O.d(e.get(0).get("title"))+" "});g.b({text:c,key:o,closable:!1,actionText:v.a("undo"),actionType:"undo",onAction:function(){m.b(o)},onRemove:function(){m.e(o),y.a.toBeDeletedTaskIds=new Set(OT(y.a.toBeDeletedTaskIds).filter((function(e){return!i.includes(e)}))),b.a.doSync()}}),y.a.toBeDeletedTaskIds=new Set([].concat(OT(y.a.toBeDeletedTaskIds),OT(i))),k.d(e,{onServer:!1})}else{var s=t;k.d(e,{onServer:s})}}function _T(e){var t=e.get("id"),n=m.d({type:"deleteEvent",data:{eventId:t}});g.b({text:v.a("task_deleted_success",{s:O.d(e.get("title"))+" "}),key:n,closable:!1,actionText:v.a("undo"),actionType:"undo",onAction:function(){m.b(n)},onRemove:function(){m.e(n),y.a.toBeDeletedTaskIds.delete(t),S.a.doSync()}}),y.a.toBeDeletedTaskIds.add(t),E.c(e.get("accountId"),e.get("id"))}function CT(e,t,n){IT(Object(r.List)([e]),t,void 0,n)}function IT(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=T.l(e),o=Object(I.a)(i);AT(o,t,n,a).then((function(e){r&&r(e)})).catch((function(e){c.a.error(e)}))}var MT=function(){var e=kT(regeneratorRuntime.mark((function e(t,n,r){var a,i,o,c,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(s.length>3&&void 0!==s[3])||s[3],i=T.l(t),o=Object(I.a)(i),e.next=5,AT(o,n,r,a);case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function AT(e,t,n){return xT.apply(this,arguments)}function xT(){return(xT=kT(regeneratorRuntime.mark((function e(t,n,a){var o,s,u,l,f,p,h,m,g,v,y,k,O=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!(O.length>3&&void 0!==O[3])||O[3],s=new Map,u=new Map,l=[],f=!!x.b("defaultToAdd"),Object(I.f)(t,(function(e){var t=e.task,r=t.get("projectId"),i=t.get("id"),o=N.c(n);n!==r?(u.set(i,vT({id:i,projectId:n},a,{columnId:o?o.get("id"):void 0,isDirty:!0})),T.Z(t,r,n)&&l.push({projectId:r,taskId:i,assignee:-1}),s.set(i,{fromProjectId:r,toProjectId:n,taskId:i})):a&&u.set(i,vT({id:i},a,{isDirty:!0}))})),s.size>0&&(p=T.u(n),t.reverse().forEach((function(e){var t=e.task,n=Object(A.d)(p),r=s.get(t.get("id"));r&&(r.sortOrder=n);var a=u.get(t.get("id"));a&&(a.sortOrder=n,a.parentId=null),p+=(f?1:-1)*R.t}))),!l.length){e.next=12;break}return e.next=10,M.a(l);case 10:h=e.sent,i.a.isEmpty(h.id2error)?l.forEach((function(e){var t=u.get(e.taskId);t&&(t.assignee=-1)})):c.a.debug(h.id2error);case 12:if(!(s.size>0)){e.next=20;break}return m=Array.from(s.values()),e.next=16,M.k(m);case 16:if(g=e.sent,i.a.isEmpty(g.id2error)){e.next=20;break}throw c.a.debug(g.id2error),new Error("Move Project ".concat(JSON.stringify(m)));case 20:if(!(u.size>0)){e.next=28;break}return v=Array.from(u.keys()),y=Array.from(u.values()).map((function(e){return vT({},e,{modifiedTime:d.a.formatToServerDate(new Date)})})),T.cb(y),(k=T.o(v)).forEach((function(e){C.a.setTask(e)})),o&&b.a.doSync(),e.abrupt("return",k);case 28:return e.abrupt("return",Object(r.List)());case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function RT(e,t,n){if(!w.fb(e)){var a=e.get("status")!==h.a.Uncompleted?h.a.Uncompleted:h.a.Completed;PT(Object(r.List)([e]),a,t,n)}}function PT(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.filter((function(e){return null!=e&&!w.fb(e)}));if(t!==h.a.Uncompleted){var i=NT(a);UT(i,t,n,a.toArray().map((function(e){return e.get("id")})))}else if(r&&1===a.size&&m.a(a.toArray()[0]))m.f();else{var o=new Set(a.toArray().map((function(e){return e.get("id")}))),c=T.m(a),s=Object(I.a)(c),u=[];Object(I.f)(s,(function(e){o.has(e.task.get("id"))&&u.push(e)})),UT(u,t,!1)}}function NT(e){var t=T.v(e),n=T.l(t),r=Object(I.a)(n),a=[],i=new Set(e.toArray().map((function(e){return e.get("id")})));return Object(I.f)(r,(function(e){i.has(e.id)&&a.push(e)})),a}function LT(e,t){return e.get("status")!==h.a.Uncompleted===(t!==h.a.Uncompleted)}var UT=function(e,t,n,r,a){var i=[],o=[],c=[],s=[];e.forEach((function(e){if(!LT(e.task,t)){var n=function(e,t,n,r,a,i){var o=e.task,c={id:o.get("id"),isDirty:!0};if(o.get("status")===h.a.Uncompleted){if(c.status=h.a.Completed,c.completedTime=d.a.formatToServerDate(),o=o.set("completedTime",c.completedTime),w.tb(o)){f.a.dispatch("hideOnListOnce.".concat(o.get("id")));var s=w.h(o,i).set("isNew",!0);if(e.parent){var u=e.parent.children.reduce((function(e,t){return Math.max(e,t.task.get("sortOrder"))}),0)+R.t;s=s.set("sortOrder",u)}if(i&&i.isCompleteAllUndoPeriod){var l=i.generateStartDate,p=i.repeatSliceLength;Object.assign(c,{status:h.a.Uncompleted,items:w.nb(o,l),completedTime:void 0,focusSummaries:w.v(o),repeatFlag:w.B(o,p),progress:0,remindTime:null,startDate:l,dueDate:w.e(o,l)})}else Object.assign(c,{status:h.a.Uncompleted,items:w.ob(o),completedTime:void 0,focusSummaries:w.v(o),repeatFlag:w.B(o),progress:0,remindTime:null},w.r(o));return t.push(c),t.push(s),n.push(c.id),n.push(s.get("id")),r.push(c.id),a.push(s.get("id")),_()===o.get("id")&&f.a.dispatch("transferPomoToClonedTask",s.get("id")),s}t.push(c),n.push(c.id)}else c.status=h.a.Uncompleted,c.completedTime=null,t.push(c),n.push(c.id);return null}(e,i,o,c,s,a);n?e.children.forEach((function(e){!function e(t,n,r,a,i,o){var c=t.task,s={id:c.get("id"),isDirty:!0};if(function e(t){var n=t.task,r=n.get("repeatTaskId");if(null!=r&&r!==n.get("id")&&n.get("status")===h.a.Completed)return!1;var a=t.parent;if(!a)return!0;return e(a)}(t)){var u=w.j(c,{status:h.a.Completed,completedTime:d.a.formatToServerDate(),isNew:!0,parentId:n,childIds:[]});Object.assign(s,{status:h.a.Uncompleted,items:w.ob(c,!1),focusSummaries:w.v(c),progress:0}),r.push(s),r.push(u),a.push(s.id),a.push(u.get("id")),i.push(s.id),o.push(u.get("id")),_()===c.get("id")&&f.a.dispatch("transferPomoToClonedTask",u.get("id")),t.children.forEach((function(t){e(t,u.get("id"),r,a,i,o)}))}else c.get("status")===h.a.Uncompleted&&(s.status=h.a.Completed,s.completedTime=d.a.formatToServerDate()),s.parentId=n,r.push(s),a.push(s.id)}(e,n.get("id"),i,o,c,s)})):t!==h.a.Uncompleted?function e(t,n,r){if(0===r.length)return;r.forEach((function(r){var a=r.task;if(!LT(a,h.a.Completed)){var i={id:a.get("id"),isDirty:!0,status:h.a.Completed,completedTime:d.a.formatToServerDate()};t.push(i),n.push(a.get("id"))}e(t,n,r.children)}))}(i,o,e.children):function e(t,n,r){if(!r)return;var a=FT(r.task);a&&(t.push(a),null==n||n.push(a.id));e(t,n,r.parent)}(i,o,e.parent)}}));var u=T.o(c);T.cb(i);var l=T.o(o);l.forEach((function(e){C.a.setTask(e)})),t===h.a.Uncompleted&&(n=!1),function(e,t,n,r,a){if(r){var i=e.toArray().filter((function(e){return!n.includes(e.get("id"))})),o=m.d({type:"completeTask",data:{originIds:a,taskIds:i.map((function(e){return e.get("id")})),oldWillRepeatTasks:t,needDeleteAfterResetIds:n}}),c=i.length>1?v.a("this_task_completed",{s:""}):v.a("this_task_completed",{s:O.d(i[0]?i[0].get("title"):"")+" "});g.b({text:c,key:o,closable:!1,actionText:v.a("undo"),actionType:"undo",onAction:function(){m.c(o,"completeTask")},onRemove:function(){m.e(o),b.a.doSync()}}),!P.t()&&document.activeElement&&$(document.activeElement).blur()}else b.a.doSync()}(l,u,s,n,r)};function FT(e){return LT(e,h.a.Uncompleted)?null:{id:e.get("id"),isDirty:!0,status:h.a.Uncompleted,completedTime:null}}function HT(e,t){return{id:e.get("id"),isDirty:!0,status:h.a.Uncompleted,completedTime:null,items:t.get("items"),pomodoroSummaries:t.get("pomodoroSummaries"),repeatFlag:t.get("repeatFlag"),progress:t.get("progress"),startDate:t.get("startDate"),dueDate:t.get("dueDate")}}function BT(e,t){var n=T.l(e);return function(e,t){return YT.apply(this,arguments)}(Object(I.a)(n),t)}function YT(){return(YT=kT(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null!=n?n:t[0].task,e.next=3,AT(t,r.get("projectId"),void 0,!1);case 3:return a=Object(I.d)(t).filter((function(e){return e.task.get("id")!==r.get("id")})).map((function(e){return e.task})),(i=[]).push({id:r.get("id"),parentId:null}),o=0,a.forEach((function(e){i.push({id:e.get("id"),parentId:r.get("id"),sortOrder:o,columnId:r.get("columnId")}),o+=R.t})),T.cb(i),c=i.map((function(e){return e.id})),T.o(c).forEach((function(e){C.a.setTask(e)})),b.a.doSync(),e.abrupt("return",r);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function WT(e){var t=[],n=[],a=Object(I.a)(T.l(Object(r.List)(e))),i=a.map((function(e){return e.task})),o=new Set(i.map((function(e){return e.get("id")}))),c=null,s=T.m(Object(r.List)(i));a.forEach((function(e){c=function e(t,n,r){var a=t.task,i=w.j(a,{status:h.a.Uncompleted,parentId:r,title:a.get("title")+" "+v.a("task_copy_title_extra"),sortOrder:T.F(a.get("projectId"),a.get("id")),items:w.ob(a,!1),focusSummaries:w.v(a),progress:0,childIds:[],isNew:!0});return n.push(i),t.children.forEach((function(t){e(t,n,i.get("id"))})),i}(e,t,e.task.get("parentId"))})),s.forEach((function(e){if(e&&!o.has(e.get("id"))){var n=FT(e);n&&t.push(n)}})),c&&n.push(c),T.cb(t);var u=t.map((function(e){return e.id||e.get("id")}));return T.o(u).forEach((function(e){C.a.setTask(e)})),b.a.doSync(),setTimeout((function(){f.a.dispatch(mT,{idSet:new Set(u)})})),n}},443:function(e,t,n){"use strict";n.d(t,"e",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"g",(function(){return y})),n.d(t,"a",(function(){return b})),n.d(t,"f",(function(){return k})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return E}));n(205),n(173),n(208),n(203),n(152),n(155),n(204),n(160),n(319);var r=n(453),a=n(326),i=n(330),o=n(601),c=n(340),s=n(339),u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return{type:s.wc,date:e,projectId:t,addOrders:n,removedOrders:r}},l=n(342),d=n(328),f=(n(334),n(323),n(318));n(331);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){var t=o.d(),n={},r=e[0];for(var c in i.ab(r)||i.kb(r)||Object(l.o)(e),e.forEach((function(e){var r=d.a.prefMoment(e.get("startDate")).format("YYYYMMDD"),a=S(e,t);a&&(n[r]=n[r]||[],n[r].push(a))})),n)a.a.dispatch(u(c,t,n[c])),T(c,t,n[c])},v=function(e){var t=o.d(),n=d.a.prefMoment(e.get("startDate")).format("YYYYMMDD"),r=S(e,t);r&&(a.a.dispatch(u(n,t,[r])),T(n,t,[r]))},y=function(e){var t=[];o.c().forEach((function(n){var r=n.get("orders").filter((function(t){return e.get(t.get("id"))}));if(r.size){var a={date:n.get("date"),projectId:n.get("projectId"),sortOrders:[]};r.forEach((function(t){t&&a.sortOrders.push(t.set("id",e.get(t.get("id"))).toJSON())})),t.push(a)}}));for(var n=0,r=t;n<r.length;n++){var i=r[n],c=i.date,s=i.projectId,l=i.sortOrders;a.a.dispatch(u(c,s,l)),T(c,s,l)}},b=function(e,t,n,a,i,c){r.c((function(){return o.e(a,i)}),t,e,n,i,(function(e,t){return function(e,t,n){return{type:s.Db,date:e,projectId:t,orders:n}}(a,e,t)}),(function(e,t,n){return u(a,e,t,n)}),(function(e,t,n){return T(a,e,t,n)}),c)},k=function(e,t){var n={},r="#"+e,i="#"+t;return o.b(r).forEach((function(e){var t=e.get("date"),a=e.get("orders").toJS();n[t]||(n[t]={}),n[t][r]={changed:[],deleted:a},n[t][i]={changed:a,deleted:[]}})),a.a.dispatch(function(e,t){return{type:s.xc,oldProjectId:e,newProjectId:t}}(r,i)),n},O=function(e){var t={},n="#"+e;return o.b(n).forEach((function(e){var r=e.get("date"),a=e.get("orders").toJS();t[r]||(t[r]={}),t[r][n]={changed:[],deleted:a}})),a.a.dispatch(function(e){return{type:s.G,projectId:e}}(n)),t},T=function(e,t,n,r){var a={changed:[],deleted:[]};a.changed=(n||[]).map((function(e){return h({},e,{order:Object(l.d)(e.order)})})),a.deleted=(r||[]).map((function(e){return h({},e,{order:Object(l.d)(e.order)})})),(a.changed.length||a.deleted.length)&&c.gb(e,t,a)},S=function(e,t){var n,a=e.get("startDate"),c=d.a.prefMoment(e.get("startDate")).format("YYYYMMDD"),s=i.kb(e),u=i.ab(e);if(a){var l=o.e(c,t);if(!l.size)return;var p=e.get("id");n=s?{id:p,order:r.g(l),type:f.I.subtask}:u?{id:p,order:r.g(l),type:f.I.subscribe}:{id:p,order:r.h(l),type:f.I.task}}return n},E=function(e){if(e&&e.taskOrderByDate){var t,n=e.taskOrderByDate;a.a.dispatch((t=n,{type:s.Eb,dates:t}))}}},444:function(e,t,n){"use strict";n.d(t,"e",(function(){return m})),n.d(t,"d",(function(){return g})),n.d(t,"g",(function(){return v})),n.d(t,"a",(function(){return y})),n.d(t,"f",(function(){return b})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return S}));n(205),n(173),n(208),n(203),n(152),n(155),n(204),n(160),n(319);var r=n(453),a=n(326),i=n(339),o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return{type:i.Ac,priority:e,projectId:t,addOrders:n,removedOrders:r}},c=n(603),s=n(340),u=n(342),l=(n(323),n(318)),d=(n(331),n(330));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){var t=c.c(),n={},r=e[0];for(var i in d.ab(r)||d.kb(r)||Object(u.o)(e),e.forEach((function(e){var r=e.get("priority")||0,a=T(e,t);a&&(n[r]=n[r]||[],n[r].push(a))})),n)a.a.dispatch(o(i,t,n[i])),O(i,t,n[i])},g=function(e){var t=c.c(),n=e.get("priority")||0,r=T(e,t);r&&(a.a.dispatch(o(n,t,[r])),O(n,t,[r]))},v=function(e){var t=[];c.b().forEach((function(n){var r=n.get("orders").filter((function(t){return e.get(t.get("id"))}));if(r.size){var a={priority:n.get("priority"),projectId:n.get("projectId"),sortOrders:[]};r.forEach((function(t){t&&a.sortOrders.push(t.set("id",e.get(t.get("id"))).toJSON())})),t.push(a)}}));for(var n=0,r=t;n<r.length;n++){var i=r[n],s=i.priority,u=i.projectId,l=i.sortOrders;a.a.dispatch(o(s,u,l)),O(s,u,l)}},y=function(e,t,n,a,s,u){var l="".concat(a);r.c((function(){return c.e("".concat(l),s)}),t,e,n,s,(function(e,t){return function(e,t,n){return{type:i.Hb,priority:e,projectId:t,orders:n}}(l,e,t)}),(function(e,t,n){return o(l,e,t,n)}),(function(e,t,n){return O(l,e,t,n)}),u)},b=function(e,t){var n={},r="#"+e,o="#"+t;return c.d(r).forEach((function(e){var t=e.get("priority"),a=e.get("orders").toJS();n[t]||(n[t]={}),n[t][r]={changed:[],deleted:a},n[t][o]={changed:a,deleted:[]}})),a.a.dispatch(function(e,t){return{type:i.Bc,oldProjectId:e,newProjectId:t}}(r,o)),n},k=function(e){var t={},n="#"+e;return c.d(n).forEach((function(e){var r=e.get("priority"),a=e.get("orders").toJS();t[r]||(t[r]={}),t[r][n]={changed:[],deleted:a}})),a.a.dispatch(function(e){return{type:i.I,projectId:e}}(n)),t},O=function(e,t,n,r){var a={changed:[],deleted:[]};a.changed=(n||[]).map((function(e){return p({},e,{order:Object(u.d)(e.order)})})),a.deleted=(n||[]).map((function(e){return p({},e,{order:Object(u.d)(e.order)})})),r&&(a.deleted=r||[]),(a.changed.length||a.deleted.length)&&s.ib(e,t,a)},T=function(e,t){var n=e.get("priority"),a=d.kb(e),i=d.ab(e),o=c.e(n,t);if(o.size){var s=e.get("id");return a?{id:s,order:r.g(o),type:l.I.subtask}:i?{id:s,order:r.g(o),type:l.I.subscribe}:{id:s,order:r.h(o),type:l.I.task}}},S=function(e){if(e&&e.taskOrderByPriority){var t,n=e.taskOrderByPriority;a.a.dispatch((t=n,{type:i.Ib,prioritys:t}))}}},449:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return u}));n(205),n(173),n(152),n(380),n(156);var r=n(326),a=n(359),i=function(){return r.a.getState().teams.teams},o=function(e){return(e=e||i()).filter((function(e){return!0!==e.get("expired")})).sort(a.a.team)},c=function(e){return i().find((function(t){return t.get("id")===e}))},s=function(){return i().map((function(e){return e.get("id")}))},u=function(e){if(e){var t=i().find((function(t){return t.get("id")===e}));return!t||t.get("expired")}return!1}},450:function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return g}));n(120),n(160);var r=n(320),a=n(342),i=n(318),o=n(323),c=n(327),s=n(596),u=n(403);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){var t=e.name,n=e.label;return delete e.name,delete e.label,Object(r.Map)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({listType:i.t.tag,sortType:i.J.project,parent:null,label:n||t,name:t.toLowerCase()},e))},p=function(e){var t=Object(a.e)(e).toJSON();return delete t.status,delete t.listType,t},h=function(e,t){o.u[e]&&(e=o.u[e]);var n=Object(c.v)(),r=n&&o.y[e]||e;if(r&&"transparent"!==r){var i=n?36:50;t&&(i=n?54:64);var u=n?56:85;return{bg:a.c(r,i),fcolor:a.c(Object(s.a)(r,i),u)}}return null},m=function(e){var t=e.get("status");return t===u.b.NEW||t===u.b.INIT},g=function(e){return e.get("label")||e.get("name")}},451:function(e,t,n){"use strict";n.d(t,"d",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"e",(function(){return m})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return y})),n.d(t,"g",(function(){return b})),n.d(t,"f",(function(){return k})),n.d(t,"a",(function(){return O})),n.d(t,"h",(function(){return E}));n(73),n(211),n(205),n(173),n(203),n(153),n(119),n(159),n(152),n(144),n(33),n(154),n(112),n(158),n(204),n(160);var r=n(320),a=n(319),i=n.n(a),o=n(98),c=n.n(o),s=n(353),u=n(333),l=n(318),d=n(323),f=n(342),p=function(e){return Object(r.Map)(i.a.extend({listType:l.t.csl},e))},h=function(e){var t=Object(f.e)(e).toJSON();return delete t.isNew,delete t.isDirty,delete t.isDeleted,delete t.listType,t},m=function(e){if(!e)return!0;var t=e.get("rule");if(!t)return!0;try{return 0===(t=JSON.parse(t)).type}catch(e){return!0}},g=function(e){var t=e.get("rule");try{return t=JSON.parse(t),!0}catch(e){return!1}},v=function(e,t){var n=e.get("rule");if(!n)return{};if(g(e)&&!(n=function(e){var t=e.get("rule");try{if(g(e)){var n=(t=JSON.parse(t)).and;return n=n.map((function(e){return"listOrGroup"===e.conditionName?e.or.map((function(e){return e.conditionName+":"+e.or.join(",")})):e.conditionName+":"+e.or.join(",")})),(n=i.a.flattenDeep(n)).join(" AND ")}return t}catch(e){return null}}(e)))return{};var r=(n=i.a.filter(n.split(""),(function(e){return" "!==e})).join("")).split("AND"),a={};return r.forEach((function(e){var t=e.split(":");a[t[0]]=t[1]?t[1].split(","):[]})),!t&&a.group&&a.group.forEach((function(e){var t=u.w(e).map((function(e){return e.get("id")})).toArray();a.list=a.list?a.list.concat(t):t})),a},y=function(e,t){var n=v(e,t);return n.tag&&(n.tag=Object(s.d)(n.tag)),n},b=function(e){var t=k(e);return t.filterList?(t.filterList.forEach((function(e){"tag"===e.condition&&(e.data=Object(s.d)(e.data))})),t):(t.tag&&(t.tag=Object(s.d)(t.tag)),t)},k=function(e){var t,n=e.get("rule");try{t=JSON.parse(n);var r=[],a=[],i=S(t);r.unshift(i),T(t[i],a,r),r.length<a.length-1&&(r=new Array(a.length-1).fill(r[0])),a.forEach((function(e,t){e.logic=0===t?"and":r[t-1]||r[0]})),t={filterList:a,logicList:r}}catch(e){c.a.error("parseRuleOfJSON",e),t={filterList:[]}}return t},O=function(e){if(m(e)){var t=y(e);return!i.a.isEmpty(t.dueDate)}return b(e).filterList.find((function(e){return"dueDate"===e.condition}))},T=function e(t,n,r){t.forEach((function(t){if(1===t.conditionType){var a,i=t.conditionName,o=S(t);"listOrGroup"===i?(a={},t[o].forEach((function(e){var t=S(e),n=e.conditionName;a[n]=e[t]}))):a=t[o],n.push({innerLogic:o,condition:i,data:a})}else{var c=S(t);r.unshift(c),e(t[c],n,r)}}))},S=function(e){return Object.keys(e).join(" ").match(/(or)|(and)|(not)/g)[0]},E=function(e){var t;if(m(e))return(!(t=y(e)).list||~t.list.indexOf(d.g))&&!(t.tag||t.priority||t.assignee);t=b(e);for(var n=!0,r=function(e,t){var n=t.logic||"and",r=w(t);switch(n){case"and":return Boolean(e)&&Boolean(r);case"or":return Boolean(e)||Boolean(r);case"not":return Boolean(e)&&!r}},a=0;a<t.filterList.length;a++){n=r(n,t.filterList[a])}return n},w=function(e){var t=e.condition,n=e.innerLogic,r=e.data;return"dueDate"===t||"listOrGroup"===t&&(!!r.list&&("not"===n?!r.list.includes(d.g):r.list.includes(d.g)))}},452:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"e",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return g}));n(173),n(203),n(119),n(61),n(152),n(346),n(144),n(50),n(111),n(204),n(110);var r=n(319),a=n.n(r),i=n(345),o=n(328),c=n(372),s=n(318),u="merge",l="revised",d="delta",f=function(e,t,n,r){return(r||e.etag!==t.etag)&&(n=v(e,t,n)),n};function p(e,t,n){return["color","sortOrder","sortType"].forEach((function(r){n[r]=O(e[r],t[r],n[r])})),n}function h(e,t,n){return["name","rule","sortOrder","sortType"].forEach((function(r){n[r]=O(e[r],t[r],n[r])})),n}function m(e,t,n){return["name","showAll","sortOrder","sortType","teamId"].forEach((function(r){n[r]=O(e[r],t[r],n[r])})),n}function g(e,t,n){switch(["name","color","muted","inAll","sortOrder","sortType","groupId","closed","viewMode"].forEach((function(r){n[r]=O(e[r],t[r],n[r])})),n.userCount=t.userCount,k(e.teamId,t.teamId,n.teamId)){case u:n.notificationOptions=function(e,t,n){var r=e||[],i=n||[];if(a.a.isEqual(r,i))return t;return n}(e.notificationOptions,t.notificationOptions,n.notificationOptions),n.permission=O(e.permission,t.permission,n.permission);break;case d:n.notificationOptions=t.notificationOptions,n.permission=t.permission,n.teamId=t.teamId}return n}var v=function(e,t,n){n.title=x(e.title,t.title,n.title);var r=n.projectId,i=t.projectId;n.projectId=O(e.projectId,t.projectId,n.projectId);var o=n.projectId;return n.columnId=_(e,t,n,{revisedProjectId:r,deltaProjectId:i,currentProjectId:o}),n.sortOrder=O(e.sortOrder,t.sortOrder,n.sortOrder),n.status=I(e.status,t.status,n.status),b(e,t,n),y(e,t,n),n.completedTime=O(e.completedTime,t.completedTime,n.completedTime),n.parentId=O(e.parentId,t.parentId,n.parentId),n.childIds=function(e,t,n){var r=e||[],i=t||[];if(a.a.isEqual(r,i))return n;return t}(e.childIds,t.childIds,n.childIds),n.progress=O(e.progress,t.progress,n.progress),n.priority=O(e.priority,t.priority,n.priority),n.attachments=C(e.attachments,t.attachments,n.attachments),n.tags=j(e.tags,t.tags,n.tags),n.focusSummaries=E(e.focusSummaries,t.focusSummaries,n.focusSummaries),n.etag=t.etag,n.commentCount=t.commentCount,n.deleted=t.deleted,n.location=t.location,n.attendId=t.attendId,n},y=function(e,t,n){var r=k(e.kind,t.kind,n.kind);switch(null==n.kind&&(n.kind=a.a.isEmpty(n.items)?s.L.Text:s.L.Checklist),r){case u:n.kind=O(e.kind,t.kind,n.kind),n.kind===s.L.Checklist?(n.content="",n.desc=x(e.desc,t.desc,n.desc),e.items=R(e),n.items=R(n),t.items=R(t),n.items=S(e.items,t.items,n.items)):(n.items=[],n.desc="",n.content=x(e.content,t.content,n.content));break;case l:n.kind===s.L.Checklist?n.content="":(n.items=[],n.desc="");break;case d:n.kind=t.kind,n.kind===s.L.Checklist?(n.content="",n.items=R(t.items),n.desc=t.desc):(n.items=[],n.desc="",n.content=t.content)}},b=function(e,t,n){var r=u;["startDate","timeZone","isAllDay","isFloating"].find((function(a){var i=function(r){return k(e[r],t[r],n[r])}(a);return(i===l||i===d)&&(r=i,!0)}));var a=O(e.startDate,t.startDate,n.startDate);if(a){switch(r){case l:break;case d:n.startDate=t.startDate,n.dueDate=t.dueDate,n.isAllDay=t.isAllDay,n.isFloating=t.isFloating,n.timeZone=t.timeZone,n.reminders=t.reminders,n.remindTime=t.remindTime;break;case u:n.startDate=a,n.dueDate=O(e.dueDate,t.dueDate,n.dueDate),n.isAllDay=T(e.isAllDay,t.isAllDay,n.isAllDay),n.isFloating=O(e.isFloating,t.isFloating,n.isFloating),n.timeZone=O(e.timeZone,t.timeZone,n.timeZone),n.reminders=w(e.reminders,t.reminders,n.reminders),n.remindTime=O(e.remindTime,t.remindTime,n.remindTime)}n.repeatFrom=O(e.repeatFrom,t.repeatFrom,n.repeatFrom)}else n.startDate=null,n.dueDate=null,n.isAllDay=!1,n.isFloating=!1,n.timeZone=i.h,n.reminders=[],n.remindTime=null,n.repeatFlag=null,n.repeatFrom=null},k=function(e,t,n){return t===n?u:e===t?l:e===n?d:l},O=function(e,t,n){return e===n?t:n},T=function(e,t,n){return e===t?n:e===n?t:n},S=function(e,t,n){var r=new Map(e.map((function(e){return[e.id,e]}))),a=new Map(n.map((function(e){return[e.id,e]}))),i=new Map(t.map((function(e){return[e.id,e]})));t.forEach((function(e){var t,n=(e=null!==(t=e)&&void 0!==t?t:"").id,i=a.get(n);if(i){var c,s=null!==(c=r.get(n))&&void 0!==c?c:"";i.status=I(s.status,e.status,i.status),i.title=x(s.title,e.title,i.title),i.sortOrder=O(s.sortOrder,e.sortOrder,i.sortOrder),-1===s.startDate&&(s.startDate=null);var u=O(s.startDate,e.startDate,i.startDate);u?o.a.isSame(i.startDate,e.startDate)?i.isAllDay=O(s.isAllDay,e.isAllDay,i.isAllDay):u===e.startDate&&(i.startDate=e.startDate,i.isAllDay=e.isAllDay):(i.isAllDay=!1,i.startDate=null),i.snoozeReminderTime=O(s.snoozeReminderTime,e.snoozeReminderTime,i.snoozeReminderTime),i.completedTime=O(s.completedTime,e.completedTime,i.completedTime)}else{var l=r.get(n);if(l)!!Object.keys(l).find((function(t){return l[t]!==e[t]&&"sortOrder"!==t}))&&a.set(n,e);else a.set(n,e)}})),e.forEach((function(e){var t=e.id;if(!i.get(t)){var n=a.get(t);n&&n.title===e.title&&n.status===e.status&&(n.needDelete=!0)}}));var c=[];return a.forEach((function(e,t){e.needDelete||c.push(e)})),c},E=function(e,t,n){var r=P(e),a=P(n);return(t=t||[]).forEach((function(e){var t=a[e.userId],n=r[e.userId];t?n?(t.pomoDuration=t.pomoDuration+e.pomoDuration-n.pomoDuration,t.pomoCount=t.pomoCount+e.pomoCount-n.pomoCount,t.estimatedPomo=t.estimatedPomo+e.estimatedPomo-n.estimatedPomo,t.estimatedDuration=t.estimatedDuration+e.estimatedDuration-n.estimatedDuration):(t.pomoDuration+=e.pomoDuration,t.pomoCount+=e.pomoCount,t.estimatedDuration+=e.estimatedDuration,t.estimatedPomo+=e.estimatedPomo):n||(a[e.userId]=e)})),Object.keys(a).map((function(e){return a[e]}))},w=function(e,t,n){var r=D(e),a=D(n),i={};e=e||[],n=n||[],(t=t||[]).forEach((function(e){var t=e.id;i[t]=e;var n=r[t],o=a[t];null==o?null==n?a[t]=e:c.f(n.trigger,e.trigger)||(a[t]=e):null!==n&&(c.f(n.trigger,o.trigger)||(a[t]=e))})),e.forEach((function(e){var t=e.id;if(!Object.prototype.hasOwnProperty.call(i,e.id)){var n=a[t];null!=n&&c.f(e.trigger,n.trigger)&&delete a[t]}}));var o=Object.keys(a).map((function(e){return a[e]}));return c.g(o)},D=function(e){var t={};return(e=e||[]).forEach((function(e){var n=e.id;t[n]=e})),t},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=a.a.union(t,n),i=[];return e&&e.forEach((function(e){-1!==t.indexOf(e)&&-1!==n.indexOf(e)||i.push(e)})),a.a.difference(r,i)},_=function(e,t,n,r){var a=r.revisedProjectId,i=r.deltaProjectId,o=r.currentProjectId;return a!==i?a===o?n.columnId:t.columnId:n.columnId&&t.columnId?O(e.columnId,t.columnId,n.columnId):n.columnId||t.columnId},C=function(e,t,n){if(!e)return t;if(!n)return t;var r=e.length;if(r!==n.length)return n;for(var a=0;a<r;a++)if(e[a].fileName!==n[a].fileName||e[a].fileType!==n[a].fileType||e[a].id!==n[a].id||e[a].size!==n[a].size)return n;return t},I=function(e,t,n){return 0===e?M(e,t,n):A(e,t,n)};var M=function(e,t,n){return t>e&&(e=t),n>e&&(e=n),e},A=function(e,t,n){return t<e&&(e=t),n<e&&(e=n),e},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(t===n||t===e)return n;var r=new diff_match_patch;return r.patch_apply(r.patch_make(e,t),n)[0]},R=function(e){return(e.items||[]).map((function(e){return delete e.timeZone,e}))},P=function(e){var t={};return(e=e||[]).forEach((function(e){t[e.userId]=e})),t}},453:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return v})),n.d(t,"f",(function(){return y})),n.d(t,"e",(function(){return b})),n.d(t,"i",(function(){return k})),n.d(t,"c",(function(){return T}));n(73),n(211),n(205),n(173),n(208),n(203),n(153),n(119),n(61),n(152),n(209),n(155),n(122),n(346),n(50),n(154),n(111),n(204),n(110);var r=n(319),a=n.n(r),i=n(320),o=n(330),c=n(318),s=n(323),u=n(327),l=n(326);function d(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(e){var t={id:e.get("id"),order:0};return o.kb(e)?t.type=c.I.subtask:o.ab(e)?t.type=c.I.subscribe:t.type=c.I.task,t},h=function(e,t,n){var r={needReset:!1,needPush:!1,orders:[]},a=s.t;if(null==e&&null==t)return r.orders=new Array(n+1).fill(0).map((function(e,t){return(t+1)*a})),r;if(null!=e&&null!=t){var i=t-e,o=Math.abs(Math.floor(i/(n+1)));o<1&&(r.needPush=!0,o=a),r.orders=new Array(n+1).fill(0).map((function(t,n){return e+(n+1)*o}))}else null==e?r.orders=new Array(n+1).fill(0).map((function(e,n){var i=t-(n+1)*a;return i<s.s&&(r.needReset=!0),i})):null==t&&(r.orders=new Array(n+1).fill(0).map((function(t,n){var i=e+(n+1)*a;return i>s.r&&(r.needReset=!0),i})));return r},m=function(e,t){t.toArray&&(t=t.toArray());var n=u.b("showChecklist"),r=[],s=[],l=[],d=[],f=[],p=[];e.forEach((function(e){var t;i.Map.isMap(e)?(t=e.get("id"),o.kb(e)?s.push(t):o.ab(e)?l.push(t):r.push(t)):(t=e.id,e.type===c.I.subtask?s.push(t):e.type===c.I.subscribe?l.push(t):r.push(t))}));var h=t.filter((function(e){return e.get("type")===c.I.task})).map((function(e){return e.get("id")}));if((d=a.a.difference(h,r)).length&&(p=t.filter((function(e){return~d.indexOf(e.get("id"))})).map((function(e){return e.toJS()})),f=f.concat(p)),n){var m=a.a.map(t.filter((function(e){return e.get("type")===c.I.subtask})),"id");(d=a.a.difference(m,s)).length&&(p=t.filter((function(e){return~d.indexOf(e.get("id"))})).map((function(e){return e.toJS()})),f=f.concat(p))}return f},g=function(e){var t=e.size?e.last().get("order"):null;return null==t?0+s.t:t+s.t},v=function(e){var t=e.size?e.first().get("order"):null;return null==t?0-s.t:t-s.t},y=function(e,t,n){if(n<0){for(var r=e[t],a=0;a<Math.abs(n);a++){var i;r=null===(i=r)||void 0===i?void 0:i.parent}return r}return n>0?null:e[t]},b=function(e,t,n){var r=y(e,t,n);if(null==r)return e[t+1];var a=e.slice(t+1).find((function(e){return null==e.model||(!(!c.b.includes(null==r?void 0:r.parentId)||!c.b.includes(e.parentId))||r.parentId===e.parentId)}));return null==a||null==a.model?null:a},k=function(e,t,n){var r=t.findIndex((function(t){return t.id===e}));if(-1===r)return t;var a=t.slice(r),i=n*s.t;return a.map((function(e){return e.order+=i,e}))},O=function(e,t){if(null!=e){var n=e.id;if(null!=n&&null!=e.model)return null==t.get(n)?e.model.sortOrder:t.get(n)}},T=function(e,t,n,r,i,o,u,f,p){var g,v=y(r,t,p),T=b(r,t,p),S=null==v?void 0:v.id,E=null==T?void 0:T.id;if(1!==n.length||n[0].id!==E){var w=null!==(g=null==v?void 0:v.section.id)&&void 0!==g?g:null==T?void 0:T.section.id,D=e(),j=!1;if(0===D.size){if(null==v&&null==T)return;var _=r.filter((function(e){return null!=e.model&&e.section.id===w})).map((function(e,t){var n=e.model;return{id:n.id,type:n.sortOrderType||c.I.task,order:t*s.t}}));l.a.dispatch(o(i,_)),D=e(),j=!0}var C,I,M=new Map(D.toArray().map((function(e){return[e.get("id"),e.get("order")]}))),A=O(v,M),x=O(T,M),R=[],P=h(A,x,n.length);P.orders&&n.forEach((function(e,t){var n;R.push({order:P.orders[t],id:e.id,type:(null===(n=e.model)||void 0===n?void 0:n.sortOrderType)||c.I.task})})),C=P.needReset,I=P.needPush;var N=n.map((function(e){return e.id})),L=r.filter((function(e){return null!=e.model&&(null!=w&&(e.section.id===w&&(!(!c.b.includes(null==v?void 0:v.parentId)||!c.b.includes(e.parentId))||(null==v?void 0:v.parentId)===e.parentId)))})).reduce((function(e,t){var n=t.model;return e.push({id:n.id,type:n.sortOrderType||c.I.task,order:M.get(n.id)||n.sortOrder}),e}),[]);if(C){var U=[],F={};L.forEach((function(e){U.push(e.id),F[e.id]=e,e.id===S&&U.push.apply(U,d(N))})),n.forEach((function(e){var t,n=e.id;F[n]={id:n,type:(null===(t=e.model)||void 0===t?void 0:t.sortOrderType)||c.I.task,order:0}})),R=function(e,t,n){n.toArray&&(n=n.toArray());var r=n.map((function(e){return e.get("id")})),i=[],o=[];if(r.length){var c=a.a.intersection(e,r);c.length?(a.a.forEach(c,(function(t){var n=e.indexOf(t),a=r.indexOf(t),o=e.splice(0,n),c=r.splice(0,a);(i=i.concat(o.concat(c))).push(t),e.shift(),r.shift()})),i=i.concat(e.concat(r))):i=e.concat(r)}else i=e;return i.forEach((function(e,r){var a=t[e]||n.find((function(t){return t.get("id")===e})).toJS();a.order=r*s.t,o.push(a)})),o}(U,F,D),l.a.dispatch(o(i,R))}else if(I){var H;(H=R).push.apply(H,d(k(E,L,n.length)))}var B=r[Math.max(t,0)].section.id,Y=d(r.filter((function(e){return e.section.id===B&&e.model})).reduce((function(e,t){var n=t.model;return e.unshift({id:n.id,type:n.sortOrderType||c.I.task,order:n.sortOrder}),e}),[]));n.forEach((function(e){var t,n=e.id,r={id:n,type:(null===(t=e.model)||void 0===t?void 0:t.sortOrderType)||c.I.task,order:0};L.find((function(e){return e.id===n}))||Y.push(r)}));var W=m(Y,D);if(C||l.a.dispatch(u(i,R,W)),j)f(i,e().toJS(),W);else f(i,R,W)}}},454:function(e,t,n){"use strict";n.d(t,"f",(function(){return m})),n.d(t,"a",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"c",(function(){return y})),n.d(t,"e",(function(){return k})),n.d(t,"b",(function(){return O}));n(73),n(205),n(208),n(203),n(152),n(209),n(380),n(156),n(204);var r=n(320),a=n(326),i=n(333),o=n(395),c=n(449),s=n(323),u=n(432),l=n(604),d=n(359),f=n(349),p=n(318),h=n(342),m=function(e){var t=s.t,n=y(e),r=[],i=[];n.forEach((function(e,n){var a=e.get("id"),o=n*t;e.get("listType")===p.t.group?r.push({id:a,order:o}):i.push({id:a,order:o})})),a.a.dispatch(Object(u.d)(i)),a.a.dispatch(Object(l.b)(r))},g=function e(t,n){var r=y(n),a=r.findIndex((function(e){return e.get("id")===t}));if(a<0)return null;var i=r.get(a),o=r.get(a+1),c=parseInt(i?i.get("sortOrder"):null,10),s=parseInt(o?o.get("sortOrder"):null,10),u=h.a(c,s);return u.needReset?(m(n),e(t,n)):u.newSortOrder},v=function(e){var t=i.d({teamId:e}),n=o.d(e);return t.filter((function(e){return!Object(f.c)(e)})).concat(n).sort(d.a.order)},y=function(e){var t=v(e),n=[];return t.forEach((function(e){if(n.push(e),e.get("listType")===p.t.group){var t=i.w(e.get("id"));t&&t.forEach((function(e){n.push(e)}))}})),Object(r.List)(n)},b=function(e,t){var n=v(e),a=[];return n.forEach((function(e){if(e.get("listType")===p.t.group){var t=i.w(e.get("id"));t&&t.forEach((function(e){a.push(e)}))}else a.push(e)})),Object(r.List)(i.a({projects:a,available:"edit"}))},k=function(){var e=i.x(),t=o.e();return e.concat(t).some((function(e){var t=e.get("teamId");return!Object(c.b)(t)}))},O=function(){return Object(c.a)().reduce((function(e,t){return e.concat(b(t.get("id")))}),Object(r.List)()).concat(b()).unshift(i.j()).map((function(e){return{complete:e.get("name")+" ",match:e.get("name"),key:e.get("id")}})).toArray()}},455:function(e,t,n){"use strict";var r=n(394),a=n.n(r),i=(n(350),n(319)),o=n.n(i),c=n(98),s=n.n(c),u=n(466),l=n(341);function d(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.syncing=!1,this.doSync=o.a.debounce(this._doSync,1e3),this.doSyncImmediately=this._doSync}var t,n,r,i,c;return t=e,(n=[{key:"_doSyncBegin",value:function(){this.syncing=!0}},{key:"_doSyncFinish",value:function(){this.syncing=!1}},{key:"_doSync",value:(i=a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.d()){e.next=2;break}return e.abrupt("return");case 2:if(!this.syncing){e.next=4;break}return e.abrupt("return");case 4:return this._doSyncBegin(),e.prev=5,e.next=8,Object(u.d)();case 8:return e.next=10,Object(u.e)();case 10:return e.next=12,Object(u.a)();case 12:this._doSyncFinish(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(5),s.a.error(e.t0),this._doSyncFinish();case 19:case"end":return e.stop()}}),e,this,[[5,15]])})),c=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function o(e){d(a,n,r,o,c,"next",e)}function c(e){d(a,n,r,o,c,"throw",e)}o(void 0)}))},function(){return c.apply(this,arguments)})}])&&f(t.prototype,n),r&&f(t,r),e}();t.a=new p},456:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return h})),n.d(t,"d",(function(){return m}));n(205),n(173),n(208),n(119),n(152),n(156),n(122),n(120);var r=n(326),a=n(359),i=n(323),o=(n(363),n(457));function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=function(){return r.a.getState().columns.filter((function(e){return!Object(o.c)(e)}))},l=function(e){return r.a.getState().columns.find((function(t){return t.get("id")===e}))},d=function(e){return u().filter((function(t){return t.get("projectId")===e})).sort(a.a.order)},f=function(e){var t=d(e);if(t.size>0)return t.get(0)},p=function(e){var t,n,r=e.projectId,a=e.prevColumnId,i=e.nextColumnId,o=d(r);a?n=(t=o.findIndex((function(e){return e.get("id")===a})))+1:t=i?(n=o.findIndex((function(e){return e.get("id")===i})))-1:o.size-1;var c=t>-1?o.get(t):null,s=n>-1?o.get(n):null;return{prevSortOrder:parseInt(c?c.get("sortOrder"):null,10),nextSortOrder:parseInt(s?s.get("sortOrder"):null,10)}},h=function(e){var t,n=e.projectId,r=e.prevColumnId,a=e.thisColumnId,o=e.nextColumnId,s=d(n).map((function(e){return e.get("id")})).filter((function(e){return e!==a}));if(r)t=s.indexOf(r)+1;else if(o){t=s.indexOf(o)}else t=s.size;return(s=s.splice(t,0,a)).toMap().mapEntries((function(e){var t=c(e,2),n=t[0];return[t[1],n*i.t]})).toObject()},m=function(e){return"edit"===l(e).get("status")}},457:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return h}));n(160);var r=n(320),a=n(319),i=n.n(a),o=n(354),c=n(341),s=n(328),u=n(342),l=n(365),d=function(e){var t=i.a.extend({id:Object(o.a)(),userId:c.a("userId"),createdTime:s.a.formatToUtcString()},e);return Object(r.fromJS)(t)},f=function(e){var t=Object(u.e)(e).toJSON();return delete t.syncStatus,delete t.status,t},p=function(e){return e.get("syncStatus")===l.b||e.get("syncStatus")===l.e},h=function(e){return e.get("syncStatus")===l.c}},460:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return f}));var r=n(326),a=n(421),i=n(331),o=n(318),c=function(){return r.a.getState().globalState},s=function(){return c().get("today")},u=function(){return c().get("minute")},l=function(){return c().get("isNoteEnabled")},d=function(){l()||(r.a.dispatch(a.c(!0)),Object(i.e)(o.K.isNoteEnabled,!0))},f=function(e){return c().get("taskCollapse").get(e)}},461:function(e,t,n){"use strict";n.d(t,"f",(function(){return y})),n.d(t,"e",(function(){return b})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return O})),n.d(t,"g",(function(){return T})),n.d(t,"d",(function(){return S})),n.d(t,"a",(function(){return L}));n(205),n(173),n(208),n(203),n(153),n(119),n(61),n(159),n(152),n(156),n(122),n(50),n(33),n(207),n(154),n(111),n(112),n(204),n(110);var r=n(319),a=n.n(r),i=n(320),o=n(326),c=n(334),s=n(451),u=n(401),l=n(439),d=n(333),f=n(395),p=n(353),h=(n(465),n(324),n(323),n(328)),m=n(327);n(341);function g(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=function(e){return o.a.getState().customSmartProjects.find((function(t){return t.get("id")===e}))},b=function(){var e=E();return s.e(e)?w(e):_(e)},k=function(){var e,t=E();return(e=s.e(t)?x(t):R(t))?parseInt(e,10):null},O=function(){var e=E();return s.e(e)?P(e):N(e)},T=function(e,t){return t=t||E()||Object(i.Map)(),l.e(e,t)},S=function(){var e=E();return s.e(e)?I(e):A(e)},E=function(){var e=c.g();return o.a.getState().customSmartProjects.find((function(t){return t.get("id")===e}))||Object(i.Map)()},w=function(e){var t=s.c(e);if(!t.tag||t.tag.includes("!tag"))return null;if(t.tag.includes("*withtags")){var n=p.h();return n[0]?[n[0]]:null}return t.tag=D(t.tag),[t.tag[0]]},D=function(e){var t=new Set(e),n=[];t.has("!all")&&n.push("!all"),t.has("*withtags")&&n.push("*withtags"),t.has("!tag")&&n.push("!tag");var r=p.h();return n.push.apply(n,g(r.filter((function(e){return t.has(e)})))),n},j=function(e,t){var n=!1;e=e||[];for(var r=0;r<e.length;r++)if(e[r].match(t)){n=!0;break}return n},_=function(e){var t=s.g(e).filterList.filter((function(e){return"tag"===e.condition}));if(!t.length)return null;var n=t[0],r=C(n),i=t[1];if(!i||"or"===i.logic)return r;if(!r)return null;var o=C(i);return o?a.a.union(r,o):null},C=function(e){var t=D(e.data),n=p.h();switch(e.innerLogic){case"or":return t.includes("*withtags")?n[0]?[n[0]]:null:t.includes("!tag")?null:t[0]?[t[0]]:null;case"not":if(!t.includes("!tag"))return null;var r=new Set(t.filter((function(e){return"!tag"!==e}))),a=n.find((function(e){return!r.has(e)}));return a?[a]:null;case"and":if(t.includes("!tag"))return null;var i;t.includes("*withtags")&&(i=n[0]);var o=t.filter((function(e){return"*withtags"!==e}));return i&&!o.includes(i)&&o.unshift(i),o;default:return null}},I=function(e){var t=s.c(e);return t.dueDate?M(t.dueDate):null},M=function(e){if(e.includes("nodue"))return null;if(~e.indexOf("today")||j(e,/^([1-7]||30)days$/)||~e.indexOf("thisweek")||~e.indexOf("thismonth"))return h.a.getStartOfToday();if(~e.indexOf("tomorrow"))return h.a.getStartOfTomorrow();if(~e.indexOf("nextweek"))return h.a.getStartOfNextWeek();if(j(e,/^([1-7]||30)dayslater$/)){var t=e.join(",").match(/\d+dayslater/)[0].match(/\d+/)[0];return h.a.getStartOfNdayslater(parseInt(t))}return~e.indexOf("overdue")?h.a.getStartOfToday():null},A=function(e){var t=s.g(e).filterList.filter((function(e){return"dueDate"===e.condition}))[0];return t?"not"===t.innerLogic?t.data.includes("nodue")?h.a.getStartOfToday():null:M(t.data):null},x=function(e){var t=s.c(e);return t.priority?t.priority[0]:null},R=function(e){var t=s.g(e).filterList.filter((function(e){return"priority"===e.condition}))[0];if(!t)return null;var n=[0,1,3,5],r=t.data;return(n=a.a.intersection(n,r)).length?Math.max.apply(Math,g(n)):null},P=function(e){var t=s.c(e),n=m.f(),r=d.n(n);if(t.list&&t.list.length){var a=d.c(t.list,{sort:!0}).filter((function(e){return 1===e.get("userCount")||!e.get("userCount")}));return a.map((function(e){return e.get("id")})).includes(n)?r:a[0]||r}return r},N=function(e){var t=s.g(e),n=m.f(),r=d.n(n),i=t.filterList.filter((function(e){return"listOrGroup"===e.condition}))[0];if(!i)return r;var o=i.data.list||[];i.data.group&&i.data.group.length&&(i.data.group.forEach((function(e){var t,n=f.a(e);u.b(n),(t=o).push.apply(t,g(d.r(e).map((function(e){return e.get("id")})).toJS()))})),o=a.a.flattenDeep(o));var c=new Set(o),l=d.b({sort:!0}).filter((function(e){return 1===e.get("userCount")||!e.get("userCount")}));return("not"===i.innerLogic?c.has(n)?l.find((function(e){return!c.has(e.get("id"))})):r:c.has(n)?r:l.find((function(e){return c.has(e.get("id"))})))||r},L=function(e){var t=y(e);return t?s.e(t)?P(t):N(t):void 0}},463:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return g}));n(73),n(153),n(119),n(159),n(155),n(156),n(210),n(50),n(145),n(33),n(143),n(154),n(112),n(62),n(214);var r=n(378),a=n(338),i=n.n(a),o=n(323),c=n(324),s=n(479),u=n(420),l=n(431),d=n(344),f={dayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},p={dayNames:["","","","","","",""],monthNames:["","","","","","","","","","","",""],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},h=function(e){var t=e.date,n=e.repeatData,a=e.rruleData;if(!a)return"";var u="",h=n.kind,m=n.freq,g=n.onMonth,v=a.until,y=a.count;if("ebbinghaus_curve"===h)u=c.a("ebbinghaus_curve"),y>0&&(u+=";",u+=c.a(Number(y)>1?"repeat_times":"repeat_time",{d:y}));else{var b=new l.a(a),k=b.rruleOptions;delete k.until;var O=new r.b(k),T=o.o?O.toText(void 0,p):O.toText(void 0,f);if((b.isMonthFirstWorkDayRepeat||b.isMonthLastWorkDayRepeat)&&(b.count?T=T.replace(/for/,"workday for"):T+=" workday"),u=function(e,t){var n,r=t.monthdays,a=t.count,i=t.until;if(!r||r.length<3)return e;var o=e.search(/ and /),c=e.match(/\d+(st|nd|rd|th)/gi),s=e.substr(0,e.search(/\d+(st|nd|rd|th)/));return c?(c.sort((function(e,t){return parseInt(e,10)<parseInt(t,10)?-1:1})),n=s+c.join(", "),r.includes(-1)||r.includes("-1")?n+=e.substr(o):(n=n.replace(", "+c[c.length-1]," and "+c[c.length-1]),a?n+=e.match(/ for \d+ (times|time)/)[0]:i&&(n+=e.match(/until[\S\s]*/)[0])),n):e}(T,a),"monthly"===h&&(u=u.replace(/\son\sthe\s\d+(st|nd|rd|th)/i,"")),o.o&&"advanced"===h&&(u=u.replace(/every weekday/i," "+c.a("repeat_advance_weekday"))),u=u.replace(/every day/i,c.a("daily")).replace(/(weekdays|weekday)/i,c.a("repeat_advance_weekday")).replace(/every week/i,c.a("weekly")).replace(/every month/i,c.a("monthly")).replace(/on the last$/i,c.a("last_day_in_month")),"lunar_yearly"===h){var S=(new s.a).solar2lunar(t?new Date(t):new Date),E=S.lunarMonth,w=S.lunarDay;u=u.replace(/every year/i," ".concat(E,"").concat(-1!==O.options.bynmonthday.indexOf(-1)?"":w))}else u=u.replace(/every year/i,c.a("yearly"));var D=/ for (\d+) (times|time)/;if(u.match(D)){var j=u.match(D)[1];u=u.replace(D,";"+c.a(Number(j)>1?"repeat_times":"repeat_time",{d:j}))}if("advanced"===h&&o.o&&(u="yearly"===m?u.replace(/every (\d+) years/i,"$1").replace(/every /i,"").replace(/ days/i,"").replace(/ weeks/i,"").replace(/ months/i,""):u.replace(/every /i,"").replace(/ days/i,"").replace(/ weeks/i,"").replace(/ months/i,"").replace(/ years/i,""),"weekly"===m?u=u.replace(/ on /i," "):"yearly"===m?u=u.replace(/ and /i,"").replace(/ on the last/,"").replace(/ on the /i,"").replace(/(st|nd|rd|th)/gi,""):"date"===g?u=u.replace(/ and /i,"").replace(/ on the /i,"").replace(/last/,"").replace(/(st|nd|rd|th)/gi,""):"week"===g?u=u.replace(/ and /i,"").replace(/ on the last/,"").replace(/ on the /i,"").replace(/(st|nd|rd|th)/gi,""):"workday"===g&&(u=u.replace(/ on the last/,"").replace(/ on the /i,"").replace(/(st|nd|rd|th)/gi,"").replace(/ workday/,"")),u=u.replace(/ for /,"; ").replace(/(times|time)/,"")),"advanced"===h&&!o.o)if("date"===g)new RegExp(/ on the last/).test(u)||(u=u.replace(/last/,"last day"))}return v&&(o.o?u+="; "+i()(d.a.convertUtcDate2Date(v)).format("YYYY-MM-DD"):u+=";Until "+i()(d.a.convertUtcDate2Date(v)).format("YYYY-MM-DD")),o.o&&(u=u.replace(/\s+/g,"")),(u=u[0].toUpperCase()+u.slice(1))||""},m=function(e){var t=e.date,n=e.repeatData;return h({date:t,repeatData:n,rruleData:Object(u.a)({date:t,repeatData:n})})},g=function(e){var t=e.date,n=e.repeatData;return function(e){var t=e.date,n=e.kind,r=e.rruleData;if(r){var a=new l.a(r);if("lunar_yearly"===n){var i=(new s.a).solar2lunar(t?new Date(t):new Date),o=i.lMonth,c=i.lDay;return a.byMonth=[o],a.byMonthDay=[c],a.isLunar=!0,a.toString()}return a.toString()}return null}({date:t,kind:n.kind,rruleData:Object(u.a)({date:t,repeatData:n})})}},464:function(e,t,n){"use strict";n.d(t,"e",(function(){return G})),n.d(t,"f",(function(){return V})),n.d(t,"h",(function(){return z})),n.d(t,"g",(function(){return Z})),n.d(t,"c",(function(){return q})),n.d(t,"b",(function(){return J})),n.d(t,"a",(function(){return $})),n.d(t,"i",(function(){return Q})),n.d(t,"d",(function(){return te}));n(205),n(173),n(159),n(152),n(156),n(174);var r=n(98),a=n.n(r),i=n(319),o=n.n(i),c=(n(320),n(340)),s=(n(203),n(366),n(119),n(61),n(209),n(155),n(346),n(356),n(144),n(50),n(33),n(207),n(111),n(158),n(204),n(110),n(160),n(326)),u=(n(331),n(318)),l=n(541),d=n(365),f=n(324),p=n(339),h=function(e,t){return{type:p.ed,id:e,data:t}},m=function(e){return{type:p.lb,id:e}},g=function(e,t){return{type:p.vc,id:e,data:t}},v=function(e){return{type:p.fb,id:e}},y=n(480),b=n(328);function k(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(){return s.a.getState().taskTemplates},D=function(){return s.a.getState().noteTemplates},j=function(e){var t;s.a.dispatch((t=e,{type:p.Xb,data:t}))},_=function(e){var t;s.a.dispatch((t=e,{type:p.Cb,data:t}))},C=function(e){var t=e.id;s.a.dispatch(g(t,e))},I=function(e){var t=e.id;s.a.dispatch(h(t,e))},M=function(e){s.a.dispatch(function(e){return{type:p.L,id:e}}(e))},A=function(e){s.a.dispatch(function(e){return{type:p.F,id:e}}(e))};var x=function(){j(["template_example_1","template_example_2","template_example_3"].map((function(e){var t=f.a(e),n=t.indexOf("\n"),r=t.slice(0,n),a=t.slice(n+1),i=a.split("\n-"),o=b.a.formatUtcToDateString(tickDate()),c={status:d.h.INIT,createdTime:o};return i.length<=1?Object.assign(c,{title:r,content:a}):(i=i.filter((function(e){return e.length>0})),Object.assign(c,{title:r,items:i})),c})))};function R(e){var t=f.a(e[0]),n=e.slice(1).map((function(e){return e?f.a(e):e})).join("\n"),r=b.a.formatUtcToDateString(tickDate());return{title:t,content:n,status:d.h.INIT,createdTime:r,items:[]}}function P(e,t){if(e){var n=t().toJS().reduce((function(e,t){return e.set(t.id,t)}),new Map),r=[];return e.forEach((function(e){var t=n.get(e.id);if(t){n.delete(e.id);var a=t.status;t.etag===e.etag||a!==d.h.DONE?r.push(t):r.push(S({},e,{status:d.h.DONE}))}else r.push(S({},e,{status:d.h.DONE}))})),r.push.apply(r,k(Array.from(n.values()).filter((function(e){var t=e.status;return t===d.h.NEW||t===d.h.UPDATED})))),r}}var N=function(){U(s.a.getState().taskTemplates,c.m,m,h)},L=function(){U(s.a.getState().noteTemplates,c.l,v,g)};function U(e,t,n,r){var i=[],c=[],u=[];e.forEach((function(e){switch(e.get("status")){case d.h.INIT:case d.h.NEW:i.push(Object(l.b)(e));break;case d.h.UPDATED:c.push(Object(l.b)(e));break;case d.h.DELETED:u.push(e.get("id"))}})),(i.length||c.length||u.length)&&t({add:i,update:c,delete:u}).then((function(e){var t=e.data,i=new Set;o.a.isEmpty(t.id2error)||(i=new Set(Object.keys(t.id2error)),Object.keys(i).forEach((function(e){var n=t.id2error[e];switch(n){case y.a.EXISTED:s.a.dispatch(r(e,{status:d.h.UPDATED}));break;case y.a.NOT_EXISTED:s.a.dispatch(r(e,{status:d.h.NEW}));break;default:a.a.log("$commitTemplates : unexpected # Error: ",n," # id: ",e)}}))),o.a.isEmpty(t.id2etag)||Object.keys(t.id2etag).forEach((function(e){s.a.dispatch(r(e,{etag:t.id2etag[e],status:d.h.DONE}))})),u.forEach((function(e){i.has(e)||s.a.dispatch(n(e))}))}))}n(359);var F=n(492),H=n(354),B=n(323);n(517);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=function(e){return e===u.y.Note?D().filter((function(e){return e.get("status")!==d.h.DELETED})):w().filter((function(e){return e.get("status")!==d.h.DELETED}))},V=function(e,t){return G(t).filter((function(t){return(t.get("title")||"").trim()===e.trim()}))},z=function(e){I(e),ee()},Z=function(e){C(e),ee()},q=function(e){M(e),ee()},J=function(e){A(e),ee()},$=function(e,t,n){return t?function(e,t,n){var r=X(t,n);return r&&e!==r.get("id")}(e,t,n)?f.a("warning_duplicate_name"):"":f.a("warning_empty_name")},X=function(e,t){return G(t).find((function(t){return(t.get("title")||"").trim()===e.trim()}))},Q=function(){Object(F.b)().get("templateEnabled")&&ee()},ee=function(e){c.x().then((function(e){var t,n=e.data,r=n.taskTemplates,a=n.noteTemplates;null==r?(x(),N()):(j(P(r,w)),N()),null==a?(t=[R(["weekly_review","my_goals_and_the_completion_rate","","the_most_fulfilling_thing_of_this_week","","things_that_prevent_me_from_achieving_my_goals","","conclusion_and_reflection"]),R(["reading_note","book_title_","author","","extract","","takeaways_and_inspirations"]),R(["meeting_note","topic_","time_","attendees","","goals","","expectations_and_milestones","","records","","next_steps"])],_(t),L()):(!function(e){_(P(e,D))}(a),L())})).catch((function(t){a.a.debug("$syncTaskTemplate",t),e&&e(t)}))},te=function(e){var t=W({},e);return t.items&&(t.content=t.content||t.items.join("\n"),t.items=t.items.map((function(e,t){return{id:Object(H.a)(),status:0,title:e,sortOrder:t*B.t}}))),t}},465:function(e,t,n){"use strict";n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return y})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return O}));var r=n(394),a=n.n(r),i=(n(205),n(173),n(208),n(203),n(119),n(61),n(152),n(122),n(120),n(346),n(356),n(50),n(121),n(111),n(174),n(204),n(110),n(160),n(350),n(319)),o=n.n(i),c=n(326),s=n(339),u=n(451),l=(n(331),n(318),n(340)),d=n(374),f=n(452);function p(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}var h=function(e){var t={listOrGroup:{}};for(var n in e)"list"===n||"group"===n?t.listOrGroup[n]=e[n]:t[n]=e[n];return t},m=function(e){var t={conditionType:1,conditionName:(e=e||{}).condition};if("listOrGroup"===e.condition)for(var n in t[e.innerLogic]=[],e.data){var r={conditionName:n};"not"===e.innerLogic?r.or=e.data[n]:r[e.innerLogic]=e.data[n],t[e.innerLogic].push(r)}else t[e.innerLogic]=e.data;return t},g=function(e){if("error"===e)return"error";var t={and:[]};for(var n in e)if(e[n]){var r={or:[],conditionType:1,conditionName:n};"listOrGroup"===n?e[n].list||e[n].group?(e[n].list&&r.or.push({or:e[n].list,conditionName:"list"}),e[n].group&&r.or.push({or:e[n].group,conditionName:"group"})):r=null:r.or=e[n],r&&t.and.push(r)}return t.version=1,t.type=0,t.and.length?JSON.stringify(t):""},v=function(e){c.a.dispatch(function(e){return{type:s.rc,data:e}}(e))},y=function(e,t){var n,r=c.a.getState().customSmartProjects,a=[];r.forEach((function(n){if(u.e(n)){var r=u.b(n);if(!r.tag)return;var i=r.tag.indexOf(e);if(!~i)return;t?r.tag.splice(i,1,t):r.tag.splice(i,1),0===r.tag.length&&(r.tag=void 0),a.push({id:n.get("id"),rule:g(h(r)),isDirty:!0})}else{var c,s=u.f(n),l=!1,d=[];if(s.filterList.filter((function(e){return"tag"===e.condition})).forEach((function(n){var r=n.data,a=r.indexOf(e);-1!==a&&(l=!0,t?r.splice(a,1,t):(r.splice(a,1),0===r.length&&d.push(n)))})),d.forEach((function(e){var t=s.filterList.findIndex((function(t){return t===e}));-1!==t&&(s.filterList.splice(t,1),s.logicList.splice(Math.max(0,t-1),1),0===s.logicList.length&&s.logicList.push("and"))})),l)c=0===s.filterList.length?"":function(e){if("error"===e)return"error";for(var t={},n=e.logicList,r=e.filterList,a=0;a<n.length;a++){var i=n[a],c=n[a-1];if(t[i])t[i].push(m(r[a+1]));else if(0===a)r[1]?t[i]=[r[0],r[1]].map((function(e){return m(e)})):t[i]=[m(r[0])];else{var s={};s[c]=o.a.clone(t[c]),(t={})[i]=[o.a.clone(s)],t[i].push(m(r[a+1]))}}return t=r.find((function(e){return"not"===e.innerLogic}))?Object.assign(t,{version:2,type:1}):Object.assign(t,{version:1,type:1}),JSON.stringify(t)}(s),a.push({id:n.get("id"),rule:c,isDirty:!0})}})),a.length&&c.a.dispatch((n=a,{type:s.U,data:n}))},b=function(e){if(e){var t,n=c.a.getState().customSmartProjects.toJS(),r=n.filter((function(e){return e.isNew})),a=new Map(n.map((function(e){return[e.id,e]})));e.forEach((function(e){var t=a.get(e.id);if(t)if(t.etag===e.etag||t.isDeleted)r.push(t);else if(t.isDirty)if(d.t(e.id)){var n=d.n(e.id),i=Object(f.b)(n,e,t);d.h(e),r.push(i)}else r.push(t);else r.push(e);else r.push(e);t&&t.etag===e.etag?t.isDirty||t.isDeleted?r.push(t):r.push(e):t&&t.etag!==e.etag&&t.isDirty?r.push(t):r.push(e)})),r=r.map((function(e){return k(e)})),c.a.dispatch((t=r,{type:s.wb,data:t}))}},k=function(e){if(e.name){var t=e.name.trim();e.name!==t&&(e.name=t,e.isDirty=!0)}return e},O=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.a.getState().customSmartProjects,n=[],r=[],i=[],t.forEach((function(e){e.get("isDeleted")?i.push(e.get("id")):e.get("isNew")?n.push(u.i(e)):e.get("isDirty")&&r.push(u.i(e))})),!(n.length||r.length||i.length)){e.next=8;break}return e.next=8,l.e({add:n,update:r,delete:i}).then((function(e){var t,n,r=e.data;c.a.dispatch((t=r.id2etag,n=r.id2error,{type:s.o,id2etag:t,id2error:n}))}));case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){p(i,r,a,o,c,"next",e)}function c(e){p(i,r,a,o,c,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}()},466:function(e,t,n){"use strict";n.d(t,"d",(function(){return _})),n.d(t,"e",(function(){return C})),n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return x})),n.d(t,"g",(function(){return P})),n.d(t,"c",(function(){return N})),n.d(t,"f",(function(){return L}));var r=n(394),a=n.n(r),i=(n(73),n(205),n(173),n(203),n(153),n(61),n(152),n(209),n(346),n(472),n(144),n(50),n(121),n(33),n(207),n(111),n(158),n(204),n(110),n(160),n(350),n(320)),o=(n(98),n(326)),c=(n(331),n(340)),s=n(339),u=function(e){return{type:s.Tb,data:e}},l=function(e,t){return{type:s.w,accountId:e,updateBeans:t}},d=function(e){return{type:s.q,localEventUpdateBeans:e}},f=n(334),p=(n(341),n(387),n(318),n(363),n(362),n(157),n(455),n(518)),h=n(397),m=n(365),g=n(336),v=n(324),y=n(335),b=n(443),k=n(444);function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){S(i,r,a,o,c,"next",e)}function c(e){S(i,r,a,o,c,"throw",e)}o(void 0)}))}}var w=function(){return o.a.getState().subscribeAccounts.accounts},D=function(){return o.a.getState().subscribeAccounts.calendars},j=function(){return o.a.getState().subscribeAccounts.events},_=function(){var e=E(a.a.mark((function e(){var t,n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.v)();case 2:t=e.sent,n=t.data,r=n.map((function(e){return p.c(e)})),i=n.reduce((function(e,t){var n=t.id;return e.concat((t.calendars||[]).map((function(e){return e.accountId=n,e})))}),[]),o.a.dispatch((u=r,{type:s.Rb,data:u})),o.a.dispatch((a=i,{type:s.Sb,calendars:a}));case 8:case"end":return e.stop()}var a,u}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=E(a.a.mark((function e(t){var n,r,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.w)();case 2:return n=e.sent,e.next=5,Object(c.G)("feishu");case 5:r=e.sent,(i=n.data).events=i.events.concat(r.data),s=I(i),o.a.dispatch(u(s)),y.a.earliestCalendarEventsFetchDate=null;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(e){var t=e.errorIds,n=void 0===t?[]:t,r=e.events,a=void 0===r?[]:r;M(n);var o=D(),c=j().toList().flatten(!0),s=i.Map();return a.forEach((function(e){var t=e.id,n=e.events,r=c.filter((function(e){return(e.get("originalCalendarId")||e.get("calendarId"))===t})),a=i.Map(r.map((function(e){return[e.get("id"),e]}))),u=o.get(t),l=u.get("accountId"),d=[],f=i.List(),p=new Map;n.forEach((function(e){var n=e.id,r=e.uid,i=e.originalStartTime;if(i){var o=a.get("".concat(n,"@").concat(t));o&&o.get("syncStatus")===m.h.DELETED||(p.has(r)||p.set(r,new Set([])),p.get(r).add(i))}})),n.forEach((function(e){var n=e.id,r=e.uid,i=a.get("".concat(n,"@").concat(t)),o=p.get(r);if(e.timezone||e.isAllDay||(e.timezone=u.get("timeZone")),e.eventId=n,e.calendarId=t,e.accountId=l,e.syncStatus=m.h.DONE,i)if(d.push(i.get("id")),i.get("syncStatus")===m.h.DONE&&i.get("etag")!==e.etag||null==i.get("etag")){i.get("hasMoved")&&(e.calendarId=i.get("calendarId"),e.originalCalendarId=i.get("originalCalendarId"),e.hasMoved=i.get("hasMoved"));var c=h.e(e,{eventDetachDateSet:o});f=f.push(c)}else{var s=h.c(i,o);s=(s=h.a(s)).set("uid",e.uid),f=f.push(s)}else{var g=h.e(e,{eventDetachDateSet:o});f=f.push(g)}}));var g=r.filter((function(e){return!d.includes(e.get("id"))&&(e.get("syncStatus")===m.h.NEW||e.get("hasMoved"))}));f=f.concat(g),s=s.update(l,(function(e){return(e||i.List()).concat(f)}))})),s},M=function(e){var t,n,r,a=w();a.size&&e.length&&(1===e.length?(t="rebind_google_account_tips",n=a.find((function(t){return t.get("id")===e[0]})).get("account")):(t="rebind_multi_google_account_tips",n=e.length),Object(f.x)()||Object(f.n)()||g.w(v.a(t,{s:n})),o.a.dispatch((r=e,{type:s.u,ids:r})))},A=function(){var e=E(a.a.mark((function e(){var t,n,r,s,u,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=w().filter((function(e){return e.get("isValid")})),n=D(),r=j(),s=[],t.forEach((function(e){var t=e.get("id"),a=(e.get("calendarIds")||i.List()).map((function(e){return n.get(e)})).filter((function(e){return i.Map.isMap(e)}));if(a.size){var o=r.get(t)||i.List(),c=[];if(a.forEach((function(e){var t=e.get("id"),n=o.filter((function(e){return(e.get("originalCalendarId")||e.get("calendarId"))===t})),r=n.filter((function(e){return e.get("syncStatus")===m.h.NEW})),a=n.filter((function(e){return e.get("syncStatus")===m.h.UPDATED})),i=n.filter((function(e){return e.get("syncStatus")===m.h.DELETED})),s=n.filter((function(e){return e.get("hasMoved")})),u=r.map((function(e){return h.k(e)})).toArray(),l=a.map((function(e){return h.k(e)})).toArray(),d=i.map((function(e){return e.get("eventId")})).toArray(),f=s.map((function(e){return{destination:e.get("calendarId"),eventId:e.get("eventId")}})).toArray(),p={};u.length&&(p.add=u),l.length&&(p.update=l),d.length&&(p.delete=d),f.length&&(p.move=f),Object.keys(p).length&&(p.calendarId=t,c.push(p))})),c.length){var u={};u.accountId=t,u.calendarEventBeans=c,s.push(u)}}})),s.length){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,c.b({calendarAccountBeans:s});case 9:u=e.sent,l=u.data||[],f={},p=new Map,l.forEach((function(e){var t=e.accountId,a=e.id2error,o=e.id2etag;if(!e.errorCode){var c=r.get(t)||i.List();if(c.size){var s={delete:[],update:[],add:[]},u=c.filter((function(e){return e.get("syncStatus")===m.h.DELETED&&!y.a.toBeDeletedTaskIds.has(e.get("id"))})).map((function(e){return e.get("id")})).toArray();u.length&&(s.delete=u),Object.entries(o).forEach((function(e){var t=O(e,2),n=t[0],r=t[1],a=c.filter((function(e){return(e.get("originalCalendarId")||e.get("calendarId"))===n})).toMap().mapEntries((function(e){var t=O(e,2),n=(t[0],t[1]);return[n.get("eventId"),n]}));Object.entries(r).forEach((function(e){var t=O(e,2),r=t[0],i=t[1],o=a.get(r);if(o&&o.get("syncStatus")!==m.h.DELETED)if(o.get("hasMoved")&&o.get("originalCalendarId")===n){var c=o.merge({id:"".concat(r,"@").concat(o.get("calendarId")),etag:i,syncStatus:m.h.DONE,hasMoved:!1,originalCalendarId:null});s.add.push(c),s.delete.push(o.get("id")),p.set(o.get("id"),c.get("id"))}else{var u={id:o.get("id"),etag:i,syncStatus:m.h.DONE};s.update.push(u)}}))})),Object.entries(a).forEach((function(e){var t=O(e,2),r=t[0],a=t[1],i=c.filter((function(e){return(e.get("originalCalendarId")||e.get("calendarId"))===r})).toMap().mapEntries((function(e){var t=O(e,2),n=(t[0],t[1]);return[n.get("eventId"),n]}));Object.entries(a).forEach((function(e){var t=O(e,2),r=t[0],a=t[1],o=i.get(r);switch(a){case"UNAUTHORIZED":break;case"EXISTED":s.update.push({id:o.get("id"),syncStatus:m.h.UPDATED});break;case"NOT_EXISTED":s.update.push({id:o.get("id"),syncStatus:m.h.NEW});break;case"CALENDAR_NOT_EXISTED":var c=o.get("originalCalendarId");if(!(c!==o.get("calendarId")))break;n.has(c)?s.update.push({id:o.get("id"),calendarId:c,originalCalendarId:null,hasMoved:!1}):s.delete.push(o.get("id"))}}))})),(s.delete.length||s.update.length||s.add.length)&&(f[t]=s)}}})),o.a.dispatch(d(f)),p.size&&(b.g(p),k.g(p));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(e){e=e.set("syncStatus",m.h.NEW),o.a.dispatch(function(e){return{type:s.h,subscribeEvent:e}}(e))},R=function(e,t){var n=j().get(e);if(n)return n.find((function(e){return e.get("id")===t}))},P=function(e,t,n){var r=j().get(e)||i.List(),a=R(e,t),c=[];if(a){var s=a.get("syncStatus");if(s!==m.h.NEW&&s!==m.h.DELETED&&(a=a.set("syncStatus",m.h.UPDATED)),a=a.merge(n),!h.j(a)){var u=a.get("uid"),d=a.get("calendarId");c=r.filter((function(e){return e.get("uid")===u&&e.get("calendarId")===d})).map((function(e){return e.merge(n).set("syncStatus",m.h.UPDATED)})).toArray()}c.push(a),o.a.dispatch(l(e,c))}},N=function(e,t){var n=[],r=R(e,t),a=j().get(e)||i.List();if(r){if(!h.j(r)){var c=r.get("uid"),s=r.get("calendarId");n=a.filter((function(e){return e.get("uid")===c&&e.get("calendarId")===s})).map((function(e){return e.set("syncStatus",m.h.DELETED)})).toArray()}var u=r.set("syncStatus",m.h.DELETED);n.push(u),o.a.dispatch(l(e,n))}},L=function(e,t){var n=[],r=R(e,t),a=j().get(e)||i.List();if(r){if(!h.j(r)){var c=r.get("uid"),s=r.get("calendarId");n=a.filter((function(e){return e.get("uid")===c&&e.get("calendarId")===s})).map((function(e){return e.set("syncStatus",m.h.DONE)})).toArray()}var u=r.set("syncStatus",m.h.DONE);n.push(u),o.a.dispatch(l(e,n))}}},474:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={dueDate:"0",completedTime:"1",defaultVal:"2"}},475:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u}));n(73),n(338);var r=n(510),a=n(345),i=n(591),o=n(376),c=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.h,c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(!e)return"";var u=Object(a.j)(e,r),l=t?Object(i.b)(Object(a.j)(t,r),n):null,d=Object(a.j)().startOf("day"),f=c?s?"A hh:mm":"hh:mm A":"HH:mm",p="";p=d.year()!==u.clone().year()||l&&l.year()!==u.clone().year()?Object(o.a)("ll"):Object(o.a)("MMMD"),!n&&u&&(p+=" "+f);var h=r!==a.h?" (".concat(Object(a.c)(r),")"):"";return l&&!l.isSame(u)?u.format("YYYY-MM-DD")!==l.format("YYYY-MM-DD")?u.format(p)+h+" - "+l.format(p)+h:u.format(p)+" - "+l.format(f)+h:u.format(p)+h},s=function(e,t,n,r){var i="",c=Object(a.k)(e).local().startOf("day"),s=Object(a.j)().startOf("day"),u=c.diff(s,"days"),l=t?n?"A hh:mm":"hh:mm A":"HH:mm";c.year()!==s.year()?i=Object(a.j)(e).format(Object(o.a)("fullDate")+"  "+l):i=u<0?Object(a.j)(e).format(Object(o.a)("monthDate")+" "+l):Object(a.j)().diff(e)<6e4?r:Object(a.j)(e).fromNow();return i},u=function(e){var t=Object(r.a)(e,60,"floor"),n=e%60;return t>0?0===n?"".concat(t,"h"):"".concat(t,"h").concat(n,"m"):"".concat(n,"m")}},476:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var r=n(394),a=n.n(r),i=(n(205),n(61),n(152),n(50),n(121),n(111),n(110),n(350),n(412));function o(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)}))}}function s(){return u.apply(this,arguments)}function u(){return(u=c(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.getVersion();case 2:if(t=e.sent,!(((t?Array.isArray(t)?t[0]:t:0)||0)<3700)){e.next=7;break}return e.next=7,d();case 7:return e.next=9,i.a.setVersion({key:"webapp",version:"web_extension"});case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l=function(){return"web_extension"};function d(){return f.apply(this,arguments)}function f(){return(f=c(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.getTasks();case 2:return t=e.sent,n=t.filter((function(e){return e.status>0})).map((function(e){return e.id})),e.next=6,Promise.all(n.map((function(e){return i.a.deleteTask(e)})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},478:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i}));var r={kanban:"kanban",list:"list"},a={moveOut:"MOVE_OUT",done:"DONE",undone:"UNDONE",create:"CREATE",delete:"DELETE"},i={write:"write",read:"read",comment:"comment"}},479:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));n(173),n(203),n(210),n(145),n(33),n(143),n(112);var r=n(338),a=n.n(r),i=(window,[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448]),o=["","","","","","","","","",""],c=["","","","","","","","","","","",""],s=["","","","","","","","","","","",""],u=["","","","","","","","","","",""],l=["","","","",""],d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],f=["","","","","","","","","","","",""],p=["0101*","0214 ","0308 ","0401 ","0501*","0601 ","0801 ","0910 ","1001*","1101 ","1224 ","1225 "],h=["0520 ","0630 ","1144 "],m=["0101*","0115 ","0505*","0707 ","0715 ","0815*","0909 ","1208 ","1223 ","1224 ","0100*"];function g(e){var t,n=348;for(t=32768;t>8;t>>=1)n+=i[e-1900]&t?1:0;return n+v(e)}function v(e){return y(e)?65536&i[e-1900]?30:29:0}function y(e){return 15&i[e-1900]}function b(e,t){return i[e-1900]&65536>>t?30:29}function k(e){var t,n,r=a()(e),i=new Date(r.get("year"),r.get("month"),r.get("date")),o=0,c=new Date(1900,0,31),s=Math.round((i-c)/864e5);for(this.dayCyl=s+40,this.monCyl=14,t=1900;t<2050&&s>0;t++)s-=o=g(t),this.monCyl+=12;for(s<0&&(s+=o,t--,this.monCyl-=12),this.year=t,this.yearCyl=t-1864,n=y(t),this.isLeap=!1,t=1;t<13&&s>0;t++)n>0&&t===n+1&&!1===this.isLeap?(--t,this.isLeap=!0,o=v(this.year)):o=b(this.year,t),!0===this.isLeap&&t===n+1&&(this.isLeap=!1),s-=o,!1===this.isLeap&&this.monCyl++;0===s&&n>0&&t===n+1&&(this.isLeap?this.isLeap=!1:(this.isLeap=!0,--t,--this.monCyl)),s<0&&(s+=o,--t,--this.monCyl),this.month=t,this.day=s+1}function O(e,t,n,r){for(var a,i,o=0,c=(a=e)%4==0&&(a%100!=0||a%400==0),s=1900;s<e;s++)o+=g(s);for(i=1;i<t;i++)i===y(e)&&(o+=v(e)),o+=b(e,i);c&&r&&(o+=b(e,i)),o+=parseInt(n,10)-1;var u=new Date(1900,0,31,0,6),l=new Date(u.valueOf()+864e5*o);this.year=l.getFullYear(),this.month=l.getMonth(),this.day=l.getDate(),this.isLeap=c}function T(e){return o[e%10]+c[e%12]}var S=["","","","","","","","","","","","","","","","","","","","","","","",""],E=[4,19,3,18,4,19,4,19,4,20,4,20,6,22,6,22,6,22,7,22,6,21,6,21];function w(e,t){return E[t]+Math.floor("211122112122112121222211221122122222212222222221222122222232222222222222222233223232223232222222322222112122112121222211222122222222222222222222322222112122112121222111211122122222212221222221221122122222222222222222222223222232222232222222222222112122112121122111211122122122212221222221221122122222222222222221211122112122212221222211222122222232222232222222222222112122112121111111222222112121112121111111222222111121112121111111211122112122112121122111222212111121111121111111111122112122112121122111211122112122212221222221222211111121111121111111222111111121111111111111111122112121112121111111222111111111111111111111111122111121112121111111221122122222212221222221222111011111111111111111111122111121111121111111211122112122112121122211221111011111101111111111111112111121111121111111211122112122112221222211221111011111101111111110111111111121111111111111111122112121112121122111111011111121111111111111111011111111112111111111111011111111111111111111221111011111101110111110111011011111111111111111221111011011101110111110111011011111101111111111211111001011101110111110110011011111101111111111211111001011001010111110110011011111101111111110211111001011001010111100110011011011101110111110211111001011001010011100110011001011101110111110211111001010001010011000100011001011001010111110111111001010001010011000111111111111111111111111100011001011001010111100111111001010001010000000111111000010000010000000100011001011001010011100110011001011001110111110100011001010001010011000110011001011001010111110111100000010000000000000000011001010001010011000111100000000000000000000000011001010001010000000111000000000000000000000000011001010000010000000".charAt(24*(Math.floor("0123415341536789:;<9:=<>:=1>?012@015@015@015AB78CDE8CD=1FD01GH01GH01IH01IJ0KLMN;LMBEOPDQRST0RUH0RVH0RWH0RWM0XYMNZ[MB\\]PT^_ST`_WH`_WH`_WM`_WM`aYMbc[Mde]Sfe]gfh_gih_Wih_WjhaWjka[jkl[jmn]ope]qph_qrh_sth_W".charCodeAt(e-1900))-48)+t))}function D(e,t,n,r,a,i,o,c,p,h,m){this.sYear=e,this.sMonth=t,this.sMonthName=d[t-1],this.sDay=n,this.week=r,this.lYear=a,this.lMonth=i,this.lDay=o,this.isLeap=c,this.cYear=p,this.cMonth=h,this.cDay=m,this.lunarDay=function(e){var t;switch(e){case 10:t="";break;case 20:t="";break;case 30:t="";break;default:t=l[Math.floor(e/10)],t+=u[e%10]}return t}(o),this.lunarMonth=f[i-1],this.lunarYear=s[(a-1900)%12],this.lunarFestival="",this.solarFestival="",this.solarTerms=""}function j(){return this.solar2lunar=function(e){var t=a()(e),n=t.get("year"),r=t.get("month"),i=t.get("date"),o=u[t.get("day")],c=new k(e),s=c.year,l=c.month,d=c.day,f=c.isLeap,p=t.get("day")+1-(i%7||7);return _(n,r,i,o,s,l,d,f,p=p<0?p+7:p)},this.lunar2solar=function(e,t,n,r){var a=new O(e,t,n,r),i=a.year,o=a.month,c=a.day;return _(i,o,c,u[new Date(i,o,c).getDay()],e,t,n,a.isLeap)},this.daysOfMonth=b,this.leapMonth=y,this}function _(e,t,n,r,a,i,o,c,s){var u,l,d,f,g,v,y={};u=T(t<2?e-1900+36-1:e-1900+36);var k=w(e,2),O=w(e,2*t);return l=T(12*(e-1900)+t+12),1===t&&n>=k&&(u=T(e-1900+36)),n>=O&&(l=T(12*(e-1900)+t+13)),d=T(Date.UTC(e,t,1,0,0,0,0)/864e5+25567+10+n-1),y=new D(e,t+1,n,r,a,i,o,c,u,l,d),f=w(e,2*t)-1,g=w(e,2*t+1)-1,f===n-1&&(y.solarTerms=S[2*t]),g===n-1&&(y.solarTerms=S[2*t+1]),p.forEach((function(e){e.match(/^(\d{2})(\d{2})([\s*])(.+)$/)&&Number(RegExp.$1)===t+1&&Number(RegExp.$2)===n&&(y.solarFestival+=RegExp.$4+" ")})),h.find((function(e){if(e.match(/^(\d{2})(\d)(\d)([\s*])(.+)$/)&&Number(RegExp.$1)===t+1&&(f=Number(RegExp.$2),g=Number(RegExp.$3),f<5)){var r=g-s;if(7*(f-(r<0?0:1))+r+1===n)return y.solarFestival+=RegExp.$5+" ",!0}return!1})),m.find((function(e){return!!(e.match(/^(\d{2})(.{2})([\s*])(.+)$/)&&(f=Number(RegExp.$1),g=Number(RegExp.$2),v=b(a,i),f===i&&g===o||"00"===g&&12===i&&v===o))&&(y.lunarFestival+=RegExp.$4+" ",!0)})),""===y.solarTerms&&(y.lunarFestival+=" "),y}window.CalendarConverter=j},480:function(e,t,n){"use strict";t.a={EXISTED:"EXISTED",DELETED:"DELETED",NOT_EXISTED:"NOT_EXISTED",PROJECT_MOVE_ERROR:"PROJECT_MOVE_ERROR",UNKNOWN:"UNKNOWN",EXCEED_QUOTA:"EXCEED_QUOTA",NO_PROJECT_PERMISSION:"NO_PROJECT_PERMISSION",HABIT_NOT_EXIST:"habit_not_exist",DUPLICATE_HABIT_CHECKIN_EXCEPTION:"DuplicateCheckinException",NO_HABIT_PERMISSION_EXCEPTION:"NoHabitPermissionException",NO_HABIT:"NO_HABIT"}},481:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return v})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return b})),n.d(t,"c",(function(){return k}));n(205),n(208),n(203),n(61),n(152),n(120),n(346),n(50),n(121),n(111),n(174),n(204),n(110),n(160),n(350);var r=n(326),a=(n(331),n(318),n(340)),i=n(349),o=n(382),c=n(348),s=n(432),u=n(327),l=(n(454),n(333)),d=(n(361),n(323),n(374)),f=n(452);function p(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){p(i,r,a,o,c,"next",e)}function c(e){p(i,r,a,o,c,"throw",e)}o(void 0)}))}}var m=function(e){var t=e.serverData,n=void 0===t?[]:t,a=e.isFullBatch,i=void 0!==a&&a;if(n){var c=r.a.getState().projects.projectList.toJS(),u=c.filter((function(e){return e.isNew})),l=new Map(c.map((function(e){return[e.id,e]})));n.forEach((function(e){var t=l.get(e.id);if(t)if(l.delete(e.id),t.isDeleted||t.etag===e.etag)u.push(t);else if(t.isDirty)if(d.v(e.id)){var n=d.p(e.id),r=Object(f.d)(n,e,t);d.j(e),u.push(r)}else u.push(t);else u.push(e);else!i&&e.transferred&&(e.needPullTasks=!0),u.push(e)})),l.forEach((function(e){e.isNew||o.c(e.id,!1)})),u=u.map((function(e){return g(e)})),r.a.dispatch(s.e(u))}},g=function(e){if(e.name){var t=e.name.trim();e.name!==t&&(e.name=t,e.isDirty=!0)}return e},v=function(){var e=h(regeneratorRuntime.mark((function e(){var t,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.a.getState().projects.projectList,n=[],o=[],c=[],t.forEach((function(e){e.get("isDeleted")?c.push(e.get("id")):e.get("isNew")?n.push(Object(i.r)(e)):e.get("isDirty")&&o.push(Object(i.r)(e))})),!(n.length||o.length||c.length)){e.next=8;break}return e.next=8,a.g({add:n,update:o,delete:c}).then((function(e){var t=e.data;r.a.dispatch(s.a(t.id2etag,t.id2error))}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){Object(l.z)()&&Object(l.l)().forEach((function(e){a.W(e).then((function(t){var n=t.data;n&&c.o({serverData:{update:n},projectIdFetchFrom:e}),r.a.dispatch(s.b(e))}))}))},b=function(){r.a.dispatch(s.f());var e=Object(u.l)();r.a.dispatch(s.c(e))},k=function(){var e=h(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Q();case 2:t=e.sent,(n=t.data)&&m({serverData:n});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},482:function(e,t,n){"use strict";n.d(t,"f",(function(){return g})),n.d(t,"e",(function(){return v})),n.d(t,"d",(function(){return E})),n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return D})),n.d(t,"a",(function(){return C}));n(73),n(205),n(173),n(153),n(152),n(209),n(380),n(154);var r=n(396),a=n(320),i=n(422),o=n(397),c=n(342),s=n(352),u=n(519),l=function(e){return function(t,n){return n?n[e]:null}},d=function(e){return e.subscribeCalendars.events},f=function(e){return e.archivedEvents},p=Object(i.b)([function(e){return e.subscribeCalendars.calendars},d,l("calendarId"),l("includeSubscribeShownInCalendar")],(function(e,t,n,r){return n?e.filter((function(e){return e.get("id")===n&&(r?"hidden"!==e.get("show"):"show"===e.get("show"))})).map((function(e){return e.get("id")})):e.filter((function(e){return r?"hidden"!==e.get("show"):"show"===e.get("show")})).map((function(e){return e.get("id")}))})),h=Object(i.b)([p,d],(function(e,t){return e.reduce((function(e,n){return e.concat(t.get(n)||a.List())}),a.List())})),m=Object(i.b)([p,d],(function(e,t){return e.reduce((function(e,n){return e.concat(t.get(n)||a.List())}),a.List()).filter((function(e){return c.k(e)>=0}))})),g=function(){return Object(i.b)([m,f],(function(e){return Object(u.b)(e,!1)}))},v=function(){return h},y=function(e){return e.subscribeAccounts.accounts},b=function(e){return e.subscribeAccounts.calendars},k=Object(r.createSelector)([y,b,l("accountId")],(function(e,t,n){var r;if(n){var i=e.find((function(e){return e.get("id")===n}));r=i&&i.get("calendarIds")||a.List()}else r=e.reduce((function(e,t){return e.concat(t.get("calendarIds")||a.List())}),a.List());return r.map((function(e){return t.get(e)})).filter((function(e){return a.Map.isMap(e)}))})),O=Object(r.createSelector)([function(e){return e.subscribeAccounts.events},l("accountId")],(function(e,t){return(t?e.get(t):e.toList().flatten(!0))||a.List()})),T=Object(i.b)([k,O,l("includeSubscribeShownInCalendar")],(function(e,t,n){var r=e.filter((function(e){return"hidden"!==e.get("show")})).map((function(e){return e.get("id")}));return t.filter((function(e){return r.includes(e.get("calendarId"))&&!o.i(e)}))})),S=Object(i.b)([k,O,l("includeSubscribeShownInCalendar")],(function(e,t,n){var r=e.filter((function(e){return n?"hidden"!==e.get("show"):"show"===e.get("show")})).map((function(e){return e.get("id")}));return t.filter((function(e){return r.includes(e.get("calendarId"))&&!o.i(e)}))}));function E(){return Object(i.b)([S,f],(function(e){return Object(u.b)(e.filter((function(e){return s.i(e.get("startDate"))&&c.k(e)>=0})),!1)}))}function w(){return Object(i.b)([T],(function(e){return e.filter((function(e){return s.i(e.get("startDate"))}))}))}var D=Object(r.createSelector)([y,b],(function(e,t){return e.filter((function(e){return(e.get("calendarIds")||a.List()).some((function(e){var n=t.get(e);return n&&"hidden"!==n.get("show")}))}))})),j=E(),_=g(),C=Object(i.b)([j,_],(function(e,t){return e.concat(t)}))},483:function(e,t,n){"use strict";n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return g}));n(73),n(205),n(203),n(61),n(152),n(161),n(155),n(156),n(346),n(50),n(207),n(111),n(204),n(110);var r=n(329),a=n(359),i=n(602),o=n(364),c=n(383);function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){var t=new Map,n=new Set;e.forEach((function(e){var r;(n.add(e.treeId),e.treeParentId)&&(null==(null===(r=t.get(e.treeParentId))||void 0===r?void 0:r.push(e))&&t.set(e.treeParentId,[e]))}));for(var r=e.filter((function(e){return!e.treeParentId||!n.has(e.treeParentId)})),a=new Set(r.map((function(e){return e.treeId}))),i=s(r),o=function(){var e=i.pop();if(!e)return"continue";var n=t.get(e.treeId);n&&(t.delete(e.treeId),n.forEach((function(t){a.has(t.treeId)||(e.addChild(t),i.push(t),a.add(t.treeId))})))};i.length>0;)o();return t.forEach((function(e){e.forEach((function(e){a.has(e.treeId)||r.push(e)}))})),r}function d(e,t,n){for(var r=s(e).reverse();r.length>0;){var a=r.pop();if(a)if(t(a),!(n&&n(a))&&a.children.length){var i=s(a.children).reverse();r=r.concat(i)}}}function f(e){var t=[];return d(e,(function(e){t.push(e)})),t}function p(e,t){var n=[];return d(e,(function(e){var r=0;e.parent&&(r=e.parent.level+1),e.level=r,t?t(e)&&n.push(e):n.push(e)}),(function(e){return e.collapsed})),n}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return!1},n=[];return d([e],(function(e){!t(e)&&n.push(e)})),n.slice(1)}function m(e,t,n){var i=new c.f,s=l(e.toArray().sort((function(e,t){return a.a.order(e,t)})).map((function(e){return new o.b(i,new o.e(e))}))),u=new Set(Object(r.r)().toArray().map((function(e){return e.get("id")})));return d(s,(function(e){if(e.model&&e.model instanceof o.e&&(n&&n(e),t)){var r,a,i=(null!==(r=null===(a=e.model.task.get("childIds"))||void 0===a?void 0:a.toArray())&&void 0!==r?r:[]).filter((function(e){return!u.has(e)})),s=Math.max(0,i.length-e.children.length);if(s>0){var l=new o.b(new c.i(e.id,s));l.level=e.level+1,e.addChild(l)}}})),s}function g(e){return l(e.toArray().sort((function(e,t){return a.a.order(e,t)})).map((function(e){return new i.b(e)})))}},491:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s}));var r=n(626),a=n.n(r),i=n(900),o=n.n(i);function c(){var e=a()();return e.tlds(o.a),s(e),e}function s(e){e.add("thunderlink:","http:").add("cbthunderlink:","http:").add("bear:","http:")}},492:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return h}));n(152),n(120),n(160);var r=n(326),a=n(643),i=n(340),o=n(331),c=n(318),s=(n(323),n(327),n(372),n(341),n(335),n(333)),u=n(349);var l=function(){return r.a.getState().preference},d=function(){var e=l(),t={};if(e.get("webCalendarViewType")||(t.webCalendarViewType=Object(o.c)(c.K.calendarStatus)||"m"),!e.get("webCalendarViewFilter")){var n=Object(o.c)(c.l.calendar,"json");n&&(t.webCalendarViewFilter=JSON.stringify(n))}if(void 0===e.get("nlpEnabled")){var i=e.get("nlpenabled");t.nlpEnabled="boolean"!=typeof i||i}if(void 0===e.get("removeDate")){var s=e.get("dateKeptInText");t.removeDate="boolean"!=typeof s||s}r.a.dispatch(Object(a.a)(t))},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&r.a.dispatch(Object(a.a)(e));var n=l().toJS();delete n.showDetail,i.nb(n).then((function(e){t.success&&"function"==typeof t.success&&t.success(e)}),(function(e){t.fail&&"function"==typeof t.fail&&t.fail(e)}))},p=function(e){r.a.dispatch(Object(a.h)(e)),f()},h=function(){var e=l().get("defaultProjectId");if(e){var t=s.n(e);if(!t||u.g(t)||u.n(t)){var n=s.j().get("id");r.a.dispatch(Object(a.c)(n)),f()}}}},494:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"b",(function(){return p}));n(73),n(153),n(152),n(209),n(156),n(154);var r=n(320),a=n.n(r),i=n(359),o=n(335),c=n(331),s=n(318);var u=function(e,t){var n=(t?e.push(t):e).groupBy((function(e){return t&&t.get("subTags").includes(e.get("name"))?t.get("name"):e.get("parent")||null})),r=n.get(null);return n=n.delete(null),((null==r?void 0:r.map((function(e){var t,r,o=e.get("name"),c=null!==(t=null===(r=n.get(o))||void 0===r?void 0:r.sort(i.a.tagOrder))&&void 0!==t?t:a.a.List();return n=n.delete(o),e.set("isParent",c.size>0).set("children",c)})))||a.a.List()).concat(n.reduce((function(e,t){return e.concat(t.map((function(e){return e.set("children",a.a.List())})))}),a.a.List())).sort(i.a.tagOrder)},l=function(e){return u(e).reduce((function(e,t){var n=t.get("isParent"),r=t.get("children"),a=e.push(t.delete("isParent").delete("children"));return n?a.concat(r):a}),a.a.List())},d=function(e){return u(e).reduce((function(e,t){var n=t.get("isParent"),r=t.get("children"),a=e.push(t);return n?a.concat(r):a}),a.a.List())},f=function(e,t){o.a.parentTagOpenStatus[e]=t,Object(c.f)(s.K.parentTagOpenStatus,JSON.stringify(o.a.parentTagOpenStatus))},p=function(e){return o.a.parentTagOpenStatus[e]||!1}},497:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return c}));var r=n(339),a=function(e){return{type:r.b,data:e}},i=function(e){return{type:r.ub,data:e}},o=function(e){return{type:r.vb,data:e}},c=function(e,t){return{type:r.lc,updated:e,deleted:t}}},499:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(0);var r=n(319),a=n.n(r);n(205),n(1545),n(321),n(832),n(384),n(152),n(369),n(833);n(157);a.a.uniqueId();var i="showRepeatChangeModal"},500:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(119),n(146);var r=n(476),a=function(){return"web_extension"===Object(r.a)()||window.location.pathname.startsWith("/mini/chrome")}},510:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(215),n(50),n(33),n(143),n(158);function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(0===t)return 0;var a=Math.pow(10,r),i=e*a/t,o=i.toString();if("NaN"===o)return 0;switch(n){case"floor":return Math.floor(i)/a;case"round":return Math.round(i)/a;case"ceil":return Math.ceil(i)/a;default:return i/a}}},511:function(e,t,n){"use strict";n.r(t),n.d(t,"initSentry",(function(){return u})),n.d(t,"captureException",(function(){return l})),n.d(t,"configureScope",(function(){return d}));var r=n(1548),a=n(373),i=n(323),o=n(476),c=n(341),s=function(){return i.n},u=function(){s()&&(r.a({dsn:i.k?"https://0add4cdd922f455682d858e5050ba3ed@s.dida365.com//4":"https://c6fa4e3d155f41e3af0b68353a0cf0c9@s.ticktick.com/2",environment:i.n?"production":i.m?"staging":"dev",release:"webapp@".concat(Object(o.a)()),whitelistUrls:[i.e],beforeSend:function(e){return!e.tags||"apiRequestError"!==e.tags.type||e.extra&&e.extra.errorCode?e:null}}),a.b((function(e){e.setUser({username:c.a("username")}),e.setTag("locale",i.p)})))},l=function(e){s()&&a.a(e)},d=function(e){s()&&a.b(e)}},513:function(e,t,n){"use strict";n.d(t,"g",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"f",(function(){return p}));n(119),n(50),n(121);var r=n(72),a=n.n(r),i=n(323),o=n(342);n(336),n(324),n(334),n(511);function c(e){var t=e.response,n={};return t&&(t.data?n=t.data:t.responseText&&(n=JSON.parse(t.responseText))),n}a.a.defaults.headers.common["X-Device"]=Object(o.f)(),a.a.defaults.headers.common["Content-Type"]="application/json",a.a.defaults.withCredentials=!0,a.a.defaults.timeout=12e4;var s=a.a.create({baseURL:i.j.API_HOST_V3,defaultInterceptors:!0}),u=a.a.create({baseURL:i.j.API_HOST_V2,defaultInterceptors:!0}),l=a.a.create({baseURL:i.j.API_HOST_V1,defaultInterceptors:!0}),d=a.a.create({baseURL:i.j.API_HOST_V2_PUB,defaultInterceptors:!0}),f=a.a.create({baseURL:i.j.API_HOST_V1_PUB,defaultInterceptors:!0}),p=(a.a.create({baseURL:i.j.MOCK_API_HOST_V2,defaultInterceptors:!0}),a.a.create({baseURL:i.j.EX_API_HOST,defaultInterceptors:!0}))},515:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(73),n(153),n(33),n(154),n(62);var r=n(378),a=n(98),i=n.n(a),o=n(386);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;c(this,e),this.rruleOptions=void 0,this.times=0,this.rruleOptions=t,this.times=n}return u(e,[{key:"nDays",get:function(){var e;return null!==(e=this.rruleOptions.interval)&&void 0!==e?e:1}}]),u(e,[{key:"toICalString",value:function(){var e=r.a.optionsToString(this.rruleOptions);return this.times>0&&(e="".concat(e,";").concat("TT_TIMES","=").concat(this.times)),e}},{key:"isWeekNDaysRepeat",value:function(){return this.rruleOptions.freq===r.a.WEEKLY&&this.times>0}},{key:"isEveryNDaysRepeat",value:function(){var e;return(null!==(e=this.rruleOptions.interval)&&void 0!==e?e:1)>1&&this.rruleOptions.freq===r.a.DAILY}}],[{key:"createDefault",value:function(){return new e({freq:r.a.DAILY,interval:1})}},{key:"parseString",value:function(t){if(!t)return this.createDefault();var n=t,a=0;t.includes("TT_TIMES")&&(a=Object(o.c)("TT_TIMES",t,0),n=Object(o.i)("TT_TIMES",t)),n=n.replace("RRULE:","").replace("LUNAR:","");try{return new e(r.a.parseString(n),a)}catch(e){return i.a.error("HabitRule#parseString",e),this.createDefault()}}}]),e}()},516:function(e,t,n){"use strict";n.d(t,"d",(function(){return T})),n.d(t,"c",(function(){return S})),n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return D}));var r=n(394),a=n.n(r),i=(n(205),n(203),n(61),n(152),n(120),n(346),n(50),n(111),n(174),n(204),n(110),n(160),n(350),n(320)),o=n(319),c=n.n(o),s=n(326),u=(n(318),n(331),n(404)),l=n(357),d=n(465),f=n(353),p=n(340),h=n(450),m=(n(361),n(403)),g=n(452),v=n(374);function y(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e){var t=e.deleted,n=e.tags;t>0||c.a.isEmpty(n)||S(n)},S=function(e){var t=Object(i.Set)(f.h());e.forEach((function(e){if(!t.has(e.toLowerCase())){var n=f.a({label:e,name:e.toLowerCase(),isLocal:!0});n&&s.a.dispatch(Object(u.a)(n))}}))},E=function(e){if(e){var t=s.a.getState().tags.toJS(),n=[],r=new Map(e.map((function(e){return[e.name,e]})));t.forEach((function(e){var t=r.get(e.name);if(t){r.delete(e.name);var a=e.status,i=a===m.b.NEW,o=a===m.b.UPDATED;if(i)n.push(k({},e,{status:m.b.UPDATED}));else if(o){var c=e;if(v.w(t.name)){var f=v.q(t.name);c=Object(g.e)(f,t,e),v.l(t)}t.sortOrder=c.sortOrder,t.sortType=c.sortType,t.color=c.color,t.parent=c.parent,t.status=m.b.UPDATED,n.push(t)}else n.push(k({},t,{status:m.b.DONE}))}else{e.status===m.b.NEW||e.status===m.b.INIT?n.push(e):(s.a.dispatch(Object(u.h)(e.name,null)),s.a.dispatch(Object(l.t)(e.name)),d.d(e.name))}})),r.forEach((function(e){n.push(k({},e,{status:m.b.DONE}))})),n=n.map((function(e){return w(e)})),s.a.dispatch(Object(u.g)(n))}},w=function(e){if(e.name){var t=e.name.trim();e.name!==t&&(e.name=t,e.isDirty=!0)}return e},D=function(){var e,t=(e=a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],n=[],(r=s.a.getState().tags.filter((function(e){return e.get("status")===m.b.INIT||e.get("status")===m.b.NEW||e.get("status")===m.b.UPDATED}))).size&&r.forEach((function(e){e.get("status")!==m.b.INIT&&e.get("status")!==m.b.NEW||t.push(Object(h.e)(e)),e.get("status")===m.b.UPDATED&&n.push(Object(h.e)(e))})),!t.length&&!n.length){e.next=7;break}return e.next=7,p.h({add:t,update:n}).then((function(e){var t=e.data;s.a.dispatch(Object(u.b)(t.id2etag))}));case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){y(i,r,a,o,c,"next",e)}function c(e){y(i,r,a,o,c,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}()},517:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return h}));n(73),n(205),n(576),n(153),n(152),n(161),n(578),n(356),n(154);var r=n(329),a=n(354),i=n(330);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return e.map((function(e){var c;if(!Object(i.db)(e))return null;var s=Object(r.n)(e),l=s.get("id"),f=null==s||null===(c=s.get("childIds"))||void 0===c?void 0:c.toArray(),p=t(n,s);return p.id=Object(a.a)(),o.includes(l)?null:((null==f?void 0:f.length)&&(p.children=d(f,t,"",[].concat(u(o),[l])),p.children=p.children.filter((function(e){return e})),0===p.children.length&&delete p.children),p)})).filter((function(e){return e}))}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.map((function(e){var n=e.children,r=c({},e,{level:t>5?5:t});return delete r.children,n?[r].concat(f(n,t+1)):[r]})).flat(5)}function p(e){var t;if(e){var n=c({},e);return(null===(t=n.children)||void 0===t?void 0:t.length)&&(n.children=f(n.children)),n}}function h(e,t){var n=[];return e[0].isRoot=!0,function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return t.map((function(t){var c,s=4===o?null===(c=p(t))||void 0===c?void 0:c.children:t.children,u=i||t.projectId;null===i&&(u=null),null===i&&(t.isTail=!0);var l=r(Object.assign(t,{projectId:u}));if(a&&(l=l.merge({parentId:a})),s&&s.length>0){var d=e(s,n,r,l.get("id"),u,o+1).map((function(e){return e.get("id")}));d.length>0&&(l=l.merge({childIds:d}))}return n.push(l),l}))}(e,n,t),n.reverse()}},518:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return f}));n(153),n(119),n(152),n(156),n(144);var r=n(320),a=n(319),i=n.n(a),o=n(318);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=function(e){return Object(r.fromJS)(i.a.extend({id:"",account:"",site:"",calendarIds:[],type:o.G.subscribeAccount,listType:"non-project",sortType:o.J.dueDate,taskType:"tasks",isValid:!0},e))},d=function(e){e.modifiedTime;var t=e.calendars;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u(e,["modifiedTime","calendars"]),{calendarIds:t.map((function(e){return e.id})).sort()})},f=function(e){return["reader","freeBusyReader"].includes(e.get("accessRole"))}},519:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return f}));n(205),n(61),n(152),n(50),n(207),n(111),n(110);var r=n(326),a=n(606),i=n(330),o=n(342),c=n(344);var s=function e(t){var n,r;switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=function(e){if(e.get("calendarId"))return e.get("accountId")?"google":"url";return""}(t),this.type){case"google":this.calendarKey=t.get("calendarId");break;case"url":this.calendarKey=t.get("calendarName")}this.uid=t.get("uid"),this.title=t.get("title"),this.startDate=null!==(n=c.a.parseUTCString(t.get("startDate")))&&void 0!==n?n:void 0,this.endDate=null!==(r=c.a.parseUTCString(t.get("dueEnd")))&&void 0!==r?r:void 0,this.repeatRule=t.get("repeatFlag")};function u(e){return 0!==l([e]).length}function l(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=r.a.getState().archivedEvents,a=new Set(n.map((function(e){return e.key})));return e.filter((function(e){return t?a.has(d(new s(e))):!a.has(d(new s(e)))}))}function d(e){var t=e.type,n=e.calendarKey,r=e.uid,i=e.title,o=e.startDate,c=e.endDate,s=e.repeatRule,u=1;return r&&(u=Object(a.b)(r)),i&&(u=31*u+Object(a.b)(i)),(u=31*(u=31*(u=31*(u=31*(u=31*u+(null==o?0:Object(a.b)(o)))+(null==c?0:Object(a.b)(c)))+(null==s?0:Object(a.b)(s)))+(null==n?0:Object(a.b)(n)))+Object(a.b)(t))+""}function f(e){var t=u(e),n=Object(i.ab)(e)&&Object(o.k)(e)<0;return t||n?1:0}},540:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return h}));n(73),n(50),n(121),n(33),n(112),n(62),n(174),n(350);var r=n(340),a=n(348),i=n(329),o=n(491);function c(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){c(i,r,a,o,s,"next",e)}function s(e){c(i,r,a,o,s,"throw",e)}o(void 0)}))}}var u={},l=Object(o.b)(),d=function(){var e=s(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.M)(t);case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return","".concat(n.data));case 5:return e.abrupt("return","");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=s(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(t,n,(function(e,t,n){var r=Object(i.n)(e);r&&r.get("title")===t&&Object(a.G)(e,"[".concat(n,"](").concat(t,")"))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=s(regeneratorRuntime.mark((function e(t,n,r){var a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=l.match(n))||1!==a.length){e.next=9;break}if(i=a[0].url,n!==i){e.next=9;break}return u[t]={url:i},e.next=7,d(i);case 7:o=e.sent.replace(/\s/g," "),u[t]&&o.trim().length>0&&r(t,i,o);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),h=function(e){delete u[e]}},541:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));n(356),n(160);var r=n(320),a=n(365),i=n(354),o=n(328),c=function(e){var t;return o.a&&(t=o.a.formatToUtcString()),Object(r.Map)(Object.assign({id:Object(i.a)(),status:a.h.NEW,createdTime:t},e))},s=function(e){var t=e.toJSON();return delete t.status,t}},547:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c}));n(152);var r=n(422),a=n(494),i=function(e){return e.tags},o=Object(r.b)([i],(function(e){return e.groupBy((function(e){return e.get("parent")||null})).map((function(e){return e.map((function(e){return e.get("name")})).toArray()}))})),c=Object(r.b)([i,function(e){return e.draftTag}],a.d)},549:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(327),a=n(328),i=n(318),o=function(e,t,n){var o=e;if(t){var c=n?i.f:r.c(),s=a.a.prefMoment(o).format("YYYY-MM-DDT")+c;o=a.a.prefMoment(s)}return o}},551:function(e,t,n){"use strict";n.d(t,"a",(function(){return D})),n.d(t,"f",(function(){return _})),n.d(t,"d",(function(){return C})),n.d(t,"e",(function(){return I})),n.d(t,"c",(function(){return M})),n.d(t,"b",(function(){return A}));n(73),n(173),n(208),n(203),n(153),n(152),n(154),n(204);var r=n(319),a=n.n(r),i=n(375),o=n(326),c=n(339),s=function(e){return{type:c.gb,key:e}},u=n(357),l=n(348),d=n(466),f=n(329),p=n(405),h=n(334),m=n(335),g=n(355),v=n(330),y=n(442),b=n(412),k=n(429),O=n(382),T=function(e){return e.timeStamp-new Date>3e3},S=function(){var e=j();if(e&&!T(e)){var t=e.type,n=e.data;switch(t){case"deleteTask":var r,a=n.taskIds,c=n.undoTaskIds;a.forEach((function(e){var t=Object(f.n)(e);if(t){var a=n.assignee[e];a&&(t=t.set("assignee",a)),Object(v.cb)(t)?(Object(l.s)(t),m.a.toBeDeletedTaskIds.delete(r)):Object(l.t)(t)}})),Object(g.a)(e.key);var k=[];c&&c.length>0&&(k=c,r=c[0]),(r||k.length>0)&&(o.a.dispatch(Object(u.w)(r,k)),r&&o.a.dispatch(Object(i.d)("/".concat(h.l(),"/").concat(r))));break;case"deleteTaskIncludeRepeat":var S,E=n.taskIds,w=n.repeatTaskIds,D=n.undoTaskIds,_=n.oldPropertyMap;E.forEach((function(e){var t=Object(f.n)(e);if(t){var r=n.assignee[e];r&&(t=t.set("assignee",r)),Object(v.cb)(t)?(Object(l.s)(t),m.a.toBeDeletedTaskIds.delete(S)):Object(l.t)(t)}})),w.length>0&&(o.a.dispatch(Object(u.L)(_)),O.r(w)),Object(g.a)(e.key);var C=[];D&&D.length>0&&(C=D,S=D[0]),(S||C.length>0)&&(o.a.dispatch(Object(u.w)(S,C)),S&&o.a.dispatch(Object(i.d)("/".concat(h.l(),"/").concat(S))));break;case"deleteEvent":var I=n.eventId,M=Object(p.c)(I);M&&(d.f(M.get("accountId"),M.get("id")),m.a.toBeDeletedTaskIds.delete(I),Object(g.a)(e.key),h.B()||(o.a.dispatch(Object(u.w)(I,[I])),o.a.dispatch(Object(i.d)("/".concat(h.l(),"/").concat(I)))));break;case"deleteSubTask":var A=n.taskId,x=n.item,R=n.deletedFromList,P=[x],N=x.id;o.a.dispatch(Object(u.C)(A,P)),Object(g.a)(e.key),R&&(o.a.dispatch(Object(u.x)(N)),o.a.dispatch(Object(i.d)("/".concat(h.l(),"/").concat(A,"/").concat(N))));break;case"completeTask":var L=n.taskIds,U=n.oldWillRepeatTasks,F=n.needDeleteAfterResetIds,H=U.toArray().map((function(e){return e.get("id")})),B=[],Y=[];L.forEach((function(e){var t=Object(f.n)(e);if(t)if(H.includes(e)){var n=U.toArray().find((function(t){return t.get("id")===e})),r=Object(y.h)(t,n);r&&(B.push(r),Y.push(r.id))}else{var a=Object(y.k)(t);a&&(B.push(a),Y.push(a.id))}})),F.forEach((function(e){b.a.deleteTask(e)})),o.a.dispatch(Object(u.j)(F)),o.a.dispatch(Object(u.l)(B)),f.o(Y).forEach((function(e){b.a.setTask(e)})),Object(g.a)(e.key);break;case"completeCheckItem":var W=n.taskId,K=n.subtaskId,G=Object(f.n)(W);Object(l.D)(G,K),Object(g.a)(e.key)}o.a.dispatch(s(e.key))}},E=function(){return o.a.getState().history},w=function(){var e=E().past;if(e.size)return e.last()},D=function(e){var t=w();if(!t||T(t))return!1;var n=t.type,r=e.get("id"),a=t.data;return!("completeTask"!==n||!a.originIds||!a.originIds.includes(r))},j=function(){return o.a.getState().history.present},_=function(){o.a.dispatch({type:c.kc}),S()},C=function(e){return e.key=a.a.uniqueId("history_"),e.timeStamp=(new Date).valueOf(),o.a.dispatch(function(e){return{type:c.bb,data:e}}(e)),e.key},I=function(e){o.a.dispatch(s(e))},M=function(e,t){var n=E().past.find((function(t){return t.key===e})).data,r=!0;if("completeTask"===t){var a=n.taskIds,i=n.needDeleteAfterResetIds;i.length>0?i.forEach((function(e){Object(f.n)(e).get("status")===k.a.Uncompleted&&(r=!1)})):a.forEach((function(e){Object(f.n)(e).get("status")===k.a.Uncompleted&&(r=!1)}))}if("completeCheckItem"===t){var o=n.taskId,c=n.subtaskId,s=Object(f.n)(o).get("items");s?s.forEach((function(e){e.get("id")===c&&1!==e.get("status")&&(r=!1)})):r=!1}r&&A(e)},A=function(e){var t=E().past.findIndex((function(t){return t.key===e}));-1!==t&&(o.a.dispatch(function(e){return{type:c.T,index:e}}(t)),S())}},591:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c}));var r=n(338),a=n.n(r),i=function(e,t,n){return n?e:t&&e.isSame(e.clone().startOf("day"))?e.subtract(1,"d"):e},o=function(){return a.a.locale()},c=function(e){a.a.locale(e)}},596:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(73),n(153),n(155),n(50),n(33),n(143);var r=n(327),a=n(418);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dark={},this.light={}},s={light:{text:"#ffffff"},dark:{text:"#000000"},isLight:function(e,t,n){return n>.6&&t<.1},isDark:function(e,t,n){return n<.3},isGray:function(e,t,n){return t<.1},toColorPart:function(e){e>255&&(e=255);var t=e.toString(16);return e<16?"0"+t:t},PARSE_COLOR_RGB_RE:/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i,PARSE_COLOR_HEX_RE:/^\#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,parseColor:function(e){var t,n="#";if(t=this.PARSE_COLOR_RGB_RE.exec(e)){for(var r=1;r<=3;r++)n+=this.toColorPart(Math.max(0,Math.min(255,parseInt(t[r],0))));return n}if(t=this.PARSE_COLOR_HEX_RE.exec(e)){if(3==t[1].length){for(var a=0;a<3;a++)n+=t[1].charAt(a)+t[1].charAt(a);return n}return"#"+t[1]}return"#000000"},expandColor:function(e){var t=this.parseColor(e);return t?[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16)]:[0,0,0]},convertHsvToHex:function(e,t,n){var r=1===e?0:Math.floor(6*e),a=1===e?0:6*e-r,i=n*(1-t),o=n*(1-t*a),c=n*(1-t*(1-a)),s=[[n,c,i],[o,n,i],[i,n,c],[i,o,n],[c,i,n],[n,i,o]],u=Math.round(255*s[r][0]),l=Math.round(255*s[r][1]),d=Math.round(255*s[r][2]);return this.parseColor("rgb("+u+","+l+","+d+")")},convertHexToHsv:function(e){var t,n=this.expandColor(e),r=Math.max(Math.max(n[0],n[1]),n[2]),a=Math.min(Math.min(n[0],n[1]),n[2]),i=0===r?0:1-a/r,o=r/255;return(t=r==a?0:r==n[0]?(n[1]-n[2])/(r-a)/6:r==n[1]?(n[2]-n[0])/(r-a)/6+1/3:(n[0]-n[1])/(r-a)/6+2/3)<0?t+=1:t>1&&(t-=1),[t,i,o]},combineColor:function(e,t){var n=this.expandColor(e).concat([t/100]),i=this.expandColor(Object(r.v)()?a.darkBackGroundColor:a.lightBackGroundColor).concat([1]);return this.mixColor(n,i)},combineBgColor:function(e,t){var n=e.color,r=e.opacity,a=t.color,i=t.opacity,o=this.expandColor(n).concat([r/100]),c=this.expandColor(a).concat([i/100]);return this.mixColor(o,c)},mixColor:function(e,t){var n=[];return n[3]=1-(1-e[3])*(1-t[3]),n[0]=Math.round(e[0]*e[3]/n[3]+t[0]*t[3]*(1-e[3])/n[3]),n[1]=Math.round(e[1]*e[3]/n[3]+t[1]*t[3]*(1-e[3])/n[3]),n[2]=Math.round(e[2]*e[3]/n[3]+t[2]*t[3]*(1-e[3])/n[3]),this.parseColor("rgb("+n[0]+","+n[1]+","+n[2]+")")}};function u(e,t){var n=Object(r.v)()?"#ffffff":"#000000",o=["transparent",""].includes(e)?Object(r.v)()?a.darkBackGroundColor:a.lightBackGroundColor:s.combineColor(e,t);try{if(c[Object(r.v)()?"dark":"light"][o])return c[Object(r.v)()?"dark":"light"][o];var u=i(s.convertHexToHsv(o),3),l=u[0],d=u[1],f=u[2];if(s.isLight(l,d,f))n=s.dark.text;else if(s.isDark(l,d,f))n=s.light.text;else{var p=s.isGray(l,d,f)?0:Math.min(d,.2);if(Object(r.v)())n=s.convertHsvToHex(l,p,1);else{var h=f-.35;n=s.convertHsvToHex(l,p,Math.min(h,.2))}}c[Object(r.v)()?"dark":"light"][o]=n}catch(e){}return n}},598:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),a=(n(157),function(e){var t=Object(r.useRef)(e);return Object(r.useEffect)((function(){t.current=e}),[e]),t.current})},599:function(e,t,n){"use strict";n.d(t,"n",(function(){return a})),n.d(t,"o",(function(){return i})),n.d(t,"p",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"v",(function(){return s})),n.d(t,"q",(function(){return u})),n.d(t,"w",(function(){return l})),n.d(t,"z",(function(){return d})),n.d(t,"u",(function(){return f})),n.d(t,"i",(function(){return p})),n.d(t,"m",(function(){return h})),n.d(t,"a",(function(){return m})),n.d(t,"d",(function(){return g})),n.d(t,"r",(function(){return v})),n.d(t,"x",(function(){return y})),n.d(t,"s",(function(){return b})),n.d(t,"f",(function(){return k})),n.d(t,"j",(function(){return O})),n.d(t,"e",(function(){return T})),n.d(t,"y",(function(){return S})),n.d(t,"t",(function(){return E})),n.d(t,"h",(function(){return w})),n.d(t,"k",(function(){return D})),n.d(t,"l",(function(){return j})),n.d(t,"c",(function(){return _})),n.d(t,"g",(function(){return C}));var r=n(368);function a(e,t){return{type:r.e.SET_LAST_CHECKIN_STAMP,payload:{habitId:e,lastCheckinStamp:t}}}function i(e,t){return{type:r.e.SET_LAST_RECORD_STAMP,payload:{habitId:e,lastStamp:t}}}function o(e){return{type:r.e.SET_PREFERENCE,payload:{preference:e}}}function c(e){return{type:r.e.ADD_HABITS,payload:{habits:e}}}function s(e,t,n,a){return{type:r.e.UPDATE_HABIT_TOTAL_CHECKINS_AND_STREAKS,payload:{habitId:e,totalCheckins:t,maxStreak:n,currentStreak:a}}}function u(e,t){return{type:r.e.UPDATE_HABIT,payload:{habitId:e,habit:t}}}function l(e){return{type:r.e.UPDATE_HABITS,payload:{habits:e}}}function d(e){return{type:r.e.UPDATE_SYNC_HABITS,payload:{habits:e}}}function f(e,t){return{type:r.e.UPDATE_HABIT_SYNC_STATUS,payload:{habitId:e,syncStatus:t}}}function p(e){return{type:r.e.REMOVE_HABITS,payload:{habitIds:e}}}function h(e){return{type:r.e.SET_HABIT_CHECKINS,payload:{checkins:e}}}function m(e,t){return{type:r.e.ADD_HABIT_CHECKIN,payload:{habitId:e,checkin:t}}}function g(e){return{type:r.e.ADD_SYNC_HABIT_CHECKIN,payload:{syncCheckins:e}}}function v(e,t){return{type:r.e.UPDATE_HABIT_CHECKIN,payload:{habitId:e,checkin:t}}}function y(e){return{type:r.e.UPDATE_SYNC_HABIT_CHECKIN,payload:{syncCheckins:e}}}function b(e,t,n){return{type:r.e.UPDATE_HABIT_CHECKIN_SYNC_STATUS,payload:{habitId:e,checkinId:t,syncStatus:n}}}function k(e,t){return{type:r.e.REMOVE_HABIT_CHECKIN,payload:{habitId:e,checkinId:t}}}function O(e){return{type:r.e.REMOVE_SYNC_HABIT_CHECKIN,payload:{syncCheckins:e}}}function T(e){return{type:r.e.ADD_SYNC_HABIT_RECORD,payload:{syncRecords:e}}}function S(e){return{type:r.e.UPDATE_SYNC_HABIT_RECORD,payload:{syncRecords:e}}}function E(e,t,n){return{type:r.e.UPDATE_HABIT_RECORD_SYNC_STATUS,payload:{habitId:e,recordId:t,syncStatus:n}}}function w(e){return{type:r.e.REMOVE_HABIT_RECORD,payload:{record:e}}}function D(e){return{type:r.e.REMOVE_SYNC_HABIT_RECORD,payload:{syncRecords:e}}}function j(){return{type:r.e.RESET_SKIP_HABITS,payload:{}}}function _(e){return{type:r.e.ADD_SKIP_HABIT,payload:{habitId:e}}}function C(e){return{type:r.e.REMOVE_HABIT_CHECKINS_AND_RECORDS,payload:{habitId:e}}}},600:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(153),n(61),n(50),n(121),n(154),n(111),n(110),n(350);var r,a=n(319),i=n.n(a),o=n(338),c=n.n(o),s=n(98),u=n.n(s),l=n(379),d=n(386),f=n(157);function p(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){p(i,r,a,o,c,"next",e)}function c(e){p(i,r,a,o,c,"throw",e)}o(void 0)}))}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e[e.fullSync=0]="fullSync",e[e.regularSync=1]="regularSync",e[e.singleSync=2]="singleSync",e[e.checkinActionSync=3]="checkinActionSync",e[e.calSync=4]="calSync",e[e.manualSync=5]="manualSync",e[e.habitActionSync=6]="habitActionSync",e[e.preferencePushSync=7]="preferencePushSync",e[e.regularSyncWithPref=8]="regularSyncWithPref"}(r||(r={}));var g=[r.fullSync,r.regularSyncWithPref,r.manualSync],v=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.syncing=void 0,this.doSync=void 0,this.doSyncImmediately=void 0,this.syncing=!1,this.doSync=i.a.debounce(this.internalDoSync,1e3),this.doSyncImmediately=this.internalDoSync}var t,n,a,o,s,p,v,y,b,k,O;return t=e,(n=[{key:"doSyncBegin",value:function(){this.syncing=!0}},{key:"doSyncFinish",value:function(){this.syncing=!1}},{key:"tryToDoFullSync",value:(O=h(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(l.c)(),!i.a.isEmpty(t)){e.next=9;break}return e.next=4,Object(l.A)();case 4:return e.next=6,Object(l.x)();case 6:return Object(l.I)(),e.next=9,Object(l.G)();case 9:case"end":return e.stop()}}),e)}))),function(){return O.apply(this,arguments)})},{key:"doManualSync",value:(k=h(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(l.c)(),!i.a.isEmpty(n)){e.next=5;break}this.tryToDoFullSync(),e.next=17;break;case 5:return e.next=7,Object(l.A)();case 7:return e.next=9,Promise.all([Object(l.B)(),Object(l.H)()]);case 9:if(!t){e.next=13;break}return e.next=12,Object(l.C)(t);case 12:Object(l.M)(t);case 13:return e.next=15,Object(l.G)();case 15:return e.next=17,Object(l.E)();case 17:case"end":return e.stop()}}),e,this)}))),function(e){return k.apply(this,arguments)})},{key:"doRegularSync",value:(b=h(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(l.c)(),!i.a.isEmpty(t)){e.next=5;break}this.tryToDoFullSync(),e.next=13;break;case 5:return e.next=7,Object(l.A)();case 7:return e.next=9,Promise.all([Object(l.B)(),Object(l.H)()]);case 9:return e.next=11,Object(l.G)();case 11:return e.next=13,Object(l.E)();case 13:f.a.dispatch("habitSyncFinished");case 14:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"doSingleSync",value:(y=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.A)();case 2:return e.next=4,Promise.all([Object(l.C)(t),Object(l.D)(t)]);case 4:return Object(l.M)(t),e.next=7,Object(l.G)();case 7:return e.next=9,Object(l.E)();case 9:case"end":return e.stop()}}),e)}))),function(e){return y.apply(this,arguments)})},{key:"doHabitActionSync",value:(v=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.A)();case 2:return e.next=4,Object(l.B)(t);case 4:return Object(l.M)(t),e.next=7,Object(l.G)();case 7:return e.next=9,Object(l.E)();case 9:case"end":return e.stop()}}),e)}))),function(e){return v.apply(this,arguments)})},{key:"doCheckinActionSync",value:(p=h(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(d.a)(c()(new Date).subtract(1,"days").toDate()),e.next=3,Object(l.A)();case 3:return e.next=5,Object(l.y)([t],null!=n?n:r);case 5:return e.next=7,Object(l.G)();case 7:return e.next=9,Object(l.E)();case 9:case"end":return e.stop()}}),e)}))),function(e,t){return p.apply(this,arguments)})},{key:"doCalSync",value:(s=h(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(l.h)(),e.next=3,Object(l.A)();case 3:return e.next=5,Object(l.y)(n,t);case 5:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})},{key:"internalDoSync",value:(o=h(regeneratorRuntime.mark((function e(t,n){var a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.includes(t)){e.next=4;break}return e.next=3,Object(l.z)();case 3:Object(l.K)();case 4:if(Object(l.u)()){e.next=6;break}return e.abrupt("return");case 6:if(!this.syncing){e.next=8;break}return e.abrupt("return");case 8:if(this.doSyncBegin(),e.prev=9,!n){e.next=41;break}a=n.habitId,i=n.afterStamp,e.t0=t,e.next=e.t0===r.singleSync?15:e.t0===r.checkinActionSync?20:e.t0===r.calSync?25:e.t0===r.manualSync?30:e.t0===r.habitActionSync?33:38;break;case 15:if(e.t1=a,!e.t1){e.next=19;break}return e.next=19,this.doSingleSync(a);case 19:return e.abrupt("break",39);case 20:if(e.t2=a,!e.t2){e.next=24;break}return e.next=24,this.doCheckinActionSync(a,i);case 24:return e.abrupt("break",39);case 25:if(e.t3=i,!e.t3){e.next=29;break}return e.next=29,this.doCalSync(i);case 29:return e.abrupt("break",39);case 30:return e.next=32,this.doManualSync(a);case 32:return e.abrupt("break",39);case 33:if(e.t4=a,!e.t4){e.next=37;break}return e.next=37,this.doHabitActionSync(a);case 37:case 38:return e.abrupt("break",39);case 39:e.next=54;break;case 41:e.t5=t,e.next=e.t5===r.regularSync||e.t5===r.regularSyncWithPref?44:e.t5===r.fullSync?47:e.t5===r.manualSync?50:53;break;case 44:return e.next=46,this.doRegularSync();case 46:return e.abrupt("break",54);case 47:return e.next=49,this.tryToDoFullSync();case 49:return e.abrupt("break",54);case 50:return e.next=52,this.doManualSync();case 52:case 53:return e.abrupt("break",54);case 54:this.doSyncFinish(),e.next=61;break;case 57:e.prev=57,e.t6=e.catch(9),u.a.error(e.t6),this.doSyncFinish();case 61:case"end":return e.stop()}}),e,this,[[9,57]])}))),function(e,t){return o.apply(this,arguments)})}])&&m(t.prototype,n),a&&m(t,a),e}());t.b=v},601:function(e,t,n){"use strict";n.d(t,"c",(function(){return y})),n.d(t,"b",(function(){return b})),n.d(t,"e",(function(){return k})),n.d(t,"d",(function(){return O})),n.d(t,"a",(function(){return T})),n.d(t,"f",(function(){return E}));n(205),n(173),n(203),n(152),n(50),n(121),n(204),n(350);var r=n(320),a=n(326),i=n(333),o=n(334),c=n(353),s=n(443),u=n(364),l=n(328),d=n(355),f=n(324),p=n(330),h=n(329),m=n(382),g=n(342);function v(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}var y=function(){return a.a.getState().orderByDate},b=function(e){return y().filter((function(t){return(null==t?void 0:t.get("projectId"))===e}))||Object(r.List)()},k=function(e,t){var n=y().find((function(n){return n.get("date")===e&&n.get("projectId")===t}));return n?n.get("orders"):Object(r.List)()},O=function(){return o.C()?"#"+c.g():Object(i.e)()},T=function(e,t,n,r,a){var i=O();k(r,i).size&&null!=i&&s.a([e],t,n,r,i,a)},S=function(e,t){var n=[],r=l.a.prefMoment(t);if(e.forEach((function(e){var t,a=e.id,i=e.isSubTask,o=e.taskId;if(t=i?h.B(o,a):h.n(a)){i&&(t=t.set("isSubTaskModel",!0).set("taskId",o));var c=r>=l.a.prefMoment(t.get("startDate")).startOf("day")&&r<=l.a.prefMoment(p.p(t)).startOf("day"),s=t.get("status"),u=p.hb(t);(!c&&!u||s>0)&&n.push(t),!c&&u&&d.b({text:f.a("edit_schedule_date_limit")})}})),n.length){var a=g.j(t);m.f(n,a)}},E=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n,r,a,i,c,l){var d,f,p,m,g,v,y,b,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=O(),p=r[n],null!=f){e.next=4;break}return e.abrupt("return");case 4:if(!((null===(d=t[0])||void 0===d?void 0:d.model)instanceof u.a)){e.next=10;break}s.a(t,n,r,a,f,i),m=t[0].model.originModel,S([{id:m.get("id"),taskId:m.get("taskId"),isSubTask:!0}],a),e.next=23;break;case 10:if(g=h.N(t),v=g.list,y=g.map,b=h.M(v,y),k=!!c,e.t0=k&&r[n]&&c,!e.t0){e.next=17;break}return e.next=17,h.db(b,c,o.h()+r[n].section.id);case 17:if(h.T(v,y,n,r,i,!0,l),e.t1=!k&&r[n],!e.t1){e.next=22;break}return e.next=22,h.gb(b,o.h()+r[n].section.id);case 22:a&&(s.a(b,n,r,a,f,i),null!=p&&p.level+i!==0||S(b.map((function(e){return{id:e.id,taskId:void 0,isSubTask:!1}})),a));case 23:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){v(i,r,a,o,c,"next",e)}function c(e){v(i,r,a,o,c,"throw",e)}o(void 0)}))});return function(e,n,r,a,i,o,c){return t.apply(this,arguments)}}()},602:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p}));n(73);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var a=s(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t,n){u(this,e),this.children=[],this.parent=void 0,this.treeParentId=void 0,this.treeId=void 0,this.treeId=t,this.treeParentId=n}var t,n,r;return t=e,(n=[{key:"addChild",value:function(e){e.parent=this,this.children.push(e)}}])&&l(t.prototype,n),r&&l(t,r),e}(),f=function(e){a(n,e);var t=o(n);function n(){var e;u(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).collapsed=!1,e.level=0,e}return n}(d),p=function(e){a(n,e);var t=o(n);function n(e){var r;return u(this,n),(r=t.call(this,"".concat(e.get("projectId"),"/").concat(e.get("id")),e.get("parentId")?"".concat(e.get("projectId"),"/").concat(e.get("parentId")):void 0)).level=0,r.task=void 0,r.id=void 0,r.task=e,r.id=e.get("id"),r}return n}(d)},603:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return v})),n.d(t,"f",(function(){return b}));n(205),n(173),n(152),n(50),n(121),n(160),n(350);var r=n(320),a=n(326),i=(n(318),n(331),n(353)),o=n(444),c=n(333),s=n(334),u=n(382),l=n(329),d=n(330);function f(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}var p=function(){return a.a.getState().orderByPriority},h=function(e){return p().filter((function(t){return(null==t?void 0:t.get("projectId"))===e}))||Object(r.List)()},m=function(e,t){var n=p().toArray().find((function(n){return n.get("priority")===e&&n.get("projectId")===t}));return n?n.get("orders"):Object(r.List)()},g=function(){var e;return null!==(e=s.C()?"#"+i.g():Object(c.f)())&&void 0!==e?e:void 0},v=function(e,t,n,r,a){var i=g();null!=i&&(m("".concat(r),i).size&&o.a([e],t,n,r,i,a))},y=function(e,t){var n=e.map((function(e){var t=e.get("id"),n=d.kb(e),r=e.get("taskId");return n?r:t})),r=parseInt("".concat(t),10),a=l.o(n);u.h(a,r)},b=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n,r,a,i,c,u){var d,f,p,h,m,v,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(d=g())){e.next=3;break}return e.abrupt("return");case 3:if(f=r[n],p=l.N(t),h=p.list,m=p.map,v=l.M(h,m),b=!!c,e.t0=b&&r[n]&&c,!e.t0){e.next=11;break}return e.next=11,l.db(v,c,s.h()+r[n].section.id);case 11:if(l.T(h,m,n,r,i,!0,u),e.t1=!b&&r[n],!e.t1){e.next=16;break}return e.next=16,l.gb(v,s.h()+r[n].section.id);case 16:o.a(v,n,r,a,d,i),null!=f&&f.level+i!==0||y(v.map((function(e){var t;return null===(t=e.model)||void 0===t?void 0:t.originModel})),a);case 18:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){f(i,r,a,o,c,"next",e)}function c(e){f(i,r,a,o,c,"throw",e)}o(void 0)}))});return function(e,n,r,a,i,o,c){return t.apply(this,arguments)}}()},604:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n(368),a=function(e){return{type:r.d.SET_GROUPS,data:e}},i=function(e){return{type:r.d.SET_GROUP_ORDERS,data:e}},o=function(e,t){return{type:r.d.AFTER_COMMIT_GROUPS,id2etag:e,id2error:t}}},605:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));n(61),n(50),n(207),n(111),n(110);var r=new Set;function a(e){return r.has(e)}function i(e){r.add(e)}},606:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));n(221);var r=n(98),a=n.n(r);n(829),n(393);function i(e){if("string"==typeof e){for(var t=0,n=0;n<e.length;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}return i(e.getTime()+"")}function o(e){try{var t=document.createElement("textarea");t.innerHTML=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.remove()}catch(e){a.a.error("copyToClipboard error: ",e)}}},607:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(414),n(203),n(366),n(61),n(50),n(207),n(111),n(204),n(110);function r(e,t){var n=new Set(e);return t.forEach((function(e){n.delete(e)})),n}},636:function(e,t,n){"use strict";e.exports=function(e){function t(e,t){var n,r,a,i,o,c=[],s=t.length;for(n=0;n<s;n++)58===(a=t[n]).marker&&-1!==a.end&&(i=t[a.end],(o=e.tokens[a.token]).type="mark_open",o.tag="mark",o.nesting=1,o.markup="::",o.content="",(o=e.tokens[i.token]).type="mark_close",o.tag="mark",o.nesting=-1,o.markup="::",o.content="","text"===e.tokens[i.token-1].type&&":"===e.tokens[i.token-1].content&&c.push(i.token-1));for(;c.length;){for(r=(n=c.pop())+1;r<e.tokens.length&&"mark_close"===e.tokens[r].type;)r++;n!==--r&&(o=e.tokens[r],e.tokens[r]=e.tokens[n],e.tokens[n]=o)}}e.inline.ruler.before("emphasis","mark",(function(e,t){var n,r,a,i,o=e.pos,c=e.src.charCodeAt(o);if(t)return!1;if(58!==c)return!1;if(a=(r=e.scanDelims(e.pos,!0)).length,i=String.fromCharCode(c),a<2)return!1;for(a%2&&(e.push("text","",0).content=i,a--),n=0;n<a;n+=2)e.push("text","",0).content=i+i,(r.can_open||r.can_close)&&e.delimiters.push({marker:c,length:0,jump:n,token:e.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0})),e.inline.ruler2.before("emphasis","mark",(function(e){var n,r=e.tokens_meta,a=(e.tokens_meta||[]).length;for(t(e,e.delimiters),n=0;n<a;n++)r[n]&&r[n].delimiters&&t(e,r[n].delimiters)}))}},637:function(e,t,n){"use strict";e.exports=function(e){function t(e,t){var n,r,a,i,o,c;for(n=t.length-1;n>=0;n--)126===(r=t[n]).marker&&-1!==r.end&&(a=t[r.end],c=n>0&&t[n-1].end===r.end+1&&t[n-1].token===r.token-1&&t[r.end+1].token===a.token+1&&t[n-1].marker===r.marker,o=String.fromCharCode(r.marker),(i=e.tokens[r.token]).type=c?"s_open":"underline_open",i.tag=c?"s":"underline",i.nesting=1,i.markup=c?o+o:o,i.content="",(i=e.tokens[a.token]).type=c?"s_close":"underline_close",i.tag=c?"s":"underline",i.nesting=-1,i.markup=c?o+o:o,i.content="",c&&(e.tokens[t[n-1].token].content="",e.tokens[t[r.end+1].token].content="",n--))}e.inline.ruler.before("emphasis","underline",(function(e,t){var n,r,a=e.pos,i=e.src.charCodeAt(a);if(t)return!1;if(126!==i)return!1;for(r=e.scanDelims(e.pos,!0),n=0;n<r.length;n++)e.push("text","",0).content=String.fromCharCode(i),e.delimiters.push({marker:i,length:r.length,jump:n,token:e.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0})),e.inline.ruler2.before("emphasis","underline",(function(e){var n,r=e.tokens_meta,a=(e.tokens_meta||[]).length;for(t(e,e.delimiters),n=0;n<a;n++)r[n]&&r[n].delimiters&&t(e,r[n].delimiters)}))}},643:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"g",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"h",(function(){return c})),n.d(t,"f",(function(){return s})),n.d(t,"j",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"i",(function(){return f})),n.d(t,"k",(function(){return p})),n.d(t,"c",(function(){return h}));var r=n(368),a=function(e){return{type:r.f.MERGE_PREFERENCE,data:e}},i=function(e){return{type:r.f.SET_SMART_PROJECTS,data:e}},o=function(e){return{type:r.f.SET_DEFAULT_AD_REMINDERS,data:e}},c=function(e){return{type:r.f.SET_THEME,data:e}},s=function(e){return{type:r.f.SET_INBOX_COLOR,data:e}},u=function(){return{type:r.f.TOGGLE_SHOWCHECKLIST}},l=function(e){return{type:r.f.SET_DEFAULT_TIME_MODE,data:e}},d=function(e){return{type:r.f.SET_DEFAULT_TIME_DURATION,data:e}},f=function(e){return{type:r.f.SET_TIMEZONE_OPTION_ENABLE,data:e}},p=function(){return{type:r.f.TOGGLE_SHOW_DETAIL}},h=function(e){return{type:r.f.SET_DEFAULT_PROJECT_ID,data:e}}},645:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));n(205),n(173),n(203),n(119),n(152),n(204);var r=n(326),a=(n(320),n(319),n(323),function(){return r.a.getState().subscribeCalendars.calendars}),i=function(){return a().toList().filter((function(e){return"show"===e.get("show")||"calendar"===e.get("show")}))},o=function(e){var t;return r.a.getState().subscribeCalendars.events.forEach((function(n){var r=n.find((function(t){return t.get("id")===e}));if(r)return t=r,!1})),t}},646:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(123),n(124),n(125),n(61),n(152),n(50),n(111),n(110);var r=n(320),a=n(319);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return"object"!==i(e)||null===e||a.isDate(e)?e:Array.isArray(e)?r.Seq(e).map(o).toList():r.Seq(e).map(o).toMap()}},653:function(e,t,n){"use strict";n(206),n(325);var r=n(0),a=n.n(r),i=n(520),o=n(384),c=n(340);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,e);var t,n,r,i=d(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).onConfirm=t.onConfirm.bind(p(t)),t.onClose=t.onClose.bind(p(t)),t.state={loading:!1},t}return t=s,(n=[{key:"render",value:function(){var e=this.props.intl;return a.a.createElement(o.a,{className:"timecard-element",maskClosable:!1,visible:!0,loading:this.state.loading,title:e.formatMessage({id:"clear_date"}),okText:e.formatMessage({id:"clear"}),cancelText:e.formatMessage({id:"cancel"}),onOk:this.onConfirm,onCancel:this.onClose},a.a.createElement("p",null,e.formatMessage({id:"schedule_clear_time_confirm"})))}},{key:"onConfirm",value:function(){var e=this;this.setState({loading:!0},(function(){var t=e.props,n=t.projectId,r=t.taskId;n&&r?Object(c.ob)(n,r).then((function(){e.setState({loading:!1}),e.props.onClearTime&&e.props.onClearTime()}),(function(){e.setState({loading:!1})})):e.props.onClose()}))}},{key:"onClose",value:function(){this.props.onClose()}}])&&u(t.prototype,n),r&&u(t,r),s}(a.a.Component);t.a=Object(i.c)(m)},655:function(e,t,n){e.exports={container:"container_3-6Ab",actionBlock:"actionBlock_3JR1T",icon:"icon_3X1-1",text:"text_1GrlI"}},657:function(e,t,n){"use strict";n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"a",(function(){return y})),n.d(t,"e",(function(){return b}));n(205),n(173),n(61),n(152),n(346),n(50),n(121),n(111),n(110),n(350);var r=n(320),a=n(326),i=n(426),o=n(329),c=n(442),s=n(336),u=n(324),l=n(333),d=n(334),f=n(352);function p(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}var h=function(){return a.a.getState().orderByList},m=function(){return h()},g=function(e){return h().find((function(t){return(null==t?void 0:t.get("listId"))===e}))},v=function(e){var t=g(e);return t?t.get("orders"):Object(r.List)()},y=function(e,t,n,r,a){v(r).size&&i.a([e],t,n,r,a)},b=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n,a,p,h,m){var g,v,y,b,k,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g=o.N(t),v=g.list,y=g.map,b=o.M(v,y),k=Object(r.List)(b.map((function(e){var t;return null===(t=e.model)||void 0===t?void 0:t.originModel})).filter(Boolean)),e.next=5,Object(c.a)(k,p,void 0,!1);case 5:(O=e.sent).size>0&&(1===b.length&&b[0].id===O.get(0).get("id")?Object(s.w)(u.a("this_task_move_to_project",{s1:f.d(O.get(0).get("title")),s2:Object(l.n)(p).get("name")}),3e3,(function(){d.I(p)})):Object(s.w)(u.a("task_move_to_project",{s:Object(l.n)(p).get("name")}),3e3,(function(){d.I(p)}))),o.T(v,y,n,a,h,!0,m),i.a(b,n,a,p,h);case 9:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){p(i,r,a,o,c,"next",e)}function c(e){p(i,r,a,o,c,"throw",e)}o(void 0)}))});return function(e,n,r,a,i,o){return t.apply(this,arguments)}}()},658:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(61),n(50),n(207),n(111),n(110);var r=n(320),a=n(318),i=n(344);var o=function e(t){var n,o,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.repeatFlag=void 0,this.repeatFrom=void 0,this.startDate=void 0,this.completedTime=void 0,this.timeZoneId=void 0,this.exDates=void 0,this.repeatFlag=t.get("repeatFlag"),this.repeatFrom=null!==(n=t.get("repeatFrom"))&&void 0!==n?n:a.A.defaultVal,this.startDate=null!==(o=i.a.parseUTCString(t.get("startDate")))&&void 0!==o?o:void 0,this.timeZoneId=s||u?void 0:t.get("timeZone"),this.completedTime=null!==(c=i.a.parseUTCString(t.get("completedTime")))&&void 0!==c?c:void 0;var s=t.get("isAllDay"),u=t.get("isFloating");this.exDates=new Set((r.List.isList(t.get("exDate"))?t.get("exDate").toJS():t.get("exDate"))||[])}},660:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return T}));n(73),n(203),n(61),n(152),n(346),n(50),n(111),n(204),n(110);var r=n(396),a=n(319),i=n.n(a),o=n(385),c=n(439),s=n(330),u=n(328),l=n(318),d=n(372),f=n(352),p=n(341),h=n(349),m=n(482),g=n(549),v=n(379);function y(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k={todayReminders:{}},O=function(){k.todayReminders={}},T=(Object(r.createSelector)([v.u,c.b,v.n,c.c],(function(e,t){var n=Object(v.m)(t),r=[];return e?(n.forEach((function(e){e.reminders.forEach((function(t){r.push({habitTask:e,remindTime:t})}))})),r):[]})),Object(r.createSelector)([m.a],(function(e){var t=[],n=u.a.startOfDay();return e.forEach((function(e){if(!w(e))if(e.get("remindTime")&&u.a.startOfDay(e.get("remindTime"))-n==0){var r=u.a.prefMoment(e.get("remindTime")).format("HH:mm");t.push({taskId:e.get("id"),accountId:e.get("accountId"),remindTime:r})}else{var a=e.get("reminders"),i=s.l(e);a&&a.forEach((function(r){var a=d.i(i,r.get("trigger"));u.a.startOfDay(a)-n==0&&t.push({taskId:e.get("id"),accountId:e.get("accountId"),remindTime:u.a.prefMoment(a).format("HH:mm")})}))}})),t})),Object(r.createSelector)([function(e){return e.tasks.taskList},function(e){return e.projects.projectList},function(e){return e.projects.projectInbox}],(function(e,t,n){var r=t.push(n),a=[],o=u.a.startOfDay(),c=u.a.formatToDateString(o),f=new Map(r.map((function(e){return[e.get("id"),e]})));return e.forEach((function(e){var t,n=e.hashCode(),r=e.get("id"),p=k.todayReminders[r],h=f.get(e.get("projectId"));if(E(e,h))if(p&&p.hash===n&&p.date===c)(t=a).push.apply(t,y(p.reminders));else{k.todayReminders[r]={hash:n,date:c,reminders:[]};var m=e.get("id");if(e.get("startDate")&&!s.Z(e)){var g=[];if(e.get("remindTime")&&u.a.startOfDay(e.get("remindTime"))-o==0&&g.push(u.a.prefMoment(e.get("remindTime")).format("HH:mm")),e.get("repeatFlag"))l.A.completedTime!==e.get("repeatFrom")&&(g=g.concat(s.s(e,3)));else{var v=e.get("reminders"),b=s.l(e);if(v&&v.size)for(var O=0;O<v.size;O++){var T=v.get(O),w=d.i(b,T.get("trigger"));u.a.startOfDay(w)-o==0&&g.push(u.a.prefMoment(w).format("HH:mm"))}}(g=i.a.uniq(g)).forEach((function(e){var t={taskId:m,remindTime:e};a.push(t),k.todayReminders[r].reminders.push(t)}))}if(s.G(e)){var D=S(e,e.get("items"));a=a.concat(D),k.todayReminders[r].reminders=k.todayReminders[r].reminders.concat(D)}}})),a}))),S=function(e,t){var n=[],r=e.get("id"),a=u.a.startOfDay();return t.forEach((function(e){if(!(e.get("status")>0)&&Object(o.h)(e)){var t=[];if(e.get("snoozeReminderTime"))u.a.startOfDay(e.get("snoozeReminderTime"))-a==0&&t.push(u.a.prefMoment(e.get("snoozeReminderTime")).format("HH:mm"));else{var i=Object(g.a)(e.get("startDate"),e.get("isAllDay"),!0),c=d.i(i,"TRIGGER:PT0S");u.a.startOfDay(c)-a==0&&t.push(u.a.prefMoment(c).format("HH:mm"))}t.forEach((function(t){n.push({taskId:r,itemId:e.get("id"),remindTime:t})}))}})),n},E=function(e,t){return!!t&&(!Object(h.h)(t)&&(!D(t)||(!!j(e)||!_(e,t))))},w=function(e){return!f.i(e.get("startDate"))},D=function(e){return!!e&&e.get("userCount")>1},j=function(e){return e.get("assignee")===p.a("userId")},_=function(e,t){return!(!e.get("projectId")||!t)&&t.get("muted")}},680:function(e,t){},701:function(e,t){},828:function(e,t,n){var r={"./Sync.svg":[1015,7],"./activities.svg":[1016,8],"./add column title.svg":[1017,9],"./add list.svg":[1018,10],"./add new list.svg":[1019,11],"./add-column-left.svg":[1020,12],"./add-column-right.svg":[1021,13],"./add-habit.svg":[1022,14],"./add-kanban-task.svg":[1023,15],"./add-section.svg":[1024,16],"./add.svg":[1025,17],"./add_from_template.svg":[1026,18],"./add_section_bottom.svg":[1027,19],"./add_section_top.svg":[1028,20],"./after duedate solid.svg":[1029,21],"./after duedate.svg":[1030,22],"./alipay.svg":[1031,23],"./all list.svg":[1032,24],"./android.svg":[1033,25],"./animals-nature.svg":[1034,26],"./archive.svg":[1035,27],"./arrow-down.svg":[1036,28],"./assigned to me list.svg":[1037,29],"./assignment nobody.svg":[1038,30],"./assignment.svg":[1039,31],"./attachment.svg":[1040,32],"./audio.svg":[1041,33],"./back settings.svg":[1042,34],"./backup_ical.svg":[1043,35],"./calendar list.svg":[1044,36],"./calendar-config.svg":[1045,37],"./calendar-holiday-dark.svg":[1046,38],"./calendar-holiday.svg":[1047,39],"./calendar-workday-dark.svg":[1048,40],"./calendar-workday.svg":[1049,41],"./checkbox detail.svg":[1050,42],"./checkbox.svg":[1051,43],"./chevron folder close.svg":[1052,44],"./chevron folder open.svg":[1053,45],"./chevron folder.svg":[1054,46],"./chevron left.svg":[1055,47],"./chevron right.svg":[1056,48],"./chevron-dropdown-open.svg":[1057,49],"./clear trash.svg":[1058,50],"./close mini.svg":[1059,51],"./close.svg":[1060,52],"./closed list.svg":[1061,53],"./collapse allday.svg":[1062,54],"./color.svg":[1063,55],"./combine task.svg":[1064,56],"./combined shape.svg":[1065,57],"./comment delete.svg":[1066,58],"./comment mini.svg":[1067,59],"./comment.svg":[1068,60],"./completed detail.svg":[1069,61],"./completed list view.svg":[1070,62],"./completed list.svg":[1071,63],"./completed.svg":[1072,64],"./contextmenu-custom.svg":[1073,65],"./contextmenu-next-period.svg":[1074,66],"./contextmenu-nextweek.svg":[1075,67],"./contextmenu-today.svg":[1076,68],"./contextmenu-tomorrow.svg":[1077,69],"./convert-task.svg":[1078,70],"./copy-task-link.svg":[1079,71],"./copy.svg":[1080,72],"./count-completed.svg":[1081,73],"./count-day.svg":[1082,74],"./count-project.svg":[1083,75],"./count-task.svg":[1084,76],"./csv.svg":[1085,77],"./custom smart list.svg":[1086,78],"./dark empty task detail.svg":[1087,79],"./dark-empty-assign-1.svg":[1088,80],"./dark-empty-assign-2.svg":[1089,81],"./dark-empty-completed-1.svg":[1090,82],"./dark-empty-completed-2.svg":[1091,83],"./dark-empty-csl-1.svg":[1092,84],"./dark-empty-csl-2.svg":[1093,85],"./dark-empty-default-1.svg":[1094,86],"./dark-empty-default-2.svg":[1095,87],"./dark-empty-habit-detail.svg":[1096,88],"./dark-empty-n7-1.svg":[1097,89],"./dark-empty-n7-2.svg":[1098,90],"./dark-empty-note-1.svg":[1099,91],"./dark-empty-note-2.svg":[1100,92],"./dark-empty-schedule-1.svg":[1101,93],"./dark-empty-schedule-2.svg":[1102,94],"./dark-empty-search-1.svg":[1103,95],"./dark-empty-search-2.svg":[1104,96],"./dark-empty-subscribe-1.svg":[1105,97],"./dark-empty-subscribe-2.svg":[1106,98],"./dark-empty-tag-1.svg":[1107,99],"./dark-empty-tag-2.svg":[1108,100],"./dark-empty-task-template-1.svg":[1109,101],"./dark-empty-today-b1-1.svg":[1110,102],"./dark-empty-today-b1-2.svg":[1111,103],"./dark-empty-today-b2-1.svg":[1112,104],"./dark-empty-today-b2-2.svg":[1113,105],"./dark-empty-today-b3-1.svg":[1114,106],"./dark-empty-today-b3-2.svg":[1115,107],"./dark-empty-today-b4-1.svg":[1116,108],"./dark-empty-today-b4-2.svg":[1117,109],"./dark-empty-today-b5-1.svg":[1118,110],"./dark-empty-today-b5-2.svg":[1119,111],"./dark-empty-today-b6-1.svg":[1120,112],"./dark-empty-today-b6-2.svg":[1121,113],"./dark-empty-tomorrow-b1-1.svg":[1122,114],"./dark-empty-tomorrow-b1-2.svg":[1123,115],"./dark-empty-tomorrow-b2-1.svg":[1124,116],"./dark-empty-tomorrow-b2-2.svg":[1125,117],"./dark-empty-trash-1.svg":[1126,118],"./dark-empty-trash-2.svg":[1127,119],"./date unselected.svg":[1128,120],"./delete forever.svg":[1129,121],"./delete list.svg":[1130,122],"./delete subtask.svg":[1131,123],"./delete-circle.svg":[1132,124],"./delete.svg":[1133,125],"./descendant-task-small.svg":[1134,126],"./descendant-task.svg":[1135,127],"./detail menu tag.svg":[1136,128],"./device_android.svg":[1137,129],"./device_apple_watch.svg":[1138,130],"./device_ipad.svg":[1139,131],"./device_iphone.svg":[1140,132],"./device_mac.svg":[1141,133],"./device_unknown.svg":[1142,134],"./device_windows.svg":[1143,135],"./display closed list.svg":[1144,136],"./doc.svg":[1145,137],"./download.svg":[1146,138],"./drag.svg":[1147,139],"./duedate.svg":[1148,140],"./edit avatar.svg":[1149,141],"./edit_comment_project.svg":[1150,142],"./edit_read_project.svg":[1151,143],"./edit_share_project.svg":[1152,144],"./edit_write_project.svg":[1153,145],"./email.svg":[1154,146],"./empty task detail pointer.svg":[1155,147],"./empty-assign-1.svg":[1156,148],"./empty-assign-2.svg":[1157,149],"./empty-comment.svg":[1158,150],"./empty-completed-1.svg":[1159,151],"./empty-completed-2.svg":[1160,152],"./empty-csl-1.svg":[1161,153],"./empty-csl-2.svg":[1162,154],"./empty-default-1.svg":[1163,155],"./empty-default-2.svg":[1164,156],"./empty-habit-detail-pointer.svg":[1165,157],"./empty-habit-detail.svg":[1166,158],"./empty-n7-1.svg":[1167,159],"./empty-n7-2.svg":[1168,160],"./empty-note-1.svg":[1169,161],"./empty-note-2.svg":[1170,162],"./empty-notification.svg":[1171,163],"./empty-project-activity.svg":[1172,164],"./empty-schedule-1.svg":[1173,165],"./empty-schedule-2.svg":[1174,166],"./empty-search-1.svg":[1175,167],"./empty-search-2.svg":[1176,168],"./empty-subscribe-1.svg":[1177,169],"./empty-subscribe-2.svg":[1178,170],"./empty-tag-1.svg":[1179,171],"./empty-tag-2.svg":[1180,172],"./empty-tag.svg":[1181,173],"./empty-task-detail.svg":[1182,174],"./empty-task-template-1.svg":[1183,175],"./empty-task-template-2.svg":[1184,176],"./empty-today-b1-1.svg":[1185,177],"./empty-today-b1-2.svg":[1186,178],"./empty-today-b2-1.svg":[1187,179],"./empty-today-b2-2.svg":[1188,180],"./empty-today-b3-1.svg":[1189,181],"./empty-today-b3-2.svg":[1190,182],"./empty-today-b4-1.svg":[1191,183],"./empty-today-b4-2.svg":[1192,184],"./empty-today-b5-1.svg":[1193,185],"./empty-today-b5-2.svg":[1194,186],"./empty-today-b6-1.svg":[1195,187],"./empty-today-b6-2.svg":[1196,188],"./empty-tomorrow-b1-1.svg":[1197,189],"./empty-tomorrow-b1-2.svg":[1198,190],"./empty-tomorrow-b2-1.svg":[1199,191],"./empty-tomorrow-b2-2.svg":[1200,192],"./empty-trash-1.svg":[1201,193],"./empty-trash-2.svg":[1202,194],"./event-attendee.svg":[1203,195],"./event-calendar.svg":[1204,196],"./event-location.svg":[1205,197],"./event-note.svg":[1206,198],"./event-reminder.svg":[1207,199],"./event-repeat.svg":[1208,200],"./event-time.svg":[1209,201],"./expand allday.svg":[1210,202],"./facebook.svg":[1211,203],"./filter.svg":[1212,204],"./flags.svg":[1213,205],"./fn-habit.svg":[1214,206],"./fn-min-cal.svg":[1215,207],"./fn-pomo.svg":[1216,208],"./folder all list.svg":[1217,209],"./folder open.svg":[1218,210],"./folder.svg":[1219,211],"./food-drink.svg":[1220,212],"./forum.svg":[1221,213],"./gmail calendar list.svg":[1222,214],"./habit-calendar-uncomplete.svg":[1223,215],"./habit-delete.svg":[1224,216],"./habit-detail-archive.svg":[1225,217],"./habit-detail-delete.svg":[1226,218],"./habit-detail-edit.svg":[1227,219],"./habit-detail-recovery.svg":[1228,220],"./habit-edit-small.svg":[1229,221],"./habit-edit.svg":[1230,222],"./habit-emoji-cry-black.svg":[1231,223],"./habit-emoji-cry.svg":[1232,224],"./habit-emoji-general-black.svg":[1233,225],"./habit-emoji-general.svg":[1234,226],"./habit-emoji-sad-black.svg":[1235,227],"./habit-emoji-sad.svg":[1236,228],"./habit-emoji-smile-black.svg":[1237,229],"./habit-emoji-smile.svg":[1238,230],"./habit-emoji-smiley-black.svg":[1239,231],"./habit-emoji-smiley.svg":[1240,232],"./habit-list.svg":[1241,233],"./habit-uncomplete.svg":[1242,234],"./habitStatistics.svg":[1243,235],"./habit_list_complete.svg":[1244,236],"./habit_list_uncomplete.svg":[1245,237],"./hide completed.svg":[1246,238],"./hide repeat cycle.svg":[1247,239],"./hide-subtasks.svg":[1248,240],"./how-to-modify-template.svg":[1249,241],"./ic_blank_archived_habit_back.svg":[1250,242],"./ic_blank_archived_habit_back_dark.svg":[1251,243],"./ic_blank_archived_habit_front.svg":[1252,244],"./ic_blank_archived_habit_front_dark.svg":[1253,245],"./ic_blank_habit_back.svg":[1254,246],"./ic_blank_habit_back_dark.svg":[1255,247],"./ic_blank_habit_front.svg":[1256,248],"./ic_blank_habit_front_dark.svg":[1257,249],"./inbox list.svg":[1258,250],"./insert-summary.svg":[1259,251],"./invite.svg":[1260,252],"./ios.svg":[1261,253],"./item attachment.svg":[1262,254],"./item location.svg":[1263,255],"./item reminder.svg":[1264,256],"./item repeat.svg":[1265,257],"./item text.svg":[1266,258],"./item-habit.svg":[1267,259],"./kanban-mode.svg":[1268,260],"./left menu.svg":[1269,261],"./list activities.svg":[1270,262],"./list-mode.svg":[1271,263],"./location at.svg":[1272,264],"./lock.svg":[1273,265],"./md-h1.svg":[1274,266],"./md-h2.svg":[1275,267],"./md-h3.svg":[1276,268],"./md-h4.svg":[1277,269],"./md-h5.svg":[1278,270],"./md-h6.svg":[1279,271],"./md-item-checked.svg":[1280,272],"./md-item-unchecked.svg":[1281,273],"./md-link.svg":[1282,274],"./md-list-1.svg":[1283,275],"./md-task-link.svg":[1284,276],"./md-tl-bold.svg":[1285,277],"./md-tl-code-inline.svg":[1286,278],"./md-tl-fullscreen-exit.svg":[1287,279],"./md-tl-fullscreen.svg":[1288,280],"./md-tl-h1.svg":[1289,281],"./md-tl-h2.svg":[1290,282],"./md-tl-h3.svg":[1291,283],"./md-tl-heading.svg":[1292,284],"./md-tl-highlight.svg":[1293,285],"./md-tl-italic.svg":[1294,286],"./md-tl-link.svg":[1295,287],"./md-tl-list-1.svg":[1296,288],"./md-tl-list-2.svg":[1297,289],"./md-tl-list-3.svg":[1298,290],"./md-tl-more.svg":[1299,291],"./md-tl-quote.svg":[1300,292],"./md-tl-separator-line.svg":[1301,293],"./md-tl-strikethrough.svg":[1302,294],"./md-tl-underline.svg":[1303,295],"./mini delete.svg":[1304,296],"./mobile-android-back.svg":[1305,297],"./mobile-edit.svg":[1306,298],"./mobile-ios-back.svg":[1307,299],"./mobile-more.svg":[1308,300],"./mobile-statistics.svg":[1309,301],"./modify-completed-time.svg":[1310,302],"./more for calendar.svg":[1311,303],"./more for detail.svg":[1312,304],"./more for folder.svg":[1313,305],"./more for list.svg":[1314,306],"./more-children.svg":[1315,307],"./more-for-task.svg":[1316,308],"./more-for-team.svg":[1317,309],"./more.svg":[1318,310],"./move list.svg":[1319,311],"./multi-select-expand-triangle.svg":[1320,312],"./navigate.svg":[1321,313],"./ndays later.svg":[1322,314],"./net-error.svg":[1323,315],"./next ndays.svg":[1324,316],"./next week.svg":[1325,317],"./next7days list.svg":[1326,318],"./no date.svg":[1327,319],"./no tag.svg":[1328,320],"./no_color.svg":[1329,321],"./normal list.svg":[1330,322],"./normal-mode.svg":[1331,323],"./note-filled.svg":[1332,324],"./note-info.svg":[1333,325],"./note-list.svg":[1334,326],"./note.svg":[1335,327],"./notification.svg":[1336,328],"./objects.svg":[1337,329],"./other.svg":[1338,330],"./overdue.svg":[1339,331],"./package.svg":[1340,332],"./parent-tag.svg":[1341,333],"./pdf.svg":[1342,334],"./people-body.svg":[1343,335],"./person.svg":[1344,336],"./platform-android.svg":[1345,337],"./platform-ios.svg":[1346,338],"./platform-more.svg":[1347,339],"./pointer left.svg":[1348,340],"./pointer up.svg":[1349,341],"./pomo settings.svg":[1350,342],"./pomo-start.svg":[1351,343],"./pomo-stop.svg":[1352,344],"./pomoStatistics.svg":[1353,345],"./ppt.svg":[1354,346],"./premium-more-edit.svg":[1355,347],"./print-in-calendar.svg":[1356,348],"./print-in-list.svg":[1357,349],"./priority 1.svg":[1358,350],"./priority 2.svg":[1359,351],"./priority 3.svg":[1360,352],"./profile_qq.svg":[1361,353],"./profile_wechat.svg":[1362,354],"./profile_weibo.svg":[1363,355],"./project for calendar.svg":[1364,356],"./project_permission_comment.svg":[1365,357],"./project_permission_read.svg":[1366,358],"./project_permission_write.svg":[1367,359],"./qq.svg":[1368,360],"./question.svg":[1369,361],"./quick nextmonth.svg":[1370,362],"./quick nextperiod.svg":[1371,363],"./quick nextweek.svg":[1372,364],"./quick today.svg":[1373,365],"./quick tomorrow.svg":[1374,366],"./quick-custom.svg":[1375,367],"./range drag handle.svg":[1376,368],"./real-subtask.svg":[1377,369],"./recent.svg":[1378,370],"./reddit.svg":[1379,371],"./reminder-done.svg":[1380,372],"./reminder-snooze.svg":[1381,373],"./reminder-start-pomo.svg":[1382,374],"./reminder-view.svg":[1383,375],"./reminder.svg":[1384,376],"./rename.svg":[1385,377],"./repeat.svg":[1386,378],"./restore.svg":[1387,379],"./rss-subscribe.svg":[1388,380],"./rss.svg":[1389,381],"./s-backup.svg":[1390,382],"./s-email.svg":[1391,383],"./s-explore.svg":[1392,384],"./s-folder.svg":[1393,385],"./s-location.svg":[1394,386],"./s-lunar.svg":[1395,387],"./s-print.svg":[1396,388],"./s-priority.svg":[1397,389],"./s-pro-p-activity.svg":[1398,390],"./s-redeem.svg":[1399,391],"./s-tag.svg":[1400,392],"./s-voice.svg":[1401,393],"./s-wechat.svg":[1402,394],"./save.svg":[1403,395],"./schedule detail.svg":[1404,396],"./schedule-nodate.svg":[1405,397],"./schedule-overdue.svg":[1406,398],"./schedule-tasks.svg":[1407,399],"./schedule.svg":[1408,400],"./search.svg":[1409,401],"./section-add.svg":[1410,402],"./section-more.svg":[1411,403],"./select-menu-triangle-down.svg":[1412,404],"./selected.svg":[1413,405],"./selectskip.svg":[1414,406],"./setting backup.svg":[1415,407],"./setting labs.svg":[1416,408],"./setting preferences.svg":[1417,409],"./setting premium.svg":[1418,410],"./setting profile.svg":[1419,411],"./setting redeem.svg":[1420,412],"./setting shortcuts.svg":[1421,413],"./setting smart list.svg":[1422,414],"./setting subcalendar.svg":[1423,415],"./setting support.svg":[1424,416],"./setting.svg":[1425,417],"./share list.svg":[1426,418],"./share-note-list.svg":[1427,419],"./share-project-delete.svg":[1428,420],"./share-project-exit.svg":[1429,421],"./share-project-link.svg":[1430,422],"./share-project-lock.svg":[1431,423],"./share-project-recent-empty.svg":[1432,424],"./share-project-transfer.svg":[1433,425],"./share.svg":[1434,426],"./shared-list-all-members.svg":[1435,427],"./show completed.svg":[1436,428],"./show in all list.svg":[1437,429],"./show repeat cycle.svg":[1438,430],"./show-countdown.svg":[1439,431],"./show-details.svg":[1440,432],"./show-subtasks.svg":[1441,433],"./show-tasktime.svg":[1442,434],"./single-select.svg":[1443,435],"./sort by assignee.svg":[1444,436],"./sort by completion.svg":[1445,437],"./sort by custom.svg":[1446,438],"./sort by duedate.svg":[1447,439],"./sort by list.svg":[1448,440],"./sort by priority.svg":[1449,441],"./sort by tag.svg":[1450,442],"./sort by title.svg":[1451,443],"./sort-by-assign.svg":[1452,444],"./sort-by-complete.svg":[1453,445],"./sort-by-create-time.svg":[1454,446],"./sort-by-modified-time.svg":[1455,447],"./sort-by-tag.svg":[1456,448],"./start pomo.svg":[1457,449],"./statistics list.svg":[1458,450],"./stopwatch.svg":[1459,451],"./subcalendar detail.svg":[1460,452],"./subcalendar list google only.svg":[1461,453],"./subcalendar list google.svg":[1462,454],"./subcalendar list url only.svg":[1463,455],"./subcalendar.svg":[1464,456],"./subscribe.svg":[1465,457],"./subtask detail.svg":[1466,458],"./subtask mode.svg":[1467,459],"./subtask-add.svg":[1468,460],"./subtask-bold.svg":[1469,461],"./subtask.svg":[1470,462],"./summary detail control.svg":[1471,463],"./summary list.svg":[1472,464],"./summary-clear.svg":[1473,465],"./summary-email.svg":[1474,466],"./summary-markdown.svg":[1475,467],"./summary-pdf.svg":[1476,468],"./summary-plainText.svg":[1477,469],"./summary-png.svg":[1478,470],"./summary-richText.svg":[1479,471],"./switch-mode.svg":[1480,472],"./symbols.svg":[1481,473],"./tag-close.svg":[1482,474],"./tag-create.svg":[1483,475],"./tag-item.svg":[1484,476],"./tag.svg":[1485,477],"./task active.svg":[1486,478],"./task menu move.svg":[1487,479],"./task menu pomo.svg":[1488,480],"./task menu tag.svg":[1489,481],"./task-menu-assign.svg":[1490,482],"./task-menu-delete.svg":[1491,483],"./task-menu-merge.svg":[1492,484],"./task-menu-pomo.svg":[1493,485],"./task-menu-tag.svg":[1494,486],"./taskStatistics.svg":[1495,487],"./td-footer-comment.svg":[1496,488],"./td-footer-delete-list.svg":[1497,489],"./td-footer-markdown.svg":[1498,490],"./text mode.svg":[1499,491],"./text.svg":[1500,492],"./theme selected.svg":[1501,493],"./thin-triangle-down.svg":[1502,494],"./this month.svg":[1503,495],"./this week.svg":[1504,496],"./timecard_remind.svg":[1505,497],"./timecard_repeat.svg":[1506,498],"./timecard_time.svg":[1507,499],"./today list.svg":[1508,500],"./tomato.svg":[1509,501],"./tomorrow list.svg":[1510,502],"./travel-places.svg":[1511,503],"./trend.svg":[1512,504],"./triangle down.svg":[1513,505],"./triangle right.svg":[1514,506],"./triangle-down-24.svg":[1515,507],"./twitter.svg":[1516,508],"./unarchive.svg":[1517,509],"./undo.svg":[1518,510],"./upgrade-button-bg.svg":[1519,511],"./upgrade-thunder.svg":[1520,512],"./user icon.svg":[1521,513],"./user-guide.svg":[1522,514],"./version history.svg":[1523,515],"./video.svg":[1524,516],"./warning.svg":[1525,517],"./wechat fail.svg":[1526,518],"./wechat-pay.svg":[1527,519],"./weibo.svg":[1528,520],"./with-tags.svg":[1529,521],"./workflow-mode.svg":[1530,522],"./xls.svg":[1531,523],"./yellow-more.svg":[1532,524],"./zip.svg":[1533,525]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=828,e.exports=a},831:function(e,t,n){e.exports={collapsed:"collapsed_MjqLo",rotate:"rotate_2xIXa"}},832:function(e,t,n){e.exports={popup:"popup_3irxX",handleRepeat:"handleRepeat_2Q40f"}},833:function(e,t,n){e.exports={radioItem:"radioItem_wG1S4",selectCircle:"selectCircle_2I_oX",selectCircleline:"selectCircleline_3Te4u",selected:"selected_2L4Kc",selectCirclePoint:"selectCirclePoint_LYFGW",text:"text_2UKvV"}},836:function(e,t,n){e.exports={circle:"circle_3HrWZ",noData:"noData_3knXA"}},895:function(e,t,n){e.exports={tooltipEnter:"tooltipEnter_1DQPz",tooltipEnterActive:"tooltipEnterActive_27_80",tooltipExit:"tooltipExit_1ve9Q",tooltipExitActive:"tooltipExitActive_1fVPB",iconNavigator:"iconNavigator_3eB-X",blink:"blink_3cNcv",fade:"fade_2poyp",blinkKanban:"blinkKanban_1Q1br",fadeKanban:"fadeKanban_bpFv5",taskInnerDetailMode:"taskInnerDetailMode_2RH6C",moreTipsLine:"moreTipsLine_2H2g-",noteTime:"noteTime_7vxpE"}},896:function(e,t,n){e.exports={wrapper:"wrapper_1pNbX",circle:"circle_3T0GL"}},961:function(e,t,n){e.exports={useTemplate:"useTemplate_2dhFi",disabled:"disabled_ZK0Kn"}},972:function(e,t,n){var r={"./ac-add-file.svg":973,"./ac-assign.svg":974,"./ac-attachment.svg":975,"./ac-changed-subtask.svg":976,"./ac-completed-subtask.svg":977,"./ac-create.svg":978,"./ac-created-subtask.svg":979,"./ac-del-file.svg":980,"./ac-delete.svg":981,"./ac-deleted-subtask.svg":982,"./ac-done.svg":983,"./ac-edit.svg":984,"./ac-edited-subtask.svg":985,"./ac-in.svg":986,"./ac-out.svg":987,"./ac-share-delete.svg":988,"./ac-share-join.svg":989,"./ac-switched-subtask.svg":990,"./ac-switched-text.svg":991,"./ac-undone-subtask.svg":992,"./ac-undone.svg":993,"./mini delete.svg":994};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=972},973:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-add-file",use:"ac-add-file-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-add-file"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 0,14 0,9 C0,4 4,0 9,0 Z M10.7448035,7.65272677 L7.04064661,11.3568836 C6.38963046,12.0078998 5.3859931,12.0501132 4.80099411,11.4651143 C4.21599513,10.8801153 4.25820859,9.87647792 4.90922474,9.22546176 L8.79474079,5.33994571 C9.80173557,4.33295093 11.4343967,4.33295093 12.4413915,5.33994571 C13.4483863,6.34694049 13.4483863,7.97960161 12.4413915,8.9865964 L7.47356913,13.9544187 L7.47356913,14.0958401 L8.23118354,14.8534545 L8.37260489,14.8534545 L13.3404272,9.88563216 C14.8439458,8.38211364 14.8439458,5.94442847 13.3404272,4.44090995 C11.8369087,2.93739142 9.39922355,2.93739142 7.89570503,4.44090995 L4.01018898,8.326426 C2.8676823,9.46893268 2.81374158,11.2759333 3.90195835,12.36415 C4.99017512,13.4523668 6.79717569,13.3984261 7.93968238,12.2559194 L11.6438392,8.55176253 C12.3593767,7.83622506 12.4107471,6.71500218 11.738541,6.04279615 C11.066335,5.37059012 9.94511213,5.42196048 9.22957466,6.13749795 L5.95834031,9.40873229 L5.95834031,9.55015365 L6.71595472,10.3077681 L6.85737608,10.3077681 L10.1286104,7.03653372 C10.3553838,6.80976035 10.6769191,6.77924574 10.8395053,6.94183192 C11.0020915,7.10441809 10.9715768,7.4259534 10.7448035,7.65272677 Z" transform="translate(1.5 1)" fill="#617FDE" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},974:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-assign",use:"ac-assign-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-assign"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 1.13686838e-13,14 1.13686838e-13,9 C1.13686838e-13,4 4,0 9,0 Z M9.810967,12.2909955 L6.83321331,12.2909955 C6.52103507,12.2909955 6.2679646,12.0379251 6.2679646,11.7257468 C6.2679646,11.4135686 6.52103507,11.1604981 6.83321331,11.1604981 L9.810967,11.1604981 L8.92581842,10.2766915 C8.70697155,10.0581765 8.70670257,9.70362453 8.92521765,9.48477765 C8.92541776,9.48457724 8.92561802,9.48437698 8.92581842,9.48417688 C9.14509494,9.26523281 9.50025993,9.26523281 9.71953644,9.48417688 L11.567651,11.3294895 C11.7868302,11.5483364 11.7868302,11.9031573 11.567651,12.1220042 L9.71953644,13.9673168 C9.50025993,14.1862608 9.14509494,14.1862608 8.92581842,13.9673168 C8.70697155,13.7488017 8.70670257,13.3942498 8.92521765,13.1754029 C8.92541776,13.1752025 8.92561802,13.1750022 8.92581842,13.1748021 L9.810967,12.2909955 Z M5.84831026,14.652487 L12.1516897,14.652487 L13.1223188,14.652487 C13.5509486,14.652487 13.8988221,14.2603868 13.8988221,13.7772632 L13.8988221,12.5012842 C13.8988221,10.9730462 12.8495835,8.62316753 9,8.62316753 C5.15041653,8.62316753 4.10117791,10.9730462 4.10117791,12.5012842 L4.10117791,13.7772632 C4.10117791,14.2603868 4.44905137,14.652487 4.87768118,14.652487 L5.84831026,14.652487 Z M11.2609948,5.60850778 C11.2609948,4.3598734 10.2486344,3.34751297 9,3.34751297 C7.75136562,3.34751297 6.73900519,4.3598734 6.73900519,5.60850778 C6.73900519,6.85714217 7.75136562,7.86950259 9,7.86950259 C10.2486344,7.86950259 11.2609948,6.85714217 11.2609948,5.60850778 Z" transform="translate(1.5 1)" fill="#FFB119" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},975:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-attachment",use:"ac-attachment-usage",viewBox:"152 -152 1024 1024",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="152 -152 1024 1024" id="ac-attachment"><path d="M864.5,212.1c-17-17-39.8-26.4-64.1-26.4c-24.3,0-47.1,9.4-64.1,26.4l-85.1,85l-53.1,53.2l-31.9,31.9c-2.8,2.8-5,6-6.6,9.9\tl-0.1,0.3c-1.5,3.7-2.2,7.5-2.2,11.3s0.7,7.6,2.2,11.3c1.5,3.8,3.8,7.2,6.7,10.2c5.7,5.7,13.4,8.9,21.6,8.9c8.1,0,15.7-3.1,21.5-8.8\tl32-32l53.1-53.2l85-85.1c5.6-5.6,13.1-8.7,21-8.7c8.1,0,15.4,3,21,8.7c2.9,2.9,5.1,6.1,6.4,9.6l0.1,0.1c1.4,3.5,2.2,7.3,2.2,11.2\ts-0.7,7.6-2.2,11.2c-1.5,3.7-3.7,7-6.5,9.8L651.5,467.1c-17,17-39.6,26.3-63.6,26.3c-23.9,0-46.5-9.4-63.6-26.3\tc-17-17-26.3-39.6-26.3-63.6c0-23.9,9.4-46.5,26.3-63.6L770.1,94.2c5.7-5.7,8.9-13.4,8.9-21.6c0-8.1-3.1-15.7-8.8-21.5l-0.1-0.1\tc-5.7-5.7-13.4-8.9-21.6-8.9c-8.1,0-15.7,3.1-21.5,8.8L513.1,265l-31.9,31.9c-14.5,14.5-25.6,31.3-33,49.8\tc-7.3,18.1-11.1,37.2-11.1,56.7c0,19.6,3.7,38.7,11.1,56.7c7.6,18.6,18.7,35.4,33.1,49.8c14.5,14.5,31.3,25.6,49.9,33\tc18.1,7.3,37.2,11.1,56.7,11.1c19.6,0,38.7-3.7,56.7-11.1c18.6-7.6,35.4-18.7,49.8-33.1l31.9-31.9l138.2-137.6l0,0\tc17-17,26.4-39.8,26.4-64.1C890.9,251.9,881.5,229.1,864.5,212.1z" /></symbol>'});o.a.add(c);t.default=c},976:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-changed-subtask",use:"ac-changed-subtask-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-changed-subtask"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 0,14 0,9 C0,4 4,0 9,0 Z M10.8314129,7.47893643 C10.6430902,5.89291177 9.28981798,4.65812824 7.65343412,4.65812824 C5.88859973,4.65812824 4.45235526,6.0943727 4.45235526,7.85849431 C4.45235526,8.70655613 4.78373408,9.47847482 5.32373396,10.0517296 L4.82891085,10.9087884 C4.7249279,11.0888922 4.786636,11.31919 4.96673976,11.4231729 C5.14684352,11.5271559 5.3771413,11.4654478 5.48112425,11.285344 L5.91016732,10.5422196 C6.33308309,10.8178519 6.82484549,10.9962923 7.35349226,11.0456402 L10.8314129,7.47893643 Z M11.2114596,7.08918799 L11.6147623,6.67559 C11.7313352,6.40305925 11.795868,6.10296334 11.795868,5.78779499 C11.795868,4.53999955 10.7843299,3.52846148 9.5365345,3.52846148 C9.01120728,3.52846148 8.52775541,3.70775115 8.1440309,4.00847845 C8.14387647,4.00859948 8.14372191,4.00872068 8.14356722,4.00884206 L8.14352985,4.00879443 C8.0655078,4.07001375 8.05188649,4.18289118 8.11310581,4.26091323 C8.140969,4.29642397 8.18118372,4.32013888 8.2257434,4.32733644 C9.63692049,4.55527839 10.7745907,5.61179522 11.1216917,6.97949201 C11.1343797,7.02948709 11.1683458,7.06845895 11.2114596,7.08918799 Z M8.02963331,7.67057291 L8.78274448,7.67057291 C8.99071039,7.67057291 9.15930007,7.83916259 9.15930007,8.04712849 C9.15930007,8.2550944 8.99071039,8.42368408 8.78274448,8.42368408 L7.27652215,8.42368408 L7.27652215,6.16435057 C7.27652215,5.95638467 7.44511182,5.78779499 7.65307773,5.78779499 C7.86104364,5.78779499 8.02963331,5.95638467 8.02963331,6.16435057 L8.02963331,7.67057291 Z M3.87240901,7.01409642 C3.8761375,7.01985499 3.88006608,7.02579463 3.88420486,7.03190852 C3.90719469,7.06599083 3.94192591,7.09041801 3.98177396,7.10053085 C4.0713566,7.12326559 4.16240783,7.06907466 4.18514257,6.97949201 C4.53224365,5.61179522 5.66991382,4.55527839 7.08109091,4.32733644 C7.12565059,4.32013888 7.16586531,4.29642397 7.1937285,4.26091323 C7.25494782,4.18289118 7.24132651,4.07001375 7.16330446,4.00879443 L7.16326709,4.00884206 C7.1631124,4.00872068 7.16295785,4.00859948 7.16280342,4.00847845 C6.7790789,3.70775115 6.29562703,3.52846148 5.77029981,3.52846148 C4.52250437,3.52846148 3.5109663,4.53999955 3.5109663,5.78779499 C3.5109663,6.23986109 3.64373611,6.66091715 3.87240901,7.01409642 Z M13.1066435,7.89542473 L13.1065341,7.89553413 C12.9113147,7.70031471 12.5948166,7.70026574 12.3995367,7.89542476 L8.30330177,11.988907 C7.28092247,13.7749776 6.86519423,14.7634743 7.05611704,14.9543971 C7.24703986,15.1453199 8.22163943,14.7156946 9.97991575,13.665521 L14.0761507,9.5720387 C14.0761872,9.57200225 14.0762236,9.57196579 14.0762601,9.57192933 C14.2715222,9.37666719 14.2715222,9.0600847 14.0762601,8.86482255 L13.1066435,7.89542473 Z M15.3463827,8.29387213 L15.8206008,7.74061774 C15.9786735,7.58254506 15.9786735,7.34543604 15.8206008,7.18736336 L14.714092,6.08085458 C14.5560193,5.9227819 14.3189103,5.9227819 14.1608376,6.08085458 L13.6075832,6.63410897 C13.4495106,6.79218165 13.4495106,7.02929067 13.6075832,7.18736336 L14.714092,8.29387213 C14.7931284,8.37290847 14.951201,8.37290847 15.0302374,8.37290847 C15.1092737,8.37290847 15.2673464,8.37290847 15.3463827,8.29387213 Z" transform="translate(1.5 1)" fill="#FFB119" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},977:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-completed-subtask",use:"ac-completed-subtask-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-completed-subtask"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 0,14 0,9 C0,4 4,0 9,0 Z M4.22025459,3.67922154 C3.89416465,3.67922154 3.62981653,3.94356966 3.62981653,4.2696596 L3.62981653,4.28878348 C3.62981653,4.61487341 3.89416465,4.87922154 4.22025459,4.87922154 L11.098723,4.87922154 C11.4248129,4.87922154 11.6891611,4.61487341 11.6891611,4.28878348 L11.6891611,4.2696596 C11.6891611,3.94356966 11.4248129,3.67922154 11.098723,3.67922154 L4.22025459,3.67922154 Z M4.22025459,6.42824969 C3.89416465,6.42824969 3.62981653,6.69259781 3.62981653,7.01868775 L3.62981653,7.03781163 C3.62981653,7.36390156 3.89416465,7.62824969 4.22025459,7.62824969 L9.19694787,7.62824969 C9.52303781,7.62824969 9.78738593,7.36390156 9.78738593,7.03781163 L9.78738593,7.01868775 C9.78738593,6.69259781 9.52303781,6.42824969 9.19694787,6.42824969 L4.22025459,6.42824969 Z M7.62497983,12.1577289 L5.11016632,9.76070466 C4.77035808,9.43681241 4.23232253,9.44971488 3.90843028,9.78952311 C3.58453804,10.1293314 3.5974405,10.6673669 3.93724874,10.9912591 L7.04172324,13.9503258 C7.37136096,14.2645239 7.89005543,14.2631131 8.21797911,13.9471265 L15.0930743,7.32229845 C15.4311156,6.99656251 15.4410911,6.45846474 15.1153552,6.12042343 C14.7896192,5.78238212 14.2515215,5.77240664 13.9134801,6.09814257 L7.62497983,12.1577289 Z" transform="translate(1.5 1)" fill="#81BF2C" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},978:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-create",use:"ac-create-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-create"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 0,14 0,9 C0,4 4,0 9,0 Z M8.25,8.25 L4.25,8.25 C3.83578644,8.25 3.5,8.58578644 3.5,9 C3.5,9.41421356 3.83578644,9.75 4.25,9.75 L8.25,9.75 L8.25,13.75 C8.25,14.1642136 8.58578644,14.5 9,14.5 C9.41421356,14.5 9.75,14.1642136 9.75,13.75 L9.75,9.75 L13.75,9.75 C14.1642136,9.75 14.5,9.41421356 14.5,9 C14.5,8.58578644 14.1642136,8.25 13.75,8.25 L9.75,8.25 L9.75,4.25 C9.75,3.83578644 9.41421356,3.5 9,3.5 C8.58578644,3.5 8.25,3.83578644 8.25,4.25 L8.25,8.25 Z" transform="translate(1.5 1)" fill="#617FDE" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},979:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-created-subtask",use:"ac-created-subtask-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-created-subtask"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 0,14 0,9 C0,4 4,0 9,0 Z M10.4991714,9.78027901 L7.9694991,9.78027901 C7.55528554,9.78027901 7.2194991,10.1160654 7.2194991,10.530279 C7.2194991,10.9444926 7.55528554,11.280279 7.9694991,11.280279 L10.4991714,11.280279 L10.4991714,13.8099513 C10.4991714,14.2241648 10.8349578,14.5599513 11.2491714,14.5599513 C11.6633849,14.5599513 11.9991714,14.2241648 11.9991714,13.8099513 L11.9991714,11.280279 L14.5288436,11.280279 C14.9430572,11.280279 15.2788436,10.9444926 15.2788436,10.530279 C15.2788436,10.1160654 14.9430572,9.78027901 14.5288436,9.78027901 L11.9991714,9.78027901 L11.9991714,7.25060674 C11.9991714,6.83639318 11.6633849,6.50060674 11.2491714,6.50060674 C10.8349578,6.50060674 10.4991714,6.83639318 10.4991714,7.25060674 L10.4991714,9.78027901 Z M3.78026489,3.64875232 C3.45417496,3.64875232 3.18982683,3.91310045 3.18982683,4.23919038 L3.18982683,4.25831426 C3.18982683,4.5844042 3.45417496,4.84875232 3.78026489,4.84875232 L10.6587333,4.84875232 C10.9848232,4.84875232 11.2491714,4.5844042 11.2491714,4.25831426 L11.2491714,4.23919038 C11.2491714,3.91310045 10.9848232,3.64875232 10.6587333,3.64875232 L3.78026489,3.64875232 Z M3.78026489,6.39778047 C3.45417496,6.39778047 3.18982683,6.6621286 3.18982683,6.98821853 L3.18982683,7.00734241 C3.18982683,7.33343235 3.45417496,7.59778047 3.78026489,7.59778047 L8.75938877,7.59778047 C9.08547871,7.59778047 9.34982683,7.33343235 9.34982683,7.00734241 L9.34982683,6.98821853 C9.34982683,6.6621286 9.08547871,6.39778047 8.75938877,6.39778047 L3.78026489,6.39778047 Z" transform="translate(1.5 1)" fill="#617FDE" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},980:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-del-file",use:"ac-del-file-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-del-file"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 0,14 0,9 C0,4 4,0 9,0 Z M13.9411277,10.6038133 C14.2022633,11.2862423 14.0578449,12.0884244 13.5078724,12.6383969 C12.9578999,13.1883694 12.1557178,13.3327878 11.4732888,13.0716522 L13.9411277,10.6038133 Z M10.3733449,11.9717084 C10.1122093,11.2892793 10.2566278,10.4870972 10.8066002,9.93712474 C11.3565727,9.38715226 12.1587548,9.24273382 12.8411839,9.5038694 L10.3733449,11.9717084 Z M10.202191,7.36508316 C10.6118358,7.17990453 11.0566287,7.05876735 11.5238019,7.01443933 C11.4989637,6.62487747 11.3435843,6.25016034 11.0528573,5.95943337 C10.3806513,5.28722734 9.2594284,5.33859769 8.54389092,6.05413517 L5.27265658,9.32536951 L5.27265658,9.46679087 L6.03027099,10.2244053 L6.17169235,10.2244053 L9.44292669,6.95317094 C9.66970006,6.72639756 9.99123536,6.69588296 10.1538215,6.85846913 C10.2714941,6.9761417 10.2880164,7.17707521 10.202191,7.36508316 Z M7.75527343,11.6712818 C7.74485938,11.5508825 7.73954384,11.4290247 7.73954384,11.3059253 L7.73954384,11.1800197 C7.73954384,10.6081473 7.85426235,10.0630689 8.06194204,9.56654169 L6.35496288,11.2735208 C5.70394672,11.924537 4.70030936,11.9667505 4.11531038,11.3817515 C3.5303114,10.7967525 3.57252485,9.79311514 4.22354101,9.14209898 L8.10905706,5.25658293 C9.11605184,4.24958815 10.748713,4.24958815 11.7557077,5.25658293 C12.2481234,5.74899863 12.4997502,6.39102141 12.510588,7.03633695 C12.9557673,7.09878534 13.3784778,7.23128196 13.767218,7.42232553 C13.8645054,6.32626897 13.4936806,5.19648424 12.6547435,4.35754716 C11.151225,2.85402864 8.71353982,2.85402864 7.2100213,4.35754716 L3.32450525,8.24306322 C2.18199856,9.3855699 2.12805784,11.1925705 3.21627462,12.2807872 C4.30449139,13.369004 6.11149196,13.3150633 7.25399864,12.1725566 L7.75527343,11.6712818 Z M14.5685326,13.6990571 C15.9001376,12.3674521 15.9001376,10.2080696 14.5685326,8.87646457 C13.2369276,7.54485957 11.0775451,7.54485957 9.74594008,8.87646457 C8.41433508,10.2080696 8.41433508,12.3674521 9.74594008,13.6990571 C11.0775451,15.0306621 13.2369276,15.0306621 14.5685326,13.6990571 Z" transform="translate(1.5 1)" fill="#FF5B81" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},981:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-delete",use:"ac-delete-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-delete"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 0,14 0,9 C0,4 4,0 9,0 Z M6.72274306,4.23752349 L5.44548613,4.23752349 C4.89320138,4.23752349 4.44548613,4.68523874 4.44548613,5.23752349 L4.44548613,5.81845354 L13.5545139,5.81845354 L13.5545139,5.23752349 C13.5545139,4.68523874 13.1067986,4.23752349 12.5545139,4.23752349 L11.2772569,4.23752349 L10.8133247,3.75441306 C10.624759,3.5580523 10.3642864,3.44705847 10.0920464,3.44705847 L7.90795355,3.44705847 C7.6357136,3.44705847 7.37524105,3.5580523 7.18667529,3.75441306 L6.72274306,4.23752349 Z M6.4057514,7.00415107 C5.85346665,7.00415107 5.4057514,7.45186632 5.4057514,8.00415107 L5.4057514,13.0135688 C5.4057514,13.8419959 6.07732427,14.5135688 6.9057514,14.5135688 L11.0942486,14.5135688 C11.9226757,14.5135688 12.5942486,13.8419959 12.5942486,13.0135688 L12.5942486,8.00415107 C12.5942486,7.45186632 12.1465334,7.00415107 11.5942486,7.00415107 L6.4057514,7.00415107 Z" transform="translate(1.5 1)" fill="#FF5B81" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},982:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-deleted-subtask",use:"ac-deleted-subtask-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-deleted-subtask"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 0,14 0,9 C0,4 4,0 9,0 Z M3.78026489,3.64875232 C3.45417496,3.64875232 3.18982683,3.91310045 3.18982683,4.23919038 L3.18982683,4.25831426 C3.18982683,4.5844042 3.45417496,4.84875232 3.78026489,4.84875232 L10.6587333,4.84875232 C10.9848232,4.84875232 11.2491714,4.5844042 11.2491714,4.25831426 L11.2491714,4.23919038 C11.2491714,3.91310045 10.9848232,3.64875232 10.6587333,3.64875232 L3.78026489,3.64875232 Z M3.78026489,6.39778047 C3.45417496,6.39778047 3.18982683,6.6621286 3.18982683,6.98821853 L3.18982683,7.00734241 C3.18982683,7.33343235 3.45417496,7.59778047 3.78026489,7.59778047 L6.06988355,7.59778047 C6.39597349,7.59778047 6.66032161,7.33343235 6.66032161,7.00734241 L6.66032161,6.98821853 C6.66032161,6.6621286 6.39597349,6.39778047 6.06988355,6.39778047 L3.78026489,6.39778047 Z M3.78026489,9.14680862 C3.45417496,9.14680862 3.18982683,9.41115674 3.18982683,9.73724668 L3.18982683,9.75637056 C3.18982683,10.0824605 3.45417496,10.3468086 3.78026489,10.3468086 L6.06988355,10.3468086 C6.39597349,10.3468086 6.66032161,10.0824605 6.66032161,9.75637056 L6.66032161,9.73724668 C6.66032161,9.41115674 6.39597349,9.14680862 6.06988355,9.14680862 L3.78026489,9.14680862 Z M9.73233098,6.71338369 L9.03971691,6.71338369 C8.48743216,6.71338369 8.03971691,7.16109894 8.03971691,7.71338369 L8.03971691,7.88843968 L14.8101732,7.88843968 L14.8101732,7.71338369 C14.8101732,7.16109894 14.3624579,6.71338369 13.8101732,6.71338369 L13.1175591,6.71338369 L12.8485078,6.43321027 C12.6599421,6.23684951 12.3994695,6.12585569 12.1272296,6.12585569 L10.7226605,6.12585569 C10.4504206,6.12585569 10.189948,6.23684951 10.0013822,6.43321027 L9.73233098,6.71338369 Z M9.6019608,8.76973168 C9.160133,8.76973168 8.8019608,9.12790388 8.8019608,9.56973168 L8.8019608,13.1512477 C8.8019608,13.8139894 9.3392191,14.3512477 10.0019608,14.3512477 L12.8479293,14.3512477 C13.510671,14.3512477 14.0479293,13.8139894 14.0479293,13.1512477 L14.0479293,9.56973168 C14.0479293,9.12790388 13.6897571,8.76973168 13.2479293,8.76973168 L9.6019608,8.76973168 Z" transform="translate(1.5 1)" fill="#FF5B81" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},983:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-done",use:"ac-done-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-done"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 0,14 0,9 C0,4 4,0 9,0 Z M3.71469972,8.50521959 C3.32019822,8.89172575 3.31371671,9.52485755 3.70022287,9.91935905 L6.20936123,12.4804019 C6.78912047,13.0721542 7.73881817,13.0818764 8.33057042,12.5021172 C8.33343622,12.4993095 8.33629075,12.4964903 8.33913393,12.4936597 L14.2910096,6.56806742 C14.6823971,6.17840827 14.6837982,5.54524484 14.2941391,5.15385732 C13.9044799,4.7624698 13.2713165,4.76106869 12.879929,5.15072784 L7.64243238,10.3650957 C7.44673862,10.5599253 7.13015691,10.5592247 6.93532733,10.363531 C6.93438379,10.3625832 6.93344406,10.3616317 6.93250815,10.3606765 L5.12883918,8.51969644 C4.74233302,8.12519494 4.10920122,8.11871343 3.71469972,8.50521959 Z" transform="translate(1.5 1)" fill="#81BF2C" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},984:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-edit",use:"ac-edit-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-edit"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 0,14 0,9 C0,4 4,0 9,0 Z M11.485648,5.635637 L11.4855385,5.63574641 C11.2903191,5.44052698 10.973821,5.44047802 10.7785412,5.63563704 L5.50204093,10.9086544 C4.20848497,13.1684637 3.68248865,14.41915 3.92405198,14.6607134 C4.16561531,14.9022767 5.39871841,14.3586972 7.62336128,13.0299748 L12.8998615,7.75695734 C12.899898,7.75692089 12.8999344,7.75688444 12.8999709,7.75684797 C13.095233,7.56158583 13.095233,7.24500334 12.8999709,7.04974119 L11.485648,5.635637 Z M14.4132341,6.23354566 L15.0132341,5.53354566 C15.2132341,5.33354566 15.2132341,5.03354566 15.0132341,4.83354566 L13.6132341,3.43354566 C13.4132341,3.23354566 13.1132341,3.23354566 12.9132341,3.43354566 L12.2132341,4.13354566 C12.0132341,4.33354566 12.0132341,4.63354566 12.2132341,4.83354566 L13.6132341,6.23354566 C13.7132341,6.33354566 13.9132341,6.33354566 14.0132341,6.33354566 C14.1132341,6.33354566 14.3132341,6.33354566 14.4132341,6.23354566 Z" transform="translate(1.5 1)" fill="#FFB119" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},985:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-edited-subtask",use:"ac-edited-subtask-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-edited-subtask"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 0,14 0,9 C0,4 4,0 9,0 Z M12.1866188,7.37899363 L12.1865094,7.37910304 C11.99129,7.18388361 11.6747919,7.18383465 11.479512,7.37899367 L7.38327706,11.4724759 C6.36089776,13.2585465 5.94516952,14.2470432 6.13609234,14.437966 C6.32701515,14.6288888 7.30161472,14.1992635 9.05989104,13.1490899 L13.156126,9.05560761 C13.1561625,9.05557116 13.1561989,9.0555347 13.1562354,9.05549824 C13.3514975,8.86023609 13.3514975,8.5436536 13.1562354,8.34839145 L12.1866188,7.37899363 Z M14.426358,7.77744103 L14.9005761,7.22418665 C15.0586488,7.06611396 15.0586488,6.82900494 14.9005761,6.67093226 L13.7940673,5.56442349 C13.6359946,5.40635081 13.3988856,5.40635081 13.2408129,5.56442349 L12.6875585,6.11767787 C12.5294858,6.27575056 12.5294858,6.51285958 12.6875585,6.67093226 L13.7940673,7.77744103 C13.8731036,7.85647737 14.0311763,7.85647737 14.1102127,7.85647737 C14.189249,7.85647737 14.3473217,7.85647737 14.426358,7.77744103 Z M3.78026489,3.64875232 C3.45417496,3.64875232 3.18982683,3.91310045 3.18982683,4.23919038 L3.18982683,4.25831426 C3.18982683,4.5844042 3.45417496,4.84875232 3.78026489,4.84875232 L10.6587333,4.84875232 C10.9848232,4.84875232 11.2491714,4.5844042 11.2491714,4.25831426 L11.2491714,4.23919038 C11.2491714,3.91310045 10.9848232,3.64875232 10.6587333,3.64875232 L3.78026489,3.64875232 Z M3.78026489,6.39778047 C3.45417496,6.39778047 3.18982683,6.6621286 3.18982683,6.98821853 L3.18982683,7.00734241 C3.18982683,7.33343235 3.45417496,7.59778047 3.78026489,7.59778047 L6.06988355,7.59778047 C6.39597349,7.59778047 6.66032161,7.33343235 6.66032161,7.00734241 L6.66032161,6.98821853 C6.66032161,6.6621286 6.39597349,6.39778047 6.06988355,6.39778047 L3.78026489,6.39778047 Z M3.78026489,9.14680862 C3.45417496,9.14680862 3.18982683,9.41115674 3.18982683,9.73724668 L3.18982683,9.75637056 C3.18982683,10.0824605 3.45417496,10.3468086 3.78026489,10.3468086 L6.06988355,10.3468086 C6.39597349,10.3468086 6.66032161,10.0824605 6.66032161,9.75637056 L6.66032161,9.73724668 C6.66032161,9.41115674 6.39597349,9.14680862 6.06988355,9.14680862 L3.78026489,9.14680862 Z" transform="translate(1.5 1)" fill="#FFB119" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},986:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-in",use:"ac-in-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-in"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 0,14 0,9 C0,4 4,0 9,0 Z M13.2969661,8.25 L9.75,8.25 L9.75,4.72017722 L10.6523946,5.54729385 C10.8867092,5.76206184 11.2666082,5.76206184 11.5009228,5.54729385 C11.7352373,5.33252586 11.7352373,4.98431815 11.5009228,4.76955015 L9.42426407,2.86612686 C9.18994949,2.65135887 8.81005051,2.65135887 8.57573593,2.86612686 L6.49907723,4.76955015 C6.26476265,4.98431815 6.26476265,5.33252586 6.49907723,5.54729385 C6.7333918,5.76206184 7.11329079,5.76206184 7.34760537,5.54729385 L8.25,4.72017722 L8.25,8.25 L4.70223644,8.25 L5.52935308,7.34760537 C5.74412107,7.11329079 5.74412107,6.7333918 5.52935308,6.49907723 C5.31458509,6.26476265 4.96637737,6.26476265 4.75160938,6.49907723 L2.84818609,8.57573593 C2.6334181,8.81005051 2.6334181,9.18994949 2.84818609,9.42426407 L4.75160938,11.5009228 C4.96637737,11.7352373 5.31458509,11.7352373 5.52935308,11.5009228 C5.74412107,11.2666082 5.74412107,10.8867092 5.52935308,10.6523946 L4.70223644,9.75 L8.25,9.75 L8.25,13.2798228 L7.34760537,12.4527061 C7.11329079,12.2379382 6.7333918,12.2379382 6.49907723,12.4527061 C6.26476265,12.6674741 6.26476265,13.0156819 6.49907723,13.2304498 L8.57573593,15.1338731 C8.81005051,15.3486411 9.18994949,15.3486411 9.42426407,15.1338731 L11.5009228,13.2304498 C11.7352373,13.0156819 11.7352373,12.6674741 11.5009228,12.4527061 C11.2666082,12.2379382 10.8867092,12.2379382 10.6523946,12.4527061 L9.75,13.2798228 L9.75,9.75 L13.2969661,9.75 L12.4698494,10.6523946 C12.2550814,10.8867092 12.2550814,11.2666082 12.4698494,11.5009228 C12.6846174,11.7352373 13.0328251,11.7352373 13.2475931,11.5009228 L15.1510164,9.42426407 C15.3657844,9.18994949 15.3657844,8.81005051 15.1510164,8.57573593 L13.2475931,6.49907723 C13.0328251,6.26476265 12.6846174,6.26476265 12.4698494,6.49907723 C12.2550814,6.7333918 12.2550814,7.11329079 12.4698494,7.34760537 L13.2969661,8.25 Z" transform="translate(1.5 1)" fill="#617FDE" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},987:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-out",use:"ac-out-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-out"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 0,14 0,9 C0,4 4,0 9,0 Z M9,15.3426806 C12.5029658,15.3426806 15.3426806,12.5029658 15.3426806,9 C15.3426806,5.49703424 12.5029658,2.65731941 9,2.65731941 C5.49703424,2.65731941 2.65731941,5.49703424 2.65731941,9 C2.65731941,12.5029658 5.49703424,15.3426806 9,15.3426806 Z M9,13.8426806 C6.32546136,13.8426806 4.15731941,11.6745386 4.15731941,9 C4.15731941,6.32546136 6.32546136,4.15731941 9,4.15731941 C11.6745386,4.15731941 13.8426806,6.32546136 13.8426806,9 C13.8426806,11.6745386 11.6745386,13.8426806 9,13.8426806 Z M6.25,8.25 C5.83578644,8.25 5.5,8.58578644 5.5,9 C5.5,9.41421356 5.83578644,9.75 6.25,9.75 L11.75,9.75 C12.1642136,9.75 12.5,9.41421356 12.5,9 C12.5,8.58578644 12.1642136,8.25 11.75,8.25 L6.25,8.25 Z" transform="translate(1.5 1)" fill="#FF5B81" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},988:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-share-delete",use:"ac-share-delete-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-share-delete"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 0,14 0,9 C0,4 4,0 9,0 Z M14.3646237,8.22352595 L9.03422686,8.22352595 C8.6200133,8.22352595 8.28422686,8.55931239 8.28422686,8.97352595 C8.28422686,9.38773952 8.6200133,9.72352595 9.03422686,9.72352595 L14.3646237,9.72352595 L14.3646237,11.0044125 C14.3646237,11.1148695 14.4541668,11.2044125 14.5646237,11.2044125 C14.6174642,11.2044125 14.6681574,11.1835015 14.7056305,11.1462472 L16.5250316,9.33746713 C16.7208645,9.14277743 16.7217913,8.82619629 16.5271016,8.63036338 C16.5264136,8.62967138 16.5257236,8.62898139 16.5250316,8.62829343 L14.7056305,6.81951332 C14.6272973,6.74163744 14.5006649,6.74200814 14.422789,6.8203413 C14.3855347,6.85781436 14.3646237,6.90850762 14.3646237,6.96134806 L14.3646237,8.22352595 Z M10.7890206,4.99271557 C11.3413054,4.99271557 11.7890206,5.44043082 11.7890206,5.99271557 L11.7890206,6.83759799 L13.2890206,6.83759799 L13.2890206,5.49271557 C13.2890206,4.38814607 12.3935901,3.49271557 11.2890206,3.49271557 L5.27943311,3.49271557 C4.17486361,3.49271557 3.27943311,4.38814607 3.27943311,5.49271557 L3.27943311,12.5072844 C3.27943311,13.6118539 4.17486361,14.5072844 5.27943311,14.5072844 L11.2890206,14.5072844 C12.3935901,14.5072844 13.2890206,13.6118539 13.2890206,12.5072844 L13.2890206,11.162402 L11.7890206,11.162402 L11.7890206,12.0072844 C11.7890206,12.5595692 11.3413054,13.0072844 10.7890206,13.0072844 L5.77943311,13.0072844 C5.22714836,13.0072844 4.77943311,12.5595692 4.77943311,12.0072844 L4.77943311,5.99271557 C4.77943311,5.44043082 5.22714836,4.99271557 5.77943311,4.99271557 L10.7890206,4.99271557 Z" transform="translate(1.5 1)" fill="#FFB119" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},989:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-share-join",use:"ac-share-join-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-share-join"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 0,14 0,9 C0,4 4,0 9,0 Z M8.49466774,8.22352595 L3.16427087,8.22352595 C2.75005731,8.22352595 2.41427087,8.55931239 2.41427087,8.97352595 C2.41427087,9.38773952 2.75005731,9.72352595 3.16427087,9.72352595 L8.49466774,9.72352595 L8.49466774,11.0044125 C8.49466774,11.1148695 8.58421079,11.2044125 8.69466774,11.2044125 C8.74750819,11.2044125 8.79820145,11.1835015 8.8356745,11.1462472 L10.6550756,9.33746713 C10.8509085,9.14277743 10.8518353,8.82619629 10.6571456,8.63036338 C10.6564576,8.62967138 10.6557676,8.62898139 10.6550756,8.62829343 L8.8356745,6.81951332 C8.75734134,6.74163744 8.63070889,6.74200814 8.552833,6.8203413 C8.5155787,6.85781436 8.49466774,6.90850762 8.49466774,6.96134806 L8.49466774,8.22352595 Z M6.89814044,4.99271557 L11.9077279,4.99271557 C12.4600127,4.99271557 12.9077279,5.44043082 12.9077279,5.99271557 L12.9077279,12.0072844 C12.9077279,12.5595692 12.4600127,13.0072844 11.9077279,13.0072844 L6.89814044,13.0072844 C6.34585569,13.0072844 5.89814044,12.5595692 5.89814044,12.0072844 L5.89814044,11.162402 L4.39814044,11.162402 L4.39814044,12.5072844 C4.39814044,13.6118539 5.29357094,14.5072844 6.39814044,14.5072844 L12.4077279,14.5072844 C13.5122974,14.5072844 14.4077279,13.6118539 14.4077279,12.5072844 L14.4077279,5.49271557 C14.4077279,4.38814607 13.5122974,3.49271557 12.4077279,3.49271557 L6.39814044,3.49271557 C5.29357094,3.49271557 4.39814044,4.38814607 4.39814044,5.49271557 L4.39814044,6.83759799 L5.89814044,6.83759799 L5.89814044,5.99271557 C5.89814044,5.44043082 6.34585569,4.99271557 6.89814044,4.99271557 Z" transform="translate(1.5 1)" fill="#FFB119" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},990:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-switched-subtask",use:"ac-switched-subtask-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-switched-subtask"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 0,14 0,9 C0,4 4,0 9,0 Z M4.77948594,4.12655427 C4.36527238,4.12655427 4.02948594,4.46234071 4.02948594,4.87655427 C4.02948594,5.29076783 4.36527238,5.62655427 4.77948594,5.62655427 L13.2205141,5.62655427 C13.6347276,5.62655427 13.9705141,5.29076783 13.9705141,4.87655427 C13.9705141,4.46234071 13.6347276,4.12655427 13.2205141,4.12655427 L4.77948594,4.12655427 Z M7.62306737,8.125 C7.20885381,8.125 6.87306737,8.46078644 6.87306737,8.875 C6.87306737,9.28921356 7.20885381,9.625 7.62306737,9.625 L13.2205141,9.625 C13.6347276,9.625 13.9705141,9.28921356 13.9705141,8.875 C13.9705141,8.46078644 13.6347276,8.125 13.2205141,8.125 L7.62306737,8.125 Z M7.62306737,12.1234457 C7.20885381,12.1234457 6.87306737,12.4592322 6.87306737,12.8734457 C6.87306737,13.2876593 7.20885381,13.6234457 7.62306737,13.6234457 L13.2205141,13.6234457 C13.6347276,13.6234457 13.9705141,13.2876593 13.9705141,12.8734457 C13.9705141,12.4592322 13.6347276,12.1234457 13.2205141,12.1234457 L7.62306737,12.1234457 Z M4.77948594,8.125 C4.36527238,8.125 4.02948594,8.46078644 4.02948594,8.875 C4.02948594,9.28921356 4.36527238,9.625 4.77948594,9.625 C5.1936995,9.625 5.52948594,9.28921356 5.52948594,8.875 C5.52948594,8.46078644 5.1936995,8.125 4.77948594,8.125 Z M4.77948594,12.1234457 C4.36527238,12.1234457 4.02948594,12.4592322 4.02948594,12.8734457 C4.02948594,13.2876593 4.36527238,13.6234457 4.77948594,13.6234457 C5.1936995,13.6234457 5.52948594,13.2876593 5.52948594,12.8734457 C5.52948594,12.4592322 5.1936995,12.1234457 4.77948594,12.1234457 Z" transform="translate(1.5 1)" fill="#617FDE" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},991:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-switched-text",use:"ac-switched-text-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-switched-text"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 0,14 0,9 C0,4 4,0 9,0 Z M4.77948594,4.12655427 C4.36527238,4.12655427 4.02948594,4.46234071 4.02948594,4.87655427 C4.02948594,5.29076783 4.36527238,5.62655427 4.77948594,5.62655427 L13.2205141,5.62655427 C13.6347276,5.62655427 13.9705141,5.29076783 13.9705141,4.87655427 C13.9705141,4.46234071 13.6347276,4.12655427 13.2205141,4.12655427 L4.77948594,4.12655427 Z M4.77948594,8.11173914 C4.36527238,8.11173914 4.02948594,8.44752558 4.02948594,8.86173914 C4.02948594,9.2759527 4.36527238,9.61173914 4.77948594,9.61173914 L13.2205141,9.61173914 C13.6347276,9.61173914 13.9705141,9.2759527 13.9705141,8.86173914 C13.9705141,8.44752558 13.6347276,8.11173914 13.2205141,8.11173914 L4.77948594,8.11173914 Z M4.77948594,12.096924 C4.36527238,12.096924 4.02948594,12.4327104 4.02948594,12.846924 C4.02948594,13.2611376 4.36527238,13.596924 4.77948594,13.596924 L8.96007344,13.596924 C9.374287,13.596924 9.71007344,13.2611376 9.71007344,12.846924 C9.71007344,12.4327104 9.374287,12.096924 8.96007344,12.096924 L4.77948594,12.096924 Z" transform="translate(1.5 1)" fill="#617FDE" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},992:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-undone-subtask",use:"ac-undone-subtask-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-undone-subtask"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 0,14 0,9 C0,4 4,0 9,0 Z M8.22363973,9.78886824 C8.48563041,8.65804462 9.42166916,7.85885164 10.5965158,7.85885164 C12.023093,7.85885164 13.1795624,9.015321 13.1795624,10.4418983 C13.1795624,11.8684755 12.023093,13.0249449 10.5965158,13.0249449 C10.1823022,13.0249449 9.84651577,13.3607313 9.84651577,13.7749449 C9.84651577,14.1891584 10.1823022,14.5249449 10.5965158,14.5249449 C12.8515201,14.5249449 14.6795624,12.6969026 14.6795624,10.4418983 C14.6795624,8.18689388 12.8515201,6.35885164 10.5965158,6.35885164 C8.6627358,6.35885164 7.12558421,7.70887863 6.74240811,9.54144114 L6.56196747,9.31048765 C6.34095419,9.02760355 5.93246463,8.97744733 5.64958052,9.19846062 C5.36669642,9.41947391 5.31654021,9.82796346 5.53755349,10.1108476 L6.79965745,11.726267 C7.02067074,12.0091511 7.42916029,12.0593073 7.7120444,11.838294 L9.3274638,10.57619 C9.61034791,10.3551768 9.66050412,9.94668721 9.43949083,9.6638031 C9.21847754,9.38091899 8.80998799,9.33076278 8.52710388,9.55177607 L8.22363973,9.78886824 Z M3.91087568,3.63290359 C3.58478575,3.63290359 3.32043762,3.89725171 3.32043762,4.22334165 L3.32043762,4.24246553 C3.32043762,4.56855547 3.58478575,4.83290359 3.91087568,4.83290359 L10.7893441,4.83290359 C11.115434,4.83290359 11.3797822,4.56855547 11.3797822,4.24246553 L11.3797822,4.22334165 C11.3797822,3.89725171 11.115434,3.63290359 10.7893441,3.63290359 L3.91087568,3.63290359 Z M3.91087568,6.38193174 C3.58478575,6.38193174 3.32043762,6.64627986 3.32043762,6.9723698 L3.32043762,6.99149368 C3.32043762,7.31758361 3.58478575,7.58193174 3.91087568,7.58193174 L6.19999956,7.58193174 C6.5260895,7.58193174 6.79043762,7.31758361 6.79043762,6.99149368 L6.79043762,6.9723698 C6.79043762,6.64627986 6.5260895,6.38193174 6.19999956,6.38193174 L3.91087568,6.38193174 Z" transform="translate(1.5 1)" fill="#B8B9BC" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},993:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"ac-undone",use:"ac-undone-usage",viewBox:"0 0 21 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 21 20" id="ac-undone"><path d="M9,0 C14,0 18,4 18,9 C18,14 14,18 9,18 C4,18 0,14 0,9 C0,4 4,0 9,0 Z M5.18621752,8.75181968 C5.301756,6.60160865 6.91310038,4.97505514 9.00865433,4.97505514 C11.23157,4.97505514 13.0335992,6.77708433 13.0335992,9 C13.0335992,11.2229157 11.23157,13.0249449 9.00865433,13.0249449 C8.59444077,13.0249449 8.25865433,13.3607313 8.25865433,13.7749449 C8.25865433,14.1891584 8.59444077,14.5249449 9.00865433,14.5249449 C12.0599971,14.5249449 14.5335992,12.0513428 14.5335992,9 C14.5335992,5.94865721 12.0599971,3.47505514 9.00865433,3.47505514 C6.16850733,3.47505514 3.96263392,5.630321 3.70480593,8.4452139 L3.0071493,7.55225414 C2.78613601,7.26937003 2.37764646,7.21921382 2.09476235,7.44022711 C1.81187824,7.66124039 1.76172203,8.06972995 1.98273532,8.35261405 L3.79083389,10.6668747 C4.01184717,10.9497588 4.42033673,10.999915 4.70322083,10.7789017 L7.01748147,8.97080315 C7.30036558,8.74978986 7.35052179,8.34130031 7.1295085,8.0584162 C6.90849521,7.77553209 6.50000566,7.72537588 6.21712155,7.94638917 L5.18621752,8.75181968 Z" transform="translate(1.5 1)" fill="#B8B9BC" fill-rule="nonzero" /></symbol>'});o.a.add(c);t.default=c},994:function(e,t,n){"use strict";n.r(t);var r=n(316),a=n.n(r),i=n(317),o=n.n(i),c=new a.a({id:"mini-delete",use:"mini-delete-usage",viewBox:"0 -2 12 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 -2 12 12" id="mini-delete"><path fill="none" d="M0 -2H12V10H0z" /><path d="M10.4 0.4L9.6 -0.4 6 3.3 2.4 -0.4 1.6 0.4 5.3 4 1.6 7.6 2.4 8.4 6 4.7 9.6 8.4 10.4 7.6 6.7 4z" /></symbol>'});o.a.add(c);t.default=c},995:function(e,t,n){},996:function(e,t,n){e.exports={listWrapper:"listWrapper_2GDHW",topWrapper:"topWrapper_6o2yb",title:"title_3H8-W"}},997:function(e,t,n){e.exports={"sk-circle":"sk-circle_34r5l","sk-child":"sk-child_3RYM2","sk-circleBounceDelay":"sk-circleBounceDelay_2dwuu","sk-circle2":"sk-circle2_3xlQK","sk-circle3":"sk-circle3_MW3VF","sk-circle4":"sk-circle4_1Jdge","sk-circle5":"sk-circle5_p1EcO","sk-circle6":"sk-circle6_32KlM","sk-circle7":"sk-circle7_3tRyL","sk-circle8":"sk-circle8_2Gdgz","sk-circle9":"sk-circle9_3xcrM","sk-circle10":"sk-circle10_1_z03","sk-circle11":"sk-circle11_2kPIu","sk-circle12":"sk-circle12_2apwY"}},998:function(e,t,n){e.exports={singleWrapper:"singleWrapper_GJh8N",parentTaskLink:"parentTaskLink_2XMxF",estimatedWrapper:"estimatedWrapper_GWxK9",disabled:"disabled_1MFC-",hoverBackground:"hoverBackground_1GSZT",estimatedBlock:"estimatedBlock_1l3Pf",count:"count_2BAgE",estimated:"estimated_2SfPC",pomo:"pomo_18Cgd",icon:"icon_3u3AM",duration:"duration_2n3Jg"}},999:function(e,t,n){e.exports={estimationMenu:"estimationMenu_2jEMk",content:"content_2CUy5",footer:"footer_3HODF",inputGroup:"inputGroup_2XuL3"}}}]);