"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[801],{740:(e,t,o)=>{o.r(t),o.d(t,{default:()=>H});var r=o(98135),i=o.n(r),n=(o(33948),o(67294)),a=o(58879),s=o(45016),l=o(89940),u=o(27832),d=o(59713),c=o.n(d),p=o(66832),g=o(92166),m=o(68932);class f extends p.Z{renderComponent(){return i()(g.Z,{show:!0,showDelay:400,showHold:100,render:e=>i()("div",{style:f.containerStyle},void 0,e&&i()(m.Z,{}))})}}c()(f,"containerStyle",{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"});const v=f;var b=o(47569),y=o(5366),h=o(43250),_=o(7170),S=o(40515),w=o(91149),k=o(50906),I=o(56200),Z=o(85227),M=o(70043),F=o(3779);function T(){const e=(0,a.O7)();return i()(b.Z,{className:h.wG,title:i()(y._H,{id:"developerIntegrationNotFound.title.label",defaultMessage:"Not Found"}),subtitle:i()(y._H,{id:"developerIntegrationNotFound.subtitle.label",defaultMessage:"This integration doesn’t exist."}),onNavigateBack:()=>(0,s.A1)(e),icon:F.Z.eyes({width:98,height:98}),sideContent:null},void 0,null)}var C=o(80574),B=o(97880);function H(e){const{botOrIntegrationPointer:t}=e,o=(0,a.O7)(),[{currentUserStore:r}]=(0,l.oR)(u.Z),[,,d]=(0,l.oR)(void 0,Z.Z),c=(0,l.Kw)(d),p=(0,l.VK)((()=>{if(t&&r){const e=r.getRecordValue(t);if(e)return{value:e,table:t.table}}}),[r,t]);(0,n.useEffect)((()=>{p&&(d.initializeNewForm(p),k.DUp(o,{table:p.table}))}),[d,o,p]);const g=(0,C.V)({value:c.startingRecord});if("rejected"===g.status||!t)return i()(T,{});if("pending"===g.status)return i()(v,{});"resolved"!==g.status&&(0,B.t1)(g);const m=g.value,f=m.value.name,F=m.table===_.c?m.value.icon:m.value.info.icon,H={id:m.value.id,table:m.table},x=F?{pointer:H,icon:F}:void 0;return i()(b.Z,{className:h.TF,title:f,subtitle:i()(y._H,{id:"developerIntegrationView.subtitle.label",defaultMessage:"Review and edit integration information."}),onNavigateBack:()=>(0,s.A1)(o),icon:i()(S.Z,{disabled:!0,icon:x,title:f,isEmptyPage:!1,size:98,isLarge:!0,style:{boxShadow:M.Z.frontDeepShadow},useInvertedColors:!0}),sideContent:i()(I.T,{integrationFormStore:d})},void 0,i()(w.Z,{integrationFormStore:d}))}},25898:(e,t,o)=>{o.r(t),o.d(t,{default:()=>p});var r=o(98135),i=o.n(r),n=(o(33948),o(67294),o(47569)),a=o(5366),s=o(43250),l=o(91149),u=o(56200),d=o(89940),c=o(85227);function p(e){const{onClose:t,onSuccess:o}=e,[,,r]=(0,d.oR)(void 0,c.Z);return i()(n.Z,{className:s.Zp,title:i()(a._H,{id:"developerIntegrationsCreateInternal.title.label",defaultMessage:"Create a new integration"}),subtitle:i()(a._H,{id:"developerIntegrationsCreateInternal.subtitle.label",defaultMessage:"We’ll walk you through how to setup a new integration."}),onNavigateBack:t,sideContent:i()(u.T,{integrationFormStore:r})},void 0,i()(l.Z,{onCreateNew:o,integrationFormStore:r,shouldAutoFocusFirstField:!0}))}},91149:(e,t,o)=>{o.d(t,{Z:()=>_e});var r=o(67154),i=o.n(r),n=o(98135),a=o.n(n),s=(o(33948),o(73210),o(96486)),l=o(67294),u=o.n(l),d=o(5366),c=o(7170),p=o(1985),g=o(97880),m=o(89940),f=o(27832),v=o(90031),b=o(64442),y=o(3779),h=o(98481),_=o(42402),S=o(89101),w=o(8848),k=o(38381);function I(e){const{onSubmit:t,children:o,submitType:r}=e,i="create-bot"===r||"create-integration"===r;return a()("form",{id:"developer-integration-form",style:{minWidth:200,maxWidth:440,marginLeft:24,display:"flex",flexDirection:"column"},onSubmit:e=>{e.preventDefault(),"create-integration"===r?k.Z.setState({open:!0,isDestructive:!1,title:a()(d._H,{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.title",defaultMessage:"Switch to Public integration?"}),message:a()(d._H,{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.message",defaultMessage:"You‘ll get an OAuth secret and will need to implement OAuth for authorization. See <oauthdocumentationlink>developer docs</oauthdocumentationlink> for more information.",values:{oauthdocumentationlink:(...e)=>a()(_.Z,{href:S._j.developerOAuthDocs},void 0,e)}}),onConfirm:()=>{t()}}):t()}},void 0,o,a()("div",{style:{display:"flex",marginTop:24,flexDirection:"row-reverse",alignItems:"center"}},void 0,a()(h.h,{onClick:()=>{const e=document.querySelector("form#developer-integration-form");if(e){const t=e.ownerDocument.createElement("input");t.style.display="none",t.type="submit",e.appendChild(t).click(),e.removeChild(t)}}},void 0,a()(Z,{isCreate:i})),i&&a()("span",{style:{fontSize:15,color:w.ZP.frontTextLight,marginRight:42}},void 0,a()(d._H,{id:"developerIntegrationFormHandler.create.developerTerms",defaultMessage:"By submitting, you agree to Notion's <developertermslink>Developer Terms</developertermslink>.",values:{developertermslink:(...e)=>a()(_.Z,{href:S._j.developerTerms},void 0,e)}}))))}function Z(e){const{isCreate:t}=e;return t?u().createElement(u().Fragment,null,a()("div",{style:{marginRight:4}},void 0,a()(d._H,{id:"formHandler.submitButton.create.label",defaultMessage:"Submit"})),y.Z.arrowRight({width:14,height:14})):a()(d._H,{id:"formHandler.submitButton.create.update",defaultMessage:"Save changes"})}var M=o(62727),F=o(58879),T=o(66055),C=o(14947),B=o(37235),H=o(82990),x=o(74350);function R(e){const{fetchSecret:t,secretName:o,onCopy:r,onError:i,confirmationModalProps:n,hasSecretBeenViewed:s}=e,l=(0,F.O7)(),[d,c]=u().useState();return a()(M.Z,{type:d?"text":"password",disabled:!0,style:{fontFamily:H.Z.getCompositeFontFamily(x.SP).mono,color:w.ZP.frontTextMedium},inputStyle:d?{cursor:"text"}:void 0,value:d||" ".repeat(40),right:a()("div",{style:{display:"flex"}},void 0,a()("div",{style:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1}}),d?a()(P,{secretName:o,onClick:()=>{r&&r(),(0,T.RD)({environment:l,stringValue:d})}}):a()(N,{hasSecretBeenViewed:s,onClick:async()=>{const e=async()=>{const e=await t();"secret"in e?c(e.secret):i(e.error.body.message)};n?k.Z.setState({...n,open:!0,onConfirm:e}):await e()}}))})}function N(e){const{onClick:t,hasSecretBeenViewed:o}=e;return a()(C.Z,{onClick:t,style:V.button},void 0,a()(d._H,o?{id:"formSecretShow.refreshSecret.label",defaultMessage:"Refresh"}:{id:"formSecretShow.showSecret.label",defaultMessage:"Show"}))}function P(e){const{onClick:t,secretName:o}=e,[r,n]=u().useState(!1),s=a()(d._H,r?{defaultMessage:"{secretName} copied",id:"formSecretShow.secretCopied.tooltip",description:"Tooltip shown when user copied integration secret to clipboard",values:{secretName:o}}:{defaultMessage:"Copy {secretName}",id:"formSecretShow.copySecret.tooltip",description:"Shortcut for copying a token from an integration management page; 'secretName' will be either 'secret' or 'token'",values:{secretName:o}});return a()(B.Z,{placement:B.Z.Placement.Top,renderTooltip:()=>s,render:e=>u().createElement(C.Z,i()({onClick:e=>{e.preventDefault(),n(!0),setTimeout((()=>{n(!1)}),1500),t()}},e,{style:{...V.button,color:r?w.ZP.mediumTextColor:w.ZP.blue}}),a()(d._H,r?{id:"formSecretShow.copied.label",defaultMessage:"Copied"}:{id:"formSecretShow.copySecret.label",defaultMessage:"Copy"}))})}const V={button:{display:"inline-flex",alignItems:"center",fontFamily:H.Z.getCompositeFontFamily(x.SP).sans,borderRadius:3,padding:"0 6px",height:24,color:w.ZP.blue}};var O=o(32935),D=o(64215),E=o(14598),W=o(47966),z=o(46951);function A(e){const{options:t,value:o,setValue:r}=e;return a()("div",{style:{display:"flex",flexDirection:"column"}},void 0,t.map(((e,i)=>a()(K,{option:e,value:o,setValue:r,isFirst:0===i,isLast:i===t.length-1},e.key))))}function K(e){const{option:t,value:o,setValue:r,isFirst:i,isLast:n}=e,s=(0,D.y)((e=>({outliner:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"auto",padding:18,whiteSpace:"normal",fontSize:15,background:e.whiteButtonBackground,borderTopLeftRadius:i?3:0,borderTopRightRadius:i?3:0,borderBottomLeftRadius:n?3:0,borderBottomRightRadius:n?3:0,...!i&&{borderTop:void 0}}})),[i,n]);return a()(W.Z,{onClick:()=>r(t.key),style:s.outliner},void 0,a()(E.Z,{title:t.title,isSelected:o===t.key,onClick:()=>{}},t.key),a()(z.Z,{isMultiline:!0,isSecondaryColor:!0,style:{marginLeft:24,marginTop:-4,fontSize:15}},void 0,t.caption))}var q=o(48243),L=o(4637),U=o(53471),$=o(68932);function G(e){const{value:t,setValue:o,setError:r}=e,i=(0,F.O7)(),[n,s]=u().useState(!1);return u().createElement(u().Fragment,null,t&&a()(q.Z,{url:t,isAuthenticated:!1,stripGoogleIconQuery:!0,width:90,render:(e,t)=>a()("div",{style:{width:90,height:90}},void 0,a()(L.Z,{src:t,style:{width:90,height:90,objectFit:"cover",borderRadius:3}}))}),a()(W.Z,{isLarge:!0,style:{width:"fit-content",backgroundColor:"white"},onClick:()=>{(0,U.cR)({environment:i,onStart:()=>s(!0),bucket:"public",onError:e=>{r(e.message),s(!1)},onComplete:e=>{o(e[0]),s(!1)},accept:"image/*"})}},void 0,a()(d._H,{id:"formInputIcon.uploadButton.label",defaultMessage:"Upload image"}),n&&a()($.Z,{style:{marginLeft:4}})))}var j=o(15692),Y=o(25584),X=o(95009),Q=o(83071);function J(e){const{value:t}=e,[o,r]=u().useState(!1),n=()=>r(!1);return a()(j.GI,{popupType:j.GI.PopupType.Popup,alignmentToOrigin:j.GI.Alignment.Start,placementToOrigin:j.GI.Placement.Bottom,originGap:2,sameWidthAsOrigin:!0,open:o,onDismiss:n,render:()=>u().createElement(te,i()({},e,{value:t,onClose:n})),origin:u().createElement(ee,i()({},e,{value:t,onClick:()=>r(!0)}))})}function ee(e){const{onClick:t,value:o,renderMenuItem:r}=e,i=(0,D.y)((e=>({dropdown:{background:e.whiteButtonBackground,border:"1px solid ".concat(e.outlineButtonBorder),borderRadius:3,height:32},expandIcon:{height:12,width:12,fill:e.lightIconColor}})),[]);return u().createElement(u().Fragment,null,r({item:o,focused:!1,onClick:t,style:i.dropdown,right:y.Z.expand(i.expandIcon)}))}function te(e){const{keyName:t,items:o,value:r,setValue:i,renderMenuItem:n,onClose:s}=e;let l=0;const d=o.map(((e,t)=>(e.id===(null==r?void 0:r.id)&&(l=t),{key:e.id,action:()=>{i(e),s()},render:t=>n({...t,item:e})})));return a()(X.ZP,{menuType:X.ZP.MenuType.Popup},void 0,a()(Y.Z,{type:Y.Z.Type.Vertical,initialFocus:l,sections:[{key:"form-input-section-".concat(t),items:d,render:e=>u().createElement(Q.Z,e)}]}))}var oe=o(38755),re=o(48762),ie=o(40515),ne=o(79029);const ae=u().forwardRef(((e,t)=>{const{item:o,...r}=e,n=(0,F.O7)(),s=(0,m.VK)((()=>o&&(0,oe.getSpaceIcon)(n,o)),[n,o]),l=(0,m.VK)((()=>o&&(0,oe.getSpaceName)(n,o)),[n,o]);return u().createElement(re.Z,i()({},r,{ref:t,title:o&&a()(ne.Z,{store:o}),icon:o&&a()(ie.Z,{disabled:!0,icon:s,title:l,isEmptyPage:!1,size:19})}))}));var se=o(50906),le=o(56200),ue=o(81710);function de(e){const{label:t,subtitle:o,error:r,children:i}=e,n=(0,D.y)((()=>({label:{fontSize:15,fontWeight:H.Z.fontWeight.medium,color:w.ZP.frontTextMedium},subtitle:{fontSize:15,color:w.ZP.frontTextLight},error:{marginTop:4,fontSize:15,color:w.ZP.frontRed},field:{display:"grid",gridTemplateColumns:"1fr",gap:6,marginBottom:32}})),[]);return a()("label",{style:n.field},void 0,a()("div",{style:n.label},void 0,t),i,o&&a()("div",{style:n.subtitle},void 0,o),r&&a()("div",{style:n.error},void 0,r))}var ce=o(26178),pe=o(45016),ge=o(57623),me=o(47307),fe=o(43250),ve=o(719),be=o(85567),ye=o(95477),he=o(74181);function _e(e){const{integrationFormStore:t,onCreateNew:o,shouldAutoFocusFirstField:r}=e,i=(0,F.O7)(),[{currentUserRootStore:n}]=(0,m.oR)(f.Z),c=(0,m.Kw)(t),{type:p}=c,[v,b]=u().useReducer(ue.x6,ue.yb);(0,l.useEffect)((()=>{if(!n)return;const e=(0,ue.hl)({formStoreState:c,userRootStore:n});for(const t of(0,g.Yd)(e))b({field:t,value:e[t]})}),[c,n]);const y=(0,m.VK)((()=>n?n.getAdminSpaceStores():[]),[n]),h=s.debounce((()=>{const e=(0,ue.Xk)({formData:v,formStateType:p});e.forEach((e=>{b({field:e,error:a()(d._H,{id:"developerIntegrationsForm.error.missingRequired",defaultMessage:"{ fieldName } is required.",values:{fieldName:ue.Rh[e].label}})})}));const t=(0,ue.bd)({formData:v,formStateType:p});t.forEach((e=>{b({field:e,error:a()(d._H,{id:"developerIntegrationsCreateInternal.error.invalidInput",defaultMessage:"{ fieldName } is invalid.",values:{fieldName:ue.Rh[e].label}})})}));if(e.length>0||t.length>0||(0,ue.tm)({formData:v,formStateType:p})||!n)return;const r=(0,pe.JJ)({environment:i,formState:c,formData:(0,ue.Xr)(v)});if(!r)return void me.UW(a()(d._H,{id:"developerIntegrationsForm.error.submission",defaultMessage:"There was an error submitting your integration. Please try again or contact support if the issue persists."}));o&&o(r);const s=document.querySelector(".".concat(fe.rI));s&&s.scrollIntoView({behavior:"smooth"})}),300);return a()(I,{submitType:p,onSubmit:h},void 0,ue.cW.map((e=>ue.gO[e].supportedBy[p]?a()("div",{style:{marginBottom:24}},e,a()(le.e,{keyName:e}),ue.gO[e].fields.map((e=>{const{supportedBy:o,label:i,subtitle:n}=ue.Rh[e];if(o[p]){const o=Se[e];return a()(de,{label:i,subtitle:n,error:v[e].error},e,a()(o,{autoFocus:Boolean(r&&"name"===e),spaces:y,currentValue:v[e].value,setErrorValue:t=>{b({field:e,error:t})},setNewValue:o=>{"submission_type"!==e?"client_secret"!==e&&"token"!==e&&b({value:o,field:e}):t.updateRecordTypeOnSubmission(o)}}))}return null}))):null)))}const Se={token:function(e){const{currentValue:t,setErrorValue:o}=e,[{currentUserStore:r}]=(0,m.oR)(f.Z),i=(0,F.O7)(),n=(0,m.VK)((()=>{if(!r||!t)return;if(t.value.parent_table!==ce.bx)return;const e=b.Z.createChildStore(r,{id:t.value.parent_id,table:t.value.parent_table});return(0,oe.getSpaceName)(i,e)}),[r,t,i]);if(!t)return null;return u().createElement(u().Fragment,null,a()(R,{fetchSecret:async()=>{const e=await O.jgK(i,{botId:t.value.id});return"success"===e.type?(se.Cm3(i,{table:t.table}),{secret:e.data.token}):{error:e}},secretName:a()(d._H,{id:"developerIntegrationForm.botToken.secretName",defaultMessage:"token"}),onCopy:()=>{se.IVn(i,{table:t.table,from:"developer-integrations-view"})},onError:o}),n&&a()("div",{style:{fontSize:15,color:w.ZP.frontTextLight}},void 0,a()(d._H,{id:"developerIntegrationForm.botToken.subtitle",defaultMessage:"Only works with the <bold>{spaceName}</bold> workspace. To change workspace, <developertermslink>create another integration</developertermslink>.",values:{spaceName:n,bold:(...e)=>a()("b",{},void 0,e),developertermslink:(...e)=>a()(_.Z,{href:S._j.myIntegrations},void 0,e)}})))},client_id:function(e){const{currentValue:t}=e,o=(0,F.O7)(),[r,n]=u().useState(!1);if(!t)return null;const s=a()(d._H,r?{defaultMessage:"ID copied",id:"developerIntegrationsForm.clientIdCopied.tooltip"}:{defaultMessage:"Copy client ID",id:"developerIntegrationsForm.copyClientId.tooltip"});return a()(M.Z,{type:"text",disabled:!0,style:{color:w.ZP.frontTextMedium,fontFamily:H.Z.getCompositeFontFamily(x.SP).mono},value:t.value.id,right:a()("div",{style:{display:"flex"}},void 0,a()("div",{style:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1}}),a()(B.Z,{placement:B.Z.Placement.Top,renderTooltip:()=>s,render:e=>u().createElement(C.Z,i()({onClick:e=>{e.preventDefault(),n(!0),setTimeout((()=>{n(!1)}),1500),(0,T.RD)({environment:o,stringValue:t.value.id})}},e,{style:{display:"inline-flex",alignItems:"center",borderRadius:3,padding:"0 6px",height:24,color:r?w.ZP.frontTextMedium:w.ZP.blue,fontFamily:H.Z.getCompositeFontFamily(x.SP).sans}}),a()(d._H,r?{id:"developerIntegrationsForm.copiedId.label",defaultMessage:"Copied"}:{id:"developerIntegrationsForm.copyId.label",defaultMessage:"Copy"}))}))})},client_secret:function(e){const{currentValue:t,setErrorValue:o}=e,r=(0,F.O7)(),[{currentUserStore:i}]=(0,m.oR)(f.Z);if(!t||!i)return null;const n=t.value.info.has_viewed_secret,s=(0,v.Kv)(i,{id:t.value.id,table:p.K});return a()(R,{fetchSecret:async()=>{const e=await O.sKm(r,{integrationId:t.value.id});return"success"===e.type?((0,pe.bO)({environment:r,integrationStore:s}),se.Cm3(r,{table:t.table}),{secret:e.data.secret}):{error:e}},secretName:a()(d._H,{id:"developerIntegrationForm.integrationSecret.secretName",defaultMessage:"secret"}),onCopy:()=>{se.IVn(r,{table:t.table,from:"developer-integrations-view"})},onError:o,hasSecretBeenViewed:n,confirmationModalProps:{isDestructive:!1,title:a()(d._H,n?{id:"developerIntegrationForm.clientSecret.confirmationModal.title",defaultMessage:"Refresh OAuth client secret?"}:{id:"developerIntegrationForm.clientSecret.confirmationModal.title",defaultMessage:"Show OAuth client secret?"}),message:a()(d._H,n?{id:"developerIntegrationForm.clientSecret.confirmationModal.message",defaultMessage:"You’ve already viewed the client secret. Viewing again will revoke and generate a new one. Make sure you’re storing the secret securely."}:{id:"developerIntegrationForm.clientSecret.confirmationModal.message",defaultMessage:"This client secret will only be displayed once and cannot be viewed again. Make sure you’re storing the secret securely."})}})},name:we,icon:function(e){const{currentValue:t,setNewValue:o,setErrorValue:r}=e;return a()(G,{value:t,setValue:o,setError:r})},space:function(e){const{spaces:t,currentValue:o,setNewValue:r,setErrorValue:i}=e,[n,s]=u().useState(!1);return(0,l.useEffect)((()=>{n||0!==t.length||(s(!0),i(a()(d._H,{id:"developerIntegrationsForm.spacePicker.missingSpacesError",defaultMessage:"You are not an admin of any workspaces. Please <linktonotion>create a new one</linktonotion> or ask your workspace admin to update your access.",values:{linktonotion:(...e)=>a()(_.Z,{href:(0,ge.U)("guides.joinOrCreateWorkspace")},void 0,e)}})))}),[t,i,n]),a()(J,{keyName:"space",items:t,value:o,setValue:r,renderMenuItem:e=>u().createElement(ae,e)})},submission_type:function(e){const{currentValue:t,setNewValue:o}=e,r=(0,F.O7)();if(!t)return null;return a()(A,{options:[{key:c.c,title:a()(d._H,{id:"developerInternalIntegration.integrationType.bot.title",defaultMessage:"Internal integration"}),caption:a()(d._H,{id:"developerInternalIntegration.integrationType.bot.caption",defaultMessage:"Only available for workspaces you’re an admin of. The integration can be installed to those workspaces automatically and does not require review."})},{key:p.K,title:a()(d._H,{id:"developerInternalIntegration.integrationType.integration.title",defaultMessage:"Public integration"}),caption:a()(d._H,{id:"developerInternalIntegration.integrationType.integration.caption",defaultMessage:"Available for any Notion user. May require review and verification for listing in the Integration Gallery."})}],value:t,setValue:e=>{o(e),se.kXt(r,{table:e})}})},redirect_uris:function(e){const{currentValue:t,setNewValue:o}=e,r=t||[],[n,s]=u().useState(""),l=()=>s("");return a()(j.ZP,{popupType:j.ZP.PopupType.Popup,sameWidthAsOrigin:!0,open:n.length>0,onDismiss:l,origin:a()(ve.Z,{style:{background:w.ZP.white,minHeight:32,fontSize:15},placeholder:"",value:n,onChange:e=>s(e.target.value),tokens:r.map((e=>a()(be.Z,{format:be.Z.Format.Medium,showRemoveButton:!0,isSingle:!1,value:e,onClickRemove:()=>{o(r.filter((t=>t!==e)))}},e))),onRemoveLastToken:()=>{r.length>0&&o(r.slice(0,r.length-1))}}),render:()=>{const e=n.trim(),t=(0,he.u)(ye.Z.domainBaseUrl,e).map((e=>({key:e,render:t=>u().createElement(re.Z,i()({},t,{title:e})),action:()=>{l(),o([...r,e])}})));return a()(X.ZP,{menuType:X.ZP.MenuType.Popup},void 0,a()(Y.Z,{type:Y.Z.Type.Vertical,initialFocus:0,sections:[{key:"valid-redirect-uri-suggestion",items:t,render:e=>u().createElement(Q.Z,i()({},e,{title:a()(d._H,{id:"developerIntegrationsForm.redirectUri.typePrompt",defaultMessage:"Type a redirect uri…"})}))}]}))}})},website_url:we,tagline:we,privacy_policy_url:we,terms_of_use_url:we,email:we};function we(e){const{autoFocus:t,currentValue:o,setNewValue:r}=e;return a()(M.Z,{autoFocus:t,style:{background:w.ZP.white,height:32,fontSize:15},value:o,onChange:e=>r(e.target.value)})}},56200:(e,t,o)=>{o.d(t,{e:()=>g,T:()=>m});var r=o(98135),i=o.n(r),n=(o(33948),o(67294)),a=o.n(n),s=o(8848),l=o(82990),u=o(81710),d=o(89940),c=o(42001);function p(e){return"developer-integration-section-header-".concat(e)}function g(e){const{keyName:t}=e;return i()("div",{id:p(t),style:{fontSize:30,fontWeight:l.Z.fontWeight.bold,marginTop:24,marginBottom:24}},void 0,u.gO[t].title)}function m(e){const{type:t}=(0,d.Kw)(e.integrationFormStore),o=u.cW.filter((e=>u.gO[e].supportedBy[t])),[r,n]=a().useState(),g=r||o[0];return i()("div",{style:{display:"grid",gridTemplate:"none | auto | auto",marginTop:24,position:"sticky",top:16}},void 0,o.map((e=>i()("div",{},e,i()(c.Z,{style:{fontSize:15,height:28,marginTop:4,color:s.ZP.frontTextLight,width:"100%",...g===e&&{color:s.ZP.frontText,fontWeight:l.Z.fontWeight.medium}},onClick:()=>{const t=document.getElementById(p(e));t&&t.scrollIntoView(),n(e)}},void 0,u.gO[e].title)))))}},719:(e,t,o)=>{o.d(t,{Z:()=>f});var r=o(67154),i=o.n(r),n=o(98135),a=o.n(n),s=o(59713),l=o.n(s),u=(o(33948),o(67294)),d=o.n(u),c=o(66832),p=o(62727),g=o(98742);class m extends c.Z{constructor(...e){super(...e),l()(this,"handleKeyDown",(e=>{"Backspace"===e.key&&0===this.props.value.length&&this.props.onRemoveLastToken()}))}renderComponent(){const{device:e}=this.environment;return a()("div",{onClick:this.props.onClick,style:e.isMobile?this.getMobileWrapStyle():this.getDesktopWrapStyle()},void 0,this.props.tokens,this.renderInput())}renderInput(){const{device:e}=this.environment,t=0===this.props.tokens.length;return d().createElement(p.Z,i()({format:p.Z.Format.Transparent},(0,g.Z)({onKeyDown:this.handleKeyDown},{onChange:this.props.onChange}),{value:this.props.value,onSubmit:this.props.onSubmit,onBlur:this.props.onBlur,focus:this.props.focus,style:{...m.inputStyle,margin:e.isMobile?"0 8px 8px 0":"0 6px 6px 0"},readOnly:this.props.readOnly,inputStyle:{height:18},size:1,type:this.props.type,placeholder:t?this.props.placeholder:"",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1}))}getDesktopWrapStyle(){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",minHeight:32,boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,borderRadius:3,fontSize:14,cursor:"text",overflow:"hidden",padding:"7px 9px 0px",...this.props.style}}getMobileWrapStyle(){return{...this.getDesktopWrapStyle(),fontSize:14,padding:"7px 10px 0"}}}l()(m,"inputStyle",{flexGrow:1,flexShrink:1,flexBasis:60,minWidth:60,width:"auto",lineHeight:"20px"});const f=m},81710:(e,t,o)=>{o.d(t,{cW:()=>g,gO:()=>m,Rh:()=>f,yb:()=>b,x6:()=>y,hl:()=>h,Xk:()=>_,bd:()=>I,tm:()=>Z,Xr:()=>M});var r=o(98135),i=o.n(r),n=(o(33948),o(67294),o(5366)),a=o(64442),s=o(97880),l=o(26178),u=o(74181),d=o(95477),c=o(33728),p=o(64002);const g=["secrets","basic","oauth"],m={secrets:{title:i()(n._H,{id:"developerIntegrationForm.sectionHeader.secrets",defaultMessage:"Secrets"}),supportedBy:{"create-bot":!1,"update-bot":!0,"create-integration":!0,"update-integration":!0},fields:["token","client_id","client_secret"]},basic:{title:i()(n._H,{id:"developerIntegrationForm.sectionHeader.basic",defaultMessage:"Basic information"}),supportedBy:{"create-bot":!0,"update-bot":!0,"create-integration":!0,"update-integration":!0},fields:["name","icon","space","submission_type"]},oauth:{title:i()(n._H,{id:"developerIntegrationForm.sectionHeader.oauth",defaultMessage:"OAuth Domain & URIs"}),supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},fields:["redirect_uris","website_url","tagline","privacy_policy_url","terms_of_use_url","email"]}},f={token:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-integration":!0,"update-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:i()(n._H,{id:"developerIntegrationForm.botToken.label",defaultMessage:"Internal Integration Token"})},client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:i()(n._H,{id:"developerIntegrationForm.integrationClientId.label",defaultMessage:"OAuth client ID"})},client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:i()(n._H,{id:"developerIntegrationForm.integrationSecret.label",defaultMessage:"OAuth client secret"})},name:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!0,"update-bot":!0,"create-integration":!0,"update-integration":!0},label:i()(n._H,{id:"developerIntegrationForm.name.label",defaultMessage:"Name"}),subtitle:i()(n._H,{id:"developerIntegrationForm.name.subtitle",defaultMessage:"Name to identify your integration to users."})},icon:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:i()(n._H,{id:"developerIntegrationForm.icon.label",defaultMessage:"Logo"}),subtitle:i()(n._H,{id:"developerIntegrationForm.icon.subtitle",defaultMessage:"512px x 512px in PNG format is recommended."})},space:{supportedBy:{"create-bot":!0,"update-bot":!1,"create-integration":!1,"update-integration":!1},requiredBy:{"create-bot":!0,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:i()(n._H,{id:"developerIntegrationForm.space.label",defaultMessage:"Associated workspace"}),subtitle:i()(n._H,{id:"developerIntegrationForm.space.subtitle",defaultMessage:"Select a workspace to install the integration to. You can upgrade the integration to use OAuth later."})},submission_type:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-integration":!0,"update-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:i()(n._H,{id:"developerIntegrationForm.submissionType.label",defaultMessage:"Integration type"})},redirect_uris:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},label:i()(n._H,{id:"developerIntegrationForm.redirect_uris.label",defaultMessage:"Redirect URIs"}),subtitle:i()(n._H,{id:"developerIntegrationForm.redirect_uri.subtitle",defaultMessage:"Users will be redirected to this path after they have authenticated with Notion. The path will be appended with the authorization code for access and must have a protocol. It can’t contain URL fragments, relative paths or wildcards, and can’t be a public IP address."})},website_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},label:i()(n._H,{id:"developerIntegrationForm.website_url.label",defaultMessage:"Website or homepage"}),subtitle:i()(n._H,{id:"developerIntegrationForm.website_url.subtitle",defaultMessage:"Used to link to your integration’s website or homepage in your integration page and authentication screens."})},tagline:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:i()(n._H,{id:"developerIntegrationForm.tagline.label",defaultMessage:"Tagline"}),subtitle:i()(n._H,{id:"developerIntegrationForm.tagline.subtitle",defaultMessage:"A short description of what the integration does."})},privacy_policy_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},label:i()(n._H,{id:"developerIntegrationForm.privacy_policy_url.label",defaultMessage:"Privacy policy"}),subtitle:i()(n._H,{id:"developerIntegrationForm.privacy_policy_url.subtitle",defaultMessage:"Used to link to your integration’s privacy policy in your integration page and authentication screens."})},terms_of_use_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},label:i()(n._H,{id:"developerIntegrationForm.terms_of_use_url.label",defaultMessage:"Terms of use"}),subtitle:i()(n._H,{id:"developerIntegrationForm.terms_of_use_url.subtitle",defaultMessage:"Used to link to your integration’s terms of use in your integration page and authentication screens."})},email:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},label:i()(n._H,{id:"developerIntegrationForm.email.label",defaultMessage:"Support email"}),subtitle:i()(n._H,{id:"developerIntegrationForm.email.subtitle",defaultMessage:"Used to link to your integration’s support email in your integration page and authentication screens."})}},v={value:void 0,error:void 0},b={token:v,client_id:v,client_secret:v,name:v,icon:v,space:v,submission_type:v,tagline:v,email:v,website_url:v,privacy_policy_url:v,terms_of_use_url:v,redirect_uris:v};function y(e,t){return"error"in t?{...e,[t.field]:{...e[t.field],error:t.error}}:{...e,[t.field]:{...e[t.field],...t.value&&{error:void 0},value:t.value}}}function h(e){const{userRootStore:t,formStoreState:o}=e;if("create-bot"===o.type){return{token:void 0,client_id:void 0,client_secret:void 0,name:void 0,icon:void 0,space:(t?t.getAdminSpaceStores():[])[0],submission_type:o.recordTypeOnSubmission,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,redirect_uris:void 0}}if("update-bot"===o.type||"create-integration"===o.type){const e=o.startingRecord.value,r=t&&a.Z.createChildStore(t,{id:e.space_id,table:l.bx});return{token:o.startingRecord,client_id:void 0,client_secret:void 0,name:e.name,icon:e.icon,space:r,submission_type:o.recordTypeOnSubmission,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,redirect_uris:void 0}}if("update-integration"===o.type){const e=o.startingRecord.value;return{token:void 0,client_id:o.startingRecord,client_secret:o.startingRecord,name:e.name,icon:e.info.icon,space:void 0,submission_type:o.recordTypeOnSubmission,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,redirect_uris:e.redirect_uris}}(0,s.t1)(o)}function _(e){const{formData:t,formStateType:o}=e,r=[];for(const i of(0,s.Yd)(f)){const e=t[i].value;f[i].requiredBy[o]&&!e&&r.push(i)}return r}function S(e){const t=p.yn(e);if(!t)return!1;return!!p.Qc(t).hostname}function w(e){const t=p.yn(e);if(!t||!e)return;const o=t[t.length-1],r=e[e.length-1];return"/"===o&&"/"!==r?t.slice(0,t.length-1):t}const k={email:function(e){const t=c.H3(e);return!!t&&c.oH(t)},redirect_uris:e=>e.every((e=>(0,u.m)(d.Z.domainBaseUrl,e))),website_url:S,privacy_policy_url:S,terms_of_use_url:S};function I(e){const{formData:t,formStateType:o}=e,r=[];for(const i of(0,s.Yd)(t)){const e=t[i].value,n=f[i].supportedBy[o],a=k[i];n&&e&&a&&(a(e)||r.push(i))}return r}function Z(e){const{formData:t,formStateType:o}=e;return(0,s.Yd)(t).some((e=>f[e].supportedBy[o]&&t[e].error))}function M(e){return{token:e.token.value,client_id:e.client_id.value,client_secret:e.client_secret.value,name:e.name.value,icon:e.icon.value,space:e.space.value,submission_type:e.submission_type.value,redirect_uris:(e.redirect_uris.value||[]).map((e=>w(e))),website_url:w(e.website_url.value),tagline:e.tagline.value,privacy_policy_url:w(e.privacy_policy_url.value),terms_of_use_url:w(e.terms_of_use_url.value),email:c.H3(e.email.value)}}},85227:(e,t,o)=>{o.d(t,{Z:()=>s});var r=o(7170),i=o(1985),n=o(52016);class a extends n.Z{getInitialState(){return{type:"create-bot",startingRecord:void 0,recordTypeOnSubmission:r.c}}updateRecordTypeOnSubmission(e){"create-integration"===this.state.type&&e===r.c&&this.setState({type:"update-bot",startingRecord:this.state.startingRecord,recordTypeOnSubmission:r.c}),"update-bot"===this.state.type&&e===i.K&&this.setState({type:"create-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:i.K})}initializeNewForm(e){e.table===r.c&&this.setState({type:"update-bot",startingRecord:e,recordTypeOnSubmission:r.c}),e.table===i.K&&this.setState({type:"update-integration",startingRecord:e,recordTypeOnSubmission:i.K})}}const s=a},74181:(e,t,o)=>{o.d(t,{m:()=>n,u:()=>a});var r=o(64002),i=o(97880);function n(e,t){const o=r.yn(t);if(!o)return!1;const i=r.Qc(o);if(!i.hostname)return!1;if("http:"===i.protocol&&"localhost"===i.hostname)return!0;if("https:"!==i.protocol)return!1;const{hostname:n}=r.Qc(e);if(!n)return!1;const a=n.split(".").slice(-2,-1).join("."),s="".concat(a,".so"),l="".concat(a,".com");return i.hostname!==s&&!i.hostname.endsWith(".".concat(s))&&i.hostname!==l&&!i.hostname.endsWith(".".concat(l))}function a(e,t){const o=t.match(/^(h|$)(t|$)(t|$)(p|$)(s|$)(:|$)(\/|$)(\/|$).*$/),r=t.match(/^(h|$)(t|$)(t|$)(p|$)(:|$)(\/|$)(\/|$).*$/);return[t,o?void 0:"https://".concat(t),r?void 0:"http://".concat(t)].filter(i.$K).filter((t=>t&&n(e,t)))}}}]);