(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};((e,t,n)=>{const a=React;var s=n.n(a);const i=ReactDOM;var r=n.n(i);new class{getItem(e){return new URL(location.href).searchParams.get(e)}setItem(e,t){const n=new URL(location.href);n.searchParams.set(e,t),history.replaceState(null,"",n.toString())}removeItem(e){const t=new URL(location.href);t.searchParams.delete(e),history.replaceState(null,"",t.toString())}clear(){const e=new URL(location.href),t=Array.from(e.searchParams.keys());for(const n of t)e.searchParams.delete(n);history.replaceState(null,"",e.toString())}key(e){const t=new URL(location.href);return Array.from(t.searchParams.keys())[e]??null}get length(){const e=new URL(location.href);return Array.from(e.searchParams.keys()).length}};let o=0;const l=(e,t)=>"appearance"===e||"text-stroke"===e||"user-select"===e?((e,t)=>{for(const n of["","-webkit-","-moz-"]){const a=`${n}${e}`;if(CSS.supports(a,t))return[a,t]}return[e,t]})(e,t):"fit-content"===t?((e,t)=>{for(const n of["","-webkit-","-moz-"]){const a=`${n}${t}`;if(CSS.supports(e,a))return[e,a]}return[e,t]})(e,t):[e,t];class c{constructor(e){this.style=e,this.entries=[];for(const[e,t]of Object.entries(this.style))this.entries.push(this.createEntry(e,t));this.classes={};for(const e of this.entries)""!==e.className&&(this.classes[e.styleKey]=e.className);this.text=this.entries.map((e=>e.styleText)).join("\n"),this.node=document.createElement("style"),this.node.textContent=this.text}createEntry(e,t){let n,a;"@global"===e?(n="",a=""):(o+=1,n=`jss-${o}-${e}`,a=`.${n}`);const s=[];this.createRuleItem(a,t,s);const i=[];for(const[e,t]of s)Object.keys(t).length>0&&i.push(this.createRuleText(e,t));return{styleKey:e,styleValue:t,styleText:i.join("\n"),className:n}}createRuleItem(e,t,n){const a=e,s={};n.push([a,s]);for(const[e,i]of Object.entries(t))if("object"!=typeof i||Array.isArray(i))s[e]=i;else{const t=e.replace(/&/g,a);this.createRuleItem(t,i,n)}}createRuleText(e,t){const n=[`${e} {`];for(let[e,a]of Object.entries(t))e=e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`)),Array.isArray(a)&&(a=a.join(", ")),[e,a]=l(e,String(a)),n.push(`    ${e}: ${a};`);return n.push("}"),n.join("\n")}attach(){return this.node.isConnected||document.head.appendChild(this.node),this}remove(){this.node.isConnected&&this.node.remove()}toString(){return this.text}}const p=CSS.supports("-moz-appearance","none"),d=CSS.supports("-webkit-appearance","-apple-pay-button"),u=void 0!==navigator.standalone,h=e=>new c(e),m=p,g=d,f=u;function y({name:e,size:t,className:n}){n=["material-icons-outlined",n].join(" ").trim();const a={fontSize:t=`${t}px`,width:t,height:t};return s().createElement("i",{className:n,style:a},e)}const{classes:b}=h({ul:{margin:0,padding:"0 8px",borderBottom:"1px solid #ccc"},li:{display:"inline-block",marginBottom:"-1px"},label:{background:"#fff",borderBottom:"1px solid #ccc",borderLeft:"1px solid #fff",borderRight:"1px solid #fff",borderTop:"1px solid #fff",cursor:"default",fontSize:"14px",lineHeight:"16px",padding:"6px 12px",userSelect:"none"},value:{borderBottom:"1px solid #fff",borderLeft:"1px solid #ccc",borderRight:"1px solid #ccc",borderTop:"1px solid #333"},icon:{float:"left",marginRight:"6px"}}).attach(),{classes:w}=h({ul:{margin:0,padding:"0 8px",borderTop:"1px solid #ccc"},li:{display:"inline-block",marginTop:"-1px"},label:{background:"#fff",borderBottom:"1px solid #fff",borderLeft:"1px solid #fff",borderRight:"1px solid #fff",borderTop:"1px solid #ccc",cursor:"default",fontSize:"14px",lineHeight:"16px",padding:"6px 12px",userSelect:"none"},value:{borderBottom:"1px solid #333",borderLeft:"1px solid #ccc",borderRight:"1px solid #ccc",borderTop:"1px solid #fff"},icon:{float:"left",marginRight:"6px"}}).attach(),{classes:v}=h({ul:{margin:0,padding:"8px 0",width:"max-content",borderRight:"1px solid #ccc"},li:{display:"block",marginRight:"-1px"},label:{background:"#fff",borderBottom:"1px solid #fff",borderLeft:"1px solid #fff",borderRight:"1px solid #ccc",borderTop:"1px solid #fff",cursor:"default",fontSize:"14px",lineHeight:"16px",padding:"6px 12px",textAlign:"right",userSelect:"none"},value:{borderBottom:"1px solid #ccc",borderLeft:"1px solid #333",borderRight:"1px solid #fff",borderTop:"1px solid #ccc"},icon:{float:"left",marginRight:"6px"}}).attach(),x={bottom:w,left:v,top:b};class C extends s().PureComponent{handleOnClick=e=>()=>{this.props.onChange&&this.props.onChange(e.value)};getClasses(){return x[this.props.position??"top"]}renderChild=(e,t)=>{const n=this.getClasses();let a=n.label;return e.value===this.props.value&&(a=`${a} ${n.value}`),s().createElement("li",{className:n.li,key:t},s().createElement("div",{className:a,onClick:this.handleOnClick(e)},e.icon&&s().createElement(y,{className:n.icon,name:e.icon,size:"16"}),s().createElement("span",null,e.label)))};renderChildren=()=>this.props.schema.items.map(this.renderChild);render(){const e=this.getClasses();let t=this.props.className;return t=[e.ul,t].join(" ").trim(),s().createElement("ul",{className:t},this.renderChildren())}}const k=["https://www.youtube.com/","https://m.youtube.com/","https://www.netflix.com/","https://www.primevideo.com/","https://www.disneyplus.com/","https://www.paramountplus.com/","https://www.amcplus.com/","https://www.peacocktv.com/","https://www.hulu.com/","https://play.hbomax.com/","https://www.viki.com/","https://www.hotstar.com/","https://www.coursera.org/","https://www.udemy.com/","https://www.ted.com/","https://www.ardmediathek.de/","https://www.zdf.de/","https://www.arte.tv/","https://vimeo.com/","https://viu.tv/","https://www.iq.com/","https://wetv.vip/","https://www.bilibili.com/","https://music.163.com/"],{classes:E}=h({root:(e=>g?(f?(e.height="28px",e.border="1px solid -apple-system-secondary-label",e.borderRadius="5px",e.color="#000"):(e.appearance="square-button",e.height="28px"),e):e)({margin:0,padding:0}),label:{fontSize:"14px",lineHeight:"16px",padding:"4px",userSelect:"none"},icon:{marginRight:"4px",verticalAlign:"top","&:last-child":{marginRight:0}}}).attach();class S extends s().PureComponent{handleOnClick=()=>{const e=this.props.value;this.props.onClick&&this.props.onClick(e)};renderChildren(){const{label:e,icon:t}=this.props;return s().createElement("div",{className:E.label},t&&s().createElement(y,{className:E.icon,name:t,size:"16"}),e&&s().createElement("span",null,e))}render(){let e=this.props.className;e=[E.root,e].join(" ").trim();const t=this.props.disabled;return s().createElement("button",{className:e,disabled:t,onClick:this.handleOnClick},this.renderChildren())}}const{classes:N}=h({root:{display:"inline-block"},wrap:{alignItems:"center",display:"flex"},label:{fontSize:"14px",lineHeight:"1em"},input:(e=>m?(e.height="16px",e):e)({fontSize:"14px",lineHeight:"16px",width:"100%",margin:"0 4px 0 0",padding:"4px","&:last-child":{marginRight:0}})}).attach();class A extends s().PureComponent{handleOnChange=e=>{const t=e.target;let n;n="number"===this.props.schema.type?parseInt(t.value):t.value,this.props.onChange&&this.props.onChange(n)};render(){let e=this.props.className;e=[N.root,e].join(" ").trim();const t=this.props.style,n=this.props.schema,a=this.props.value,i=this.props.disabled;return s().createElement("span",{className:e,style:t},s().createElement("span",{className:N.wrap},s().createElement("input",{className:N.input,type:n.type,placeholder:n.placeholder,spellCheck:n.spellcheck,title:n.tooltip,value:a,disabled:i,onChange:this.handleOnChange}),n.label&&s().createElement("span",{className:N.label},n.label)))}}s().PureComponent;const{classes:T}=h({overlay:{position:"fixed",width:"100vw",height:"100vh",top:0,left:0,zIndex:99},input:{width:"360px"},message:{minWidth:"360px",fontSize:"14px"},dialog:{position:"absolute",top:"25%",left:"50%",transform:"translateX(-50%)",border:"1px solid #ccc",background:"#fff"},header:{fontSize:"14px",fontWeight:"bold",padding:"8px"},content:{borderBottom:"1px solid #ccc",borderTop:"1px solid #ccc",padding:"8px"},footer:{padding:"8px",display:"grid",gridAutoFlow:"column",gridColumnGap:"8px",justifyContent:"flex-end"}}).attach(),{classes:j}=h({root:{position:"absolute",top:"8px",right:"8px",fontSize:"14px",lineHeight:"30px"}}).attach();class O extends s().PureComponent{onClick=e=>{this.props.agent.reset()};renderLink(e,t){return s().createElement("a",{href:e,rel:"noreferrer",target:"_blank"},t)}renderLinkReset(){const e=this.props.i18ns.option,t=((e,t,n)=>async a=>{const i=t.confirmContinueMessage,o=t.yes,l=t.no;await((e,t,n,a)=>new Promise((i=>{n=n??"OK",a=a??"Cancel";const o=document.createElement("div");o.classList.add(T.overlay),document.body.appendChild(o);const l=e=>{r().unmountComponentAtNode(o),o.remove(),i("ok"===e)},c=s().createElement("div",{className:T.dialog},s().createElement("div",{className:T.header},t),s().createElement("div",{className:T.content},s().createElement("div",{className:T.message},e)),s().createElement("div",{className:T.footer},s().createElement(S,{label:n,value:"ok",icon:"check",onClick:l}),s().createElement(S,{label:a,value:"cancel",icon:"close",onClick:l})));r().render(c,o)})))(i,n,o,l)&&e(a)})(this.onClick,e,e.resetAllSettingsToDefault);return s().createElement("a",{href:"",onClick:e=>{e.preventDefault(),t("resetAllSettings")}},e.reset)}render(){const e=this.props.i18ns.option;return s().createElement("div",{className:j.root},this.renderLinkReset(),s().createElement("span",null," "),this.renderLink("https://www.dualsub.xyz/setting.html",e.help))}}const L=(e,t)=>{const n=e.type;if("string"===n||"number"===n||"boolean"===n)return typeof t===n;if("null"===n)return null===t;if("array"===n)return Array.isArray(t);if("object"===n)return"object"==typeof t&&null!==t&&!Array.isArray(t);throw`invalid schema type: ${n}`},z=(e,t)=>{const n=e.type;if("string"===n||"number"===n||"boolean"===n){e=e,void 0!==t&&void 0!==e.enum&&(e.enum.includes(t)||(t=void 0));let a=!1;if(void 0!==t&&(a=L(e,t)),a||void 0!==(t=e.default)&&(a=L(e,t)),"string"===n)return a?t:"";if("number"===n)return a?t:0;if("boolean"===n)return!!a&&t}if("null"===n)return null;if("array"===n)return[];if("object"===n)return{};throw`invalid schema type: ${n}`},D=(e,t)=>{const n=e.type;if("string"===n||"number"===n||"boolean"===n)return z(e)===t;if("null"===n)return!0;if("array"===n)return 0===t.length;if("object"===n)return 0===Object.keys(t).length;throw`invalid schema type: ${n}`};function M(e,t,n){const a=t.type;if("string"===a||"number"===a||"boolean"===a)return z(t,n);if("null"===a)return null;if("array"===a){if(void 0===(t=t).items)return[];L(t,n)||(n=[]);const a=t.items,s=[];for(const t of n)s.push(M(e,a,t));return s}if("object"===a){if(void 0===(t=t).properties)return{};L(t,n)||(n={});const a=t.properties,s=t.required??[],i={};for(const[t,r]of Object.entries(a)){const a=n[t];if("expand"!==e)if("shrink"!==e){if("inject"!==e)throw`invalid mode: ${e}`;{const n=void 0!==a,o=s.includes(t);if(n||o){const n=M(e,r,a);i[t]=n}}}else{const n=M(e,r,a);D(r,n)||(i[t]=n)}else{const n=M(e,r,a);i[t]=n}}return i}throw`invalid schema type: ${a}`}const R=(e,t)=>M("inject",e,t);function P(e,t){t=t??new WeakMap;const n=typeof e;if("string"===n||"number"===n||"boolean"===n||"function"===n||null===e)return e;if("object"!==n)throw`invalid type: ${n}`;if(t.has(e))throw"circular reference";if(Array.isArray(e)){t.set(e,!0);const n=e.map((e=>P(e,t)));return t.delete(e),n}t.set(e,!0);const a={};for(const[n,s]of Object.entries(e))a[n]=P(s,t);return t.delete(e),a}function F(e){const t=typeof e;if("string"===t||"number"===t||"boolean"===t||"function"===t||null===e)return e;if("object"!==t)throw`invalid type: ${t}`;return Array.isArray(e)?e.slice():Object.assign({},e)}function G(e){const t=typeof e;if("string"===t||"number"===t||"boolean"===t)return{type:t,default:e};if(null===e)return{type:"null"};if(Array.isArray(e))return{type:typeof e[0],default:e[0],enum:e};if("object"!==t)throw`invalid value type: ${t}`;const n=e,a=n.type;if("string"!==a&&"number"!==a&&"boolean"!==a&&"null"!==a){if("array"!==a){if("object"===a){const e=n.properties??{};for(const[t,n]of Object.entries(e)){const a=G(n);void 0!==a&&(e[t]=a)}return!0===n.required&&(n.required=Object.keys(e)),void(!1===n.required&&(n.required=[]))}throw`invalid schema type: ${a}`}{const e=G(n.items);void 0!==e&&(n.items=e)}}}const{classes:q}=h({root:{},textarea:{padding:"4px",fontSize:"14px",lineHeight:"18px"}}).attach();class _ extends s().PureComponent{handleOnChange=e=>{const t=e.target.value;this.props.onChange&&this.props.onChange(t)};render(){let e=this.props.className;e=[q.root,e].join(" ").trim();const t=this.props.style,{schema:n,value:a}=this.props;return s().createElement("div",{className:e,style:t},s().createElement("textarea",{className:q.textarea,rows:n.rows,cols:n.cols,placeholder:n.placeholder,spellCheck:n.spellcheck,value:a,onChange:this.handleOnChange}))}}const{classes:X}=h({root:{boxSizing:"border-box",display:"inline-block",fontSize:"14px",height:"28px",padding:"6px 4px",whiteSpace:"nowrap"},label:{display:"inline-block",verticalAlign:"middle",lineHeight:"1em"},input:{display:"inline-block",verticalAlign:"middle",width:"16px",height:"16px",margin:"0 4px 0 0","&:last-child":{marginRight:0}}}).attach();class J extends s().PureComponent{hanldeOnChange=e=>{const t=e.target.checked;this.props.onChange&&this.props.onChange(t)};render(){let e=this.props.className;e=[X.root,e].join(" ").trim();const t=this.props.style,n=this.props.schema,a=!0===this.props.value;return s().createElement("label",{className:e,style:t},s().createElement("input",{className:X.input,type:"checkbox",checked:a,onChange:this.hanldeOnChange}),n.label&&s().createElement("span",{className:X.label},n.label))}}const{classes:B}=h({root:(e=>m?(e.border="1px solid #8f8f9d",e.borderRadius="2px",e.backgroundColor="#fff",e):g?(f?(e.borderRadius="5px",e.border="1px solid -apple-system-secondary-label",e.color="#000",e.backgroundColor="#fff"):e.border="1px solid #c0c0c0",e):e)({boxSizing:"border-box",fontSize:"14px",height:"28px",padding:"2px 4px"})}).attach();class H extends s().PureComponent{handleOnChange=e=>{const t=e.target,n=parseInt(t.value),a=this.props.schema.items[n].value;this.props.onChange&&this.props.onChange(a)};renderChild=(e,t)=>{const{label:n,title:a}=e;return s().createElement("option",{key:t,value:t,title:a},n)};renderChildren=()=>{const{items:e,groups:t}=this.props.schema;if(void 0===t||0===t.length)return e.map(this.renderChild);let n=0;const a=[];for(const[i,r]of t.entries()){const{label:t,count:o}=r,l=o>0?n+o:e.length,c=[];for(;n<l;)c.push(this.renderChild(e[n],n)),n+=1;""===t?a.push(s().createElement(s().Fragment,{key:i},c)):a.push(s().createElement("optgroup",{key:i,label:t},c))}return a};render(){let e=this.props.className;e=[B.root,e].join(" ").trim();const t=this.props.style,{schema:n,value:a}=this.props;let i=n.items.findIndex((e=>e.value===a)),r=null;-1===i?i=0:r=n.items[i].title;const o=this.props.disabled;return s().createElement("select",{className:e,style:t,value:i,disabled:o,title:r,onChange:this.handleOnChange},this.renderChildren())}}const{classes:K}=h({root:{display:"inline-block"},label:{display:"inline-block",fontFamily:"var(--font-mono)",fontSize:"12px",lineHeight:"1em"},input:(e=>m?(e.border="1px solid #8f8f9d",e.borderRadius="2px",e):e)({boxSizing:"border-box",height:"28px",margin:"0 4px 0 0",verticalAlign:"middle",width:"28px"})}).attach();class I extends s().PureComponent{handleChange=e=>{const t=e.target.value;this.props.onChange&&this.props.onChange(t)};render(){let e=this.props.className;e=[K.root,e].join(" ").trim();const t=this.props.style,n=this.props.value;return s().createElement("span",{className:e,style:t},s().createElement("input",{className:K.input,type:"color",value:n,onChange:this.handleChange}),s().createElement("span",{className:K.label},n))}}const{classes:V}=h({root:{border:"1px solid #ccc",width:"max-content",display:"flex",flexDirection:"column"},ul:{margin:0,padding:0,overflow:"auto"},li:{display:"block"},label:{background:"#fff",cursor:"default",fontSize:"14px",lineHeight:"16px",padding:"6px 12px",textAlign:"left",userSelect:"none",display:"flex","& > span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}},value:{color:"#fff",background:"#0075ff"},icon:{float:"left",marginRight:"12px"},toolbar:{borderBottom:"1px solid #ccc",padding:"4px",textAlign:"right"},button:{marginRight:"4px","&:last-child":{marginRight:0}}}).attach();class Z extends s().PureComponent{handleItemOnClick=e=>()=>{this.props.onChange&&this.props.onChange(e.value)};handleButtonOnClick=e=>()=>{this.props.onClick&&this.props.onClick(e)};renderChild=(e,t)=>{let n=V.label;return e.value===this.props.value&&(n=`${n} ${V.value}`),s().createElement("li",{className:V.li,key:t},s().createElement("div",{className:n,onClick:this.handleItemOnClick(e)},e.icon&&s().createElement(y,{className:V.icon,name:e.icon,size:"16"}),s().createElement("span",null,e.label)))};renderChildren=()=>{const e=this.props.schema.items;if(0!==e.length)return s().createElement("ul",{className:V.ul},e.map(this.renderChild))};renderToolbar=()=>{const e=this.props.schema.actions??[];if(0!==e.length)return s().createElement("div",{className:V.toolbar},e.includes("add")&&s().createElement(S,{className:V.button,icon:"add",value:"add",onClick:this.handleButtonOnClick("add")}),e.includes("remove")&&s().createElement(S,{className:V.button,icon:"remove",value:"remove",onClick:this.handleButtonOnClick("remove")}),e.includes("up")&&s().createElement(S,{className:V.button,icon:"arrow_upward",value:"up",onClick:this.handleButtonOnClick("up")}),e.includes("down")&&s().createElement(S,{className:V.button,icon:"arrow_downward",value:"down",onClick:this.handleButtonOnClick("down")}))};render(){let e=this.props.className;e=[V.root,e].join(" ").trim();const t=this.props.style;return s().createElement("div",{className:e,style:t},this.renderToolbar(),this.renderChildren())}}const{classes:$}=h({panel:{padding:"8px"},panel1:{padding:"8px",borderLeft:"4px solid #8bc34a"},panel2:{padding:"8px",borderLeft:"4px solid #ff9800"},toolbar:{"& > *":{marginRight:"8px","&:last-child":{marginRight:0}}},code:{margin:0,padding:"8px"}}).attach(),U=e=>{let t=e.className;t=[$.code,t].join(" ").trim();const n=e.style,a=e.value;return s().createElement("pre",{className:t,style:n},a)},Y=(e,t)=>{for(const[n,a]of Object.entries(t)){const t=new RegExp("\\{"+n+"\\}","g");e=e.replace(t,a)}return e},{classes:W}=h({root:{display:"inline-block",position:"relative"},label:{display:"inline-block",fontFamily:"var(--font-mono)",fontSize:"12px",lineHeight:"1em",position:"absolute",top:0},input:{boxSizing:"border-box",height:"28px",margin:"0 4px 0 0",verticalAlign:"middle",width:"100%"}}).attach();class Q extends s().PureComponent{handleChange=e=>{const t=e.target,n=parseInt(t.value);this.props.onChange&&this.props.onChange(n)};render(){let e=this.props.className;e=[W.root,e].join(" ").trim();const t=this.props.style,n=this.props.value,a=Y(this.props.label??"{value}",{value:n}),i={[n>50?"left":"right"]:0};return s().createElement("span",{className:e,style:t},s().createElement("input",{className:W.input,type:"range",value:n,onChange:this.handleChange}),s().createElement("span",{className:W.label,style:i},a))}}const ee=(...e)=>e.join(" ").trim(),{classes:te}=h({root:{fontSize:"14px"},gridLayout:{display:"grid",gridColumnGap:"4px",gridRowGap:"4px",gridTemplateColumns:"repeat(5, max-content)"},gridText:{lineHeight:"28px"},gridEdit:{"& > *":{width:"100%"}},gridDisabled:{opacity:"0.5",pointerEvents:"none"},topLayout:{display:"grid",gridRowGap:"8px",gridTemplateRows:"auto 1fr"},topMenu:{marginBottom:"8px","& > select":{width:"100%"}},topHeader:{borderBottom:"1px solid #ccc",borderTop:"1px solid transparent",lineHeight:"16px",padding:"6px 0",fontWeight:"bold"},leftLayout:{display:"grid",gridColumnGap:"8px",gridTemplateColumns:"auto 1fr"},leftHeader:{borderRight:"1px solid #ccc",lineHeight:"16px",padding:"6px 8px 6px 0",fontWeight:"bold",textAlign:"right"},flatLayout:{display:"grid",gridRowGap:"8px"},flowLayout:{display:"grid",gridAutoFlow:"column",gridColumnGap:"4px",alignItems:"center"},pickLayout:{display:"grid",gridRowGap:"4px",gridColumnGap:"4px",alignItems:"center"},pickChecked:{color:"#000"},pickDeleted:{"& span":{opacity:"0.5"}}}).attach();class ne extends s().PureComponent{handleOnChange=e=>t=>{this.props.onChange&&this.props.onChange(e,t)};handleOnActive=e=>t=>{this.props.onActive&&this.props.onActive(e,t)};handleOnPrepare=e=>t=>{this.props.onPrepare&&this.props.onPrepare(e,t)};handleOnRemove=(e,t)=>()=>{this.props.onRemove&&this.props.onRemove(e,t)};handleOnAdd=(e,t)=>n=>{this.props.onAdd&&this.props.onAdd(e,t,n)};handleOnClick=(e,t)=>n=>{const[a,s]=t;"add"===n&&this.props.onAdd?this.props.onAdd(e,a):"remove"===n&&this.props.onRemove?s>=0&&this.props.onRemove(e,s):"up"===n&&this.props.onMoveUp?s>0&&this.props.onMoveUp(e,s):"down"===n&&this.props.onMoveDown&&s<a-1&&this.props.onMoveDown(e,s)};extractEnumMappings=e=>{const t={},n=e.items.properties??{};for(const e of Object.keys(n)){const a=n[e],s=a.widget??{},i=a.enum??[],r=s.enumNames??[],o={};for(const[e,t]of i.entries())o[String(t)]=r[e];t[e]=o}return t};createFormatReplaces=(e,t)=>{const n={...e};for(const[a,s]of Object.entries(e)){const e=t[a];e&&(n[`:${a}`]=e[String(s)])}return n};renderEnumerate(e,t,n){t=R(e,t);const a=e.widget??{},i=a.enumNames??[],r=a.enumTitles??[],o={items:e.enum.map(((e,t)=>({label:i[t]??e,value:e,title:r[t]})))};return s().createElement(H,{className:a.className,style:a.style,schema:o,value:t,onChange:this.handleOnChange(n)})}renderTypeString(e,t,n){t=R(e,t);const a=e.widget??{};if("color"===a.type)return s().createElement(I,{className:a.className,style:a.style,value:t,onChange:this.handleOnChange(n)});if("text"===a.type){const e={rows:a.rows,cols:a.cols,placeholder:a.placeholder,spellcheck:a.spellcheck};return s().createElement(_,{className:a.className,style:a.style,schema:e,value:t,onChange:this.handleOnChange(n)})}const i={type:"string",placeholder:a.placeholder,spellcheck:a.spellcheck,tooltip:a.tooltip};return s().createElement(A,{className:a.className,style:a.style,schema:i,value:t,onChange:this.handleOnChange(n)})}renderTypeNumber(e,t,n){t=R(e,t);const a=e.widget??{};if("slider"===a.type)return s().createElement(Q,{className:a.className,style:a.style,value:t,onChange:this.handleOnChange(n)});const i={type:"number",tooltip:a.tooltip};return s().createElement(A,{className:a.className,style:a.style,schema:i,value:t,onChange:this.handleOnChange(n)})}renderTypeBoolean(e,t,n){t=R(e,t);const a=e.widget??{};return s().createElement(J,{className:a.className,style:a.style,schema:{},value:t,onChange:this.handleOnChange(n)})}renderTypeNull(e,t){t=R(e,t);const n=e.widget??{};return s().createElement(U,{className:n.className,style:n.style,value:t})}renderTypeObjectTab(e,t,n){t=R(e,t);const a=e.properties??[],i=e.widget??{},r=[];for(const e of Object.keys(a))r.push({value:e,label:a[e].title??e});const o={items:r},l=i.active??r[0].value,c=a[l],p=t[l],d=[...n,l],u=i.position??"top",{topLayout:h,leftLayout:m}=te;let g="top"===u?h:m;return g=ee(g,i.className),s().createElement("div",{className:g,style:i.style},s().createElement(C,{schema:o,value:l,position:i.position,onChange:this.handleOnActive(n)}),s().createElement("div",null,this.renderSchema(c,p,d)))}renderTypeObjectMenu(e,t,n){t=R(e,t);const a=e.properties??[],i=e.widget??{},r=[];for(const e of Object.keys(a))r.push({value:e,label:a[e].title??e});const o={items:r,groups:i.groups};let l=i.active;l&&void 0===t[l]&&(l=void 0),!l&&i.single&&(l=Object.keys(t)[0]),l||(l=r[0].value);const c=a[l],p=t[l],d=[...n,l],u=i.className;return s().createElement("div",{className:u,style:i.style},s().createElement("div",{className:te.topMenu},s().createElement(H,{schema:o,value:l,onChange:this.handleOnActive(n)})),s().createElement("div",null,this.renderSchema(c,p,d)))}renderTypeObjectFlat(e,t,n){t=R(e,t);const a=e.properties??[],i=e.widget??{},{topLayout:r,leftLayout:o,topHeader:l,leftHeader:c}=te,p=i.position??"top",d="top"===p?r:o,u="top"===p?l:c,h=[];for(const e of Object.keys(a)){const i=a[e],r=t[e],o=[...n,e];h.push(s().createElement("div",{className:d,key:e},s().createElement("div",{className:u},i.title??e),s().createElement("div",null,this.renderSchema(i,r,o))))}const m=ee(te.flatLayout,i.className);return s().createElement("div",{className:m,style:i.style},h)}renderTypeObjectList(e,t,n){t=R(e,t);const a=e.properties??[],i=e.widget??{},r=[];for(const e of Object.keys(a))r.push({value:e,label:a[e].title??e,icon:i.icon});const o={items:r},l=i.active??r[0].value,c=a[l],p=t[l],d=[...n,l],u=ee(te.leftLayout,i.className);return s().createElement("div",{className:u,style:i.style},s().createElement(Z,{style:{width:"100%"},schema:o,value:l,onChange:this.handleOnActive(n)}),s().createElement("div",null,this.renderSchema(c,p,d)))}renderTypeObjectFlow(e,t,n){t=R(e,t);const a=e.properties??[],i=e.widget??{},r=e.required??[],o=[];for(const[e,l]of r.entries()){const c=a[l],p=t[l],d=[...n,l],u=i.separator&&e+1<r.length;o.push(s().createElement(s().Fragment,{key:l},s().createElement("span",{className:te.gridEdit},this.renderSchema(c,p,d)),u&&s().createElement("span",null,i.separator)))}const l=ee(te.flowLayout,i.className);return s().createElement("div",{className:l,style:i.style},o)}renderTypeObjectGridInline(e,t,n){t=R(e,t);const a=e.properties??[],i=e.required??[],r=e.widget??{},o=[];for(const e of Object.keys(a)){const l=a[e],c=t[e],p=[...n,e],d=l.widget??{},u=i.includes(e);let h=l.title??e;r.title&&(h=Y(r.title,{title:l.title,key:e}));let m=te.gridText,g=te.gridEdit,f=te.gridText,y=te.gridText;u||void 0!==c||(m=ee(te.gridDisabled,m),g=ee(te.gridDisabled,g),f=ee(te.gridDisabled,f),y=ee(te.gridDisabled,y));let b=null;u||(b=void 0===c?s().createElement(S,{icon:"add",onClick:this.handleOnAdd(n,e)}):s().createElement(S,{icon:"remove",onClick:this.handleOnRemove(n,e)})),o.push(s().createElement(s().Fragment,{key:e},s().createElement("span",{className:m},h),s().createElement("span",{className:f},d.prefix),s().createElement("span",{className:g},this.renderSchema(l,c,p)),s().createElement("span",{className:y},d.suffix),s().createElement("span",null,b)))}const l=ee(te.gridLayout,r.className);return s().createElement("div",{className:l,style:r.style},o)}renderTypeObjectGridNewline(e,t,n){t=R(e,t);const a=e.properties??[],i=e.required??[],r=e.widget??{},o={};for(const e of Object.keys(a))o[e]=i.includes(e);for(const e of Object.keys(t))a[e]&&(o[e]=!0);const l=[],c=[];for(const[e,t]of Object.entries(o))t?l.push(e):c.push(e);const p=[];for(const e of l){const o=a[e],l=t[e],c=[...n,e],d=o.widget??{},u=i.includes(e);let h=o.title??e;r.title&&(h=Y(r.title,{title:o.title,key:e})),p.push(s().createElement(s().Fragment,{key:e},s().createElement("span",{className:te.gridText},h),s().createElement("span",{className:te.gridText},d.prefix),s().createElement("span",{className:te.gridEdit},this.renderSchema(o,l,c)),s().createElement("span",{className:te.gridText},d.suffix),s().createElement("span",null,u??s().createElement(S,{icon:"remove",onClick:this.handleOnRemove(n,e)}))))}if(c.length>0){const e=c.map((e=>({label:a[e].title??e,value:e}))),t=r.prepare??c[0],i=s().createElement(H,{schema:{items:e},value:t,onChange:this.handleOnPrepare(n)});p.push(s().createElement(s().Fragment,{key:"+"},s().createElement("span",{className:te.gridEdit},i),s().createElement("span",null),s().createElement("span",null,s().createElement(S,{icon:"add",onClick:this.handleOnAdd(n,t)}))))}const d=ee(te.gridLayout,r.className);return s().createElement("div",{className:d,style:r.style},p)}renderTypeObject(e,t,n){const a=e.widget??{};return"tab"===a.type?this.renderTypeObjectTab(e,t,n):"menu"===a.type?this.renderTypeObjectMenu(e,t,n):"flat"===a.type?this.renderTypeObjectFlat(e,t,n):"list"===a.type?this.renderTypeObjectList(e,t,n):"flow"===a.type?this.renderTypeObjectFlow(e,t,n):"inline"===a.mode?this.renderTypeObjectGridInline(e,t,n):this.renderTypeObjectGridNewline(e,t,n)}renderTypeArrayList(e,t,n){t=R(e,t);const a=e.widget??{},i=[];for(const[e,n]of t.entries()){let s=a.label;"function"==typeof s&&(s=s(n,e,t));let r=a.icon;"function"==typeof r&&(r=r(n,e,t)),i.push({value:e,label:s,icon:r})}const r={items:i,actions:["add","remove","up","down"]};let o=a.active??0;o=o>=t.length?t.length-1:o;const l=e.items,c=t[o],p=[...n,o],d=-1!==o&&o<t.length,u=ee(te.leftLayout,a.className);return s().createElement("div",{className:u,style:a.style},s().createElement(Z,{style:{width:"100%"},schema:r,value:o,onChange:this.handleOnActive(n),onClick:this.handleOnClick(n,[t.length,o])}),s().createElement("div",null,d&&this.renderSchema(l,c,p)))}renderTypeArrayPick(e,t,n){t=R(e,t);const a=e.widget??{},i={gridColumnStart:1},r=a.columns?[...a.columns]:[];for(let e=1;e<r.length;e++)r[e]+=r[e-1];let o,l;a.enum?(o=a.enum.codes??[],l=a.enum.names??[]):(o=e.items.enum??[],l=e.items.widget?.enumNames??[]);const c=[];for(const[e,a]of o.entries()){const o=l[e]??a,p=t.indexOf(a),d=-1!==p,u=d?te.pickChecked:void 0,h=r.includes(e)?i:void 0;let m;m=d?this.handleOnRemove(n,p):()=>this.handleOnAdd(n,t.length)(a),c.push(s().createElement(s().Fragment,{key:c.length},s().createElement("span",{className:u,style:h},s().createElement(J,{schema:{label:o},value:d,onChange:m}))))}let p=!1;for(const[e,a]of t.entries()){if(o.includes(a))continue;let t;p||(t=i,p=!0),c.push(s().createElement(s().Fragment,{key:c.length},s().createElement("span",{className:te.pickDeleted,style:t},s().createElement(J,{schema:{label:a},value:!0,onChange:this.handleOnRemove(n,e)}))))}const d=ee(te.pickLayout,a.className);return s().createElement("div",{className:d,style:a.style},c)}renderTypeArrayGrid(e,t,n){t=R(e,t);const a=e.widget??{},i=[];for(const[a,r]of t.entries()){const t=e.items,o=[...n,a],l=t.widget??{};i.push(s().createElement(s().Fragment,{key:a},s().createElement("span",{className:te.gridText},a+1),s().createElement("span",{className:te.gridText},l.prefix),s().createElement("span",{className:te.gridEdit},this.renderSchema(t,r,o)),s().createElement("span",{className:te.gridText},l.suffix),s().createElement("span",null,s().createElement(S,{icon:"remove",onClick:this.handleOnRemove(n,a)}))))}i.push(s().createElement(s().Fragment,{key:"+"},t.length>0&&s().createElement(s().Fragment,null,s().createElement("span",null),s().createElement("span",null)),s().createElement("span",null,s().createElement(S,{icon:"add",onClick:this.handleOnAdd(n,t.length)}))));const r=ee(te.gridLayout,a.className);return s().createElement("div",{className:r,style:a.style},i)}renderTypeArray(e,t,n){const a=e.widget??{};return"list"===a.type?this.renderTypeArrayList(e,t,n):"pick"===a.type?this.renderTypeArrayPick(e,t,n):this.renderTypeArrayGrid(e,t,n)}renderSchema(e,t,n){if(e.enum)return this.renderEnumerate(e,t,n);if("string"===e.type)return this.renderTypeString(e,t,n);if("number"===e.type)return this.renderTypeNumber(e,t,n);if("boolean"===e.type)return this.renderTypeBoolean(e,t,n);if("null"===e.type)return this.renderTypeNull(e,t);if("object"===e.type)return this.renderTypeObject(e,t,n);if("array"===e.type)return this.renderTypeArray(e,t,n);throw"Invalid schema type"}render(){let e=this.props.className;e=[te.root,e].join(" ").trim();const t=this.props.schema,n=this.props.value;return s().createElement("div",{className:e},this.renderSchema(t,n,[]))}}class ae extends s().PureComponent{constructor(e){super(e);const t=P(e.defaultSchema),n=R(t,e.defaultValue);this.state={schema:t,value:n}}executeOnChange=(e,t,n)=>{this.props.onChange&&(void 0!==n&&(t=[...t,n]),this.props.onChange(e,t))};executeOnActive=(e,t,n)=>{this.props.onActive&&(void 0!==n&&(t=[...t,n]),this.props.onActive(e,t))};querySchemas=(e,t)=>{let n=e,a=null;for(const e of t)a=n,n="object"===n.type?n.properties[e]:n.items;return[n,a]};queryValues=(e,t)=>{let n=e;for(let e=0;e<t.length-1;e++){const a=t[e],s=t[e+1];void 0===n[a]&&(n[a]="string"==typeof s?{}:[]),n=n[a]}n=e;let a=null;for(const n of t)a=e,e=e[n];return[e,a]};handleOnChange=(e,t)=>{if(0===e.length)return this.executeOnChange(t,e),void this.setState({value:t});const n=e.pop(),a=F(this.state.value);this.queryValues(a,e)[0][n]=t,this.executeOnChange(a,e,n),this.setState({value:a})};handleOnRemove=(e,t)=>{const n=F(this.state.value),a=this.queryValues(n,e)[0];"string"==typeof t?delete a[t]:a.splice(t,1),this.executeOnChange(n,e,t),this.setState({value:n})};handleOnActive=(e,t)=>{const n=F(this.state.schema),[a,s]=this.querySchemas(n,[...e,t]);if(s.widget={...s.widget,active:t},!s.widget.single)return this.executeOnActive(this.state.value,e,t),void this.setState({schema:n});const i=F(this.state.value),r=this.queryValues(i,[...e,t])[1];for(const e of Object.keys(r))e!==t&&delete r[e];void 0===r[t]&&(r[t]=R(a)),this.executeOnChange(i,e,t),this.setState({schema:n,value:i})};handleOnPrepare=(e,t)=>{const n=F(this.state.schema),a=this.querySchemas(n,e)[0];a.widget={...a.widget,prepare:t},this.setState({schema:n})};handleOnAdd=(e,t,n)=>{const a=F(this.state.schema),[s,i]=this.querySchemas(a,[...e,t]);i.widget&&delete i.widget.prepare,i.widget={...i.widget,active:t};const r=F(this.state.value),o=this.queryValues(r,[...e,t])[1];n=void 0===n?R(s):n,"string"==typeof t?o[t]=n:o.push(n),this.executeOnChange(r,e,t),this.setState({schema:a,value:r})};handleOnMoveUp=(e,t)=>{const n=F(this.state.schema),a=this.querySchemas(n,e)[0];a.widget={...a.widget,active:t-1};const s=F(this.state.value),i=this.queryValues(s,e)[0];i.splice(t-1,2,i[t],i[t-1]),this.executeOnChange(s,e,t-1),this.setState({schema:n,value:s})};handleOnMoveDown=(e,t)=>{const n=F(this.state.schema),a=this.querySchemas(n,e)[0];a.widget={...a.widget,active:t+1};const s=F(this.state.value),i=this.queryValues(s,e)[0];i.splice(t,2,i[t+1],i[t]),this.executeOnChange(s,e,t+1),this.setState({schema:n,value:s})};render(){const e=this.props.className,t=this.state.schema,n=this.state.value;return s().createElement(ne,{className:e,schema:t,onChange:this.handleOnChange,onActive:this.handleOnActive,onPrepare:this.handleOnPrepare,onRemove:this.handleOnRemove,onAdd:this.handleOnAdd,onMoveUp:this.handleOnMoveUp,onMoveDown:this.handleOnMoveDown,value:n})}}const se=h({input:{width:"300px"},grid:{gridTemplateColumns:["max-content","32px","300px","32px","max-content"].join(" ")},gridAlt:{gridTemplateColumns:["160px","32px","300px","32px","max-content"].join(" ")},list:{gridColumnGap:"16px",gridTemplateColumns:"200px 1fr",minHeight:"400px"},flat:{gridRowGap:"16px"},menu:{"& > :first-child":{width:"300px"}},pick:{gridTemplateColumns:"repeat(1, max-content)"},pick2:{gridTemplateColumns:"repeat(2, max-content)"},pick3:{gridTemplateColumns:"repeat(3, max-content)"},pick4:{gridTemplateColumns:"repeat(4, max-content)"},pick5:{gridTemplateColumns:"repeat(5, max-content)"},code:{"& input":{fontFamily:"var(--font-mono)"},"& textarea":{width:"100%",boxSizing:"border-box"}}}).attach().classes,ie={grid:{type:"grid",className:se.grid},gridAlt:{type:"grid",className:se.gridAlt},pick:{type:"pick",className:se.pick},pick2:{type:"pick",className:se.pick2},pick3:{type:"pick",className:se.pick3},pick4:{type:"pick",className:se.pick4},pick5:{type:"pick",className:se.pick5},flat:{type:"flat",className:se.flat},codeline:{className:se.code,spellcheck:!1},codetext:{type:"text",className:se.code,spellcheck:!1,rows:5}},re=e=>{const t=[];for(const n of e){const e=n.name;""===e||t.includes(e)||t.push(e)}return t},oe={type:"list",className:se.list,label:e=>e.name,icon:(e,t,n)=>((e,t,n)=>{if(""===e.name)return!0;for(const t of n){if(t===e)return!1;if(e.name===t.name)return!0}return!1})(e,0,n)?"error_outline":"check_circle_outline"},le=e=>{const t=e.option,n={bottomMargin:{title:t.bottomMargin,type:"number",default:100,widget:{suffix:"px"}},baseStyle:{title:t.baseStyle,type:"string",default:"stroke",enum:["stroke","background","classic","none"],widget:{enumNames:[t.stroke,t.background,t.classic,t.none]}},mouseAction:{title:t.mouseAction,type:"string",default:"none",enum:["none","text"],widget:{enumNames:[t.none,t.selectText]}}};return{title:t.subtitleRendering,type:"object",properties:n,required:Object.keys(n),widget:ie.gridAlt}},ce=e=>{const t=e.option,n={subtitleCount:{title:t.subtitleCount,type:"number",default:2,enum:[2,3,4,5,6,7,8]},showOnlyLanguages:{title:t.showOnlyLanguages,type:"string",widget:ie.codeline}};return{title:t.subtitleMenu,type:"object",properties:n,required:Object.keys(n),widget:ie.gridAlt}},pe=e=>{const t={rendering:le(e),dropdown:ce(e)};return{type:"object",properties:t,required:Object.keys(t),widget:ie.flat}};class de extends s().PureComponent{render(){return s().createElement(ae,{defaultSchema:pe(this.props.i18ns),defaultValue:this.props.defaultValue,onChange:this.props.onChange})}}class ue extends s().PureComponent{constructor(e){super(e),this.state={config:null}}componentDidMount(){this.load()}async load(){const e=await this.props.agent.load();this.setState({config:e})}onChange=async e=>{await this.props.agent.save(e)};render(){return null===this.state.config?null:s().createElement(de,{i18ns:this.props.i18ns,defaultValue:this.state.config,onChange:this.onChange})}}const he=e=>{const t=e.option,n={languageList:{title:t.languageList,type:"string",default:"popular",enum:["popular","available"],widget:{enumNames:[t.onlyPopularLanguages,t.allAvailableLanguages]}},translationEngine:{title:t.translationEngine,type:"string",default:"google",enum:["google","microsoft"],widget:{enumNames:[t.google,t.microsoft]}},translationMode:{title:t.translationMode,type:"string",default:"enhance",enum:["auto","enhance","normal"],widget:{enumNames:[t.auto,t.enhance,t.normal]}}};return{title:t.machineTranslation,type:"object",properties:n,required:Object.keys(n),widget:ie.gridAlt}},me=e=>{const t=e.option,n={pinyinScheme:{title:t.pinyinScheme,type:"string",default:"putonghua",enum:["putonghua","guangzhouhua","jyutping"],widget:{enumNames:[t.putonghua,t.guangzhouhua,t.jyutping]}}};return{title:t.chineseAnalysis,type:"object",properties:n,required:Object.keys(n),widget:ie.gridAlt}},ge=e=>{const t=e.option,n={furiganaCharacter:{title:t.furiganaCharacter,type:"string",default:"kanji",enum:["kanji","kana"],widget:{enumNames:[t.onlyKanji,t.bothKanjiAndKana]}}};return{title:t.japaneseAnalysis,type:"object",properties:n,required:Object.keys(n),widget:ie.gridAlt}},fe=e=>{const t={translation:he(e),chinese:me(e),japanese:ge(e)};return{type:"object",properties:t,required:Object.keys(t),widget:ie.flat}};class ye extends s().PureComponent{render(){return s().createElement(ae,{defaultSchema:fe(this.props.i18ns),defaultValue:this.props.defaultValue,onChange:this.props.onChange})}}class be extends s().PureComponent{constructor(e){super(e),this.state={config:null}}componentDidMount(){this.load()}async load(){const e=await this.props.agent.load();this.setState({config:e})}onChange=async e=>{await this.props.agent.save(e)};render(){return null===this.state.config?null:s().createElement(ye,{i18ns:this.props.i18ns,defaultValue:this.state.config,onChange:this.onChange})}}const we=({style:e,term:t})=>({name:{title:e.name,type:"string",widget:{className:se.input}},pos:{title:e.partOfSpeech,type:"array",items:{type:"string"},widget:{...ie.pick4,columns:[1,4,3,2,4,4,2],enum:{codes:["无","专","事","名","外","动一","动二","动三","形一","形二","数","代","助","副","连体","接续","接头","接尾","感叹","助动"],names:[t.Wu,t.Zhuan,t.Shi,t.Ming,t.Wai,t.DongYi,t.DongEr,t.DongSan,t.XingYi,t.XingEr,t.Shu,t.Dai,t.Zhu,t.Fu,t.LianTi,t.JieXu,t.JieTou,t.JieWei,t.GanTan,t.ZhuDong]}}},form:{title:e.conjugation,type:"array",items:{type:"string"},widget:{...ie.pick3,columns:[2,3,3,3],enum:{codes:["基本形","ます形","て形","た形","ない形","假定形","意志形","命令形","可能形式","被动形式","使役形式"],names:[t.JiBenXing,t.MaSuXing,t.TeXing,t.TaXing,t.NaIXing,t.JiaDingXing,t.YiZhiXing,t.MingLingXing,t.KeNengXingShi,t.BeiDongXingShi,t.ShiYiXingShi]}}},tag:{title:e.represent,type:"array",items:{type:"string"},widget:{...ie.pick4,enum:{codes:["简体","敬体","现在","过去","肯定","否定","假定","意志","命令","建议","副词化","名词化"],names:[t.JianTi,t.JingTi,t.XianZai,t.GuoQu,t.KenDing,t.FouDing,t.JiaDing,t.YiZhi,t.MingLing,t.JianYi,t.FuCiHua,t.MingCiHua]}}},sense:{title:e.usage,type:"array",items:{type:"string"},widget:{...ie.pick3,enum:{codes:["自动","他动","自他动"],names:[t.ZiDong,t.TaDong,t.ZiTaDong]}}},jlpt:{title:e.jlpt,type:"array",items:{type:"string",enum:["N5","N4","N3","N2","N1"]},widget:{...ie.pick5}}}),ve=e=>({type:"object",properties:e,widget:{type:"grid",className:se.grid,mode:"inline"}}),{classes:xe}=h({root:{display:"flex",flexDirection:"column",gap:"8px"}}).attach();class Ce extends s().PureComponent{constructor(e){super(e),this.state={tab:e.defaultTab??"themes",value:e.defaultValue}}componentDidMount(){this.onActive(this.state.tab)}onActive(e,t){if(!this.props.onActive)return;const n=this.state.value;void 0===t&&(t=n[e].length>0?["0"]:[]),this.props.onActive(n,[e,...t])}onChangeTab=e=>{this.setState({tab:e}),this.onActive(e)};onChangeGenres=(e,t)=>{const n={...this.state.value};n.genres=e,this.setState({value:n}),this.props.onChange(n,["genres",...t])};onChangeRulers=(e,t)=>{const n={...this.state.value};n.rulers=e,this.setState({value:n}),this.props.onChange(n,["rulers",...t])};onChangeThemes=(e,t)=>{const n={...this.state.value};n.themes=e,this.setState({value:n}),this.props.onChange(n,["themes",...t])};onActiveGenres=(e,t)=>{this.onActive("genres",t)};onActiveRulers=(e,t)=>{this.onActive("rulers",t)};onActiveThemes=(e,t)=>{this.onActive("themes",t)};renderEditorGenres(){const e=this.props.i18ns,t=this.state.value,n=(e=>{const t=e.style,n=we(e),a={fontSize:{title:t.fontSize,type:"number",default:100,widget:{suffix:"%"}},fontColor:{title:t.fontColor,type:"string",default:"#ffffff",widget:{type:"color"}},fontOpacity:{title:t.fontOpacity,type:"number",default:100,widget:{type:"slider",suffix:"%"}},fontEdgeEffect:{title:t.fontEdgeEffect,type:"string",default:"none",enum:["none","shadow"],widget:{enumNames:[t.none,t.shadow]}},fontEdgeColor:{title:t.fontEdgeColor,type:"string",default:"#ffffff",widget:{type:"color"}},fontEdgeSize:{title:t.fontEdgeSize,type:"number",widget:{suffix:"px"}},fontBold:{title:t.fontBold,type:"boolean",default:!0,enum:[!0,!1],widget:{enumNames:[t.true,t.false]}},fontItalic:{title:t.fontItalic,type:"boolean",default:!0,enum:[!0,!1],widget:{enumNames:[t.true,t.false]}},backgroundColor:{title:t.backgroundColor,type:"string",default:"#ffffff",widget:{type:"color"}},backgroundOpacity:{title:t.backgroundOpacity,type:"number",default:100,widget:{type:"slider",suffix:"%"}},backgroundEdgeEffect:{title:t.backgroundEdgeEffect,type:"string",default:"none",enum:["none","shadow"],widget:{enumNames:[t.none,t.shadow]}},backgroundEdgeColor:{title:t.backgroundEdgeColor,type:"string",default:"#ffffff",widget:{type:"color"}},borderSize:{title:t.borderSize,type:"number",widget:{suffix:"px"}},borderColor:{title:t.borderColor,type:"string",default:"#ffffff",widget:{type:"color"}}},s={display1:{title:t.display,type:"string",default:"true",enum:["true","false"],widget:{enumNames:[t.true,t.false]}},display2:{title:t.display,type:"string",default:"true",enum:["true","false","preserve"],widget:{enumNames:[t.true,t.false,t.preserve]}},flexAlign:{title:t.alignment,type:"string",default:"center",enum:["center","left","right","evenly"],widget:{enumNames:[t.center,t.left,t.right,t.evenly]}}},i={display:s.display1,match:{title:t.matchText,type:"string",widget:{placeholder:t.all}},...a},r={display:s.display1,match:{...n.pos,title:t.matchText},...a},o={display:s.display1,match:{...n.form,title:t.matchText},...a},l={display:s.display1,match:{...n.tag,title:t.matchText},...a},c={display:s.display1,match:{...n.sense,title:t.matchText},...a},p={display:s.display1,match:{...n.jlpt,title:t.matchText},...a},d={display:s.display2,...a},u={display:s.display2,flexAlign:s.flexAlign,...a},h={display:s.display2,backgroundColor:a.backgroundColor,backgroundEdgeEffect:a.backgroundEdgeEffect,backgroundEdgeColor:a.backgroundEdgeColor,borderSize:a.borderSize,borderColor:a.borderColor},m={...a},g={flexAlign:s.flexAlign,...a};return{type:"array",items:{type:"object",properties:{name:n.name,component:(()=>{const e={none:{title:"",type:"null"},dialogue:{...ve(g),title:t.wholeText},contents:{...ve(m),title:t.contentText},readings:{...ve(d),title:t.readingBar},grammars:{...ve(u),title:t.grammarBar},dividers:{...ve(h),title:t.segmentationLine},pinyin:{...ve(i),title:t.pinyin},hiragana:{...ve(i),title:t.hiragana},katakana:{...ve(i),title:t.katakana},romaji:{...ve(i),title:t.romaji},loanword:{...ve(i),title:t.gairaigo},pos:{...ve(r),title:t.partOfSpeech},form:{...ve(o),title:t.conjugation},tag:{...ve(l),title:t.represent},base:{...ve(i),title:t.baseform},sense:{...ve(c),title:t.usage},jlpt:{...ve(p),title:t.jlpt}};return{title:t.component,type:"object",properties:e,widget:{type:"menu",className:se.menu,single:!0,groups:[{label:"",count:1},{label:t.layoutComponent,count:5},{label:t.chineseComponent,count:1},{label:t.japaneseComponent,count:10}]}}})()},required:["name"],widget:ie.flat},widget:oe}})(e);return s().createElement(ae,{defaultSchema:n,defaultValue:t.genres,onChange:this.onChangeGenres,onActive:this.onActiveGenres})}renderEditorRulers(){const e=this.props.i18ns,t=this.state.value,n=((e,t)=>{const n=e.style,a=we(e),s={title:n.matchText,type:"string",widget:{placeholder:n.all}};return{type:"array",items:{type:"object",properties:{name:a.name,genres:{title:n.componentStyle,type:"array",items:{type:"string"},widget:{...ie.pick4,enum:{codes:re(t)}}},tokens:(()=>{const e={text:{...s,title:n.literal},hiragana:{...s,title:n.hiragana},katakana:{...s,title:n.katakana},romaji:{...s,title:n.romaji},loanword:{...s,title:n.gairaigo},pos:{...a.pos,title:n.partOfSpeech},form:{...a.form,title:n.conjugation},tag:{...a.tag,title:n.represent},base:{...s,title:n.baseform},sense:{...a.sense,title:n.usage},jlpt:{...a.jlpt,title:n.jlpt}};return{title:n.condition,type:"object",properties:e,widget:{type:"grid",className:se.grid,mode:"inline"}}})()},required:["name"],widget:ie.flat},widget:oe}})(e,t.genres);return s().createElement(ae,{defaultSchema:n,defaultValue:t.rulers,onChange:this.onChangeRulers,onActive:this.onActiveRulers})}renderEditorThemes(){const e=this.props.i18ns,t=this.state.value,n=((e,t,n)=>{const a=e.style;return{type:"array",items:{type:"object",properties:{name:we(e).name,genres:{title:a.componentStyle,type:"array",items:{type:"string"},widget:{...ie.pick4,enum:{codes:re(t)}}},rulers:{title:a.conditionStyle,type:"array",items:{type:"string"},widget:{...ie.pick4,enum:{codes:re(n)}}},toolkit:{title:a.languageToolkit,type:"string",default:"none",enum:["none","zhtools","jatools"],widget:{className:se.input,enumNames:[a.none,a.chineseAnalysis,a.japaneseAnalysis]}}},required:["name","toolkit"],widget:ie.flat},widget:oe}})(e,t.genres,t.rulers);return s().createElement(ae,{defaultSchema:n,defaultValue:t.themes,onChange:this.onChangeThemes,onActive:this.onActiveThemes})}renderContent(){const e=this.state.tab;return"genres"===e?this.renderEditorGenres():"rulers"===e?this.renderEditorRulers():"themes"===e?this.renderEditorThemes():null}render(){const e=this.props.i18ns,t=this.state.tab;return s().createElement("div",{className:xe.root},s().createElement(C,{schema:(n=e.style,{items:[{label:n.themeStyle,value:"themes"},{label:n.componentStyle,value:"genres"},{label:n.conditionStyle,value:"rulers"}]}),value:t,onChange:this.onChangeTab}),s().createElement("div",{key:t},this.renderContent()));var n}}class ke extends s().PureComponent{constructor(e){super(e),this.state={config:null}}componentDidMount(){this.load()}async load(){const e=await this.props.agent.load();this.setState({config:e})}onChange=async e=>{await this.props.agent.save(e)};render(){return null===this.state.config?null:s().createElement(Ce,{i18ns:this.props.i18ns,defaultValue:this.state.config,onChange:this.onChange})}}const Ee=e=>{const t=e.option,n={name:{title:t.name,type:"string",widget:{className:se.input}},type:{title:t.type,type:"string",default:"none",enum:["none","style","script","standard","simple"],widget:{className:se.input,enumNames:[t.none,t.style,t.script,t.menuAutoSelectStandardMode,t.menuAutoSelectSimpleMode]}},code:{title:t.code,type:"string",widget:{...ie.codetext,rows:12}},urls:{title:t.website,type:"array",items:{type:"string",enum:k},widget:ie.pick3}};return{type:"object",properties:n,required:Object.keys(n),widget:ie.flat}},Se=e=>({type:"array",items:Ee(e),widget:oe}),Ne=e=>{const t={items:Se(e)};return{type:"object",properties:t,required:Object.keys(t),widget:{type:"flow"}}};class Ae extends s().PureComponent{render(){return s().createElement(ae,{defaultSchema:Ne(this.props.i18ns),defaultValue:this.props.defaultValue,onChange:this.props.onChange})}}class Te extends s().PureComponent{constructor(e){super(e),this.state={config:null}}componentDidMount(){this.load()}async load(){const e=await this.props.agent.load();this.setState({config:e})}onChange=async e=>{await this.props.agent.save(e)};render(){return null===this.state.config?null:s().createElement(Ae,{i18ns:this.props.i18ns,defaultValue:this.state.config,onChange:this.onChange})}}const je=[new URL(location.href).searchParams.get("hl")??navigator.language,"en"],Oe=new Intl.DisplayNames(je,{type:"language"}),Le=e=>(e=e.toLowerCase().replaceAll("_","-").trim(),(Oe.of(e)??e).replaceAll("（","(").replaceAll("）",")").replace(/ *\(/g," (").trim()),ze=["af","am","ar","az","be","bg","bn","bs","ca","ceb","co","cs","cy","da","de","el","en","eo","es","et","eu","fa","fi","fr","fy","ga","gd","gl","gu","ha","haw","hi","hmn","hr","ht","hu","hy","id","ig","is","it","iw","ja","jw","ka","kk","km","kn","ko","ku","ky","la","lb","lo","lt","lv","mg","mi","mk","ml","mn","mr","ms","mt","my","ne","nl","no","ny","or","pa","pl","ps","pt","ro","ru","rw","sd","si","sk","sl","sm","sn","so","sq","sr","st","su","sv","sw","ta","te","tg","th","tk","tl","tr","tt","ug","uk","ur","uz","vi","xh","yi","yo","zu"].concat(["zh-hans","zh-hant"]).concat([]),De=["af","am","ar","az","bg","bs","ca","cs","cy","da","de","el","en","es","et","fa","fi","fr","ga","gu","hi","hr","ht","hu","hy","id","is","it","ja","kk","km","kn","ko","lo","lt","lv","mg","mi","ml","mr","ms","mt","ne","nl","pa","pl","ps","ro","ru","sk","sl","sm","sq","sv","sw","ta","te","th","tr","uk","ur","vi"].concat(["tl","iw","no"]).concat(["bn","ku","my","or","pt","zh-hans","zh-hant"]),Me=["bg","cs","da","de","el","en","es","et","fi","fr","ga","hr","hu","is","it","ja","lt","lv","mt","nl","no","pl","pt","ro","ru","sk","sl","sv"].concat(["zh-hans","zh-hant"]).concat([]),Re=["ar","cs","de","el","en","es","fr","hu","ja","ko","pl","pt","ru","th","tr","vi","zh-hans","zh-hant"],Pe=e=>{const t=e.option,n=(e=>{const t=""===(n=(n=navigator.language).toLowerCase().replace("_","-").trim())?"en":"zh-tw"===n||"zh-hk"===n||"zh-mo"===n||"zh-hant"===n?"zh-hant":n.match(/^zh\b/)?"zh-hans":n.split(/\b/)[0];var n;const a=(e=>{let t=[];"google"===e.engine&&(t=ze),"microsoft"===e.engine&&(t=De),"deepl"===e.engine&&(t=Me);let n=[];"available"===e.filter&&(n=Array.from(t)),"popular"===e.filter&&(n=Re.filter((e=>t.includes(e))));for(let a of e.attach)a=a.toLowerCase().replace("_","-").trim(),a=a.split("-")[0],!n.includes(a)&&t.includes(a)&&n.push(a);return n.sort(),n})({engine:"google",filter:"available",attach:[t]}),s=a.map(Le);return{defaultCode:t,codes:a,names:s}})(),a={name:{title:t.name,type:"string",widget:{className:se.input}},lang:{title:t.language,type:"string",default:n.defaultCode,enum:n.codes,widget:{className:se.input,enumNames:n.names,enumTitles:n.codes}},code:{title:t.code,type:"string",widget:{...ie.codetext,rows:12}},urls:{title:t.website,type:"array",items:{type:"string",enum:k},widget:ie.pick3}};return{type:"object",properties:a,required:Object.keys(a),widget:ie.flat}},Fe=e=>({type:"array",items:Pe(e),widget:oe}),Ge=e=>{const t={items:Fe(e)};return{type:"object",properties:t,required:Object.keys(t),widget:{type:"flow"}}};class qe extends s().PureComponent{render(){return s().createElement(ae,{defaultSchema:Ge(this.props.i18ns),defaultValue:this.props.defaultValue,onChange:this.props.onChange})}}class _e extends s().PureComponent{constructor(e){super(e),this.state={config:null}}componentDidMount(){this.load()}async load(){const e=await this.props.agent.load();this.setState({config:e})}onChange=async e=>{await this.props.agent.save(e)};render(){return null===this.state.config?null:s().createElement(qe,{i18ns:this.props.i18ns,defaultValue:this.state.config,onChange:this.onChange})}}const Xe=new Date,Je=60*Xe.getTimezoneOffset()*1e3,Be=Xe.toTimeString().slice(12,17),He=e=>`${new Date(e-Je).toISOString().slice(0,19).replace("T"," ")} ${Be}`,{classes:Ke}=h({root:{display:"flex",gap:"16px",flexDirection:"column",width:"60%"},form:{display:"flex",gap:"8px",flexDirection:"column"},field:{display:"flex",gap:"4px",flexDirection:"column",borderLeft:"4px solid #ccc",paddingLeft:"8px","& .name":{lineHeight:"28px"}},table:{fontSize:"14px",lineHeight:1,borderCollapse:"collapse","& th, & td":{border:"1px solid #ccc",padding:"8px",textAlign:"left"}},tbody:{"& th:first-child":{width:"140px"}}}).attach();class Ie extends s().PureComponent{constructor(e){super(e),this.state={checking:!1,config:null,report:null}}componentDidMount(){this.load()}async load(){const e=await this.props.agent.load();this.setState({config:e})}async save(e){await this.props.agent.save(e)}async check(){const e=this.props.i18ns.option,t=this.state.config;let n;n={status:e.connecting,config:t,detail:null},this.setState({checking:!0,report:n}),n=await this.props.agent.check(t),this.setState({checking:!1,report:n})}onChangeApiUrl=e=>{e=e.trim();const t={...this.state.config,apiUrl:e};this.setState({config:t}),this.save(t)};onChangeApiKey=e=>{e=e.trim();const t={...this.state.config,apiKey:e};this.setState({config:t}),this.save(t)};onClick=e=>{"check"===e&&this.check()};renderFormApiUrl(){const e=this.state.config.apiUrl,t={items:["https://api.dualsub.xyz/"].map((e=>({label:e,value:e})))};return s().createElement("div",{className:Ke.field},s().createElement("div",{className:"name"},"API Url"),s().createElement(H,{value:e,schema:t,onChange:this.onChangeApiUrl}))}renderFormApiKey(){const e=this.state.config.apiKey;return s().createElement("div",{className:Ke.field},s().createElement("div",{className:"name"},"API Key"),s().createElement(A,{value:e,schema:{type:"string",spellcheck:!1},onChange:this.onChangeApiKey}))}renderFormCheck(){const e=this.props.i18ns.option,t=this.state.checking;return s().createElement("div",null,s().createElement(S,{label:e.check,value:"check",disabled:t,icon:"person_search",onClick:this.onClick}))}renderForm(){return s().createElement("div",{className:Ke.form},this.renderFormApiUrl(),this.renderFormApiKey(),this.renderFormCheck())}renderReportApiUrl(){const e=this.props.i18ns.option,t=this.state.report,n=t.config.apiUrl,a=t.status;return s().createElement("table",{className:Ke.table},s().createElement("tbody",{className:Ke.tbody},s().createElement("tr",null,s().createElement("th",null,"API Url"),s().createElement("td",null,n)),s().createElement("tr",null,s().createElement("th",null,e.status),s().createElement("td",null,a))))}renderReportApiKey(){const e=this.props.i18ns.option,t=this.state.report,n=t.config.apiKey,a=t.detail;if(""===n||"200 OK"!==t.status)return null;let i;return i=a?a.hasExpired?`${e.invalid} (${e.hasExpired})`:e.valid:`${e.invalid} (${e.notFound})`,s().createElement("table",{className:Ke.table},s().createElement("tbody",{className:Ke.tbody},s().createElement("tr",null,s().createElement("th",null,"API Key"),s().createElement("td",null,n)),s().createElement("tr",null,s().createElement("th",null,e.status),s().createElement("td",null,i)),this.renderReportApiKeyDetail(a)))}renderReportApiKeyDetail(e){if(null===e)return null;const t=this.props.i18ns.option;return s().createElement(s().Fragment,null,s().createElement("tr",null,s().createElement("th",null,t.createTime),s().createElement("td",null,He(e.timeCreate))),s().createElement("tr",null,s().createElement("th",null,t.expireTime),s().createElement("td",null,He(e.timeExpire))))}renderReport(){return null===this.state.report?null:s().createElement("div",{className:Ke.form},this.renderReportApiUrl(),this.renderReportApiKey())}render(){return null===this.state.config?null:s().createElement("div",{className:Ke.root},this.renderForm(),this.renderReport())}}const{classes:Ve}=h({root:{fontSize:"14px",display:"flex",flexDirection:"column",gap:"16px"},section:{display:"flex",flexDirection:"column",gap:"8px"},header:{borderBottom:"1px solid #ccc",borderTop:"1px solid transparent",lineHeight:"16px",padding:"6px 0",fontWeight:"bold"},content:{lineHeight:"16px"}}).attach();class Ze extends s().PureComponent{renderLink(e,t){return s().createElement("a",{href:e,rel:"noreferrer",target:"_blank"},t)}renderSectionServer(){const e=this.props.i18ns.option;return s().createElement("div",{className:Ve.section},s().createElement("div",{className:Ve.header},e.server),s().createElement("div",{className:Ve.content},s().createElement(Ie,{i18ns:this.props.i18ns,agent:this.props.agent.server})))}render(){return s().createElement("div",{className:Ve.root},this.renderSectionServer())}}const{classes:$e}=h({root:{fontSize:"14px",display:"flex",flexDirection:"column",gap:"16px"},section:{display:"flex",flexDirection:"column",gap:"8px"},header:{borderBottom:"1px solid #ccc",borderTop:"1px solid transparent",lineHeight:"16px",padding:"6px 0",fontWeight:"bold"},content:{lineHeight:"16px"},links:{"& ul":{margin:"8px",paddingInlineStart:"16px"},"& li":{padding:"4px 0"}}}).attach();class Ue extends s().PureComponent{renderLink(e,t){return s().createElement("a",{href:e,rel:"noreferrer",target:"_blank"},t)}renderSectionLinks(){const e=this.props.i18ns.option;return s().createElement("div",{className:$e.section},s().createElement("div",{className:$e.header,style:{display:"none"}}),s().createElement("div",{className:$e.content},s().createElement("div",{className:$e.links},s().createElement("ul",null,s().createElement("li",null,this.renderLink("https://www.dualsub.xyz/",e.homepage)),s().createElement("li",null,this.renderLink("https://www.dualsub.xyz/feedback.html",e.feedback)),s().createElement("li",null,this.renderLink("https://www.dualsub.xyz/changelog.html",e.changelog))))))}render(){return s().createElement("div",{className:$e.root},this.renderSectionLinks())}}const Ye=e=>({items:[{label:e.general,value:"general"},{label:e.language,value:"language"},{label:e.style,value:"style"},{label:e.plugin,value:"plugin"},{label:e.file,value:"file"},{label:e.network,value:"network"},{label:e.about,value:"about"}]}),{classes:We}=h({root:{padding:"8px",position:"relative",display:"flex",flexDirection:"column",gap:"8px"},content:{padding:"0 8px"}}).attach();class Qe extends s().PureComponent{constructor(e){super(e),this.state={tab:e.defaultTab??"general"}}onChangeTab=e=>{this.setState({tab:e}),this.props.onTab&&this.props.onTab(e)};renderHeader(){return s().createElement(O,{i18ns:this.props.i18ns,agent:this.props.agents.header})}renderTabbar(){const e=this.props.i18ns.option,t=this.state.tab;return s().createElement(C,{schema:Ye(e),value:t,onChange:this.onChangeTab})}renderPanel(){const e=this.state.tab;return"general"===e?s().createElement(ue,{i18ns:this.props.i18ns,agent:this.props.agents.general}):"language"===e?s().createElement(be,{i18ns:this.props.i18ns,agent:this.props.agents.language}):"style"===e?s().createElement(ke,{i18ns:this.props.i18ns,agent:this.props.agents.style}):"plugin"===e?s().createElement(Te,{i18ns:this.props.i18ns,agent:this.props.agents.plugin}):"file"===e?s().createElement(_e,{i18ns:this.props.i18ns,agent:this.props.agents.file}):"network"===e?s().createElement(Ze,{i18ns:this.props.i18ns,agent:this.props.agents.network}):"about"===e?s().createElement(Ue,{i18ns:this.props.i18ns}):null}renderContent(){return s().createElement("div",{className:We.content},this.renderPanel())}render(){return s().createElement("div",{className:We.root},this.renderHeader(),this.renderTabbar(),this.renderContent())}}class et{constructor(e){this.dataset=(e=>{const t={};for(const n of e)for(const[e,a]of Object.entries(n))t[e]||(t[e]={}),Object.assign(t[e],a);return t})(e)}get(e){return e=function(e){return""===(e=e.toLowerCase().replace("_","-").trim())?"en":"zh-tw"===e||"zh-hk"===e||"zh-mo"===e||"zh-hant"===e?"zh-hant":e.match(/^zh\b/)?"zh-hans":e.split("-")[0]}(e),this.dataset[e]||(e="en"),this.dataset[e]}}const tt=new et([JSON.parse('{"en":{"autoScaling":"Auto Scaling","chineseLearning":"Chinese Learning","example":"Example","firstSubtitle":"First Subtitle","hideSegmentline":"Hide Segmentline","japaneseLearning":"Japanese Learning","largeFont":"Large Font","pageFullscreen":"Page Fullscreen","secondSubtitle":"Second Subtitle","showHiragana":"Show Hiragana","showPinyin":"Show Pinyin","showSegmentline":"Show Segmentline","simpleMode":"Simple Mode","smallFont":"Small Font"}}'),JSON.parse('{"zh-hans":{"autoScaling":"自动缩放","chineseLearning":"中文学习","example":"示例","firstSubtitle":"第一字幕","hideSegmentline":"隐藏分词线","japaneseLearning":"日语学习","largeFont":"大号字体","pageFullscreen":"网页全屏","secondSubtitle":"第二字幕","showHiragana":"显示平假名","showPinyin":"显示拼音","showSegmentline":"显示分词线","simpleMode":"简单模式","smallFont":"小号字体"}}'),JSON.parse('{"zh-hant":{"autoScaling":"自動縮放","chineseLearning":"中文學習","example":"示例","firstSubtitle":"第一字幕","hideSegmentline":"隱藏分詞線","japaneseLearning":"日語學習","largeFont":"大號字體","pageFullscreen":"網頁全屏","secondSubtitle":"第二字幕","showHiragana":"顯示平假名","showPinyin":"顯示拼音","showSegmentline":"顯示分詞線","simpleMode":"簡單模式","smallFont":"小號字體"}}'),JSON.parse('{"en":{"LANG_CODE":"en","LANG_NAME":"English","LANG_LOCAL":"English"},"zh-hans":{"LANG_CODE":"zh-hans","LANG_NAME":"Simplified Chinese","LANG_LOCAL":"简体中文"},"zh-hant":{"LANG_CODE":"zh-hant","LANG_NAME":"Traditional Chinese","LANG_LOCAL":"繁體中文"}}')]),nt=new et([JSON.parse('{"en":{"about":"About","all":"All","allAvailableLanguages":"All Available Languages","announcement":"Announcement","arguments":"Arguments","auto":"Auto","background":"Background","baseStyle":"Base Style","bothKanjiAndKana":"Both Kanji and Kana","bottomMargin":"Bottom Margin","changelog":"Changelog","check":"Check","chinese":"Chinese","chineseAnalysis":"Chinese Analysis","classic":"Classic","clear":"Clear","clearCurrentValues":"Clear Current Values","code":"Code","confirmContinueMessage":"Do you want to continue?","connecting":"Connecting...","createTime":"Create Time","default":"Default","disable":"Disable","enable":"Enable","english":"English","enhance":"Enhance","error":"Error","expirationTime":"Expiration Time","expireTime":"Expire Time","export":"Export","feedback":"Feedback","file":"File","furiganaCharacter":"Furigana Character","general":"General","google":"Google","guangzhouhua":"Cantonese (Guangzhou)","hasExpired":"Has Expired","help":"Help","homepage":"Homepage","import":"Import","invalid":"Invalid","japanese":"Japanese","japaneseAnalysis":"Japanese Analysis","jyutping":"Cantonese (LSHK)","korean":"Korean","language":"Language","languageList":"Language List","machineTranslation":"Machine Translation","menuAutoSelectSimpleMode":"Menu Auto Select (Simple Mode)","menuAutoSelectStandardMode":"Menu Auto Select (Standard Mode)","microsoft":"Microsoft","mouseAction":"Mouse Action","name":"Name","network":"Network","no":"No","none":"None","normal":"Normal","notFound":"Not Found","onlyKanji":"Only Kanji","onlyPopularLanguages":"Only Popular Languages","pinyinScheme":"Pinyin Scheme","plugin":"Plugin","putonghua":"Mandarin","reset":"Reset","resetAllSettingsToDefault":"Reset All Settings To Default","resetToDefault":"Reset to Default","script":"Script","selectText":"Select Text","server":"Server","showOnlyLanguages":"Show Only Languages","status":"Status","stroke":"Stroke","style":"Style","subtitleCount":"Subtitle Count","subtitleMenu":"Subtitle Menu","subtitleRendering":"Subtitle Rendering","translated":"Translated","translationEngine":"Translation Engine","translationMode":"Translation Mode","type":"Type","valid":"Valid","website":"Website","yes":"Yes"}}'),JSON.parse('{"zh-hans":{"about":"关于","all":"所有","allAvailableLanguages":"所有可用语言","announcement":"公告","arguments":"参数","auto":"自动","background":"背景","baseStyle":"基础样式","bothKanjiAndKana":"汉字和假名","bottomMargin":"底部边距","changelog":"更新日志","check":"检查","chinese":"中文","chineseAnalysis":"中文分析","classic":"经典","clear":"清空","clearCurrentValues":"清空当前值","code":"代码","confirmContinueMessage":"要继续此操作吗？","connecting":"正在连接……","createTime":"创建时间","default":"默认","disable":"禁用","enable":"启用","english":"英语","enhance":"增强","error":"错误","expirationTime":"过期时间","expireTime":"过期时间","export":"导出","feedback":"问题反馈","file":"文件","furiganaCharacter":"注音字符","general":"通用","google":"谷歌","guangzhouhua":"粤语 (广州)","hasExpired":"已过期","help":"帮助","homepage":"官方网站","import":"导入","invalid":"无效","japanese":"日语","japaneseAnalysis":"日语分析","jyutping":"粤语 (香港语言学学会)","korean":"韩语","language":"语言","languageList":"语言列表","machineTranslation":"机器翻译","menuAutoSelectSimpleMode":"菜单自动选择 (简单模式)","menuAutoSelectStandardMode":"菜单自动选择 (标准模式)","microsoft":"微软","mouseAction":"鼠标动作","name":"名称","network":"网络","no":"否","none":"无","normal":"普通","notFound":"不存在","onlyKanji":"仅汉字","onlyPopularLanguages":"仅主流语言","pinyinScheme":"拼音方案","plugin":"插件","putonghua":"普通话","reset":"重置","resetAllSettingsToDefault":"重置所有设置为默认值","resetToDefault":"重置为默认值","script":"脚本","selectText":"选择文本","server":"服务器","showOnlyLanguages":"仅显示语言","status":"状态","stroke":"描边","style":"样式","subtitleCount":"字幕数量","subtitleMenu":"字幕菜单","subtitleRendering":"字幕渲染","translated":"翻译","translationEngine":"翻译引擎","translationMode":"翻译模式","type":"类型","valid":"有效","website":"网站","yes":"是"}}'),JSON.parse('{"zh-hant":{"about":"關於","all":"所有","allAvailableLanguages":"所有可用語言","announcement":"公告","arguments":"參數","auto":"自動","background":"背景","baseStyle":"基礎樣式","bothKanjiAndKana":"漢字和假名","bottomMargin":"底部邊距","changelog":"更新日誌","check":"檢查","chinese":"中文","chineseAnalysis":"中文分析","classic":"經典","clear":"清空","clearCurrentValues":"清空當前值","code":"代碼","confirmContinueMessage":"要繼續此操作嗎？","connecting":"正在連接……","createTime":"創建時間","default":"默認","disable":"禁用","enable":"啟用","english":"英語","enhance":"增強","error":"錯誤","expirationTime":"過期時間","expireTime":"過期時間","export":"導出","feedback":"問題反饋","file":"文件","furiganaCharacter":"注音字符","general":"通用","google":"谷歌","guangzhouhua":"粵語 (廣州)","hasExpired":"已過期","help":"幫助","homepage":"官方網站","import":"導入","invalid":"無效","japanese":"日語","japaneseAnalysis":"日語分析","jyutping":"粵語 (香港語言學學會)","korean":"韓語","language":"語言","languageList":"語言列表","machineTranslation":"機器翻譯","menuAutoSelectSimpleMode":"菜單自動選擇 (簡單模式)","menuAutoSelectStandardMode":"菜單自動選擇 (標準模式)","microsoft":"微軟","mouseAction":"鼠標動作","name":"名稱","network":"網絡","no":"否","none":"無","normal":"普通","notFound":"不存在","onlyKanji":"僅漢字","onlyPopularLanguages":"僅主流語言","pinyinScheme":"拼音方案","plugin":"插件","putonghua":"普通話","reset":"重置","resetAllSettingsToDefault":"重置所有設置為默認值","resetToDefault":"重置為默認值","script":"腳本","selectText":"選擇文本","server":"服務器","showOnlyLanguages":"僅顯示語言","status":"狀態","stroke":"描邊","style":"樣式","subtitleCount":"字幕數量","subtitleMenu":"字幕菜單","subtitleRendering":"字幕渲染","translated":"翻譯","translationEngine":"翻譯引擎","translationMode":"翻譯模式","type":"類型","valid":"有效","website":"網站","yes":"是"}}'),JSON.parse('{"en":{"LANG_CODE":"en","LANG_NAME":"English","LANG_LOCAL":"English"},"zh-hans":{"LANG_CODE":"zh-hans","LANG_NAME":"Simplified Chinese","LANG_LOCAL":"简体中文"},"zh-hant":{"LANG_CODE":"zh-hant","LANG_NAME":"Traditional Chinese","LANG_LOCAL":"繁體中文"}}')]),at=new et([JSON.parse('{"en":{"alignment":"Alignment","all":"All","backgroundColor":"Background Color","backgroundEdgeColor":"Background Edge Color","backgroundEdgeEffect":"Background Edge Effect","backgroundOpacity":"Background Opacity","baseform":"Baseform","borderColor":"Border Color","borderSize":"Border Size","center":"Center","chineseAnalysis":"Chinese Analysis","chineseComponent":"Chinese Component","component":"Component","componentStyle":"Component Style","condition":"Condition","conditionStyle":"Condition Style","conjugation":"Conjugation","contentText":"Content Text","display":"Display","evenly":"Evenly","false":"False","fontBold":"Font Bold","fontColor":"Font Color","fontEdgeColor":"Font Edge Color","fontEdgeEffect":"Font Edge Effect","fontEdgeSize":"Font Edge Size","fontItalic":"Font Italic","fontOpacity":"Font Opacity","fontSize":"Font Size","gairaigo":"Gairaigo","grammarBar":"Grammar Bar","hiragana":"Hiragana","japaneseAnalysis":"Japanese Analysis","japaneseComponent":"Japanese Component","jlpt":"JLPT","katakana":"Katakana","languageToolkit":"Language Toolkit","layoutComponent":"Layout Component","left":"Left","literal":"Literal","matchText":"Match Text","name":"Name","none":"None","partOfSpeech":"Part of Speech","pinyin":"Pinyin","preserve":"False(Preserve Height)","readingBar":"Reading Bar","represent":"Represent","right":"Right","romaji":"Romaji","segmentationLine":"Segmentation Line","shadow":"Shadow","stroke":"Stroke","themeStyle":"Theme Style","true":"True","usage":"Usage","wholeText":"Whole Text"}}'),JSON.parse('{"zh-hans":{"alignment":"对齐方式","all":"全部","backgroundColor":"背景颜色","backgroundEdgeColor":"背景边缘颜色","backgroundEdgeEffect":"背景边缘效果","backgroundOpacity":"背景透明度","baseform":"原型","borderColor":"边框颜色","borderSize":"边框大小","center":"居中","chineseAnalysis":"中文分析","chineseComponent":"中文组件","component":"组件","componentStyle":"组件样式","condition":"条件","conditionStyle":"条件样式","conjugation":"活用","contentText":"正文文本","display":"显示","evenly":"平均","false":"否","fontBold":"使用粗体","fontColor":"字体颜色","fontEdgeColor":"字体边缘颜色","fontEdgeEffect":"字体边缘效果","fontEdgeSize":"字体边缘大小","fontItalic":"使用斜体","fontOpacity":"字体透明度","fontSize":"字体大小","gairaigo":"外来词","grammarBar":"文法栏","hiragana":"平假名","japaneseAnalysis":"日语分析","japaneseComponent":"日语组件","jlpt":"JLPT","katakana":"片假名","languageToolkit":"语言工具","layoutComponent":"布局组件","left":"左","literal":"字面","matchText":"匹配文本","name":"名称","none":"无","partOfSpeech":"词类","pinyin":"拼音","preserve":"否(保留高度)","readingBar":"注音栏","represent":"表达","right":"右","romaji":"罗马字","segmentationLine":"分词线","shadow":"阴影","stroke":"描边","themeStyle":"主题样式","true":"是","usage":"用法","wholeText":"整体文本"}}'),JSON.parse('{"zh-hant":{"alignment":"對齊方式","all":"全部","backgroundColor":"背景顏色","backgroundEdgeColor":"背景邊緣顏色","backgroundEdgeEffect":"背景邊緣效果","backgroundOpacity":"背景透明度","baseform":"原型","borderColor":"邊框顏色","borderSize":"邊框大小","center":"居中","chineseAnalysis":"中文分析","chineseComponent":"中文組件","component":"組件","componentStyle":"組件樣式","condition":"條件","conditionStyle":"條件樣式","conjugation":"活用","contentText":"正文文本","display":"顯示","evenly":"平均","false":"否","fontBold":"使用粗體","fontColor":"字體顏色","fontEdgeColor":"字體邊緣顏色","fontEdgeEffect":"字體邊緣效果","fontEdgeSize":"字體邊緣大小","fontItalic":"使用斜體","fontOpacity":"字體透明度","fontSize":"字體大小","gairaigo":"外來詞","grammarBar":"文法欄","hiragana":"平假名","japaneseAnalysis":"日語分析","japaneseComponent":"日語組件","jlpt":"JLPT","katakana":"片假名","languageToolkit":"語言工具","layoutComponent":"佈局組件","left":"左","literal":"字面","matchText":"匹配文本","name":"名稱","none":"無","partOfSpeech":"詞類","pinyin":"拼音","preserve":"否(保留高度)","readingBar":"注音欄","represent":"表達","right":"右","romaji":"羅馬字","segmentationLine":"分詞線","shadow":"陰影","stroke":"描邊","themeStyle":"主題樣式","true":"是","usage":"用法","wholeText":"整體文本"}}'),JSON.parse('{"en":{"LANG_CODE":"en","LANG_NAME":"English","LANG_LOCAL":"English"},"zh-hans":{"LANG_CODE":"zh-hans","LANG_NAME":"Simplified Chinese","LANG_LOCAL":"简体中文"},"zh-hant":{"LANG_CODE":"zh-hant","LANG_NAME":"Traditional Chinese","LANG_LOCAL":"繁體中文"}}')]),st=new et([JSON.parse('{"en":{"BeiDongXingShi":"被動形式","Dai":"代","DongEr":"動二","DongSan":"動三","DongYi":"動一","FouDing":"否定","Fu":"副","FuCiHua":"副詞化","GanTan":"感嘆","GuoQu":"過去","JiBenXing":"基本形","JiaDing":"假定","JiaDingXing":"假定形","JianTi":"簡體","JianYi":"建議","JieTou":"接頭","JieWei":"接尾","JieXu":"接續","JingTi":"敬體","KeNengXingShi":"可能形式","KenDing":"肯定","LianTi":"連體","MaSuXing":"ます形","Ming":"名","MingCiHua":"名詞化","MingLing":"命令","MingLingXing":"命令形","NaIXing":"ない形","Shi":"事","ShiYiXingShi":"使役形式","Shu":"數","TaDong":"他動","TaXing":"た形","TeXing":"て形","Wai":"外","Wu":"無","XianZai":"現在","XingEr":"形二","XingYi":"形一","YiZhi":"意志","YiZhiXing":"意志形","Zhu":"助","ZhuDong":"助動","Zhuan":"專","ZiDong":"自動","ZiTaDong":"自他動"}}'),JSON.parse('{"zh-hans":{"BeiDongXingShi":"被动形式","Dai":"代","DongEr":"动二","DongSan":"动三","DongYi":"动一","FouDing":"否定","Fu":"副","FuCiHua":"副词化","GanTan":"感叹","GuoQu":"过去","JiBenXing":"基本形","JiaDing":"假定","JiaDingXing":"假定形","JianTi":"简体","JianYi":"建议","JieTou":"接头","JieWei":"接尾","JieXu":"接续","JingTi":"敬体","KeNengXingShi":"可能形式","KenDing":"肯定","LianTi":"连体","MaSuXing":"ます形","Ming":"名","MingCiHua":"名词化","MingLing":"命令","MingLingXing":"命令形","NaIXing":"ない形","Shi":"事","ShiYiXingShi":"使役形式","Shu":"数","TaDong":"他动","TaXing":"た形","TeXing":"て形","Wai":"外","Wu":"无","XianZai":"现在","XingEr":"形二","XingYi":"形一","YiZhi":"意志","YiZhiXing":"意志形","Zhu":"助","ZhuDong":"助动","Zhuan":"专","ZiDong":"自动","ZiTaDong":"自他动"}}'),JSON.parse('{"zh-hant":{"BeiDongXingShi":"被動形式","Dai":"代","DongEr":"動二","DongSan":"動三","DongYi":"動一","FouDing":"否定","Fu":"副","FuCiHua":"副詞化","GanTan":"感嘆","GuoQu":"過去","JiBenXing":"基本形","JiaDing":"假定","JiaDingXing":"假定形","JianTi":"簡體","JianYi":"建議","JieTou":"接頭","JieWei":"接尾","JieXu":"接續","JingTi":"敬體","KeNengXingShi":"可能形式","KenDing":"肯定","LianTi":"連體","MaSuXing":"ます形","Ming":"名","MingCiHua":"名詞化","MingLing":"命令","MingLingXing":"命令形","NaIXing":"ない形","Shi":"事","ShiYiXingShi":"使役形式","Shu":"數","TaDong":"他動","TaXing":"た形","TeXing":"て形","Wai":"外","Wu":"無","XianZai":"現在","XingEr":"形二","XingYi":"形一","YiZhi":"意志","YiZhiXing":"意志形","Zhu":"助","ZhuDong":"助動","Zhuan":"專","ZiDong":"自動","ZiTaDong":"自他動"}}'),JSON.parse('{"en":{"LANG_CODE":"en","LANG_NAME":"English","LANG_LOCAL":"English"},"zh-hans":{"LANG_CODE":"zh-hans","LANG_NAME":"Simplified Chinese","LANG_LOCAL":"简体中文"},"zh-hant":{"LANG_CODE":"zh-hant","LANG_NAME":"Traditional Chinese","LANG_LOCAL":"繁體中文"}}')]),it=e=>new Promise((t=>setTimeout(t,e)));var rt;const ot=(e=>({daemon:tt.get(e),option:nt.get(e),style:at.get(e),term:st.get(e)}))("zh-tw"===(rt=(rt=new URL(location.href).searchParams.get("hl")??navigator.language).toLowerCase().replace("_","-").trim())||"zh-hk"===rt||"zh-mo"===rt||"zh-hant"===rt?"zh-hant":rt.match(/^zh\b/)?"zh-hans":"en"),lt={type:"array",items:""},ct={fontSize:100,fontColor:"#ffffff",fontOpacity:100,fontEdgeEffect:["none","shadow","raised","depressed","outline","stroke"],fontEdgeColor:"#ffffff",fontEdgeSize:0,fontBold:!0,fontItalic:!0,backgroundColor:"#ffffff",backgroundOpacity:100,backgroundEdgeEffect:["none","shadow"],backgroundEdgeColor:"#ffffff",borderSize:0,borderColor:"#ffffff"},pt={display1:["true","false"],display2:["true","false","preserve"],flexAlign:["center","left","right","evenly"]},dt={flexAlign:pt.flexAlign,...ct},ut={...ct},ht={display:pt.display2,...ct},mt={display:pt.display2,flexAlign:pt.flexAlign,...ct},gt={display:pt.display2,backgroundColor:ct.backgroundColor,backgroundEdgeEffect:ct.backgroundEdgeEffect,backgroundEdgeColor:ct.backgroundEdgeColor,borderSize:ct.borderSize,borderColor:ct.borderColor},ft={display:pt.display1,match:"",...ct},yt={display:pt.display1,match:lt,...ct},bt=e=>({type:"object",properties:e,required:!1}),wt=(e=>{const t=P(e);return G(t),t})({type:"object",properties:{general:{type:"object",properties:{rendering:{type:"object",properties:{bottomMargin:100,baseStyle:["stroke","background","classic","none"],mouseAction:["none","text"]},required:!0},dropdown:{type:"object",properties:{subtitleCount:[2,3,4,5,6,7,8],showOnlyLanguages:""},required:!0}},required:!0},language:{type:"object",properties:{translation:{type:"object",properties:{languageList:["popular","available"],translationEngine:["google","microsoft"],translationMode:["auto","enhance","normal"]},required:!0},chinese:{type:"object",properties:{pinyinScheme:["putonghua","guangzhouhua","jyutping"]},required:!0},japanese:{type:"object",properties:{furiganaCharacter:["kanji","kana"]},required:!0}},required:!0},style:{type:"object",properties:{genres:{type:"array",items:{type:"object",properties:{name:"",component:{type:"object",properties:{none:null,dialogue:bt(dt),contents:bt(ut),readings:bt(ht),grammars:bt(mt),dividers:bt(gt),pinyin:bt(ft),hiragana:bt(ft),katakana:bt(ft),romaji:bt(ft),loanword:bt(ft),pos:bt(yt),form:bt(yt),tag:bt(yt),base:bt(ft),sense:bt(yt),jlpt:bt(yt)},required:!1}},required:!0}},rulers:{type:"array",items:{type:"object",properties:{name:"",genres:lt,tokens:{type:"object",properties:{text:"",hiragana:"",katakana:"",romaji:"",loanword:"",pos:lt,form:lt,tag:lt,base:"",sense:lt,jlpt:lt},required:!1}},required:!0}},themes:{type:"array",items:{type:"object",properties:{name:"",genres:lt,rulers:lt,toolkit:"none"},required:!0}}},required:!0},plugin:{type:"object",properties:{items:{type:"array",items:{type:"object",properties:{name:"",type:["none","style","script","standard","simple"],code:"",urls:{type:"array",items:""}},required:!0}}},required:!0},file:{type:"object",properties:{items:{type:"array",items:{type:"object",properties:{name:"",lang:"",code:"",urls:{type:"array",items:""}},required:!0}}},required:!0},network:{type:"object",properties:{server:{type:"object",properties:{apiUrl:["https://api.dualsub.xyz/"],apiKey:""},required:!0}},required:!0}},required:!0}),vt=e=>R(wt,e),xt={get:e=>new Promise(((t,n)=>{chrome.storage.local.get(e,(e=>{const a=chrome.runtime.lastError;a?n(a):t(e)}))})),set:e=>new Promise(((t,n)=>{chrome.storage.local.set(e,(()=>{const e=chrome.runtime.lastError;e?n(e):t()}))}))},Ct={sendMessage:e=>new Promise(((t,n)=>{chrome.runtime.sendMessage(e,(e=>{const a=chrome.runtime.lastError;a?n(a):t(e)}))}))},kt=async()=>{const{setting:e}=await xt.get(["setting"]);return vt(e)},Et=async e=>{const t=vt(e);await xt.set({setting:t})},St=(()=>{let e=null,t=null;return{update:t=>{e=t},saveDelay:()=>{null!==t&&(clearTimeout(t),t=null),t=setTimeout((()=>{null!==e&&(Et(e),e=null),t=null}),1e3)},saveNow:async()=>{null!==t&&(clearTimeout(t),t=null),null!==e&&(await Et(e),e=null)}}})(),Nt='\n/* www.youtube.com */\n.ytd-page-manager .dualsub-renderer .subtitles {\n    font-size: 80%;\n}\n.ytd-page-manager[theater] .dualsub-renderer .subtitles {\n    font-size: 90%;\n}\n.ytd-page-manager[fullscreen] .dualsub-renderer .subtitles {\n    font-size: 100%;\n}\n.ytd-page-manager .dualsub-renderer {\n    margin-bottom: -50px;\n}\n.ytd-page-manager[theater] .dualsub-renderer {\n    margin-bottom: -40px;\n}\n.ytd-page-manager[fullscreen] .dualsub-renderer {\n    margin-bottom: 0;\n}\n\n/* m.youtube.com */\n.ytp-mweb-player .dualsub-renderer {\n    font-size: 12px;\n    padding: 4px 8px;\n    margin-bottom: -80px;\n}\n.ytp-mweb-player .dualsub-renderer .subtitles {\n    padding: 4px 8px;\n    gap: 0;\n}\n.ytp-mweb-player .dualsub-renderer .contents {\n    line-height: 0.8;\n}\n.ytp-mweb-player.ytp-large-width-mode .dualsub-renderer {\n    font-size: 18px;\n    margin-bottom: -70px;\n}\n\n/* www.coursera.org */\ndiv[data-vjs-player] .dualsub-renderer .subtitles {\n    font-size: 60%;\n}\ndiv[data-vjs-player].vjs-fullscreen .dualsub-renderer .subtitles {\n    font-size: 100%;\n}\ndiv[data-vjs-player] .dualsub-renderer {\n    margin-bottom: -60px;\n}\ndiv[data-vjs-player].vjs-fullscreen .dualsub-renderer {\n    margin-bottom: 0;\n}\n\n/* www.udemy.com */\ndiv[class^="has-sidebar"] .dualsub-renderer .subtitles {\n    font-size: 80%;\n}\ndiv[class^="app--no-sidebar"] button ~ .dualsub-renderer .subtitles {\n    font-size: 90%;\n}\ndiv[class^="app--no-sidebar"] .dualsub-renderer .subtitles {\n    font-size: 100%;\n}\ndiv[class^="has-sidebar"] .dualsub-renderer {\n    margin-bottom: -50px;\n}\ndiv[class^="app--no-sidebar"] button ~ .dualsub-renderer {\n    margin-bottom: -40px;\n}\ndiv[class^="app--no-sidebar"] .dualsub-renderer {\n    margin-bottom: 0;\n}\n\n/* www.ted.com */\n#ted-player .dualsub-renderer .subtitles {\n    font-size: 70%;\n}\n#ted-player:fullscreen .dualsub-renderer .subtitles {\n    font-size: 100%;\n}\n#ted-player .dualsub-renderer {\n    margin-bottom: -40px;\n}\n#ted-player:fullscreen .dualsub-renderer {\n    margin-bottom: 0;\n}\n\n/* www.ardmediathek.de */\n.ardplayer .dualsub-renderer .subtitles {\n    font-size: 80%;\n}\n.ardplayer.ardplayer-state-fullscreen .dualsub-renderer .subtitles {\n    font-size: 100%;\n}\n.ardplayer .dualsub-renderer {\n    margin: auto;\n}\n\n/* www.zdf.de */\n.b-zdfplayer .dualsub-renderer .subtitles {\n    font-size: 80%;\n}\n.b-zdfplayer.zdfplayer-fullscreen .dualsub-renderer .subtitles {\n    font-size: 100%;\n}\n.b-zdfplayer .dualsub-renderer {\n    margin-bottom: -30px;\n}\n.b-zdfplayer.zdfplayer-fullscreen .dualsub-renderer {\n    margin-bottom: 0;\n}\n\n/* www.arte.tv */\n.avp .dualsub-renderer .subtitles {\n    font-size: 70%;\n}\n.avp.isFullScreen .dualsub-renderer .subtitles {\n    font-size: 100%;\n}\n\n/* vimeo.com */\n.player_area .dualsub-renderer .subtitles {\n    font-size: 70%;\n}\n.player_area.is_fullscreen .dualsub-renderer .subtitles {\n    font-size: 100%;\n}\n.player_area .dualsub-renderer {\n    margin-bottom: -60px\n}\n.player_area.is_fullscreen .dualsub-renderer {\n    margin-bottom: 0;\n}\n\n/* viu.tv */\n.VODPlayer .PlayerControls {\n    margin-top: 0;\n    margin-bottom: 20px;\n}\n.VODPlayer .slider-control > div {\n    margin-top: 12px !important;\n    margin-bottom: 12px !important;\n}\n\n/* www.iq.com */\n.iqp-player .dualsub-renderer .subtitles {\n    font-size: 70%;\n}\n.iqp-player.iqp-full-screen .dualsub-renderer .subtitles {\n    font-size: 100%;\n}\n.iqp-player .dualsub-renderer {\n    margin-bottom: -50px\n}\n.iqp-player.iqp-full-screen .dualsub-renderer {\n    margin-bottom: 0;\n}\n\n/* wetv.vip */\n.txp_player .dualsub-renderer {\n    margin: auto;\n}\n.txp_player .dualsub-renderer .subtitles {\n    font-size: 80%;\n}\n.txp_player.txp_mode_fullscreen .dualsub-renderer .subtitles {\n    font-size: 100%;\n}\n.txp_player .dualsub-renderer {\n    margin-bottom: -30px\n}\n.txp_player.txp_mode_fullscreen .dualsub-renderer {\n    margin-bottom: 0;\n}\n\n/* www.bilibili.com */\n.bilibili-player .dualsub-renderer .subtitles {\n    font-size: 70%;\n}\n.bilibili-player.mode-widescreen .dualsub-renderer .subtitles {\n    font-size: 80%;\n}\n.bilibili-player.mode-webfullscreen .dualsub-renderer .subtitles {\n    font-size: 90%;\n}\n.bilibili-player.mode-fullscreen .dualsub-renderer .subtitles {\n    font-size: 100%;\n}\n\n/* www.bilibili.com (bangumi) */\n.bpx-player-container .dualsub-renderer .subtitles {\n    font-size: 70%;\n}\n.bpx-player-container[data-screen="wide"] .dualsub-renderer .subtitles {\n    font-size: 80%;\n}\n.bpx-player-container[data-screen="web"] .dualsub-renderer .subtitles {\n    font-size: 90%;\n}\n.bpx-player-container[data-screen="full"] .dualsub-renderer .subtitles {\n    font-size: 100%;\n}\n'.trim(),At="\n/* www.youtube.com */\n.dualsub-simple .ytp-caption-segment {\n    width: 100%;\n}\n.dualsub-simple .caption-visual-line:nth-child(1) > span::first-line {\n    font-size: 100%;\n}\n.dualsub-simple .caption-visual-line:nth-child(2) > span::first-line {\n    font-size: 80%;\n}\n\n/* m.youtube.com */\n.ytp-mweb-player .caption-window.ytp-caption-window-bottom {\n    margin-bottom: 20px;\n}\n".trim(),Tt="\n/* m.youtube.com */\n@media (max-width: 930px) and (orientation: landscape) {\n\n    .player-container {\n        height: 100vh !important;\n    }\n\n    #player {\n        padding-bottom: 100vh !important;\n    }\n\n    .html5-main-video {\n        width: 100vw !important;\n        height: 100vh !important;\n        left: 0 !important;\n        top: 0 !important;\n    }\n\n    ytm-mobile-topbar-renderer.sticky-player {\n        position: absolute !important;\n    }\n\n    .mobile-topbar-header {\n        box-shadow: none !important;\n    }\n\n    ytm-engagement-panel {\n        top: calc(100vh + 48px) !important;\n    }\n\n    .player-size {\n        padding-bottom: 100vh !important;\n    }\n\n}\n".trim(),jt="\nWEBVTT\n\n00:00.000 --\x3e 20:00.000\nHow are you?\n\n20:00.000 --\x3e 40:00.000\nI am fine, thank you, and you?\n".trim(),Ot=function(e){return{genres:[{name:e.largeFont,component:{dialogue:{fontSize:110}}},{name:e.smallFont,component:{dialogue:{fontSize:90}}},{name:e.showPinyin,component:{pinyin:{display:"true"}}},{name:e.showHiragana,component:{hiragana:{display:"true"}}},{name:e.showSegmentline,component:{dividers:{display:"true",backgroundColor:"#ffffff",borderSize:1,borderColor:"#000000"}}},{name:e.hideSegmentline,component:{dividers:{display:"false"}}}],rulers:[{name:e.hideSegmentline,genres:[e.hideSegmentline],tokens:{pos:["无"]}}],themes:[{name:e.firstSubtitle,genres:[e.largeFont],rulers:[],toolkit:"none"},{name:e.secondSubtitle,genres:[e.smallFont],rulers:[],toolkit:"none"},{name:e.chineseLearning,genres:[e.largeFont,e.showPinyin],rulers:[],toolkit:"zhtools"},{name:e.japaneseLearning,genres:[e.largeFont,e.showHiragana,e.showSegmentline],rulers:[e.hideSegmentline],toolkit:"jatools"}]}},Lt=function(e){return{items:[{name:e.autoScaling,type:"style",code:Nt,urls:["https://www.youtube.com/","https://m.youtube.com/","https://www.coursera.org/","https://www.udemy.com/","https://www.ted.com/","https://www.ardmediathek.de/","https://www.zdf.de/","https://www.arte.tv/","https://vimeo.com/","https://viu.tv/","https://www.iq.com/","https://wetv.vip/","https://www.bilibili.com/"]},{name:e.simpleMode,type:"style",code:At,urls:["https://www.youtube.com/","https://m.youtube.com/"]},{name:e.pageFullscreen,type:"style",code:Tt,urls:["https://m.youtube.com/"]}]}},zt=function(e){return{items:[{name:e.example,lang:"en",code:jt,urls:[]}]}},Dt=async(e,t)=>{let n,a,s=0;for(;;){try{n=await Ct.sendMessage({name:e,args:t})}catch(e){a=e.message}if(void 0!==n)break;if(!(s<1e3))throw a??"invalid response message";s+=200,await it(200)}const{ok:i,data:r}=n;if(!i)throw r;return r},Mt=async e=>await Dt("check",e),Rt={header:{reset:async()=>{const e={style:Ot(ot.daemon),plugin:Lt(ot.daemon),file:zt(ot.daemon)};St.update(e),await St.saveNow(),location.reload()}},general:{load:async()=>(await kt()).general,save:async e=>{const t=await kt();t.general=e,St.update(t),St.saveDelay()}},language:{load:async()=>(await kt()).language,save:async e=>{const t=await kt();t.language=e,St.update(t),St.saveDelay()}},style:{load:async()=>(await kt()).style,save:async e=>{const t=await kt();t.style=e,St.update(t),St.saveDelay()}},plugin:{load:async()=>(await kt()).plugin,save:async e=>{const t=await kt();t.plugin=e,St.update(t),St.saveDelay()}},file:{load:async()=>(await kt()).file,save:async e=>{const t=await kt();t.file=e,St.update(t),St.saveDelay()}},network:{server:{load:async()=>(await kt()).network.server,save:async e=>{const t=await kt();t.network.server=e,St.update(t),St.saveDelay()},check:async e=>{let t,n;try{n=await Mt(e),t="200 OK"}catch(e){t=String(e)}return{config:e,status:t,detail:n}}}}};window.addEventListener("beforeunload",(()=>{St.saveNow()}));class Pt extends s().PureComponent{onTab=e=>{(e=>{const t=new URLSearchParams(location.hash.slice(1));t.set("id",e),location.hash=t.toString()})(e)};render(){const e=(()=>{const e=new URLSearchParams(location.hash.slice(1)).get("id")??"",t=["general","language","style","plugin","file","network","about"];return t.includes(e)?e:t[0]})();return s().createElement("div",{style:{width:"960px"}},s().createElement(Qe,{i18ns:ot,agents:Rt,defaultTab:e,onTab:this.onTab}))}}const Ft=document.querySelector("#app");r().render(s().createElement(Pt,null),Ft)})(0,0,e)})();